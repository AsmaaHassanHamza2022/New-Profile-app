"use strict";var sI=Object.defineProperty,oI=Object.defineProperties,aI=Object.getOwnPropertyDescriptors,E0=Object.getOwnPropertySymbols,lI=Object.prototype.hasOwnProperty,cI=Object.prototype.propertyIsEnumerable,b0=(Je,Te,b)=>Te in Je?sI(Je,Te,{enumerable:!0,configurable:!0,writable:!0,value:b}):Je[Te]=b,w0=(Je,Te)=>{for(var b in Te||(Te={}))lI.call(Te,b)&&b0(Je,b,Te[b]);if(E0)for(var b of E0(Te))cI.call(Te,b)&&b0(Je,b,Te[b]);return Je},I0=(Je,Te)=>oI(Je,aI(Te));(self.webpackChunktempelet_project=self.webpackChunktempelet_project||[]).push([[179],{6217:(Je,Te,b)=>{b.d(Te,{nm:()=>Ke});var g=b(263);b(5e3),b(259);var ze=b(5861),Be=b(9681),Ge=b(4859),Qe=b(2090),Ne=b(1877);const gt=new Map,vt={activated:!1,tokenObservers:[]},sn={initialized:!1,enabled:!1};function tn(wt){return gt.get(wt)||Object.assign({},vt)}function xn(){return sn}class Yt{constructor(mt,Pt,on,kn,Yn){if(this.operation=mt,this.retryPolicy=Pt,this.getWaitDuration=on,this.lowerBound=kn,this.upperBound=Yn,this.pending=null,this.nextErrorWaitInterval=kn,kn>Yn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(mt){var Pt=this;return(0,ze.Z)(function*(){Pt.stop();try{Pt.pending=new Qe.BH,yield function Nn(wt){return new Promise(mt=>{setTimeout(mt,wt)})}(Pt.getNextRun(mt)),Pt.pending.resolve(),yield Pt.pending.promise,Pt.pending=new Qe.BH,yield Pt.operation(),Pt.pending.resolve(),yield Pt.pending.promise,Pt.process(!0).catch(()=>{})}catch(on){Pt.retryPolicy(on)?Pt.process(!1).catch(()=>{}):Pt.stop()}})()}getNextRun(mt){if(mt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Pt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Pt}}}const nn=new Qe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ot(wt){if(!tn(wt).activated)throw nn.create("use-before-activation",{appName:wt.name})}function rn(wt,mt){return fn.apply(this,arguments)}function fn(){return(fn=(0,ze.Z)(function*({url:wt,body:mt},Pt){const on={"Content-Type":"application/json"},kn=Pt.getImmediate({optional:!0});if(kn){const Zi=yield kn.getHeartbeatsHeader();Zi&&(on["X-Firebase-Client"]=Zi)}const Yn={method:"POST",body:JSON.stringify(mt),headers:on};let vr,bi;try{vr=yield fetch(wt,Yn)}catch(Zi){throw nn.create("fetch-network-error",{originalErrorMessage:null==Zi?void 0:Zi.message})}if(200!==vr.status)throw nn.create("fetch-status-error",{httpStatus:vr.status});try{bi=yield vr.json()}catch(Zi){throw nn.create("fetch-parse-error",{originalErrorMessage:null==Zi?void 0:Zi.message})}const yi=bi.ttl.match(/^([\d.]+)(s)$/);if(!yi||!yi[2]||isNaN(Number(yi[1])))throw nn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${bi.ttl}`});const Ps=1e3*Number(yi[1]),ks=Date.now();return{token:bi.token,expireTimeMillis:ks+Ps,issuedAtTimeMillis:ks}})).apply(this,arguments)}function Zn(wt,mt){const{projectId:Pt,appId:on,apiKey:kn}=wt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Pt}/apps/${on}:exchangeDebugToken?key=${kn}`,body:{debug_token:mt}}}const mn="firebase-app-check-store";let De=null;function qn(){return De||(De=new Promise((wt,mt)=>{try{const Pt=indexedDB.open("firebase-app-check-database",1);Pt.onsuccess=on=>{wt(on.target.result)},Pt.onerror=on=>{var kn;mt(nn.create("storage-open",{originalErrorMessage:null===(kn=on.target.error)||void 0===kn?void 0:kn.message}))},Pt.onupgradeneeded=on=>{0===on.oldVersion&&on.target.result.createObjectStore(mn,{keyPath:"compositeKey"})}}catch(Pt){mt(nn.create("storage-open",{originalErrorMessage:null==Pt?void 0:Pt.message}))}}),De)}function yt(){return(yt=(0,ze.Z)(function*(wt,mt){const on=(yield qn()).transaction(mn,"readwrite"),Yn=on.objectStore(mn).put({compositeKey:wt,value:mt});return new Promise((vr,bi)=>{Yn.onsuccess=yi=>{vr()},on.onerror=yi=>{var Ps;bi(nn.create("storage-set",{originalErrorMessage:null===(Ps=yi.target.error)||void 0===Ps?void 0:Ps.message}))}})})).apply(this,arguments)}const Mn=new Ne.Yd("@firebase/app-check");function gr(wt,mt){return(0,Qe.hl)()?function Y(wt,mt){return function Xe(wt,mt){return yt.apply(this,arguments)}(function zt(wt){return`${wt.options.appId}-${wt.name}`}(wt),mt)}(wt,mt).catch(Pt=>{Mn.warn(`Failed to write token to IndexedDB. Error: ${Pt}`)}):Promise.resolve()}function pt(){return xn().enabled}function dt(){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,ze.Z)(function*(){const wt=xn();if(wt.enabled&&wt.token)return wt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const he={error:"UNKNOWN_ERROR"};function N(wt){return Qe.US.encodeString(JSON.stringify(wt),!1)}function L(wt){return q.apply(this,arguments)}function q(){return(q=(0,ze.Z)(function*(wt,mt=!1){const Pt=wt.app;Ot(Pt);const on=tn(Pt);let Yn,kn=on.token;if(kn&&!ue(kn)&&(on.token=void 0,kn=void 0),!kn){const yi=yield on.cachedTokenPromise;yi&&(ue(yi)?kn=yi:yield gr(Pt,void 0))}if(!mt&&kn&&ue(kn))return{token:kn.token};let bi,vr=!1;if(pt()){on.exchangeTokenPromise||(on.exchangeTokenPromise=rn(Zn(Pt,yield dt()),wt.heartbeatServiceProvider).finally(()=>{on.exchangeTokenPromise=void 0}),vr=!0);const yi=yield on.exchangeTokenPromise;return yield gr(Pt,yi),on.token=yi,{token:yi.token}}try{on.exchangeTokenPromise||(on.exchangeTokenPromise=on.provider.getToken().finally(()=>{on.exchangeTokenPromise=void 0}),vr=!0),kn=yield tn(Pt).exchangeTokenPromise}catch(yi){"appCheck/throttled"===yi.code?Mn.warn(yi.message):Mn.error(yi),Yn=yi}return kn?Yn?bi=ue(kn)?{token:kn.token,internalError:Yn}:be(Yn):(bi={token:kn.token},on.token=kn,yield gr(Pt,kn)):bi=be(Yn),vr&&xe(Pt,bi),bi})).apply(this,arguments)}function Fe(wt,mt){const Pt=tn(wt),on=Pt.tokenObservers.filter(kn=>kn.next!==mt);0===on.length&&Pt.tokenRefresher&&Pt.tokenRefresher.isRunning()&&Pt.tokenRefresher.stop(),Pt.tokenObservers=on}function ht(wt){const{app:mt}=wt,Pt=tn(mt);let on=Pt.tokenRefresher;on||(on=function we(wt){const{app:mt}=wt;return new Yt((0,ze.Z)(function*(){let on;if(on=tn(mt).token?yield L(wt,!0):yield L(wt),on.error)throw on.error;if(on.internalError)throw on.internalError}),()=>!0,()=>{const Pt=tn(mt);if(Pt.token){let on=Pt.token.issuedAtTimeMillis+.5*(Pt.token.expireTimeMillis-Pt.token.issuedAtTimeMillis)+3e5;return on=Math.min(on,Pt.token.expireTimeMillis-3e5),Math.max(0,on-Date.now())}return 0},3e4,96e4)}(wt),Pt.tokenRefresher=on),!on.isRunning()&&Pt.isTokenAutoRefreshEnabled&&on.start()}function xe(wt,mt){const Pt=tn(wt).tokenObservers;for(const on of Pt)try{"EXTERNAL"===on.type&&null!=mt.error?on.error(mt.error):on.next(mt)}catch(kn){}}function ue(wt){return wt.expireTimeMillis-Date.now()>0}function be(wt){return{token:N(he),error:wt}}class ${constructor(mt,Pt){this.app=mt,this.heartbeatServiceProvider=Pt}_delete(){const{tokenObservers:mt}=tn(this.app);for(const Pt of mt)Fe(this.app,Pt.next);return Promise.resolve()}}const Yi="app-check-internal";!function ns(){(0,Be._registerComponent)(new Ge.wA("app-check",wt=>function ae(wt,mt){return new $(wt,mt)}(wt.getProvider("app").getImmediate(),wt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((wt,mt,Pt)=>{wt.getProvider(Yi).initialize()})),(0,Be._registerComponent)(new Ge.wA(Yi,wt=>function _e(wt){return{getToken:mt=>L(wt,mt),addTokenListener:mt=>function X(wt,mt,Pt,on){const{app:kn}=wt,Yn=tn(kn);if(Yn.tokenObservers=[...Yn.tokenObservers,{next:Pt,error:on,type:mt}],Yn.token&&ue(Yn.token)){const bi=Yn.token;Promise.resolve().then(()=>{Pt({token:bi.token}),ht(wt)}).catch(()=>{})}Yn.cachedTokenPromise.then(()=>ht(wt))}(wt,"INTERNAL",mt),removeTokenListener:mt=>Fe(wt.app,mt)}}(wt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Be.registerVersion)("@firebase/app-check","0.6.4")}();class Ke{constructor(){return(0,g.vb)("app-check")}}"undefined"!=typeof window&&window},1041:(Je,Te,b)=>{b.d(Te,{zQ:()=>xn,ww:()=>Ze,rT:()=>vt,f7:()=>tn,L6:()=>Ne,_Q:()=>gt,lh:()=>sn,Qv:()=>Qe,nw:()=>vn});var g=b(5e3),S=b(7579),U=b(9646),re=b(8306),de=b(8996),Ie=b(6451),Ce=b(4707),oe=b(3099);function ce(ft,St,Gt){let Ut,Rt=!1;return ft&&"object"==typeof ft?({bufferSize:Ut=1/0,windowTime:St=1/0,refCount:Rt=!1,scheduler:Gt}=ft):Ut=null!=ft?ft:1/0,(0,oe.B)({connector:()=>new Ce.t(Ut,St,Gt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Rt})}var te=b(3900),se=b(576);function ke(ft,St){return(0,se.m)(St)?(0,te.w)(()=>ft,St):(0,te.w)(()=>ft)}var qe=b(5363),it=b(4004),ut=b(590),Et=b(9468),et=b(9300),at=b(263),He=b(2011),Mt=b(9808),ze=b(6217),Be=b(9260);const Qe=new g.OlP("angularfire2.auth.use-emulator"),Ne=new g.OlP("angularfire2.auth.settings"),gt=new g.OlP("angularfire2.auth.tenant-id"),vt=new g.OlP("angularfire2.auth.langugage-code"),sn=new g.OlP("angularfire2.auth.use-device-language"),tn=new g.OlP("angularfire.auth.persistence"),vn=(ft,St,Gt,Ut,Rt,Yt,Nn,jn)=>(0,He.cc)(`${ft.name}.auth`,"AngularFireAuth",ft.name,()=>{const nn=St.runOutsideAngular(()=>ft.auth());if(Gt&&nn.useEmulator(...Gt),Ut&&(nn.tenantId=Ut),nn.languageCode=Rt,Yt&&nn.useDeviceLanguage(),Nn)for(const[wn,Ot]of Object.entries(Nn))nn.settings[wn]=Ot;return jn&&nn.setPersistence(jn),nn},[Gt,Ut,Rt,Yt,Nn,jn]);let xn=(()=>{class ft{constructor(Gt,Ut,Rt,Yt,Nn,jn,nn,wn,Ot,hn,xt,rn){const fn=new S.x,Fn=(0,U.of)(void 0).pipe((0,qe.Q)(Nn.outsideAngular),(0,te.w)(()=>Yt.runOutsideAngular(()=>Promise.resolve().then(b.bind(b,9568)))),(0,it.U)(()=>(0,He.on)(Gt,Yt,Ut)),(0,it.U)(Sn=>vn(Sn,Yt,jn,wn,Ot,hn,nn,xt)),ce({bufferSize:1,refCount:!1}));if((0,Mt.PM)(Rt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,U.of)(null);else{Fn.pipe((0,ut.P)()).subscribe();const Zn=Fn.pipe((0,te.w)(mn=>mn.getRedirectResult().then(Tn=>Tn,()=>null)),at.iC,ce({bufferSize:1,refCount:!1})),ur=Fn.pipe((0,te.w)(mn=>new re.y(Tn=>({unsubscribe:Yt.runOutsideAngular(()=>mn.onAuthStateChanged(De=>Tn.next(De),De=>Tn.error(De),()=>Tn.complete()))})))),Dr=Fn.pipe((0,te.w)(mn=>new re.y(Tn=>({unsubscribe:Yt.runOutsideAngular(()=>mn.onIdTokenChanged(De=>Tn.next(De),De=>Tn.error(De),()=>Tn.complete()))}))));this.authState=Zn.pipe(ke(ur),(0,Et.R)(Nn.outsideAngular),(0,qe.Q)(Nn.insideAngular)),this.user=Zn.pipe(ke(Dr),(0,Et.R)(Nn.outsideAngular),(0,qe.Q)(Nn.insideAngular)),this.idToken=this.user.pipe((0,te.w)(mn=>mn?(0,de.D)(mn.getIdToken()):(0,U.of)(null))),this.idTokenResult=this.user.pipe((0,te.w)(mn=>mn?(0,de.D)(mn.getIdTokenResult()):(0,U.of)(null))),this.credential=(0,Ie.T)(Zn,fn,this.authState.pipe((0,et.h)(mn=>!mn))).pipe((0,it.U)(mn=>(null==mn?void 0:mn.user)?mn:null),(0,Et.R)(Nn.outsideAngular),(0,qe.Q)(Nn.insideAngular))}return(0,He.pX)(this,Fn,Yt,{spy:{apply:(Sn,Zn,ur)=>{(Sn.startsWith("signIn")||Sn.startsWith("createUser"))&&ur.then(Dr=>fn.next(Dr))}}})}}return ft.\u0275fac=function(Gt){return new(Gt||ft)(g.LFG(He.Dh),g.LFG(He.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(at.HU),g.LFG(Qe,8),g.LFG(Ne,8),g.LFG(gt,8),g.LFG(vt,8),g.LFG(sn,8),g.LFG(tn,8),g.LFG(ze.nm,8))},ft.\u0275prov=g.Yz7({token:ft,factory:ft.\u0275fac,providedIn:"any"}),ft})(),Ze=(()=>{class ft{constructor(){Be.Z.registerVersion("angularfire",at.q4.full,"auth-compat")}}return ft.\u0275fac=function(Gt){return new(Gt||ft)},ft.\u0275mod=g.oAB({type:ft}),ft.\u0275inj=g.cJS({providers:[xn]}),ft})()},7977:(Je,Te,b)=>{b.d(Te,{ST:()=>Ue,yb:()=>It});var g=b(5e3),S=b(4986),U=b(8306),re=b(8996),de=b(9646),Ie=b(263),Ce=b(4482),oe=b(5403);function ce(){return(0,Ce.e)((he,N)=>{let L,q=!1;he.subscribe((0,oe.x)(N,X=>{const Fe=L;L=X,q&&N.next([Fe,X]),q=!0}))})}var te=b(8675),se=b(4004),ke=b(5026),qe=b(1884),it=b(9300),ut=b(2011),Et=b(9808),at=(b(9568),b(3942)),He=b(5525),Mt=b(2090),ze=b(4859);function Qe(he,N){if(void 0===N)return{merge:!1};if(void 0!==N.mergeFields&&void 0!==N.merge)throw new He.WA("invalid-argument",`Invalid options passed to function ${he}(): You cannot specify both "merge" and "mergeFields".`);return N}function Ne(){if("undefined"==typeof Uint8Array)throw new He.WA("unimplemented","Uint8Arrays are not available in this environment.")}function gt(){if(!(0,He.Me)())throw new He.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class vt{constructor(N){this._delegate=N}static fromBase64String(N){return gt(),new vt(He.Jj.fromBase64String(N))}static fromUint8Array(N){return Ne(),new vt(He.Jj.fromUint8Array(N))}toBase64(){return gt(),this._delegate.toBase64()}toUint8Array(){return Ne(),this._delegate.toUint8Array()}isEqual(N){return this._delegate.isEqual(N._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sn(he){return function tn(he,N){if("object"!=typeof he||null===he)return!1;const L=he;for(const q of N)if(q in L&&"function"==typeof L[q])return!0;return!1}(he,["next","error","complete"])}class vn{enableIndexedDbPersistence(N,L){return(0,He.ST)(N._delegate,{forceOwnership:L})}enableMultiTabIndexedDbPersistence(N){return(0,He.fH)(N._delegate)}clearIndexedDbPersistence(N){return(0,He.Fc)(N._delegate)}}class xn{constructor(N,L,q){this._delegate=L,this._persistenceProvider=q,this.INTERNAL={delete:()=>this.terminate()},N instanceof He.l7||(this._appCompat=N)}get _databaseId(){return this._delegate._databaseId}settings(N){const L=this._delegate._getSettings();!N.merge&&L.host!==N.host&&(0,He.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),N.merge&&delete(N=Object.assign(Object.assign({},L),N)).merge,this._delegate._setSettings(N)}useEmulator(N,L,q={}){(0,He.at)(this._delegate,N,L,q)}enableNetwork(){return(0,He.Ix)(this._delegate)}disableNetwork(){return(0,He.TF)(this._delegate)}enablePersistence(N){let L=!1,q=!1;return N&&(L=!!N.synchronizeTabs,q=!!N.experimentalForceOwningTab,(0,He.Wi)("synchronizeTabs",L,"experimentalForceOwningTab",q)),L?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,q)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,He.Mx)(this._delegate)}onSnapshotsInSync(N){return(0,He.sc)(this._delegate,N)}get app(){if(!this._appCompat)throw new He.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(N){try{return new rn(this,(0,He.hJ)(this._delegate,N))}catch(L){throw Yt(L,"collection()","Firestore.collection()")}}doc(N){try{return new Rt(this,(0,He.JU)(this._delegate,N))}catch(L){throw Yt(L,"doc()","Firestore.doc()")}}collectionGroup(N){try{return new Ot(this,(0,He.B$)(this._delegate,N))}catch(L){throw Yt(L,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(N){return(0,He.i3)(this._delegate,L=>N(new St(this,L)))}batch(){return(0,He.qY)(this._delegate),new Gt(new He.PU(this._delegate,N=>(0,He.GL)(this._delegate,N)))}loadBundle(N){return(0,He.Pb)(this._delegate,N)}namedQuery(N){return(0,He.L$)(this._delegate,N).then(L=>L?new Ot(this,L):null)}}class Ze extends He.u7{constructor(N){super(),this.firestore=N}convertBytes(N){return new vt(new He.Jj(N))}convertReference(N){const L=this.convertDocumentKey(N,this.firestore._databaseId);return Rt.forKey(L,this.firestore,null)}}class St{constructor(N,L){this._firestore=N,this._delegate=L,this._userDataWriter=new Ze(N)}get(N){const L=fn(N);return this._delegate.get(L).then(q=>new nn(this._firestore,new He.xU(this._firestore._delegate,this._userDataWriter,q._key,q._document,q.metadata,L.converter)))}set(N,L,q){const X=fn(N);return q?(Qe("Transaction.set",q),this._delegate.set(X,L,q)):this._delegate.set(X,L),this}update(N,L,q,...X){const Fe=fn(N);return 2===arguments.length?this._delegate.update(Fe,L):this._delegate.update(Fe,L,q,...X),this}delete(N){const L=fn(N);return this._delegate.delete(L),this}}class Gt{constructor(N){this._delegate=N}set(N,L,q){const X=fn(N);return q?(Qe("WriteBatch.set",q),this._delegate.set(X,L,q)):this._delegate.set(X,L),this}update(N,L,q,...X){const Fe=fn(N);return 2===arguments.length?this._delegate.update(Fe,L):this._delegate.update(Fe,L,q,...X),this}delete(N){const L=fn(N);return this._delegate.delete(L),this}commit(){return this._delegate.commit()}}class Ut{constructor(N,L,q){this._firestore=N,this._userDataWriter=L,this._delegate=q}fromFirestore(N,L){const q=new He.$q(this._firestore._delegate,this._userDataWriter,N._key,N._document,N.metadata,null);return this._delegate.fromFirestore(new wn(this._firestore,q),null!=L?L:{})}toFirestore(N,L){return L?this._delegate.toFirestore(N,L):this._delegate.toFirestore(N)}static getInstance(N,L){const q=Ut.INSTANCES;let X=q.get(N);X||(X=new WeakMap,q.set(N,X));let Fe=X.get(L);return Fe||(Fe=new Ut(N,new Ze(N),L),X.set(L,Fe)),Fe}}Ut.INSTANCES=new WeakMap;class Rt{constructor(N,L){this.firestore=N,this._delegate=L,this._userDataWriter=new Ze(N)}static forPath(N,L,q){if(N.length%2!=0)throw new He.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${N.canonicalString()} has ${N.length}`);return new Rt(L,new He.my(L._delegate,q,new He.Ky(N)))}static forKey(N,L,q){return new Rt(L,new He.my(L._delegate,q,N))}get id(){return this._delegate.id}get parent(){return new rn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(N){try{return new rn(this.firestore,(0,He.hJ)(this._delegate,N))}catch(L){throw Yt(L,"collection()","DocumentReference.collection()")}}isEqual(N){return(N=(0,Mt.m9)(N))instanceof He.my&&(0,He.Eo)(this._delegate,N)}set(N,L){L=Qe("DocumentReference.set",L);try{return L?(0,He.pl)(this._delegate,N,L):(0,He.pl)(this._delegate,N)}catch(q){throw Yt(q,"setDoc()","DocumentReference.set()")}}update(N,L,...q){try{return 1===arguments.length?(0,He.r7)(this._delegate,N):(0,He.r7)(this._delegate,N,L,...q)}catch(X){throw Yt(X,"updateDoc()","DocumentReference.update()")}}delete(){return(0,He.oe)(this._delegate)}onSnapshot(...N){const L=Nn(N),q=jn(N,X=>new nn(this.firestore,new He.xU(this.firestore._delegate,this._userDataWriter,X._key,X._document,X.metadata,this._delegate.converter)));return(0,He.cf)(this._delegate,L,q)}get(N){let L;return L="cache"===(null==N?void 0:N.source)?(0,He.kl)(this._delegate):"server"===(null==N?void 0:N.source)?(0,He.Xk)(this._delegate):(0,He.QT)(this._delegate),L.then(q=>new nn(this.firestore,new He.xU(this.firestore._delegate,this._userDataWriter,q._key,q._document,q.metadata,this._delegate.converter)))}withConverter(N){return new Rt(this.firestore,this._delegate.withConverter(N?Ut.getInstance(this.firestore,N):null))}}function Yt(he,N,L){return he.message=he.message.replace(N,L),he}function Nn(he){for(const N of he)if("object"==typeof N&&!sn(N))return N;return{}}function jn(he,N){var L,q;let X;return X=sn(he[0])?he[0]:sn(he[1])?he[1]:"function"==typeof he[0]?{next:he[0],error:he[1],complete:he[2]}:{next:he[1],error:he[2],complete:he[3]},{next:Fe=>{X.next&&X.next(N(Fe))},error:null===(L=X.error)||void 0===L?void 0:L.bind(X),complete:null===(q=X.complete)||void 0===q?void 0:q.bind(X)}}class nn{constructor(N,L){this._firestore=N,this._delegate=L}get ref(){return new Rt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(N){return this._delegate.data(N)}get(N,L){return this._delegate.get(N,L)}isEqual(N){return(0,He.qK)(this._delegate,N._delegate)}}class wn extends nn{data(N){const L=this._delegate.data(N);return(0,He.K9)(void 0!==L,"Document in a QueryDocumentSnapshot should exist"),L}}class Ot{constructor(N,L){this.firestore=N,this._delegate=L,this._userDataWriter=new Ze(N)}where(N,L,q){try{return new Ot(this.firestore,(0,He.IO)(this._delegate,(0,He.ar)(N,L,q)))}catch(X){throw Yt(X,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(N,L){try{return new Ot(this.firestore,(0,He.IO)(this._delegate,(0,He.Xo)(N,L)))}catch(q){throw Yt(q,/(orderBy|where)\(\)/,"Query.$1()")}}limit(N){try{return new Ot(this.firestore,(0,He.IO)(this._delegate,(0,He.b9)(N)))}catch(L){throw Yt(L,"limit()","Query.limit()")}}limitToLast(N){try{return new Ot(this.firestore,(0,He.IO)(this._delegate,(0,He.vh)(N)))}catch(L){throw Yt(L,"limitToLast()","Query.limitToLast()")}}startAt(...N){try{return new Ot(this.firestore,(0,He.IO)(this._delegate,(0,He.e0)(...N)))}catch(L){throw Yt(L,"startAt()","Query.startAt()")}}startAfter(...N){try{return new Ot(this.firestore,(0,He.IO)(this._delegate,(0,He.TQ)(...N)))}catch(L){throw Yt(L,"startAfter()","Query.startAfter()")}}endBefore(...N){try{return new Ot(this.firestore,(0,He.IO)(this._delegate,(0,He.Lx)(...N)))}catch(L){throw Yt(L,"endBefore()","Query.endBefore()")}}endAt(...N){try{return new Ot(this.firestore,(0,He.IO)(this._delegate,(0,He.Wu)(...N)))}catch(L){throw Yt(L,"endAt()","Query.endAt()")}}isEqual(N){return(0,He.iE)(this._delegate,N._delegate)}get(N){let L;return L="cache"===(null==N?void 0:N.source)?(0,He.UQ)(this._delegate):"server"===(null==N?void 0:N.source)?(0,He.zN)(this._delegate):(0,He.PL)(this._delegate),L.then(q=>new xt(this.firestore,new He.W(this.firestore._delegate,this._userDataWriter,this._delegate,q._snapshot)))}onSnapshot(...N){const L=Nn(N),q=jn(N,X=>new xt(this.firestore,new He.W(this.firestore._delegate,this._userDataWriter,this._delegate,X._snapshot)));return(0,He.cf)(this._delegate,L,q)}withConverter(N){return new Ot(this.firestore,this._delegate.withConverter(N?Ut.getInstance(this.firestore,N):null))}}class hn{constructor(N,L){this._firestore=N,this._delegate=L}get type(){return this._delegate.type}get doc(){return new wn(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xt{constructor(N,L){this._firestore=N,this._delegate=L}get query(){return new Ot(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(N=>new wn(this._firestore,N))}docChanges(N){return this._delegate.docChanges(N).map(L=>new hn(this._firestore,L))}forEach(N,L){this._delegate.forEach(q=>{N.call(L,new wn(this._firestore,q))})}isEqual(N){return(0,He.qK)(this._delegate,N._delegate)}}class rn extends Ot{constructor(N,L){super(N,L),this.firestore=N,this._delegate=L}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const N=this._delegate.parent;return N?new Rt(this.firestore,N):null}doc(N){try{return new Rt(this.firestore,void 0===N?(0,He.JU)(this._delegate):(0,He.JU)(this._delegate,N))}catch(L){throw Yt(L,"doc()","CollectionReference.doc()")}}add(N){return(0,He.ET)(this._delegate,N).then(L=>new Rt(this.firestore,L))}isEqual(N){return(0,He.Eo)(this._delegate,N._delegate)}withConverter(N){return new rn(this.firestore,this._delegate.withConverter(N?Ut.getInstance(this.firestore,N):null))}}function fn(he){return(0,He.Cf)(he,He.my)}class Fn{constructor(...N){this._delegate=new He.Lz(...N)}static documentId(){return new Fn(He.Xb.keyField().canonicalString())}isEqual(N){return(N=(0,Mt.m9)(N))instanceof He.Lz&&this._delegate._internalPath.isEqual(N._internalPath)}}class Sn{constructor(N){this._delegate=N}static serverTimestamp(){const N=(0,He.Bt)();return N._methodName="FieldValue.serverTimestamp",new Sn(N)}static delete(){const N=(0,He.AK)();return N._methodName="FieldValue.delete",new Sn(N)}static arrayUnion(...N){const L=(0,He.vr)(...N);return L._methodName="FieldValue.arrayUnion",new Sn(L)}static arrayRemove(...N){const L=(0,He.Ab)(...N);return L._methodName="FieldValue.arrayRemove",new Sn(L)}static increment(N){const L=(0,He.nP)(N);return L._methodName="FieldValue.increment",new Sn(L)}isEqual(N){return this._delegate.isEqual(N._delegate)}}const Zn={Firestore:xn,GeoPoint:He.F8,Timestamp:He.EK,Blob:vt,Transaction:St,WriteBatch:Gt,DocumentReference:Rt,DocumentSnapshot:nn,Query:Ot,QueryDocumentSnapshot:wn,QuerySnapshot:xt,CollectionReference:rn,FieldPath:Fn,FieldValue:Sn,setLogLevel:function ft(he){(0,He.Ub)(he)},CACHE_SIZE_UNLIMITED:He.IX};!function Dr(he){(function ur(he,N){he.INTERNAL.registerComponent(new ze.wA("firestore-compat",L=>{const q=L.getProvider("app-compat").getImmediate(),X=L.getProvider("firestore").getImmediate();return N(q,X)},"PUBLIC").setServiceProps(Object.assign({},Zn)))})(he,(N,L)=>new xn(N,L,new vn)),he.registerVersion("@firebase/firestore-compat","0.3.5")}(at.Z);var mn=b(1041),Tn=b(6217),De=b(9260);function rt(he,N){return function qn(he,N=S.z){return new U.y(L=>{let q;return null!=N?N.schedule(()=>{q=he.onSnapshot({includeMetadataChanges:!0},L)}):q=he.onSnapshot({includeMetadataChanges:!0},L),()=>{null!=q&&q()}})}(he,N)}function J(he,N){return rt(he,N).pipe((0,se.U)(L=>({payload:L,type:"query"})))}function Re(he,N){return J(he,N).pipe((0,te.O)(void 0),ce(),(0,se.U)(([L,q])=>{const X=q.payload.docChanges(),Fe=X.map(ht=>({type:ht.type,payload:ht}));return L&&JSON.stringify(L.payload.metadata)!==JSON.stringify(q.payload.metadata)&&q.payload.docs.forEach((ht,we)=>{const xe=X.find(be=>be.doc.ref.isEqual(ht.ref)),ue=null==L?void 0:L.payload.docs.find(be=>be.ref.isEqual(ht.ref));xe&&JSON.stringify(xe.doc.metadata)===JSON.stringify(ht.metadata)||!xe&&ue&&JSON.stringify(ue.metadata)===JSON.stringify(ht.metadata)||Fe.push({type:"modified",payload:{oldIndex:we,newIndex:we,type:"modified",doc:ht}})}),Fe}))}function Xe(he,N,L){return Re(he,L).pipe((0,ke.R)((q,X)=>function yt(he,N,L){return N.forEach(q=>{L.indexOf(q.type)>-1&&(he=function Zt(he,N){switch(N.type){case"added":if(!he[N.newIndex]||!he[N.newIndex].doc.ref.isEqual(N.doc.ref))return Ft(he,N.newIndex,0,N);break;case"modified":if(null==he[N.oldIndex]||he[N.oldIndex].doc.ref.isEqual(N.doc.ref)){if(N.oldIndex!==N.newIndex){const L=he.slice();return L.splice(N.oldIndex,1),L.splice(N.newIndex,0,N),L}return Ft(he,N.newIndex,1,N)}break;case"removed":if(he[N.oldIndex]&&he[N.oldIndex].doc.ref.isEqual(N.doc.ref))return Ft(he,N.oldIndex,1)}return he}(he,q))}),he}(q,X.map(Fe=>Fe.payload),N),[]),(0,qe.x)(),(0,se.U)(q=>q.map(X=>({type:X.type,payload:X}))))}function Ft(he,N,L,...q){const X=he.slice();return X.splice(N,L,...q),X}function zt(he){return(!he||0===he.length)&&(he=["added","removed","modified"]),he}class Mn{constructor(N,L,q){this.ref=N,this.query=L,this.afs=q}stateChanges(N){let L=Re(this.query,this.afs.schedulers.outsideAngular);return N&&N.length>0&&(L=L.pipe((0,se.U)(q=>q.filter(X=>N.indexOf(X.type)>-1)))),L.pipe((0,te.O)(void 0),ce(),(0,it.h)(([q,X])=>X.length>0||!q),(0,se.U)(([q,X])=>X),Ie.iC)}auditTrail(N){return this.stateChanges(N).pipe((0,ke.R)((L,q)=>[...L,...q],[]))}snapshotChanges(N){const L=zt(N);return Xe(this.query,L,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(N={}){return J(this.query,this.afs.schedulers.outsideAngular).pipe((0,se.U)(L=>L.payload.docs.map(q=>N.idField?Object.assign(Object.assign({},q.data()),{[N.idField]:q.id}):q.data())),Ie.iC)}get(N){return(0,re.D)(this.query.get(N)).pipe(Ie.iC)}add(N){return this.ref.add(N)}doc(N){return new Kn(this.ref.doc(N),this.afs)}}class Kn{constructor(N,L){this.ref=N,this.afs=L}set(N,L){return this.ref.set(N,L)}update(N){return this.ref.update(N)}delete(){return this.ref.delete()}collection(N,L){const q=this.ref.collection(N),{ref:X,query:Fe}=dt(q,L);return new Mn(X,Fe,this.afs)}snapshotChanges(){return function Y(he,N){return rt(he,N).pipe((0,te.O)(void 0),ce(),(0,se.U)(([L,q])=>q.exists?(null==L?void 0:L.exists)?{payload:q,type:"modified"}:{payload:q,type:"added"}:{payload:q,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(N={}){return this.snapshotChanges().pipe((0,se.U)(({payload:L})=>N.idField?Object.assign(Object.assign({},L.data()),{[N.idField]:L.id}):L.data()))}get(N){return(0,re.D)(this.ref.get(N)).pipe(Ie.iC)}}class Bn{constructor(N,L){this.query=N,this.afs=L}stateChanges(N){return N&&0!==N.length?Re(this.query,this.afs.schedulers.outsideAngular).pipe((0,se.U)(L=>L.filter(q=>N.indexOf(q.type)>-1)),(0,it.h)(L=>L.length>0),Ie.iC):Re(this.query,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}auditTrail(N){return this.stateChanges(N).pipe((0,ke.R)((L,q)=>[...L,...q],[]))}snapshotChanges(N){const L=zt(N);return Xe(this.query,L,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(N={}){return J(this.query,this.afs.schedulers.outsideAngular).pipe((0,se.U)(q=>q.payload.docs.map(X=>N.idField?Object.assign({[N.idField]:X.id},X.data()):X.data())),Ie.iC)}get(N){return(0,re.D)(this.query.get(N)).pipe(Ie.iC)}}const gr=new g.OlP("angularfire2.enableFirestorePersistence"),lr=new g.OlP("angularfire2.firestore.persistenceSettings"),tr=new g.OlP("angularfire2.firestore.settings"),pt=new g.OlP("angularfire2.firestore.use-emulator");function dt(he,N=(L=>L)){return{query:N(he),ref:he}}let Ue=(()=>{class he{constructor(L,q,X,Fe,ht,we,xe,ue,be,$,ae,_e,Ve,Tt,un,Dn,Ln){this.schedulers=xe;const Ir=(0,ut.on)(L,we,q),nr=be;$&&(0,mn.nw)(Ir,we,ae,Ve,Tt,un,_e,Dn),[this.firestore,this.persistenceEnabled$]=(0,ut.cc)(`${Ir.name}.firestore`,"AngularFirestore",Ir.name,()=>{const xr=we.runOutsideAngular(()=>Ir.firestore());if(Fe&&xr.settings(Fe),nr&&xr.useEmulator(...nr),X&&!(0,Et.PM)(ht)){const ai=()=>{try{return(0,re.D)(xr.enablePersistence(ue||void 0).then(()=>!0,()=>!1))}catch(Ur){return"undefined"!=typeof console&&console.warn(Ur),(0,de.of)(!1)}};return[xr,we.runOutsideAngular(ai)]}return[xr,(0,de.of)(!1)]},[Fe,nr,X])}collection(L,q){let X;X="string"==typeof L?this.firestore.collection(L):L;const{ref:Fe,query:ht}=dt(X,q),we=this.schedulers.ngZone.run(()=>Fe);return new Mn(we,ht,this)}collectionGroup(L,q){const X=q||(ht=>ht),Fe=this.firestore.collectionGroup(L);return new Bn(X(Fe),this)}doc(L){let q;q="string"==typeof L?this.firestore.doc(L):L;const X=this.schedulers.ngZone.run(()=>q);return new Kn(X,this)}createId(){return this.firestore.collection("_").doc().id}}return he.\u0275fac=function(L){return new(L||he)(g.LFG(ut.Dh),g.LFG(ut.xv,8),g.LFG(gr,8),g.LFG(tr,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ie.HU),g.LFG(lr,8),g.LFG(pt,8),g.LFG(mn.zQ,8),g.LFG(mn.Qv,8),g.LFG(mn.L6,8),g.LFG(mn._Q,8),g.LFG(mn.rT,8),g.LFG(mn.lh,8),g.LFG(mn.f7,8),g.LFG(Tn.nm,8))},he.\u0275prov=g.Yz7({token:he,factory:he.\u0275fac,providedIn:"any"}),he})(),It=(()=>{class he{constructor(){De.Z.registerVersion("angularfire",Ie.q4.full,"fst-compat")}static enablePersistence(L){return{ngModule:he,providers:[{provide:gr,useValue:!0},{provide:lr,useValue:L}]}}}return he.\u0275fac=function(L){return new(L||he)},he.\u0275mod=g.oAB({type:he}),he.\u0275inj=g.cJS({providers:[Ue]}),he})()},8445:(Je,Te,b)=>{b.d(Te,{Q1:()=>To,TE:()=>an});var g=b(8306),S=b(9646),U=b(8996),re=b(8372),de=b(4004),Ie=b(3900),Ce=b(263),oe=b(5e3),ce=b(2011),te=b(3942),se=b(5861),ke=b(9681),qe=b(2090),it=b(4859);const ut="firebasestorage.googleapis.com",Et="storageBucket";class Mt extends qe.ZR{constructor(z,Se,We=0){super(Be(z),`Firebase Storage: ${Se} (${Be(z)})`),this.status_=We,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mt.prototype)}get status(){return this.status_}set status(z){this.status_=z}_codeEquals(z){return Be(z)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(z){this.customData.serverResponse=z,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ze=(()=>{return(G=ze||(ze={})).UNKNOWN="unknown",G.OBJECT_NOT_FOUND="object-not-found",G.BUCKET_NOT_FOUND="bucket-not-found",G.PROJECT_NOT_FOUND="project-not-found",G.QUOTA_EXCEEDED="quota-exceeded",G.UNAUTHENTICATED="unauthenticated",G.UNAUTHORIZED="unauthorized",G.UNAUTHORIZED_APP="unauthorized-app",G.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",G.INVALID_CHECKSUM="invalid-checksum",G.CANCELED="canceled",G.INVALID_EVENT_NAME="invalid-event-name",G.INVALID_URL="invalid-url",G.INVALID_DEFAULT_BUCKET="invalid-default-bucket",G.NO_DEFAULT_BUCKET="no-default-bucket",G.CANNOT_SLICE_BLOB="cannot-slice-blob",G.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",G.NO_DOWNLOAD_URL="no-download-url",G.INVALID_ARGUMENT="invalid-argument",G.INVALID_ARGUMENT_COUNT="invalid-argument-count",G.APP_DELETED="app-deleted",G.INVALID_ROOT_OPERATION="invalid-root-operation",G.INVALID_FORMAT="invalid-format",G.INTERNAL_ERROR="internal-error",G.UNSUPPORTED_ENVIRONMENT="unsupported-environment",ze;var G})();function Be(G){return"storage/"+G}function Ge(){return new Mt(ze.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function tn(){return new Mt(ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vn(){return new Mt(ze.CANCELED,"User canceled the upload/download.")}function St(){return new Mt(ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Yt(G){return new Mt(ze.INVALID_ARGUMENT,G)}function Nn(){return new Mt(ze.APP_DELETED,"The Firebase app was deleted.")}function jn(G){return new Mt(ze.INVALID_ROOT_OPERATION,"The operation '"+G+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nn(G,z){return new Mt(ze.INVALID_FORMAT,"String does not match format '"+G+"': "+z)}function wn(G){throw new Mt(ze.INTERNAL_ERROR,"Internal error: "+G)}class Ot{constructor(z,Se){this.bucket=z,this.path_=Se}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const z=encodeURIComponent;return"/b/"+z(this.bucket)+"/o/"+z(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(z,Se){let We;try{We=Ot.makeFromUrl(z,Se)}catch(bt){return new Ot(z,"")}if(""===We.path)return We;throw function Ze(G){return new Mt(ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+G+"'.")}(z)}static makeFromUrl(z,Se){let We=null;const bt="([A-Za-z0-9.\\-_]+)",rr=new RegExp("^gs://"+bt+"(/(.*))?$","i");function Rr(Oe){Oe.path_=decodeURIComponent(Oe.path)}const hi=Se.replace(/[.]/g,"\\."),le=[{regex:rr,indices:{bucket:1,path:3},postModify:function jt(Oe){"/"===Oe.path.charAt(Oe.path.length-1)&&(Oe.path_=Oe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${hi}/v[A-Za-z0-9_]+/b/${bt}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Rr},{regex:new RegExp(`^https?://${Se===ut?"(?:storage.googleapis.com|storage.cloud.google.com)":Se}/${bt}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Rr}];for(let Oe=0;Oe<le.length;Oe++){const Ye=le[Oe],nt=Ye.regex.exec(z);if(nt){let Qt=nt[Ye.indices.path];Qt||(Qt=""),We=new Ot(nt[Ye.indices.bucket],Qt),Ye.postModify(We);break}}if(null==We)throw function xn(G){return new Mt(ze.INVALID_URL,"Invalid URL '"+G+"'.")}(z);return We}}class hn{constructor(z){this.promise_=Promise.reject(z)}getPromise(){return this.promise_}cancel(z=!1){}}function Zn(G){return"string"==typeof G||G instanceof String}function ur(G){return Dr()&&G instanceof Blob}function Dr(){return"undefined"!=typeof Blob&&!(0,qe.UG)()}function mn(G,z,Se,We){if(We<z)throw Yt(`Invalid value for '${G}'. Expected ${z} or greater.`);if(We>Se)throw Yt(`Invalid value for '${G}'. Expected ${Se} or less.`)}function Tn(G,z,Se){let We=z;return null==Se&&(We=`https://${z}`),`${Se}://${We}/v0${G}`}function De(G){const z=encodeURIComponent;let Se="?";for(const We in G)G.hasOwnProperty(We)&&(Se=Se+(z(We)+"=")+z(G[We])+"&");return Se=Se.slice(0,-1),Se}var qn=(()=>{return(G=qn||(qn={}))[G.NO_ERROR=0]="NO_ERROR",G[G.NETWORK_ERROR=1]="NETWORK_ERROR",G[G.ABORT=2]="ABORT",qn;var G})();function rt(G,z){const Se=G>=500&&G<600,bt=-1!==[408,429].indexOf(G),jt=-1!==z.indexOf(G);return Se||bt||jt}class Y{constructor(z,Se,We,bt,jt,yn,rr,Qn,Rr,zr,hi,jr=!0){this.url_=z,this.method_=Se,this.headers_=We,this.body_=bt,this.successCodes_=jt,this.additionalRetryCodes_=yn,this.callback_=rr,this.errorCallback_=Qn,this.timeout_=Rr,this.progressCallback_=zr,this.connectionFactory_=hi,this.retry=jr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ii,Li)=>{this.resolve_=ii,this.reject_=Li,this.start_()})}start_(){const Se=(We,bt)=>{const jt=this.resolve_,yn=this.reject_,rr=bt.connection;if(bt.wasSuccessCode)try{const Qn=this.callback_(rr,rr.getResponse());!function fn(G){return void 0!==G}(Qn)?jt():jt(Qn)}catch(Qn){yn(Qn)}else if(null!==rr){const Qn=Ge();Qn.serverResponse=rr.getErrorText(),yn(this.errorCallback_?this.errorCallback_(rr,Qn):Qn)}else yn(bt.canceled?this.appDelete_?Nn():vn():tn())};this.canceled_?Se(0,new J(!1,null,!0)):this.backoffId_=function xt(G,z,Se){let We=1,bt=null,jt=null,yn=!1,rr=0;function Qn(){return 2===rr}let Rr=!1;function zr(...E){Rr||(Rr=!0,z.apply(null,E))}function hi(E){bt=setTimeout(()=>{bt=null,G(ii,Qn())},E)}function jr(){jt&&clearTimeout(jt)}function ii(E,...C){if(Rr)return void jr();if(E)return jr(),void zr.call(null,E,...C);if(Qn()||yn)return jr(),void zr.call(null,E,...C);let le;We<64&&(We*=2),1===rr?(rr=2,le=0):le=1e3*(We+Math.random()),hi(le)}let Li=!1;function ne(E){Li||(Li=!0,jr(),!Rr&&(null!==bt?(E||(rr=2),clearTimeout(bt),hi(0)):E||(rr=1)))}return hi(0),jt=setTimeout(()=>{yn=!0,ne(!0)},Se),ne}((We,bt)=>{if(bt)return void We(!1,new J(!1,null,!0));const jt=this.connectionFactory_();this.pendingConnection_=jt;const yn=rr=>{null!==this.progressCallback_&&this.progressCallback_(rr.loaded,rr.lengthComputable?rr.total:-1)};null!==this.progressCallback_&&jt.addUploadProgressListener(yn),jt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&jt.removeUploadProgressListener(yn),this.pendingConnection_=null;const rr=jt.getErrorCode()===qn.NO_ERROR,Qn=jt.getStatus();if(!rr||rt(Qn,this.additionalRetryCodes_)&&this.retry){const zr=jt.getErrorCode()===qn.ABORT;return void We(!1,new J(!1,null,zr))}const Rr=-1!==this.successCodes_.indexOf(Qn);We(!0,new J(Rr,jt))})},Se,this.timeout_)}getPromise(){return this.promise_}cancel(z){this.canceled_=!0,this.appDelete_=z||!1,null!==this.backoffId_&&function rn(G){G(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class J{constructor(z,Se,We){this.wasSuccessCode=z,this.connection=Se,this.canceled=!!We}}function Mn(...G){const z=function zt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==z){const Se=new z;for(let We=0;We<G.length;We++)Se.append(G[We]);return Se.getBlob()}if(Dr())return new Blob(G);throw new Mt(ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lr{constructor(z,Se){this.data=z,this.contentType=Se||null}}function tr(G,z){switch(G){case gr.RAW:return new lr(pt(z));case gr.BASE64:case gr.BASE64URL:return new lr(Ue(G,z));case gr.DATA_URL:return new lr(function he(G){const z=new It(G);return z.base64?Ue(gr.BASE64,z.rest):function dt(G){let z;try{z=decodeURIComponent(G)}catch(Se){throw nn(gr.DATA_URL,"Malformed data URL.")}return pt(z)}(z.rest)}(z),function N(G){return new It(G).contentType}(z))}throw Ge()}function pt(G){const z=[];for(let Se=0;Se<G.length;Se++){let We=G.charCodeAt(Se);We<=127?z.push(We):We<=2047?z.push(192|We>>6,128|63&We):55296==(64512&We)?Se<G.length-1&&56320==(64512&G.charCodeAt(Se+1))?(We=65536|(1023&We)<<10|1023&G.charCodeAt(++Se),z.push(240|We>>18,128|We>>12&63,128|We>>6&63,128|63&We)):z.push(239,191,189):56320==(64512&We)?z.push(239,191,189):z.push(224|We>>12,128|We>>6&63,128|63&We)}return new Uint8Array(z)}function Ue(G,z){switch(G){case gr.BASE64:{const bt=-1!==z.indexOf("-"),jt=-1!==z.indexOf("_");if(bt||jt)throw nn(G,"Invalid character '"+(bt?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{const bt=-1!==z.indexOf("+"),jt=-1!==z.indexOf("/");if(bt||jt)throw nn(G,"Invalid character '"+(bt?"+":"/")+"' found: is it base64 encoded?");z=z.replace(/-/g,"+").replace(/_/g,"/");break}}let Se;try{Se=function Bn(G){if("undefined"==typeof atob)throw function Rt(G){return new Mt(ze.UNSUPPORTED_ENVIRONMENT,`${G} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(G)}(z)}catch(bt){throw bt.message.includes("polyfill")?bt:nn(G,"Invalid character found")}const We=new Uint8Array(Se.length);for(let bt=0;bt<Se.length;bt++)We[bt]=Se.charCodeAt(bt);return We}class It{constructor(z){this.base64=!1,this.contentType=null;const Se=z.match(/^data:([^,]+)?,/);if(null===Se)throw nn(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const We=Se[1]||null;null!=We&&(this.base64=function L(G,z){return G.length>=z.length&&G.substring(G.length-z.length)===z}(We,";base64"),this.contentType=this.base64?We.substring(0,We.length-7):We),this.rest=z.substring(z.indexOf(",")+1)}}class q{constructor(z,Se){let We=0,bt="";ur(z)?(this.data_=z,We=z.size,bt=z.type):z instanceof ArrayBuffer?(Se?this.data_=new Uint8Array(z):(this.data_=new Uint8Array(z.byteLength),this.data_.set(new Uint8Array(z))),We=this.data_.length):z instanceof Uint8Array&&(Se?this.data_=z:(this.data_=new Uint8Array(z.length),this.data_.set(z)),We=z.length),this.size_=We,this.type_=bt}size(){return this.size_}type(){return this.type_}slice(z,Se){if(ur(this.data_)){const bt=function Kn(G,z,Se){return G.webkitSlice?G.webkitSlice(z,Se):G.mozSlice?G.mozSlice(z,Se):G.slice?G.slice(z,Se):null}(this.data_,z,Se);return null===bt?null:new q(bt)}{const We=new Uint8Array(this.data_.buffer,z,Se-z);return new q(We,!0)}}static getBlob(...z){if(Dr()){const Se=z.map(We=>We instanceof q?We.data_:We);return new q(Mn.apply(null,Se))}{const Se=z.map(yn=>Zn(yn)?tr(gr.RAW,yn).data:yn.data_);let We=0;Se.forEach(yn=>{We+=yn.byteLength});const bt=new Uint8Array(We);let jt=0;return Se.forEach(yn=>{for(let rr=0;rr<yn.length;rr++)bt[jt++]=yn[rr]}),new q(bt,!0)}}uploadData(){return this.data_}}function X(G){let z;try{z=JSON.parse(G)}catch(Se){return null}return function Sn(G){return"object"==typeof G&&!Array.isArray(G)}(z)?z:null}function we(G){const z=G.lastIndexOf("/",G.length-2);return-1===z?G:G.slice(z+1)}function xe(G,z){return z}class ue{constructor(z,Se,We,bt){this.server=z,this.local=Se||z,this.writable=!!We,this.xform=bt||xe}}let be=null;function ae(){if(be)return be;const G=[];G.push(new ue("bucket")),G.push(new ue("generation")),G.push(new ue("metageneration")),G.push(new ue("name","fullPath",!0));const Se=new ue("name");Se.xform=function z(jt,yn){return function $(G){return!Zn(G)||G.length<2?G:we(G)}(yn)},G.push(Se);const bt=new ue("size");return bt.xform=function We(jt,yn){return void 0!==yn?Number(yn):yn},G.push(bt),G.push(new ue("timeCreated")),G.push(new ue("updated")),G.push(new ue("md5Hash",null,!0)),G.push(new ue("cacheControl",null,!0)),G.push(new ue("contentDisposition",null,!0)),G.push(new ue("contentEncoding",null,!0)),G.push(new ue("contentLanguage",null,!0)),G.push(new ue("contentType",null,!0)),G.push(new ue("metadata","customMetadata",!0)),be=G,be}function Tt(G,z,Se){const We=X(z);return null===We?null:function Ve(G,z,Se){const We={type:"file"},bt=Se.length;for(let jt=0;jt<bt;jt++){const yn=Se[jt];We[yn.local]=yn.xform(We,z[yn.server])}return function _e(G,z){Object.defineProperty(G,"ref",{get:function Se(){const jt=new Ot(G.bucket,G.fullPath);return z._makeStorageReference(jt)}})}(We,G),We}(G,We,Se)}function Dn(G,z){const Se={},We=z.length;for(let bt=0;bt<We;bt++){const jt=z[bt];jt.writable&&(Se[jt.server]=G[jt.local])}return JSON.stringify(Se)}const Ln="prefixes";class ai{constructor(z,Se,We,bt){this.url=z,this.method=Se,this.handler=We,this.timeout=bt,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ur(G){if(!G)throw Ge()}function Hi(G,z){return function Se(We,bt){const jt=Tt(G,bt,z);return Ur(null!==jt),jt}}function mr(G){return function z(Se,We){let bt;return bt=401===Se.getStatus()?Se.getErrorText().includes("Firebase App Check token is invalid")?function vt(){return new Mt(ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function gt(){return new Mt(ze.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Se.getStatus()?function Ne(G){return new Mt(ze.QUOTA_EXCEEDED,"Quota for bucket '"+G+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(G.bucket):403===Se.getStatus()?function sn(G){return new Mt(ze.UNAUTHORIZED,"User does not have permission to access '"+G+"'.")}(G.path):We,bt.status=Se.getStatus(),bt.serverResponse=We.serverResponse,bt}}function Kr(G){const z=mr(G);return function Se(We,bt){let jt=z(We,bt);return 404===We.getStatus()&&(jt=function Qe(G){return new Mt(ze.OBJECT_NOT_FOUND,"Object '"+G+"' does not exist.")}(G.path)),jt.serverResponse=bt.serverResponse,jt}}function wi(G,z,Se){const bt=Tn(z.fullServerUrl(),G.host,G._protocol),yn=G.maxOperationRetryTime,rr=new ai(bt,"GET",Hi(G,Se),yn);return rr.errorHandler=Kr(z),rr}function $i(G,z,Se,We,bt){const jt={};jt.prefix=z.isRoot?"":z.path+"/",Se&&Se.length>0&&(jt.delimiter=Se),We&&(jt.pageToken=We),bt&&(jt.maxResults=bt);const rr=Tn(z.bucketOnlyServerUrl(),G.host,G._protocol),Rr=G.maxOperationRetryTime,zr=new ai(rr,"GET",function Ki(G,z){return function Se(We,bt){const jt=function xr(G,z,Se){const We=X(Se);return null===We?null:function nr(G,z,Se){const We={prefixes:[],items:[],nextPageToken:Se.nextPageToken};if(Se[Ln])for(const bt of Se[Ln]){const jt=bt.replace(/\/$/,""),yn=G._makeStorageReference(new Ot(z,jt));We.prefixes.push(yn)}if(Se.items)for(const bt of Se.items){const jt=G._makeStorageReference(new Ot(z,bt.name));We.items.push(jt)}return We}(G,z,We)}(G,z,bt);return Ur(null!==jt),jt}}(G,z.bucket),Rr);return zr.urlParams=jt,zr.errorHandler=mr(z),zr}function hr(G,z,Se){const We=Object.assign({},Se);return We.fullPath=G.path,We.size=z.size(),We.contentType||(We.contentType=function li(G,z){return G&&G.contentType||z&&z.type()||"application/octet-stream"}(null,z)),We}class Wr{constructor(z,Se,We,bt){this.current=z,this.total=Se,this.finalized=!!We,this.metadata=bt||null}}function Yi(G,z){let Se=null;try{Se=G.getResponseHeader("X-Goog-Upload-Status")}catch(bt){Ur(!1)}return Ur(!!Se&&-1!==(z||["active"]).indexOf(Se)),Se}const Ht={STATE_CHANGED:"state_changed"},ct={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Bt(G){switch(G){case"running":case"pausing":case"canceling":return ct.RUNNING;case"paused":return ct.PAUSED;case"success":return ct.SUCCESS;case"canceled":return ct.CANCELED;default:return ct.ERROR}}class An{constructor(z,Se,We){if(function Fn(G){return"function"==typeof G}(z)||null!=Se||null!=We)this.next=z,this.error=null!=Se?Se:void 0,this.complete=null!=We?We:void 0;else{const jt=z;this.next=jt.next,this.error=jt.error,this.complete=jt.complete}}}function _n(G){return(...z)=>{Promise.resolve().then(()=>G(...z))}}class ti extends class Ei{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qn.NO_ERROR,this.sendPromise_=new Promise(z=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qn.ABORT,z()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qn.NETWORK_ERROR,z()}),this.xhr_.addEventListener("load",()=>{z()})})}send(z,Se,We,bt){if(this.sent_)throw wn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Se,z,!0),void 0!==bt)for(const jt in bt)bt.hasOwnProperty(jt)&&this.xhr_.setRequestHeader(jt,bt[jt].toString());return void 0!==We?this.xhr_.send(We):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(z){return-1}}getResponse(){if(!this.sent_)throw wn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(z){return this.xhr_.getResponseHeader(z)}addUploadProgressListener(z){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",z)}removeUploadProgressListener(z){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",z)}}{initXhr(){this.xhr_.responseType="text"}}function Zr(){return new ti}class Ii{constructor(z,Se,We=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=z,this._blob=Se,this._metadata=We,this._mappings=ae(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=bt=>{if(this._request=void 0,this._chunkMultiplier=1,bt._codeEquals(ze.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const jt=this.isExponentialBackoffExpired();if(rt(bt.status,[])){if(!jt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();bt=tn()}this._error=bt,this._transition("error")}},this._metadataErrorHandler=bt=>{this._request=void 0,bt._codeEquals(ze.CANCELED)?this.completeTransitions_():(this._error=bt,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((bt,jt)=>{this._resolve=bt,this._reject=jt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const z=this._transferred;return Se=>this._updateProgress(z+Se)}_shouldDoResumable(z){return z.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(z){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Se,We])=>{switch(this._state){case"running":z(Se,We);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((z,Se)=>{const We=function ns(G,z,Se,We,bt){const jt=z.bucketOnlyServerUrl(),yn=hr(z,We,bt),rr={name:yn.fullPath},Qn=Tn(jt,G.host,G._protocol),zr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${We.size()}`,"X-Goog-Upload-Header-Content-Type":yn.contentType,"Content-Type":"application/json; charset=utf-8"},hi=Dn(yn,Se),Li=new ai(Qn,"POST",function ii(ne){let E;Yi(ne);try{E=ne.getResponseHeader("X-Goog-Upload-URL")}catch(C){Ur(!1)}return Ur(Zn(E)),E},G.maxUploadRetryTime);return Li.urlParams=rr,Li.headers=zr,Li.body=hi,Li.errorHandler=mr(z),Li}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),bt=this._ref.storage._makeRequest(We,Zr,z,Se);this._request=bt,bt.getPromise().then(jt=>{this._request=void 0,this._uploadUrl=jt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const z=this._uploadUrl;this._resolveToken((Se,We)=>{const bt=function di(G,z,Se,We){const Qn=new ai(Se,"POST",function jt(Rr){const zr=Yi(Rr,["active","final"]);let hi=null;try{hi=Rr.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ii){Ur(!1)}hi||Ur(!1);const jr=Number(hi);return Ur(!isNaN(jr)),new Wr(jr,We.size(),"final"===zr)},G.maxUploadRetryTime);return Qn.headers={"X-Goog-Upload-Command":"query"},Qn.errorHandler=mr(z),Qn}(this._ref.storage,this._ref._location,z,this._blob),jt=this._ref.storage._makeRequest(bt,Zr,Se,We);this._request=jt,jt.getPromise().then(yn=>{yn=yn,this._request=void 0,this._updateProgress(yn.current),this._needToFetchStatus=!1,yn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const z=262144*this._chunkMultiplier,Se=new Wr(this._transferred,this._blob.size()),We=this._uploadUrl;this._resolveToken((bt,jt)=>{let yn;try{yn=function Ke(G,z,Se,We,bt,jt,yn,rr){const Qn=new Wr(0,0);if(yn?(Qn.current=yn.current,Qn.total=yn.total):(Qn.current=0,Qn.total=We.size()),We.size()!==Qn.total)throw function Gt(){return new Mt(ze.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Rr=Qn.total-Qn.current;let zr=Rr;bt>0&&(zr=Math.min(zr,bt));const hi=Qn.current;let ii="";ii=0===zr?"finalize":Rr===zr?"upload, finalize":"upload";const Li={"X-Goog-Upload-Command":ii,"X-Goog-Upload-Offset":`${Qn.current}`},ne=We.slice(hi,hi+zr);if(null===ne)throw St();const le=new ai(Se,"POST",function E(Oe,Ye){const nt=Yi(Oe,["active","final"]),Dt=Qn.current+zr,Qt=We.size();let cn;return cn="final"===nt?Hi(z,jt)(Oe,Ye):null,new Wr(Dt,Qt,"final"===nt,cn)},z.maxUploadRetryTime);return le.headers=Li,le.body=ne.uploadData(),le.progressCallback=rr||null,le.errorHandler=mr(G),le}(this._ref._location,this._ref.storage,We,this._blob,z,this._mappings,Se,this._makeProgressCallback())}catch(Qn){return this._error=Qn,void this._transition("error")}const rr=this._ref.storage._makeRequest(yn,Zr,bt,jt,!1);this._request=rr,rr.getPromise().then(Qn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Qn.current),Qn.finalized?(this._metadata=Qn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((z,Se)=>{const We=wi(this._ref.storage,this._ref._location,this._mappings),bt=this._ref.storage._makeRequest(We,Zr,z,Se);this._request=bt,bt.getPromise().then(jt=>{this._request=void 0,this._metadata=jt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((z,Se)=>{const We=function ps(G,z,Se,We,bt){const jt=z.bucketOnlyServerUrl(),yn={"X-Goog-Upload-Protocol":"multipart"},Qn=function rr(){let le="";for(let Oe=0;Oe<2;Oe++)le+=Math.random().toString().slice(2);return le}();yn["Content-Type"]="multipart/related; boundary="+Qn;const Rr=hr(z,We,bt),zr=Dn(Rr,Se),ii=q.getBlob("--"+Qn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+zr+"\r\n--"+Qn+"\r\nContent-Type: "+Rr.contentType+"\r\n\r\n",We,"\r\n--"+Qn+"--");if(null===ii)throw St();const Li={name:Rr.fullPath},ne=Tn(jt,G.host,G._protocol),C=G.maxUploadRetryTime,B=new ai(ne,"POST",Hi(G,Se),C);return B.urlParams=Li,B.headers=yn,B.body=ii.uploadData(),B.errorHandler=mr(z),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),bt=this._ref.storage._makeRequest(We,Zr,z,Se);this._request=bt,bt.getPromise().then(jt=>{this._request=void 0,this._metadata=jt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(z){const Se=this._transferred;this._transferred=z,this._transferred!==Se&&this._notifyObservers()}_transition(z){if(this._state!==z)switch(z){case"canceling":case"pausing":this._state=z,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Se="paused"===this._state;this._state=z,Se&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=z,this._notifyObservers();break;case"canceled":this._error=vn(),this._state=z,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const z=Bt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:z,metadata:this._metadata,task:this,ref:this._ref}}on(z,Se,We,bt){const jt=new An(Se||void 0,We||void 0,bt||void 0);return this._addObserver(jt),()=>{this._removeObserver(jt)}}then(z,Se){return this._promise.then(z,Se)}catch(z){return this.then(null,z)}_addObserver(z){this._observers.push(z),this._notifyObserver(z)}_removeObserver(z){const Se=this._observers.indexOf(z);-1!==Se&&this._observers.splice(Se,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Se=>{this._notifyObserver(Se)})}_finishPromise(){if(void 0!==this._resolve){let z=!0;switch(Bt(this._state)){case ct.SUCCESS:_n(this._resolve.bind(null,this.snapshot))();break;case ct.CANCELED:case ct.ERROR:_n(this._reject.bind(null,this._error))();break;default:z=!1}z&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(z){switch(Bt(this._state)){case ct.RUNNING:case ct.PAUSED:z.next&&_n(z.next.bind(z,this.snapshot))();break;case ct.SUCCESS:z.complete&&_n(z.complete.bind(z))();break;default:z.error&&_n(z.error.bind(z,this._error))()}}resume(){const z="paused"===this._state||"pausing"===this._state;return z&&this._transition("running"),z}pause(){const z="running"===this._state;return z&&this._transition("pausing"),z}cancel(){const z="running"===this._state||"pausing"===this._state;return z&&this._transition("canceling"),z}}class Ts{constructor(z,Se){this._service=z,this._location=Se instanceof Ot?Se:Ot.makeFromUrl(Se,z.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(z,Se){return new Ts(z,Se)}get root(){const z=new Ot(this._location.bucket,"");return this._newRef(this._service,z)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return we(this._location.path)}get storage(){return this._service}get parent(){const z=function Fe(G){if(0===G.length)return null;const z=G.lastIndexOf("/");return-1===z?"":G.slice(0,z)}(this._location.path);if(null===z)return null;const Se=new Ot(this._location.bucket,z);return new Ts(this._service,Se)}_throwIfRoot(z){if(""===this._location.path)throw jn(z)}}function vr(G,z,Se){return bi.apply(this,arguments)}function bi(){return(bi=(0,se.Z)(function*(G,z,Se){const bt=yield yi(G,{pageToken:Se});z.prefixes.push(...bt.prefixes),z.items.push(...bt.items),null!=bt.nextPageToken&&(yield vr(G,z,bt.nextPageToken))})).apply(this,arguments)}function yi(G,z){null!=z&&"number"==typeof z.maxResults&&mn("options.maxResults",1,1e3,z.maxResults);const Se=z||{},We=$i(G.storage,G._location,"/",Se.pageToken,Se.maxResults);return G.storage.makeRequestWithTokens(We,Zr)}function Zi(G){G._throwIfRoot("getDownloadURL");const z=function Oi(G,z,Se){const bt=Tn(z.fullServerUrl(),G.host,G._protocol),yn=G.maxOperationRetryTime,rr=new ai(bt,"GET",function In(G,z){return function Se(We,bt){const jt=Tt(G,bt,z);return Ur(null!==jt),function un(G,z,Se,We){const bt=X(z);if(null===bt||!Zn(bt.downloadTokens))return null;const jt=bt.downloadTokens;if(0===jt.length)return null;const yn=encodeURIComponent;return jt.split(",").map(Rr=>{const hi=G.fullPath;return Tn("/b/"+yn(G.bucket)+"/o/"+yn(hi),Se,We)+De({alt:"media",token:Rr})})[0]}(jt,bt,G.host,G._protocol)}}(G,Se),yn);return rr.errorHandler=Kr(z),rr}(G.storage,G._location,ae());return G.storage.makeRequestWithTokens(z,Zr).then(Se=>{if(null===Se)throw function Ut(){return new Mt(ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return Se})}function Ds(G,z){const Se=function ht(G,z){const Se=z.split("/").filter(We=>We.length>0).join("/");return 0===G.length?Se:G+"/"+Se}(G._location.path,z),We=new Ot(G._location.bucket,Se);return new Ts(G.storage,We)}function rs(G,z){if(G instanceof Ss){const Se=G;if(null==Se._bucket)throw function ft(){return new Mt(ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Et+"' property when initializing the app?")}();const We=new Ts(Se,Se._bucket);return null!=z?rs(We,z):We}return void 0!==z?Ds(G,z):G}function js(G,z){if(z&&function Ri(G){return/^[A-Za-z]+:\/\//.test(G)}(z)){if(G instanceof Ss)return function oa(G,z){return new Ts(G,z)}(G,z);throw Yt("To use ref(service, url), the first argument must be a Storage instance.")}return rs(G,z)}function Xr(G,z){const Se=null==z?void 0:z[Et];return null==Se?null:Ot.makeFromBucketSpec(Se,G)}class Ss{constructor(z,Se,We,bt,jt){this.app=z,this._authProvider=Se,this._appCheckProvider=We,this._url=bt,this._firebaseVersion=jt,this._bucket=null,this._host=ut,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=bt?Ot.makeFromBucketSpec(bt,this._host):Xr(this._host,this.app.options)}get host(){return this._host}set host(z){this._host=z,this._bucket=null!=this._url?Ot.makeFromBucketSpec(this._url,z):Xr(z,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(z){mn("time",0,Number.POSITIVE_INFINITY,z),this._maxUploadRetryTime=z}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(z){mn("time",0,Number.POSITIVE_INFINITY,z),this._maxOperationRetryTime=z}_getAuthToken(){var z=this;return(0,se.Z)(function*(){if(z._overrideAuthToken)return z._overrideAuthToken;const Se=z._authProvider.getImmediate({optional:!0});if(Se){const We=yield Se.getToken();if(null!==We)return We.accessToken}return null})()}_getAppCheckToken(){var z=this;return(0,se.Z)(function*(){const Se=z._appCheckProvider.getImmediate({optional:!0});return Se?(yield Se.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(z=>z.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(z){return new Ts(this,z)}_makeRequest(z,Se,We,bt,jt=!0){if(this._deleted)return new hn(Nn());{const yn=function Zt(G,z,Se,We,bt,jt,yn=!0){const rr=De(G.urlParams),Qn=G.url+rr,Rr=Object.assign({},G.headers);return function yt(G,z){z&&(G["X-Firebase-GMPID"]=z)}(Rr,z),function Re(G,z){null!==z&&z.length>0&&(G.Authorization="Firebase "+z)}(Rr,Se),function Xe(G,z){G["X-Firebase-Storage-Version"]="webjs/"+(null!=z?z:"AppManager")}(Rr,jt),function Ft(G,z){null!==z&&(G["X-Firebase-AppCheck"]=z)}(Rr,We),new Y(Qn,G.method,Rr,G.body,G.successCodes,G.additionalRetryCodes,G.handler,G.errorHandler,G.timeout,G.progressCallback,bt,yn)}(z,this._appId,We,bt,Se,this._firebaseVersion,jt);return this._requests.add(yn),yn.getPromise().then(()=>this._requests.delete(yn),()=>this._requests.delete(yn)),yn}}makeRequestWithTokens(z,Se){var We=this;return(0,se.Z)(function*(){const[bt,jt]=yield Promise.all([We._getAuthToken(),We._getAppCheckToken()]);return We._makeRequest(z,Se,bt,jt).getPromise()})()}}const cs="@firebase/storage";function Sr(G,z){return js(G=(0,qe.m9)(G),z)}function H(G,{instanceIdentifier:z}){const Se=G.getProvider("app").getImmediate(),We=G.getProvider("auth-internal"),bt=G.getProvider("app-check-internal");return new Ss(Se,We,bt,z,ke.SDK_VERSION)}!function fe(){(0,ke._registerComponent)(new it.wA("storage",H,"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(cs,"0.11.2",""),(0,ke.registerVersion)(cs,"0.11.2","esm2017")}();class V{constructor(z,Se,We){this._delegate=z,this.task=Se,this.ref=We}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ee{constructor(z,Se){this._delegate=z,this._ref=Se,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new V(this._delegate.snapshot,this,this._ref)}then(z,Se){return this._delegate.then(We=>{if(z)return z(new V(We,this,this._ref))},Se)}on(z,Se,We,bt){let jt;return Se&&(jt="function"==typeof Se?yn=>Se(new V(yn,this,this._ref)):{next:Se.next?yn=>Se.next(new V(yn,this,this._ref)):void 0,complete:Se.complete||void 0,error:Se.error||void 0}),this._delegate.on(z,jt,We||void 0,bt||void 0)}}class ot{constructor(z,Se){this._delegate=z,this._service=Se}get prefixes(){return this._delegate.prefixes.map(z=>new Wt(z,this._service))}get items(){return this._delegate.items.map(z=>new Wt(z,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Wt{constructor(z,Se){this._delegate=z,this.storage=Se}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(z){const Se=function os(G,z){return Ds(G,z)}(this._delegate,z);return new Wt(Se,this.storage)}get root(){return new Wt(this._delegate.root,this.storage)}get parent(){const z=this._delegate.parent;return null==z?null:new Wt(z,this.storage)}put(z,Se){return this._throwIfRoot("put"),new Ee(function Is(G,z,Se){return function on(G,z,Se){return G._throwIfRoot("uploadBytesResumable"),new Ii(G,new q(z),Se)}(G=(0,qe.m9)(G),z,Se)}(this._delegate,z,Se),this)}putString(z,Se=gr.RAW,We){this._throwIfRoot("putString");const bt=tr(Se,z),jt=Object.assign({},We);return null==jt.contentType&&null!=bt.contentType&&(jt.contentType=bt.contentType),new Ee(new Ii(this._delegate,new q(bt.data,!0),jt),this)}listAll(){return function Co(G){return function Yn(G){const z={prefixes:[],items:[]};return vr(G,z).then(()=>z)}(G=(0,qe.m9)(G))}(this._delegate).then(z=>new ot(z,this.storage))}list(z){return function is(G,z){return yi(G=(0,qe.m9)(G),z)}(this._delegate,z||void 0).then(Se=>new ot(Se,this.storage))}getMetadata(){return function oo(G){return function Ps(G){G._throwIfRoot("getMetadata");const z=wi(G.storage,G._location,ae());return G.storage.makeRequestWithTokens(z,Zr)}(G=(0,qe.m9)(G))}(this._delegate)}updateMetadata(z){return function Ci(G,z){return function ks(G,z){G._throwIfRoot("updateMetadata");const Se=function Nr(G,z,Se,We){const jt=Tn(z.fullServerUrl(),G.host,G._protocol),rr=Dn(Se,We),Rr=G.maxOperationRetryTime,zr=new ai(jt,"PATCH",Hi(G,We),Rr);return zr.headers={"Content-Type":"application/json; charset=utf-8"},zr.body=rr,zr.errorHandler=Kr(z),zr}(G.storage,G._location,z,ae());return G.storage.makeRequestWithTokens(Se,Zr)}(G=(0,qe.m9)(G),z)}(this._delegate,z)}getDownloadURL(){return function fr(G){return Zi(G=(0,qe.m9)(G))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Br(G){return function ma(G){G._throwIfRoot("deleteObject");const z=function Pi(G,z){const We=Tn(z.fullServerUrl(),G.host,G._protocol),rr=new ai(We,"DELETE",function yn(Qn,Rr){},G.maxOperationRetryTime);return rr.successCodes=[200,204],rr.errorHandler=Kr(z),rr}(G.storage,G._location);return G.storage.makeRequestWithTokens(z,Zr)}(G=(0,qe.m9)(G))}(this._delegate)}_throwIfRoot(z){if(""===this._delegate._location.path)throw jn(z)}}class Kt{constructor(z,Se){this.app=z,this._delegate=Se}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(z){if(zn(z))throw Yt("ref() expected a child path but got a URL, use refFromURL instead.");return new Wt(Sr(this._delegate,z),this)}refFromURL(z){if(!zn(z))throw Yt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ot.makeFromUrl(z,this._delegate.host)}catch(Se){throw Yt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wt(Sr(this._delegate,z),this)}setMaxUploadRetryTime(z){this._delegate.maxUploadRetryTime=z}setMaxOperationRetryTime(z){this._delegate.maxOperationRetryTime=z}useEmulator(z,Se,We={}){!function As(G,z,Se,We={}){!function Ns(G,z,Se,We={}){G.host=`${z}:${Se}`,G._protocol="http";const{mockUserToken:bt}=We;bt&&(G._overrideAuthToken="string"==typeof bt?bt:(0,qe.Sg)(bt,G.app.options.projectId))}(G,z,Se,We)}(this._delegate,z,Se,We)}}function zn(G){return/^[A-Za-z]+:\/\//.test(G)}function Vr(G,{instanceIdentifier:z}){const Se=G.getProvider("app-compat").getImmediate(),We=G.getProvider("storage").getImmediate({identifier:z});return new Kt(Se,We)}!function Ti(G){const z={TaskState:ct,TaskEvent:Ht,StringFormat:gr,Storage:Kt,Reference:Wt};G.INTERNAL.registerComponent(new it.wA("storage-compat",Vr,"PUBLIC").setServiceProps(z).setMultipleInstances(!0)),G.registerVersion("@firebase/storage-compat","0.3.2")}(te.Z);var qr=b(6217),mi=b(9260);function Hr(G){const z=function Hs(G){return new g.y(z=>{const Se=yn=>z.next(yn);Se(G.snapshot);const jt=G.on("state_changed",Se);return G.then(yn=>{Se(yn),z.complete()},yn=>{Se(G.snapshot),(yn=>{z.error(yn)})(yn)}),function(){jt()}}).pipe((0,re.b)(0))}(G);return{task:G,then:G.then.bind(G),catch:G.catch.bind(G),pause:G.pause.bind(G),cancel:G.cancel.bind(G),resume:G.resume.bind(G),snapshotChanges:()=>z,percentageChanges:()=>z.pipe((0,de.U)(Se=>Se.bytesTransferred/Se.totalBytes*100))}}function dr(G){return{getDownloadURL:()=>(0,S.of)(void 0).pipe(Ce.fc,(0,Ie.w)(()=>G.getDownloadURL()),Ce.iC),getMetadata:()=>(0,S.of)(void 0).pipe(Ce.fc,(0,Ie.w)(()=>G.getMetadata()),Ce.iC),delete:()=>(0,U.D)(G.delete()),child:z=>dr(G.child(z)),updateMetadata:z=>(0,U.D)(G.updateMetadata(z)),put:(z,Se)=>Hr(G.put(z,Se)),putString:(z,Se,We)=>Hr(G.putString(z,Se,We)),list:z=>(0,U.D)(G.list(z)),listAll:()=>(0,U.D)(G.listAll())}}const Js=new oe.OlP("angularfire2.storageBucket"),eo=new oe.OlP("angularfire2.storage.maxUploadRetryTime"),$s=new oe.OlP("angularfire2.storage.maxOperationRetryTime"),Ar=new oe.OlP("angularfire2.storage.use-emulator");let To=(()=>{class G{constructor(Se,We,bt,jt,yn,rr,Qn,Rr,zr,hi){const jr=(0,ce.on)(Se,yn,We);this.storage=(0,ce.cc)(`${jr.name}.storage.${bt}`,"AngularFireStorage",jr.name,()=>{const ii=yn.runOutsideAngular(()=>jr.storage(bt||void 0)),Li=zr;return Li&&ii.useEmulator(...Li),Qn&&ii.setMaxUploadRetryTime(Qn),Rr&&ii.setMaxOperationRetryTime(Rr),ii},[Qn,Rr])}ref(Se){return dr(this.storage.ref(Se))}refFromURL(Se){return dr(this.storage.refFromURL(Se))}upload(Se,We,bt){return dr(this.storage.ref(Se)).put(We,bt)}}return G.\u0275fac=function(Se){return new(Se||G)(oe.LFG(ce.Dh),oe.LFG(ce.xv,8),oe.LFG(Js,8),oe.LFG(oe.Lbi),oe.LFG(oe.R0b),oe.LFG(Ce.HU),oe.LFG(eo,8),oe.LFG($s,8),oe.LFG(Ar,8),oe.LFG(qr.nm,8))},G.\u0275prov=oe.Yz7({token:G,factory:G.\u0275fac,providedIn:"any"}),G})(),ao=(()=>{class G{}return G.\u0275fac=function(Se){return new(Se||G)},G.\u0275mod=oe.oAB({type:G}),G.\u0275inj=oe.cJS({}),G})(),an=(()=>{class G{constructor(){mi.Z.registerVersion("angularfire",Ce.q4.full,"gcs-compat")}}return G.\u0275fac=function(Se){return new(Se||G)},G.\u0275mod=oe.oAB({type:G}),G.\u0275inj=oe.cJS({providers:[To],imports:[ao]}),G})()},2011:(Je,Te,b)=>{b.d(Te,{hO:()=>qe,xv:()=>ce,Dh:()=>oe,GT:()=>Ie,cc:()=>it,on:()=>te,pX:()=>de});var g=b(5e3),S=b(9260),U=b(263);Je=b.hmd(Je);const re=["ngOnDestroy"],de=(at,He,Mt,ze={})=>new Proxy(at,{get:(Be,Ge)=>Mt.runOutsideAngular(()=>{var Qe;if(at[Ge])return(null===(Qe=null==ze?void 0:ze.spy)||void 0===Qe?void 0:Qe.get)&&ze.spy.get(Ge,at[Ge]),at[Ge];if(re.indexOf(Ge)>-1)return()=>{};const Ne=He.toPromise().then(gt=>{const vt=gt&&gt[Ge];return"function"==typeof vt?vt.bind(gt):vt&&vt.then?vt.then(sn=>Mt.run(()=>sn)):Mt.run(()=>vt)});return new Proxy(()=>{},{get:(gt,vt)=>Ne[vt],apply:(gt,vt,sn)=>Ne.then(tn=>{var vn;const xn=tn&&tn(...sn);return(null===(vn=null==ze?void 0:ze.spy)||void 0===vn?void 0:vn.apply)&&ze.spy.apply(Ge,sn,xn),xn})})})}),Ie=(at,He)=>{He.forEach(Mt=>{Object.getOwnPropertyNames(Mt.prototype||Mt).forEach(ze=>{Object.defineProperty(at.prototype,ze,Object.getOwnPropertyDescriptor(Mt.prototype||Mt,ze))})})};class Ce{constructor(He){return He}}const oe=new g.OlP("angularfire2.app.options"),ce=new g.OlP("angularfire2.app.name");function te(at,He,Mt){const Be="object"==typeof Mt&&Mt||{};Be.name=Be.name||"string"==typeof Mt&&Mt||"[DEFAULT]";const Qe=S.Z.apps.filter(Ne=>Ne&&Ne.name===Be.name)[0]||He.runOutsideAngular(()=>S.Z.initializeApp(at,Be));try{JSON.stringify(at)!==JSON.stringify(Qe.options)&&se("error",`${Qe.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ne){}return new Ce(Qe)}const se=(at,...He)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[at](...He)},ke={provide:Ce,useFactory:te,deps:[oe,g.R0b,[new g.FiY,ce]]};let qe=(()=>{class at{constructor(Mt){S.Z.registerVersion("angularfire",U.q4.full,"core"),S.Z.registerVersion("angularfire",U.q4.full,"app-compat"),S.Z.registerVersion("angular",g.q4F.full,Mt.toString())}static initializeApp(Mt,ze){return{ngModule:at,providers:[{provide:oe,useValue:Mt},{provide:ce,useValue:ze}]}}}return at.\u0275fac=function(Mt){return new(Mt||at)(g.LFG(g.Lbi))},at.\u0275mod=g.oAB({type:at}),at.\u0275inj=g.cJS({providers:[ke]}),at})();function it(at,He,Mt,ze,Be){const[,Ge,Qe]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===at)||[];if(Ge)return function ut(at,He){try{return at.toString()===He.toString()}catch(Mt){return at===He}}(Be,Qe)||(et("error",`${He} was already initialized on the ${Mt} Firebase App with different settings.${Et?" You may need to reload as Firebase is not HMR aware.":""}`),et("warn",{is:Be,was:Qe})),Ge;{const Ne=ze();return globalThis.\u0275AngularfireInstanceCache.push([at,Ne,Be]),Ne}}const Et=!!Je.hot,et=(at,...He)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[at](...He)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},263:(Je,Te,b)=>{b.d(Te,{q4:()=>Zo,iC:()=>Oa,fc:()=>_d,HU:()=>cc,vb:()=>qa,JM:()=>Ma});var g=b(5e3),S=b(259),U=b(5861),re=b(9681),de=b(2090),Ie=b(4859),Ce=b(1877),oe=b(8766);const ce="@firebase/installations",ke="w:0.6.4",qe="FIS_v2",He=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Mt(F){return F instanceof de.ZR&&F.code.includes("request-failed")}function ze({projectId:F}){return`https://firebaseinstallations.googleapis.com/v1/projects/${F}/installations`}function Be(F){return{token:F.token,requestStatus:2,expiresIn:tn(F.expiresIn),creationTime:Date.now()}}function Ge(F,Z){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,U.Z)(function*(F,Z){const je=(yield Z.json()).error;return He.create("request-failed",{requestName:F,serverCode:je.code,serverMessage:je.message,serverStatus:je.status})})).apply(this,arguments)}function Ne({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function gt(F,{refreshToken:Z}){const me=Ne(F);return me.append("Authorization",function vn(F){return`${qe} ${F}`}(Z)),me}function vt(F){return sn.apply(this,arguments)}function sn(){return(sn=(0,U.Z)(function*(F){const Z=yield F();return Z.status>=500&&Z.status<600?F():Z})).apply(this,arguments)}function tn(F){return Number(F.replace("s","000"))}function xn(F,Z){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,U.Z)(function*({appConfig:F,heartbeatServiceProvider:Z},{fid:me}){const je=ze(F),Ct=Ne(F),$t=Z.getImmediate({optional:!0});if($t){const pr=yield $t.getHeartbeatsHeader();pr&&Ct.append("x-firebase-client",pr)}const cr={method:"POST",headers:Ct,body:JSON.stringify({fid:me,authVersion:qe,appId:F.appId,sdkVersion:ke})},Er=yield vt(()=>fetch(je,cr));if(Er.ok){const pr=yield Er.json();return{fid:pr.fid||me,registrationStatus:2,refreshToken:pr.refreshToken,authToken:Be(pr.authToken)}}throw yield Ge("Create Installation",Er)})).apply(this,arguments)}function ft(F){return new Promise(Z=>{setTimeout(Z,F)})}const Gt=/^[cdef][\w-]{21}$/;function Rt(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const me=function Yt(F){return function St(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return Gt.test(me)?me:""}catch(F){return""}}function Nn(F){return`${F.appName}!${F.appId}`}const jn=new Map;function nn(F,Z){const me=Nn(F);hn(me,Z),function xt(F,Z){const me=function fn(){return!rn&&"BroadcastChannel"in self&&(rn=new BroadcastChannel("[Firebase] FID Change"),rn.onmessage=F=>{hn(F.data.key,F.data.fid)}),rn}();me&&me.postMessage({key:F,fid:Z}),function Fn(){0===jn.size&&rn&&(rn.close(),rn=null)}()}(me,Z)}function hn(F,Z){const me=jn.get(F);if(me)for(const je of me)je(Z)}let rn=null;const ur="firebase-installations-store";let Dr=null;function mn(){return Dr||(Dr=(0,oe.X3)("firebase-installations-database",1,{upgrade:(F,Z)=>{0===Z&&F.createObjectStore(ur)}})),Dr}function Tn(F,Z){return De.apply(this,arguments)}function De(){return(De=(0,U.Z)(function*(F,Z){const me=Nn(F),Ct=(yield mn()).transaction(ur,"readwrite"),$t=Ct.objectStore(ur),dn=yield $t.get(me);return yield $t.put(Z,me),yield Ct.done,(!dn||dn.fid!==Z.fid)&&nn(F,Z.fid),Z})).apply(this,arguments)}function qn(F){return rt.apply(this,arguments)}function rt(){return(rt=(0,U.Z)(function*(F){const Z=Nn(F),je=(yield mn()).transaction(ur,"readwrite");yield je.objectStore(ur).delete(Z),yield je.done})).apply(this,arguments)}function Y(F,Z){return J.apply(this,arguments)}function J(){return(J=(0,U.Z)(function*(F,Z){const me=Nn(F),Ct=(yield mn()).transaction(ur,"readwrite"),$t=Ct.objectStore(ur),dn=yield $t.get(me),cr=Z(dn);return void 0===cr?yield $t.delete(me):yield $t.put(cr,me),yield Ct.done,cr&&(!dn||dn.fid!==cr.fid)&&nn(F,cr.fid),cr})).apply(this,arguments)}function Re(F){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,U.Z)(function*(F){let Z;const me=yield Y(F.appConfig,je=>{const Ct=yt(je),$t=Ft(F,Ct);return Z=$t.registrationPromise,$t.installationEntry});return""===me.fid?{installationEntry:yield Z}:{installationEntry:me,registrationPromise:Z}})).apply(this,arguments)}function yt(F){return gr(F||{fid:Rt(),registrationStatus:0})}function Ft(F,Z){if(0===Z.registrationStatus){if(!navigator.onLine)return{installationEntry:Z,registrationPromise:Promise.reject(He.create("app-offline"))};const me={fid:Z.fid,registrationStatus:1,registrationTime:Date.now()},je=function Zt(F,Z){return zt.apply(this,arguments)}(F,me);return{installationEntry:me,registrationPromise:je}}return 1===Z.registrationStatus?{installationEntry:Z,registrationPromise:Mn(F)}:{installationEntry:Z}}function zt(){return(zt=(0,U.Z)(function*(F,Z){try{const me=yield xn(F,Z);return Tn(F.appConfig,me)}catch(me){throw Mt(me)&&409===me.customData.serverCode?yield qn(F.appConfig):yield Tn(F.appConfig,{fid:Z.fid,registrationStatus:0}),me}})).apply(this,arguments)}function Mn(F){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,U.Z)(function*(F){let Z=yield Bn(F.appConfig);for(;1===Z.registrationStatus;)yield ft(100),Z=yield Bn(F.appConfig);if(0===Z.registrationStatus){const{installationEntry:me,registrationPromise:je}=yield Re(F);return je||me}return Z})).apply(this,arguments)}function Bn(F){return Y(F,Z=>{if(!Z)throw He.create("installation-not-found");return gr(Z)})}function gr(F){return function lr(F){return 1===F.registrationStatus&&F.registrationTime+1e4<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function tr(F,Z){return pt.apply(this,arguments)}function pt(){return(pt=(0,U.Z)(function*({appConfig:F,heartbeatServiceProvider:Z},me){const je=dt(F,me),Ct=gt(F,me),$t=Z.getImmediate({optional:!0});if($t){const pr=yield $t.getHeartbeatsHeader();pr&&Ct.append("x-firebase-client",pr)}const cr={method:"POST",headers:Ct,body:JSON.stringify({installation:{sdkVersion:ke,appId:F.appId}})},Er=yield vt(()=>fetch(je,cr));if(Er.ok)return Be(yield Er.json());throw yield Ge("Generate Auth Token",Er)})).apply(this,arguments)}function dt(F,{fid:Z}){return`${ze(F)}/${Z}/authTokens:generate`}function Ue(F){return It.apply(this,arguments)}function It(){return(It=(0,U.Z)(function*(F,Z=!1){let me;const je=yield Y(F.appConfig,$t=>{if(!Fe($t))throw He.create("not-registered");const dn=$t.authToken;if(!Z&&ht(dn))return $t;if(1===dn.requestStatus)return me=he(F,Z),$t;{if(!navigator.onLine)throw He.create("app-offline");const cr=xe($t);return me=q(F,cr),cr}});return me?yield me:je.authToken})).apply(this,arguments)}function he(F,Z){return N.apply(this,arguments)}function N(){return(N=(0,U.Z)(function*(F,Z){let me=yield L(F.appConfig);for(;1===me.authToken.requestStatus;)yield ft(100),me=yield L(F.appConfig);const je=me.authToken;return 0===je.requestStatus?Ue(F,Z):je})).apply(this,arguments)}function L(F){return Y(F,Z=>{if(!Fe(Z))throw He.create("not-registered");return function ue(F){return 1===F.requestStatus&&F.requestTime+1e4<Date.now()}(Z.authToken)?Object.assign(Object.assign({},Z),{authToken:{requestStatus:0}}):Z})}function q(F,Z){return X.apply(this,arguments)}function X(){return(X=(0,U.Z)(function*(F,Z){try{const me=yield tr(F,Z),je=Object.assign(Object.assign({},Z),{authToken:me});return yield Tn(F.appConfig,je),me}catch(me){if(!Mt(me)||401!==me.customData.serverCode&&404!==me.customData.serverCode){const je=Object.assign(Object.assign({},Z),{authToken:{requestStatus:0}});yield Tn(F.appConfig,je)}else yield qn(F.appConfig);throw me}})).apply(this,arguments)}function Fe(F){return void 0!==F&&2===F.registrationStatus}function ht(F){return 2===F.requestStatus&&!function we(F){const Z=Date.now();return Z<F.creationTime||F.creationTime+F.expiresIn<Z+36e5}(F)}function xe(F){const Z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:Z})}function $(){return($=(0,U.Z)(function*(F){const Z=F,{installationEntry:me,registrationPromise:je}=yield Re(Z);return je?je.catch(console.error):Ue(Z).catch(console.error),me.fid})).apply(this,arguments)}function _e(){return(_e=(0,U.Z)(function*(F,Z=!1){const me=F;return yield Ve(me),(yield Ue(me,Z)).token})).apply(this,arguments)}function Ve(F){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,U.Z)(function*(F){const{registrationPromise:Z}=yield Re(F);Z&&(yield Z)})).apply(this,arguments)}function Hi(F){return He.create("missing-app-config-values",{valueName:F})}const Ki="installations",mr=F=>{const Z=F.getProvider("app").getImmediate(),me=function Ur(F){if(!F||!F.options)throw Hi("App Configuration");if(!F.name)throw Hi("App Name");const Z=["projectId","apiKey","appId"];for(const me of Z)if(!F.options[me])throw Hi(me);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(Z);return{app:Z,appConfig:me,heartbeatServiceProvider:(0,re._getProvider)(Z,"heartbeat"),_delete:()=>Promise.resolve()}},Kr=F=>{const Z=F.getProvider("app").getImmediate(),me=(0,re._getProvider)(Z,Ki).getImmediate();return{getId:()=>function be(F){return $.apply(this,arguments)}(me),getToken:Ct=>function ae(F){return _e.apply(this,arguments)}(me,Ct)}};(function wi(){(0,re._registerComponent)(new Ie.wA(Ki,mr,"PUBLIC")),(0,re._registerComponent)(new Ie.wA("installations-internal",Kr,"PRIVATE"))})(),(0,re.registerVersion)(ce,"0.6.4"),(0,re.registerVersion)(ce,"0.6.4","esm2017");const $i="@firebase/remote-config",li=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qs{constructor(Z,me,je,Ct){this.client=Z,this.storage=me,this.storageCache=je,this.logger=Ct}isCachedDataFresh(Z,me){if(!me)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const je=Date.now()-me,Ct=je<=Z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${je}. Cache max age millis (minimumFetchIntervalMillis setting): ${Z}. Is cache hit: ${Ct}.`),Ct}fetch(Z){var me=this;return(0,U.Z)(function*(){const[je,Ct]=yield Promise.all([me.storage.getLastSuccessfulFetchTimestampMillis(),me.storage.getLastSuccessfulFetchResponse()]);if(Ct&&me.isCachedDataFresh(Z.cacheMaxAgeMillis,je))return Ct;Z.eTag=Ct&&Ct.eTag;const $t=yield me.client.fetch(Z),dn=[me.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===$t.status&&dn.push(me.storage.setLastSuccessfulFetchResponse($t)),yield Promise.all(dn),$t})()}}function xs(F=navigator){return F.languages&&F.languages[0]||F.language}class Ii{constructor(Z,me,je,Ct,$t,dn){this.firebaseInstallations=Z,this.sdkVersion=me,this.namespace=je,this.projectId=Ct,this.apiKey=$t,this.appId=dn}fetch(Z){var me=this;return(0,U.Z)(function*(){const[je,Ct]=yield Promise.all([me.firebaseInstallations.getId(),me.firebaseInstallations.getToken()]),dn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${me.projectId}/namespaces/${me.namespace}:fetch?key=${me.apiKey}`,cr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Z.eTag||"*"},Er={sdk_version:me.sdkVersion,app_instance_id:je,app_instance_id_token:Ct,app_id:me.appId,language_code:xs()},pr={method:"POST",headers:cr,body:JSON.stringify(Er)},ei=fetch(dn,pr),$r=new Promise((ho,ua)=>{Z.signal.addEventListener(()=>{const El=new Error("The operation was aborted.");El.name="AbortError",ua(El)})});let Cs;try{yield Promise.race([ei,$r]),Cs=yield ei}catch(ho){let ua="fetch-client-network";throw"AbortError"===(null==ho?void 0:ho.name)&&(ua="fetch-timeout"),li.create(ua,{originalErrorMessage:null==ho?void 0:ho.message})}let _s=Cs.status;const Ho=Cs.headers.get("ETag")||void 0;let ba,wa;if(200===Cs.status){let ho;try{ho=yield Cs.json()}catch(ua){throw li.create("fetch-client-parse",{originalErrorMessage:null==ua?void 0:ua.message})}ba=ho.entries,wa=ho.state}if("INSTANCE_STATE_UNSPECIFIED"===wa?_s=500:"NO_CHANGE"===wa?_s=304:("NO_TEMPLATE"===wa||"EMPTY_CONFIG"===wa)&&(ba={}),304!==_s&&200!==_s)throw li.create("fetch-status",{httpStatus:_s});return{status:_s,eTag:Ho,config:ba}})()}}class mt{constructor(Z,me){this.client=Z,this.storage=me}fetch(Z){var me=this;return(0,U.Z)(function*(){const je=(yield me.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return me.attemptFetch(Z,je)})()}attemptFetch(Z,{throttleEndTimeMillis:me,backoffCount:je}){var Ct=this;return(0,U.Z)(function*(){yield function Ts(F,Z){return new Promise((me,je)=>{const Ct=Math.max(Z-Date.now(),0),$t=setTimeout(me,Ct);F.addEventListener(()=>{clearTimeout($t),je(li.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}(Z.signal,me);try{const $t=yield Ct.client.fetch(Z);return yield Ct.storage.deleteThrottleMetadata(),$t}catch($t){if(!function wt(F){if(!(F instanceof de.ZR&&F.customData))return!1;const Z=Number(F.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}($t))throw $t;const dn={throttleEndTimeMillis:Date.now()+(0,de.$s)(je),backoffCount:je+1};return yield Ct.storage.setThrottleMetadata(dn),Ct.attemptFetch(Z,dn)}})()}}class kn{constructor(Z,me,je,Ct,$t){this.app=Z,this._client=me,this._storageCache=je,this._storage=Ct,this._logger=$t,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yn(F,Z){const me=F.target.error||void 0;return li.create(Z,{originalErrorMessage:me&&(null==me?void 0:me.message)})}const vr="app_namespace_store";class ks{constructor(Z,me,je,Ct=function Ps(){return new Promise((F,Z)=>{try{const me=indexedDB.open("firebase_remote_config",1);me.onerror=je=>{Z(Yn(je,"storage-open"))},me.onsuccess=je=>{F(je.target.result)},me.onupgradeneeded=je=>{0===je.oldVersion&&je.target.result.createObjectStore(vr,{keyPath:"compositeKey"})}}catch(me){Z(li.create("storage-open",{originalErrorMessage:null==me?void 0:me.message}))}})}()){this.appId=Z,this.appName=me,this.namespace=je,this.openDbPromise=Ct}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Z){return this.set("last_fetch_status",Z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Z){return this.set("last_successful_fetch_timestamp_millis",Z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Z){return this.set("last_successful_fetch_response",Z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Z){return this.set("active_config",Z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Z){return this.set("active_config_etag",Z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Z){return this.set("throttle_metadata",Z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Z){var me=this;return(0,U.Z)(function*(){const je=yield me.openDbPromise;return new Promise((Ct,$t)=>{const cr=je.transaction([vr],"readonly").objectStore(vr),Er=me.createCompositeKey(Z);try{const pr=cr.get(Er);pr.onerror=ei=>{$t(Yn(ei,"storage-get"))},pr.onsuccess=ei=>{const $r=ei.target.result;Ct($r?$r.value:void 0)}}catch(pr){$t(li.create("storage-get",{originalErrorMessage:null==pr?void 0:pr.message}))}})})()}set(Z,me){var je=this;return(0,U.Z)(function*(){const Ct=yield je.openDbPromise;return new Promise(($t,dn)=>{const Er=Ct.transaction([vr],"readwrite").objectStore(vr),pr=je.createCompositeKey(Z);try{const ei=Er.put({compositeKey:pr,value:me});ei.onerror=$r=>{dn(Yn($r,"storage-set"))},ei.onsuccess=()=>{$t()}}catch(ei){dn(li.create("storage-set",{originalErrorMessage:null==ei?void 0:ei.message}))}})})()}delete(Z){var me=this;return(0,U.Z)(function*(){const je=yield me.openDbPromise;return new Promise((Ct,$t)=>{const cr=je.transaction([vr],"readwrite").objectStore(vr),Er=me.createCompositeKey(Z);try{const pr=cr.delete(Er);pr.onerror=ei=>{$t(Yn(ei,"storage-delete"))},pr.onsuccess=()=>{Ct()}}catch(pr){$t(li.create("storage-delete",{originalErrorMessage:null==pr?void 0:pr.message}))}})})()}createCompositeKey(Z){return[this.appId,this.appName,this.namespace,Z].join()}}class Zi{constructor(Z){this.storage=Z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Z=this;return(0,U.Z)(function*(){const me=Z.storage.getLastFetchStatus(),je=Z.storage.getLastSuccessfulFetchTimestampMillis(),Ct=Z.storage.getActiveConfig(),$t=yield me;$t&&(Z.lastFetchStatus=$t);const dn=yield je;dn&&(Z.lastSuccessfulFetchTimestampMillis=dn);const cr=yield Ct;cr&&(Z.activeConfig=cr)})()}setLastFetchStatus(Z){return this.lastFetchStatus=Z,this.storage.setLastFetchStatus(Z)}setLastSuccessfulFetchTimestampMillis(Z){return this.lastSuccessfulFetchTimestampMillis=Z,this.storage.setLastSuccessfulFetchTimestampMillis(Z)}setActiveConfig(Z){return this.activeConfig=Z,this.storage.setActiveConfig(Z)}}function oa(){return rs.apply(this,arguments)}function rs(){return(rs=(0,U.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(F){return!1}})).apply(this,arguments)}!function ma(){(0,re._registerComponent)(new Ie.wA("remote-config",function F(Z,{instanceIdentifier:me}){const je=Z.getProvider("app").getImmediate(),Ct=Z.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw li.create("registration-window");if(!(0,de.hl)())throw li.create("indexed-db-unavailable");const{projectId:$t,apiKey:dn,appId:cr}=je.options;if(!$t)throw li.create("registration-project-id");if(!dn)throw li.create("registration-api-key");if(!cr)throw li.create("registration-app-id");const Er=new ks(cr,je.name,me=me||"firebase"),pr=new Zi(Er),ei=new Ce.Yd($i);ei.logLevel=Ce.in.ERROR;const $r=new Ii(Ct,re.SDK_VERSION,me,$t,dn,cr),Cs=new mt($r,Er),_s=new Qs(Cs,Er,pr,ei),Ho=new kn(je,_s,pr,Er,ei);return function ct(F){const Z=(0,de.m9)(F);Z._initializePromise||(Z._initializePromise=Z._storageCache.loadFromStorage().then(()=>{Z._isInitializationComplete=!0}))}(Ho),Ho},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)($i,"0.4.4"),(0,re.registerVersion)($i,"0.4.4","esm2017")}();const js="/firebase-messaging-sw.js",Xr="/firebase-cloud-messaging-push-scope",Ns="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",cs="google.c.a.c_id",mo="google.c.a.c_l",Fo="google.c.a.ts",Fs="google.c.a.e";var Xs=(()=>{return(F=Xs||(Xs={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Xs;var F})();function Is(F){const Z=new Uint8Array(F);return btoa(String.fromCharCode(...Z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oo(F){const me=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),je=atob(me),Ct=new Uint8Array(je.length);for(let $t=0;$t<je.length;++$t)Ct[$t]=je.charCodeAt($t);return Ct}const Ci="fcm_token_details_db",Co="fcm_token_object_Store";function fr(F){return Br.apply(this,arguments)}function Br(){return Br=(0,U.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map($t=>$t.name).includes(Ci))return null;let Z=null;return(yield(0,oe.X3)(Ci,5,{upgrade:(je=(0,U.Z)(function*(Ct,$t,dn,cr){var Er;if($t<2||!Ct.objectStoreNames.contains(Co))return;const pr=cr.objectStore(Co),ei=yield pr.index("fcmSenderId").get(F);if(yield pr.clear(),ei)if(2===$t){const $r=ei;if(!$r.auth||!$r.p256dh||!$r.endpoint)return;Z={token:$r.fcmToken,createTime:null!==(Er=$r.createTime)&&void 0!==Er?Er:Date.now(),subscriptionOptions:{auth:$r.auth,p256dh:$r.p256dh,endpoint:$r.endpoint,swScope:$r.swScope,vapidKey:"string"==typeof $r.vapidKey?$r.vapidKey:Is($r.vapidKey)}}}else if(3===$t){const $r=ei;Z={token:$r.fcmToken,createTime:$r.createTime,subscriptionOptions:{auth:Is($r.auth),p256dh:Is($r.p256dh),endpoint:$r.endpoint,swScope:$r.swScope,vapidKey:Is($r.vapidKey)}}}else if(4===$t){const $r=ei;Z={token:$r.fcmToken,createTime:$r.createTime,subscriptionOptions:{auth:Is($r.auth),p256dh:Is($r.p256dh),endpoint:$r.endpoint,swScope:$r.swScope,vapidKey:Is($r.vapidKey)}}}}),function($t,dn,cr,Er){return je.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Ci),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),Sr(Z)?Z:null;var je}),Br.apply(this,arguments)}function Sr(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:Z}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof Z.auth&&Z.auth.length>0&&"string"==typeof Z.p256dh&&Z.p256dh.length>0&&"string"==typeof Z.endpoint&&Z.endpoint.length>0&&"string"==typeof Z.swScope&&Z.swScope.length>0&&"string"==typeof Z.vapidKey&&Z.vapidKey.length>0}const As="firebase-messaging-store";let Mo=null;function gi(){return Mo||(Mo=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(F,Z)=>{0===Z&&F.createObjectStore(As)}})),Mo}function H(F){return fe.apply(this,arguments)}function fe(){return(fe=(0,U.Z)(function*(F){const Z=Kt(F),je=yield(yield gi()).transaction(As).objectStore(As).get(Z);if(je)return je;{const Ct=yield fr(F.appConfig.senderId);if(Ct)return yield V(F,Ct),Ct}})).apply(this,arguments)}function V(F,Z){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,U.Z)(function*(F,Z){const me=Kt(F),Ct=(yield gi()).transaction(As,"readwrite");return yield Ct.objectStore(As).put(Z,me),yield Ct.done,Z})).apply(this,arguments)}function ot(F){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,U.Z)(function*(F){const Z=Kt(F),je=(yield gi()).transaction(As,"readwrite");yield je.objectStore(As).delete(Z),yield je.done})).apply(this,arguments)}function Kt({appConfig:F}){return F.appId}const Pr=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ri(F,Z){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,U.Z)(function*(F,Z){const me=yield Hr(F),je=Js(Z),Ct={method:"POST",headers:me,body:JSON.stringify(je)};let $t;try{$t=yield(yield fetch(Hs(F.appConfig),Ct)).json()}catch(dn){throw Pr.create("token-subscribe-failed",{errorInfo:null==dn?void 0:dn.toString()})}if($t.error)throw Pr.create("token-subscribe-failed",{errorInfo:$t.error.message});if(!$t.token)throw Pr.create("token-subscribe-no-token");return $t.token})).apply(this,arguments)}function Vr(F,Z){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,U.Z)(function*(F,Z){const me=yield Hr(F),je=Js(Z.subscriptionOptions),Ct={method:"PATCH",headers:me,body:JSON.stringify(je)};let $t;try{$t=yield(yield fetch(`${Hs(F.appConfig)}/${Z.token}`,Ct)).json()}catch(dn){throw Pr.create("token-update-failed",{errorInfo:null==dn?void 0:dn.toString()})}if($t.error)throw Pr.create("token-update-failed",{errorInfo:$t.error.message});if(!$t.token)throw Pr.create("token-update-no-token");return $t.token})).apply(this,arguments)}function qr(F,Z){return mi.apply(this,arguments)}function mi(){return(mi=(0,U.Z)(function*(F,Z){const je={method:"DELETE",headers:yield Hr(F)};try{const $t=yield(yield fetch(`${Hs(F.appConfig)}/${Z}`,je)).json();if($t.error)throw Pr.create("token-unsubscribe-failed",{errorInfo:$t.error.message})}catch(Ct){throw Pr.create("token-unsubscribe-failed",{errorInfo:null==Ct?void 0:Ct.toString()})}})).apply(this,arguments)}function Hs({projectId:F}){return`https://fcmregistrations.googleapis.com/v1/projects/${F}/registrations`}function Hr(F){return dr.apply(this,arguments)}function dr(){return(dr=(0,U.Z)(function*({appConfig:F,installations:Z}){const me=yield Z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${me}`})})).apply(this,arguments)}function Js({p256dh:F,auth:Z,endpoint:me,vapidKey:je}){const Ct={web:{endpoint:me,auth:Z,p256dh:F}};return je!==Ns&&(Ct.web.applicationPubKey=je),Ct}const eo=6048e5;function $s(F){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,U.Z)(function*(F){const Z=yield Se(F.swRegistration,F.vapidKey),me={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:Z.endpoint,auth:Is(Z.getKey("auth")),p256dh:Is(Z.getKey("p256dh"))},je=yield H(F.firebaseDependencies);if(je){if(bt(je.subscriptionOptions,me))return Date.now()>=je.createTime+eo?ao(F,{token:je.token,createTime:Date.now(),subscriptionOptions:me}):je.token;try{yield qr(F.firebaseDependencies,je.token)}catch(Ct){console.warn(Ct)}return G(F.firebaseDependencies,me)}return G(F.firebaseDependencies,me)})).apply(this,arguments)}function To(F){return Do.apply(this,arguments)}function Do(){return(Do=(0,U.Z)(function*(F){const Z=yield H(F.firebaseDependencies);Z&&(yield qr(F.firebaseDependencies,Z.token),yield ot(F.firebaseDependencies));const me=yield F.swRegistration.pushManager.getSubscription();return!me||me.unsubscribe()})).apply(this,arguments)}function ao(F,Z){return an.apply(this,arguments)}function an(){return(an=(0,U.Z)(function*(F,Z){try{const me=yield Vr(F.firebaseDependencies,Z),je=Object.assign(Object.assign({},Z),{token:me,createTime:Date.now()});return yield V(F.firebaseDependencies,je),me}catch(me){throw yield To(F),me}})).apply(this,arguments)}function G(F,Z){return z.apply(this,arguments)}function z(){return(z=(0,U.Z)(function*(F,Z){const je={token:yield ri(F,Z),createTime:Date.now(),subscriptionOptions:Z};return yield V(F,je),je.token})).apply(this,arguments)}function Se(F,Z){return We.apply(this,arguments)}function We(){return(We=(0,U.Z)(function*(F,Z){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:oo(Z)})})).apply(this,arguments)}function bt(F,Z){return Z.vapidKey===F.vapidKey&&Z.endpoint===F.endpoint&&Z.auth===F.auth&&Z.p256dh===F.p256dh}function jt(F){const Z={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function yn(F,Z){if(!Z.notification)return;F.notification={};const me=Z.notification.title;me&&(F.notification.title=me);const je=Z.notification.body;je&&(F.notification.body=je);const Ct=Z.notification.image;Ct&&(F.notification.image=Ct);const $t=Z.notification.icon;$t&&(F.notification.icon=$t)}(Z,F),function rr(F,Z){!Z.data||(F.data=Z.data)}(Z,F),function Qn(F,Z){var me,je,Ct,$t,dn;if(!Z.fcmOptions&&!(null===(me=Z.notification)||void 0===me?void 0:me.click_action))return;F.fcmOptions={};const cr=null!==(Ct=null===(je=Z.fcmOptions)||void 0===je?void 0:je.link)&&void 0!==Ct?Ct:null===($t=Z.notification)||void 0===$t?void 0:$t.click_action;cr&&(F.fcmOptions.link=cr);const Er=null===(dn=Z.fcmOptions)||void 0===dn?void 0:dn.analytics_label;Er&&(F.fcmOptions.analyticsLabel=Er)}(Z,F),Z}function Rr(F){return"object"==typeof F&&!!F&&cs in F}function zr(F,Z){const me=[];for(let je=0;je<F.length;je++)me.push(F.charAt(je)),je<Z.length&&me.push(Z.charAt(je));return me.join("")}function jr(F){return Pr.create("missing-app-config-values",{valueName:F})}zr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ii{constructor(Z,me,je){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ct=function hi(F){if(!F||!F.options)throw jr("App Configuration Object");if(!F.name)throw jr("App Name");const Z=["projectId","apiKey","appId","messagingSenderId"],{options:me}=F;for(const je of Z)if(!me[je])throw jr(je);return{appName:F.name,projectId:me.projectId,apiKey:me.apiKey,appId:me.appId,senderId:me.messagingSenderId}}(Z);this.firebaseDependencies={app:Z,appConfig:Ct,installations:me,analyticsProvider:je}}_delete(){return Promise.resolve()}}function Li(F){return ne.apply(this,arguments)}function ne(){return(ne=(0,U.Z)(function*(F){try{F.swRegistration=yield navigator.serviceWorker.register(js,{scope:Xr}),F.swRegistration.update().catch(()=>{})}catch(Z){throw Pr.create("failed-service-worker-registration",{browserErrorMessage:null==Z?void 0:Z.message})}})).apply(this,arguments)}function E(F,Z){return C.apply(this,arguments)}function C(){return(C=(0,U.Z)(function*(F,Z){if(!Z&&!F.swRegistration&&(yield Li(F)),Z||!F.swRegistration){if(!(Z instanceof ServiceWorkerRegistration))throw Pr.create("invalid-sw-registration");F.swRegistration=Z}})).apply(this,arguments)}function B(F,Z){return le.apply(this,arguments)}function le(){return(le=(0,U.Z)(function*(F,Z){Z?F.vapidKey=Z:F.vapidKey||(F.vapidKey=Ns)})).apply(this,arguments)}function Ye(){return(Ye=(0,U.Z)(function*(F,Z){if(!navigator)throw Pr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pr.create("permission-blocked");return yield B(F,null==Z?void 0:Z.vapidKey),yield E(F,null==Z?void 0:Z.serviceWorkerRegistration),$s(F)})).apply(this,arguments)}function nt(F,Z,me){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,U.Z)(function*(F,Z,me){const je=Qt(Z);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(je,{message_id:me[cs],message_name:me[mo],message_time:me[Fo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Qt(F){switch(F){case Xs.NOTIFICATION_CLICKED:return"notification_open";case Xs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ir(){return(ir=(0,U.Z)(function*(F,Z){const me=Z.data;if(!me.isFirebaseMessaging)return;F.onMessageHandler&&me.messageType===Xs.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(jt(me)):F.onMessageHandler.next(jt(me)));const je=me.data;Rr(je)&&"1"===je[Fs]&&(yield nt(F,me.messageType,je))})).apply(this,arguments)}const or="@firebase/messaging",Hn=F=>{const Z=new ii(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",me=>function cn(F,Z){return ir.apply(this,arguments)}(Z,me)),Z},Mr=F=>{const Z=F.getProvider("messaging").getImmediate();return{getToken:je=>function Oe(F,Z){return Ye.apply(this,arguments)}(Z,je)}};function Bi(){return qi.apply(this,arguments)}function qi(){return(qi=(0,U.Z)(function*(){try{yield(0,de.eu)()}catch(F){return!1}return"undefined"!=typeof window&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Di(){(0,re._registerComponent)(new Ie.wA("messaging",Hn,"PUBLIC")),(0,re._registerComponent)(new Ie.wA("messaging-internal",Mr,"PRIVATE")),(0,re.registerVersion)(or,"0.12.4"),(0,re.registerVersion)(or,"0.12.4","esm2017")}();const lo="analytics",Gs="firebase_id",Cn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Un="https://www.googletagmanager.com/gtag/js",Gn=new Ce.Yd("@firebase/analytics");function br(F){return Promise.all(F.map(Z=>Z.catch(me=>me)))}function En(F,Z){const me=document.createElement("script");me.src=`${Un}?l=${F}&id=${Z}`,me.async=!0,document.head.appendChild(me)}function zs(F,Z,me,je,Ct,$t){return On.apply(this,arguments)}function On(){return(On=(0,U.Z)(function*(F,Z,me,je,Ct,$t){const dn=je[Ct];try{if(dn)yield Z[dn];else{const Er=(yield br(me)).find(pr=>pr.measurementId===Ct);Er&&(yield Z[Er.appId])}}catch(cr){Gn.error(cr)}F("config",Ct,$t)})).apply(this,arguments)}function Lt(F,Z,me,je,Ct){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,U.Z)(function*(F,Z,me,je,Ct){try{let $t=[];if(Ct&&Ct.send_to){let dn=Ct.send_to;Array.isArray(dn)||(dn=[dn]);const cr=yield br(me);for(const Er of dn){const pr=cr.find($r=>$r.measurementId===Er),ei=pr&&Z[pr.appId];if(!ei){$t=[];break}$t.push(ei)}}0===$t.length&&($t=Object.values(Z)),yield Promise.all($t),F("event",je,Ct||{})}catch($t){Gn.error($t)}})).apply(this,arguments)}function Ks(F){const Z=window.document.getElementsByTagName("script");for(const me of Object.values(Z))if(me.src&&me.src.includes(Un)&&me.src.includes(F))return me;return null}const Vi=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),co=new class Ga{constructor(Z={},me=1e3){this.throttleMetadata=Z,this.intervalMillis=me}getThrottleMetadata(Z){return this.throttleMetadata[Z]}setThrottleMetadata(Z,me){this.throttleMetadata[Z]=me}deleteThrottleMetadata(Z){delete this.throttleMetadata[Z]}};function zo(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function aa(F){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,U.Z)(function*(F){var Z;const{appId:me,apiKey:je}=F,Ct={method:"GET",headers:zo(je)},$t=Cn.replace("{app-id}",me),dn=yield fetch($t,Ct);if(200!==dn.status&&304!==dn.status){let cr="";try{const Er=yield dn.json();(null===(Z=Er.error)||void 0===Z?void 0:Z.message)&&(cr=Er.error.message)}catch(Er){}throw Vi.create("config-fetch-failed",{httpStatus:dn.status,responseMessage:cr})}return dn.json()})).apply(this,arguments)}function Or(F){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,U.Z)(function*(F,Z=co,me){const{appId:je,apiKey:Ct,measurementId:$t}=F.options;if(!je)throw Vi.create("no-app-id");if(!Ct){if($t)return{measurementId:$t,appId:je};throw Vi.create("no-api-key")}const dn=Z.getThrottleMetadata(je)||{backoffCount:0,throttleEndTimeMillis:Date.now()},cr=new j;return setTimeout((0,U.Z)(function*(){cr.abort()}),void 0!==me?me:6e4),xo({appId:je,apiKey:Ct,measurementId:$t},dn,cr,Z)})).apply(this,arguments)}function xo(F,Z,me){return x.apply(this,arguments)}function x(){return(x=(0,U.Z)(function*(F,{throttleEndTimeMillis:Z,backoffCount:me},je,Ct=co){var $t;const{appId:dn,measurementId:cr}=F;try{yield D(je,Z)}catch(Er){if(cr)return Gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${cr} provided in the "measurementId" field in the local Firebase config. [${null==Er?void 0:Er.message}]`),{appId:dn,measurementId:cr};throw Er}try{const Er=yield aa(F);return Ct.deleteThrottleMetadata(dn),Er}catch(Er){const pr=Er;if(!T(pr)){if(Ct.deleteThrottleMetadata(dn),cr)return Gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${cr} provided in the "measurementId" field in the local Firebase config. [${null==pr?void 0:pr.message}]`),{appId:dn,measurementId:cr};throw Er}const ei=503===Number(null===($t=null==pr?void 0:pr.customData)||void 0===$t?void 0:$t.httpStatus)?(0,de.$s)(me,Ct.intervalMillis,30):(0,de.$s)(me,Ct.intervalMillis),$r={throttleEndTimeMillis:Date.now()+ei,backoffCount:me+1};return Ct.setThrottleMetadata(dn,$r),Gn.debug(`Calling attemptFetch again in ${ei} millis`),xo(F,$r,je,Ct)}})).apply(this,arguments)}function D(F,Z){return new Promise((me,je)=>{const Ct=Math.max(Z-Date.now(),0),$t=setTimeout(me,Ct);F.addEventListener(()=>{clearTimeout($t),je(Vi.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}function T(F){if(!(F instanceof de.ZR&&F.customData))return!1;const Z=Number(F.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}class j{constructor(){this.listeners=[]}addEventListener(Z){this.listeners.push(Z)}abort(){this.listeners.forEach(Z=>Z())}}let Q,ds;function Ae(){return(Ae=(0,U.Z)(function*(F,Z,me,je,Ct){if(Ct&&Ct.global)F("event",me,je);else{const $t=yield Z;F("event",me,Object.assign(Object.assign({},je),{send_to:$t}))}})).apply(this,arguments)}function ms(F){ds=F}function Uo(F){Q=F}function Bo(){return ya.apply(this,arguments)}function ya(){return(ya=(0,U.Z)(function*(){if(!(0,de.hl)())return Gn.warn(Vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(F){return Gn.warn(Vi.create("indexeddb-unavailable",{errorInfo:null==F?void 0:F.toString()}).message),!1}return!0})).apply(this,arguments)}function Wa(){return(Wa=(0,U.Z)(function*(F,Z,me,je,Ct,$t,dn){var cr;const Er=Or(F);Er.then(_s=>{me[_s.measurementId]=_s.appId,F.options.measurementId&&_s.measurementId!==F.options.measurementId&&Gn.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${_s.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_s=>Gn.error(_s)),Z.push(Er);const pr=Bo().then(_s=>{if(_s)return je.getId()}),[ei,$r]=yield Promise.all([Er,pr]);Ks($t)||En($t,ei.measurementId),ds&&(Ct("consent","default",ds),ms(void 0)),Ct("js",new Date);const Cs=null!==(cr=null==dn?void 0:dn.config)&&void 0!==cr?cr:{};return Cs.origin="firebase",Cs.update=!0,null!=$r&&(Cs[Gs]=$r),Ct("config",ei.measurementId,Cs),Q&&(Ct("set",Q),Uo(void 0)),ei.measurementId})).apply(this,arguments)}class Vt{constructor(Z){this.app=Z}_delete(){return delete to[this.app.options.appId],Promise.resolve()}}let to={},Ls=[];const gl={};let za,Us,no="dataLayer",ml=!1;function Sc(F,Z,me){!function gd(){const F=[];if((0,de.ru)()&&F.push("This is a browser extension environment."),(0,de.zI)()||F.push("Cookies are not available."),F.length>0){const Z=F.map((je,Ct)=>`(${Ct+1}) ${je}`).join(" "),me=Vi.create("invalid-analytics-context",{errorInfo:Z});Gn.warn(me.message)}}();const je=F.options.appId;if(!je)throw Vi.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw Vi.create("no-api-key");Gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=to[je])throw Vi.create("already-exists",{id:je});if(!ml){!function Vn(F){let Z=[];Array.isArray(window[F])?Z=window[F]:window[F]=Z}(no);const{wrappedGtag:$t,gtagCore:dn}=function Sa(F,Z,me,je,Ct){let $t=function(...dn){window[je].push(arguments)};return window[Ct]&&"function"==typeof window[Ct]&&($t=window[Ct]),window[Ct]=function Xi(F,Z,me,je){function $t(){return($t=(0,U.Z)(function*(dn,cr,Er){try{"event"===dn?yield Lt(F,Z,me,cr,Er):"config"===dn?yield zs(F,Z,me,je,cr,Er):"consent"===dn?F("consent","update",Er):F("set",cr)}catch(pr){Gn.error(pr)}})).apply(this,arguments)}return function Ct(dn,cr,Er){return $t.apply(this,arguments)}}($t,F,Z,me),{gtagCore:$t,wrappedGtag:window[Ct]}}(to,Ls,gl,no,"gtag");Us=$t,za=dn,ml=!0}return to[je]=function _o(F,Z,me,je,Ct,$t,dn){return Wa.apply(this,arguments)}(F,Ls,gl,Z,za,no,me),new Vt(F)}function ru(){return iu.apply(this,arguments)}function iu(){return(iu=(0,U.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(F){return!1}})).apply(this,arguments)}const la="@firebase/analytics";!function ac(){(0,re._registerComponent)(new Ie.wA(lo,(Z,{options:me})=>Sc(Z.getProvider("app").getImmediate(),Z.getProvider("installations-internal").getImmediate(),me),"PUBLIC")),(0,re._registerComponent)(new Ie.wA("analytics-internal",function F(Z){try{const me=Z.getProvider(lo).getImmediate();return{logEvent:(je,Ct,$t)=>function Ra(F,Z,me,je){F=(0,de.m9)(F),function ve(F,Z,me,je,Ct){return Ae.apply(this,arguments)}(Us,to[F.app.options.appId],Z,me,je).catch(Ct=>Gn.error(Ct))}(me,je,Ct,$t)}}catch(me){throw Vi.create("interop-component-reg-failed",{reason:me})}},"PRIVATE")),(0,re.registerVersion)(la,"0.9.4"),(0,re.registerVersion)(la,"0.9.4","esm2017")}();var Rs=b(233),yo=b(4986),Ms=b(8505),es=b(5363),Ko=b(9468);const Zo=new g.GfV("7.5.0"),Ul="__angularfire_symbol__analyticsIsSupportedValue",Po="__angularfire_symbol__analyticsIsSupported",Vo="__angularfire_symbol__remoteConfigIsSupportedValue",Bl="__angularfire_symbol__remoteConfigIsSupported",va="__angularfire_symbol__messagingIsSupportedValue",uo="__angularfire_symbol__messagingIsSupported";function Ma(F,Z,me){if(Z){if(1===Z.length)return Z[0];const $t=Z.filter(dn=>dn.app===me);if(1===$t.length)return $t[0]}return me.container.getProvider(F).getImmediate({optional:!0})}globalThis[Po]||(globalThis[Po]=ru().then(F=>globalThis[Ul]=F).catch(()=>globalThis[Ul]=!1)),globalThis[uo]||(globalThis[uo]=Bi().then(F=>globalThis[va]=F).catch(()=>globalThis[va]=!1)),globalThis[Bl]||(globalThis[Bl]=oa().then(F=>globalThis[Vo]=F).catch(()=>globalThis[Vo]=!1));const qa=(F,Z)=>{const me=Z?[Z]:(0,S.C6)(),je=[];return me.forEach(Ct=>{Ct.container.getProvider(F).instances.forEach(dn=>{je.includes(dn)||je.push(dn)})}),je};function ca(){}class vl{constructor(Z,me=Rs.N){this.zone=Z,this.delegate=me}now(){return this.delegate.now()}schedule(Z,me,je){const Ct=this.zone;return this.delegate.schedule(function(dn){Ct.runGuarded(()=>{Z.apply(this,[dn])})},me,je)}}class lc{constructor(Z){this.zone=Z,this.task=null}call(Z,me){const je=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ca,{},ca,ca)),me.pipe((0,Ms.b)({next:je,complete:je,error:je})).subscribe(Z).add(je)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let cc=(()=>{class F{constructor(me){this.ngZone=me,this.outsideAngular=me.runOutsideAngular(()=>new vl(Zone.current)),this.insideAngular=me.run(()=>new vl(Zone.current,yo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(me){return new(me||F)(g.LFG(g.R0b))},F.\u0275prov=g.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function Yo(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function _d(F){return F.pipe((0,es.Q)(Yo().outsideAngular))}function Oa(F){return Yo(),function Qa(F){return function(me){return(me=me.lift(new lc(F.ngZone))).pipe((0,Ko.R)(F.outsideAngular),(0,es.Q)(F.insideAngular))}}(Yo())(F)}},5114:(Je,Te,b)=>{b.d(Te,{$:()=>Hs,A:()=>se,B:()=>it,G:()=>Kr,H:()=>Nr,J:()=>mt,L:()=>ht,M:()=>rs,N:()=>Ss,P:()=>Ul,Q:()=>cs,R:()=>Ll,T:()=>mo,U:()=>Ns,V:()=>Xs,W:()=>Is,X:()=>fr,Y:()=>zn,Z:()=>ri,_:()=>Vr,a:()=>Wo,a0:()=>$s,a1:()=>To,a2:()=>ao,a3:()=>G,a4:()=>Se,a5:()=>bt,a6:()=>yn,a7:()=>rr,a8:()=>Rr,a9:()=>zr,aA:()=>we,aB:()=>_s,aC:()=>jl,aD:()=>Ea,aE:()=>In,aI:()=>zo,aL:()=>Fs,aa:()=>Li,ab:()=>E,ac:()=>B,af:()=>nt,ag:()=>Qt,ah:()=>cn,ak:()=>As,al:()=>si,an:()=>Un,ao:()=>On,ap:()=>vt,aq:()=>Dn,ar:()=>Ve,as:()=>Mt,at:()=>Jo,au:()=>ts,av:()=>Ln,aw:()=>ze,ax:()=>Ne,ay:()=>ua,az:()=>tn,b:()=>Vi,c:()=>Vl,d:()=>vl,e:()=>qa,f:()=>me,g:()=>Er,h:()=>$t,i:()=>ya,j:()=>$r,k:()=>hc,l:()=>_l,m:()=>Ku,n:()=>ea,o:()=>oe,r:()=>Rs,s:()=>hs,u:()=>Ko});var g=b(5861),S=b(2090),U=b(9681),re=b(1877),de=b(655),Ie=b(4859);const oe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},se={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const it=function ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Et=new S.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),at=new re.Yd("@firebase/auth");function He(A,..._){at.logLevel<=re.in.ERROR&&at.error(`Auth (${U.SDK_VERSION}): ${A}`,..._)}function Mt(A,..._){throw Qe(A,..._)}function ze(A,..._){return Qe(A,..._)}function Be(A,_,y){const M=Object.assign(Object.assign({},ut()),{[_]:y});return new S.LL("auth","Firebase",M).create(_,{appName:A.name})}function Ge(A,_,y){if(!(_ instanceof y))throw y.name!==_.constructor.name&&Mt(A,"argument-error"),Be(A,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qe(A,..._){if("string"!=typeof A){const y=_[0],M=[..._.slice(1)];return M[0]&&(M[0].appName=A.name),A._errorFactory.create(y,...M)}return Et.create(A,..._)}function Ne(A,_,...y){if(!A)throw Qe(_,...y)}function gt(A){const _="INTERNAL ASSERTION FAILED: "+A;throw He(_),new Error(_)}function vt(A,_){A||gt(_)}const sn=new Map;function tn(A){vt(A instanceof Function,"Expected a class definition");let _=sn.get(A);return _?(vt(_ instanceof A,"Instance stored in cache mismatched with class"),_):(_=new A,sn.set(A,_),_)}function Ze(){var A;return"undefined"!=typeof self&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function ft(){return"http:"===St()||"https:"===St()}function St(){var A;return"undefined"!=typeof self&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class Rt{constructor(_,y){this.shortDelay=_,this.longDelay=y,vt(y>_,"Short delay should be less than long delay!"),this.isMobile=(0,S.uI)()||(0,S.b$)()}get(){return function Gt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,S.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Yt(A,_){vt(A.emulator,"Emulator should always be set here");const{url:y}=A.emulator;return _?`${y}${_.startsWith("/")?_.slice(1):_}`:y}class Nn{static initialize(_,y,M){this.fetchImpl=_,y&&(this.headersImpl=y),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Rt(3e4,6e4);function wn(A,_){return A.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:A.tenantId}):_}function Ot(A,_,y,M){return hn.apply(this,arguments)}function hn(){return(hn=(0,g.Z)(function*(A,_,y,M,ge={}){return xt(A,ge,(0,g.Z)(function*(){let Pe={},At={};M&&("GET"===_?At=M:Pe={body:JSON.stringify(M)});const bn=(0,S.xO)(Object.assign({key:A.config.apiKey},At)).slice(1),Xn=yield A._getAdditionalHeaders();return Xn["Content-Type"]="application/json",A.languageCode&&(Xn["X-Firebase-Locale"]=A.languageCode),Nn.fetch()(Sn(A,A.config.apiHost,y,bn),Object.assign({method:_,headers:Xn,referrerPolicy:"no-referrer"},Pe))}))})).apply(this,arguments)}function xt(A,_,y){return rn.apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(A,_,y){A._canInitEmulator=!1;const M=Object.assign(Object.assign({},jn),_);try{const ge=new Zn(A),Pe=yield Promise.race([y(),ge.promise]);ge.clearNetworkTimeout();const At=yield Pe.json();if("needConfirmation"in At)throw ur(A,"account-exists-with-different-credential",At);if(Pe.ok&&!("errorMessage"in At))return At;{const bn=Pe.ok?At.errorMessage:At.error.message,[Xn,yr]=bn.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xn)throw ur(A,"credential-already-in-use",At);if("EMAIL_EXISTS"===Xn)throw ur(A,"email-already-in-use",At);if("USER_DISABLED"===Xn)throw ur(A,"user-disabled",At);const oi=M[Xn]||Xn.toLowerCase().replace(/[_\s]+/g,"-");if(yr)throw Be(A,oi,yr);Mt(A,oi)}}catch(ge){if(ge instanceof S.ZR)throw ge;Mt(A,"internal-error",{message:String(ge)})}})).apply(this,arguments)}function fn(A,_,y,M){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,g.Z)(function*(A,_,y,M,ge={}){const Pe=yield Ot(A,_,y,M,ge);return"mfaPendingCredential"in Pe&&Mt(A,"multi-factor-auth-required",{_serverResponse:Pe}),Pe})).apply(this,arguments)}function Sn(A,_,y,M){const ge=`${_}${y}?${M}`;return A.config.emulator?Yt(A.config,ge):`${A.config.apiScheme}://${ge}`}class Zn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((y,M)=>{this.timer=setTimeout(()=>M(ze(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ur(A,_,y){const M={appName:A.name};y.email&&(M.email=y.email),y.phoneNumber&&(M.phoneNumber=y.phoneNumber);const ge=ze(A,_,M);return ge.customData._tokenResponse=y,ge}function mn(){return(mn=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function Tn(A,_){return De.apply(this,arguments)}function De(){return(De=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function qn(A,_){return rt.apply(this,arguments)}function rt(){return(rt=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function Y(A){if(A)try{const _=new Date(Number(A));if(!isNaN(_.getTime()))return _.toUTCString()}catch(_){}}function Xe(){return(Xe=(0,g.Z)(function*(A,_=!1){const y=(0,S.m9)(A),M=yield y.getIdToken(_),ge=Ft(M);Ne(ge&&ge.exp&&ge.auth_time&&ge.iat,y.auth,"internal-error");const Pe="object"==typeof ge.firebase?ge.firebase:void 0,At=null==Pe?void 0:Pe.sign_in_provider;return{claims:ge,token:M,authTime:Y(yt(ge.auth_time)),issuedAtTime:Y(yt(ge.iat)),expirationTime:Y(yt(ge.exp)),signInProvider:At||null,signInSecondFactor:(null==Pe?void 0:Pe.sign_in_second_factor)||null}})).apply(this,arguments)}function yt(A){return 1e3*Number(A)}function Ft(A){const[_,y,M]=A.split(".");if(void 0===_||void 0===y||void 0===M)return He("JWT malformed, contained fewer than 3 sections"),null;try{const ge=(0,S.tV)(y);return ge?JSON.parse(ge):(He("Failed to decode base64 JWT payload"),null)}catch(ge){return He("Caught error parsing JWT payload as JSON",null==ge?void 0:ge.toString()),null}}function zt(A,_){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(A,_,y=!1){if(y)return _;try{return yield _}catch(M){throw M instanceof S.ZR&&Kn(M)&&A.auth.currentUser===A&&(yield A.auth.signOut()),M}})).apply(this,arguments)}function Kn({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}class Bn{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var y;if(_){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const ge=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,ge)}}schedule(_=!1){var y=this;if(!this.isRunning)return;const M=this.getInterval(_);this.timerId=setTimeout((0,g.Z)(function*(){yield y.iteration()}),M)}iteration(){var _=this;return(0,g.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===(null==y?void 0:y.code)&&_.schedule(!0))}_.schedule()})()}}class gr{constructor(_,y){this.createdAt=_,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Y(this.lastLoginAt),this.creationTime=Y(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function lr(A){return tr.apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(A){var _;const y=A.auth,M=yield A.getIdToken(),ge=yield zt(A,qn(y,{idToken:M}));Ne(null==ge?void 0:ge.users.length,y,"internal-error");const Pe=ge.users[0];A._notifyReloadListener(Pe);const At=(null===(_=Pe.providerUserInfo)||void 0===_?void 0:_.length)?It(Pe.providerUserInfo):[],bn=Ue(A.providerData,At),oi=!!A.isAnonymous&&!(A.email&&Pe.passwordHash||(null==bn?void 0:bn.length)),ss={uid:Pe.localId,displayName:Pe.displayName||null,photoURL:Pe.photoUrl||null,email:Pe.email||null,emailVerified:Pe.emailVerified||!1,phoneNumber:Pe.phoneNumber||null,tenantId:Pe.tenantId||null,providerData:bn,metadata:new gr(Pe.createdAt,Pe.lastLoginAt),isAnonymous:oi};Object.assign(A,ss)})).apply(this,arguments)}function dt(){return(dt=(0,g.Z)(function*(A){const _=(0,S.m9)(A);yield lr(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function Ue(A,_){return[...A.filter(M=>!_.some(ge=>ge.providerId===M.providerId)),..._]}function It(A){return A.map(_=>{var{providerId:y}=_,M=(0,de._T)(_,["providerId"]);return{providerId:y,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}function N(){return(N=(0,g.Z)(function*(A,_){const y=yield xt(A,{},(0,g.Z)(function*(){const M=(0,S.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:ge,apiKey:Pe}=A.config,At=Sn(A,ge,"/v1/token",`key=${Pe}`),bn=yield A._getAdditionalHeaders();return bn["Content-Type"]="application/x-www-form-urlencoded",Nn.fetch()(At,{method:"POST",headers:bn,body:M})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class L{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){Ne(_.idToken,"internal-error"),Ne(void 0!==_.idToken,"internal-error"),Ne(void 0!==_.refreshToken,"internal-error");const y="expiresIn"in _&&void 0!==_.expiresIn?Number(_.expiresIn):function Zt(A){const _=Ft(A);return Ne(_,"internal-error"),Ne(void 0!==_.exp,"internal-error"),Ne(void 0!==_.iat,"internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,y)}getToken(_,y=!1){var M=this;return(0,g.Z)(function*(){return Ne(!M.accessToken||M.refreshToken,_,"user-token-expired"),y||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(_,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,y){var M=this;return(0,g.Z)(function*(){const{accessToken:ge,refreshToken:Pe,expiresIn:At}=yield function he(A,_){return N.apply(this,arguments)}(_,y);M.updateTokensAndExpiration(ge,Pe,Number(At))})()}updateTokensAndExpiration(_,y,M){this.refreshToken=y||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(_,y){const{refreshToken:M,accessToken:ge,expirationTime:Pe}=y,At=new L;return M&&(Ne("string"==typeof M,"internal-error",{appName:_}),At.refreshToken=M),ge&&(Ne("string"==typeof ge,"internal-error",{appName:_}),At.accessToken=ge),Pe&&(Ne("number"==typeof Pe,"internal-error",{appName:_}),At.expirationTime=Pe),At}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new L,this.toJSON())}_performRefresh(){return gt("not implemented")}}function q(A,_){Ne("string"==typeof A||void 0===A,"internal-error",{appName:_})}class X{constructor(_){var{uid:y,auth:M,stsTokenManager:ge}=_,Pe=(0,de._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=M,this.stsTokenManager=ge,this.accessToken=ge.accessToken,this.displayName=Pe.displayName||null,this.email=Pe.email||null,this.emailVerified=Pe.emailVerified||!1,this.phoneNumber=Pe.phoneNumber||null,this.photoURL=Pe.photoURL||null,this.isAnonymous=Pe.isAnonymous||!1,this.tenantId=Pe.tenantId||null,this.providerData=Pe.providerData?[...Pe.providerData]:[],this.metadata=new gr(Pe.createdAt||void 0,Pe.lastLoginAt||void 0)}getIdToken(_){var y=this;return(0,g.Z)(function*(){const M=yield zt(y,y.stsTokenManager.getToken(y.auth,_));return Ne(M,y.auth,"internal-error"),y.accessToken!==M&&(y.accessToken=M,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),M})()}getIdTokenResult(_){return function Re(A){return Xe.apply(this,arguments)}(this,_)}reload(){return function pt(A){return dt.apply(this,arguments)}(this)}_assign(_){this!==_&&(Ne(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(y=>Object.assign({},y)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const y=new X(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(_){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,y=!1){var M=this;return(0,g.Z)(function*(){let ge=!1;_.idToken&&_.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(_),ge=!0),y&&(yield lr(M)),yield M.auth._persistUserIfCurrent(M),ge&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var _=this;return(0,g.Z)(function*(){const y=yield _.getIdToken();return yield zt(_,function Dr(A,_){return mn.apply(this,arguments)}(_.auth,{idToken:y})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,y){var M,ge,Pe,At,bn,Xn,yr,oi;const ss=null!==(M=y.displayName)&&void 0!==M?M:void 0,Os=null!==(ge=y.email)&&void 0!==ge?ge:void 0,La=null!==(Pe=y.phoneNumber)&&void 0!==Pe?Pe:void 0,rl=null!==(At=y.photoURL)&&void 0!==At?At:void 0,ta=null!==(bn=y.tenantId)&&void 0!==bn?bn:void 0,Mc=null!==(Xn=y._redirectEventId)&&void 0!==Xn?Xn:void 0,Ao=null!==(yr=y.createdAt)&&void 0!==yr?yr:void 0,Kl=null!==(oi=y.lastLoginAt)&&void 0!==oi?oi:void 0,{uid:il,emailVerified:Zl,isAnonymous:vd,providerData:ui,stsTokenManager:Ai}=y;Ne(il&&Ai,_,"internal-error");const Zu=L.fromJSON(this.name,Ai);Ne("string"==typeof il,_,"internal-error"),q(ss,_.name),q(Os,_.name),Ne("boolean"==typeof Zl,_,"internal-error"),Ne("boolean"==typeof vd,_,"internal-error"),q(La,_.name),q(rl,_.name),q(ta,_.name),q(Mc,_.name),q(Ao,_.name),q(Kl,_.name);const Ua=new X({uid:il,auth:_,email:Os,emailVerified:Zl,displayName:ss,isAnonymous:vd,photoURL:rl,phoneNumber:La,tenantId:ta,stsTokenManager:Zu,createdAt:Ao,lastLoginAt:Kl});return ui&&Array.isArray(ui)&&(Ua.providerData=ui.map(Ba=>Object.assign({},Ba))),Mc&&(Ua._redirectEventId=Mc),Ua}static _fromIdTokenResponse(_,y,M=!1){return(0,g.Z)(function*(){const ge=new L;ge.updateFromServerResponse(y);const Pe=new X({uid:y.localId,auth:_,stsTokenManager:ge,isAnonymous:M});return yield lr(Pe),Pe})()}}const ht=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(y,M){var ge=this;return(0,g.Z)(function*(){ge.storage[y]=M})()}_get(y){var M=this;return(0,g.Z)(function*(){const ge=M.storage[y];return void 0===ge?null:ge})()}_remove(y){var M=this;return(0,g.Z)(function*(){delete M.storage[y]})()}_addListener(y,M){}_removeListener(y,M){}}return A.type="NONE",A})();function we(A,_,y){return`firebase:${A}:${_}:${y}`}class xe{constructor(_,y,M){this.persistence=_,this.auth=y,this.userKey=M;const{config:ge,name:Pe}=this.auth;this.fullUserKey=we(this.userKey,ge.apiKey,Pe),this.fullPersistenceKey=we("persistence",ge.apiKey,Pe),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,g.Z)(function*(){const y=yield _.persistence._get(_.fullUserKey);return y?X._fromJSON(_.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var y=this;return(0,g.Z)(function*(){if(y.persistence===_)return;const M=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=_,M?y.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,y,M="authUser"){return(0,g.Z)(function*(){if(!y.length)return new xe(tn(ht),_,M);const ge=(yield Promise.all(y.map(function(){var yr=(0,g.Z)(function*(oi){if(yield oi._isAvailable())return oi});return function(oi){return yr.apply(this,arguments)}}()))).filter(yr=>yr);let Pe=ge[0]||tn(ht);const At=we(M,_.config.apiKey,_.name);let bn=null;for(const yr of y)try{const oi=yield yr._get(At);if(oi){const ss=X._fromJSON(_,oi);yr!==Pe&&(bn=ss),Pe=yr;break}}catch(oi){}const Xn=ge.filter(yr=>yr._shouldAllowMigration);return Pe._shouldAllowMigration&&Xn.length?(Pe=Xn[0],bn&&(yield Pe._set(At,bn.toJSON())),yield Promise.all(y.map(function(){var yr=(0,g.Z)(function*(oi){if(oi!==Pe)try{yield oi._remove(At)}catch(ss){}});return function(oi){return yr.apply(this,arguments)}}())),new xe(Pe,_,M)):new xe(Pe,_,M)})()}}function ue(A){const _=A.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(_e(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(be(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(Tt(_))return"Blackberry";if(un(_))return"Webos";if($(_))return"Safari";if((_.includes("chrome/")||ae(_))&&!_.includes("edge/"))return"Chrome";if(Ve(_))return"Android";{const M=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==M?void 0:M.length))return M[1]}return"Other"}function be(A=(0,S.z$)()){return/firefox\//i.test(A)}function $(A=(0,S.z$)()){const _=A.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function ae(A=(0,S.z$)()){return/crios\//i.test(A)}function _e(A=(0,S.z$)()){return/iemobile/i.test(A)}function Ve(A=(0,S.z$)()){return/android/i.test(A)}function Tt(A=(0,S.z$)()){return/blackberry/i.test(A)}function un(A=(0,S.z$)()){return/webos/i.test(A)}function Dn(A=(0,S.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function Ln(A=(0,S.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}function xr(A=(0,S.z$)()){return Dn(A)||Ve(A)||un(A)||Tt(A)||/windows phone/i.test(A)||_e(A)}function Ur(A,_=[]){let y;switch(A){case"Browser":y=ue((0,S.z$)());break;case"Worker":y=`${ue((0,S.z$)())}-${A}`;break;default:y=A}const M=_.length?_.join(","):"FirebaseCore-web";return`${y}/JsCore/${U.SDK_VERSION}/${M}`}class Hi{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,y){const M=Pe=>new Promise((At,bn)=>{try{At(_(Pe))}catch(Xn){bn(Xn)}});M.onAbort=y,this.queue.push(M);const ge=this.queue.length-1;return()=>{this.queue[ge]=()=>Promise.resolve()}}runMiddleware(_){var y=this;return(0,g.Z)(function*(){if(y.auth.currentUser===_)return;const M=[];try{for(const ge of y.queue)yield ge(_),ge.onAbort&&M.push(ge.onAbort)}catch(ge){M.reverse();for(const Pe of M)try{Pe()}catch(At){}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null==ge?void 0:ge.message})}})()}}class Ki{constructor(_,y,M){this.app=_,this.heartbeatServiceProvider=y,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mr(this),this.idTokenSubscription=new mr(this),this.beforeStateQueue=new Hi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Et,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(_,y){var M=this;return y&&(this._popupRedirectResolver=tn(y)),this._initializationPromise=this.queue((0,g.Z)(function*(){var ge,Pe;if(!M._deleted&&(M.persistenceManager=yield xe.create(M,_),!M._deleted)){if(null===(ge=M._popupRedirectResolver)||void 0===ge?void 0:ge._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch(At){}yield M.initializeCurrentUser(y),M.lastNotifiedUid=(null===(Pe=M.currentUser)||void 0===Pe?void 0:Pe.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,g.Z)(function*(){if(_._deleted)return;const y=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||y){if(_.currentUser&&y&&_.currentUser.uid===y.uid)return _._currentUser._assign(y),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(y,!0)}})()}initializeCurrentUser(_){var y=this;return(0,g.Z)(function*(){var M;const ge=yield y.assertedPersistence.getCurrentUser();let Pe=ge,At=!1;if(_&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const bn=null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId,Xn=null==Pe?void 0:Pe._redirectEventId,yr=yield y.tryRedirectSignIn(_);(!bn||bn===Xn)&&(null==yr?void 0:yr.user)&&(Pe=yr.user,At=!0)}if(!Pe)return y.directlySetCurrentUser(null);if(!Pe._redirectEventId){if(At)try{yield y.beforeStateQueue.runMiddleware(Pe)}catch(bn){Pe=ge,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(bn))}return Pe?y.reloadAndSetCurrentUserOrClear(Pe):y.directlySetCurrentUser(null)}return Ne(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===Pe._redirectEventId?y.directlySetCurrentUser(Pe):y.reloadAndSetCurrentUserOrClear(Pe)})()}tryRedirectSignIn(_){var y=this;return(0,g.Z)(function*(){let M=null;try{M=yield y._popupRedirectResolver._completeRedirectFn(y,_,!0)}catch(ge){yield y._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(_){var y=this;return(0,g.Z)(function*(){try{yield lr(_)}catch(M){if("auth/network-request-failed"!==(null==M?void 0:M.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function Ut(){if("undefined"==typeof navigator)return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var _=this;return(0,g.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var y=this;return(0,g.Z)(function*(){const M=_?(0,S.m9)(_):null;return M&&Ne(M.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(M&&M._clone(y))})()}_updateCurrentUser(_,y=!1){var M=this;return(0,g.Z)(function*(){if(!M._deleted)return _&&Ne(M.tenantId===_.tenantId,M,"tenant-id-mismatch"),y||(yield M.beforeStateQueue.runMiddleware(_)),M.queue((0,g.Z)(function*(){yield M.directlySetCurrentUser(_),M.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,g.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var y=this;return this.queue((0,g.Z)(function*(){yield y.assertedPersistence.setPersistence(tn(_))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new S.LL("auth","Firebase",_())}onAuthStateChanged(_,y,M){return this.registerStateListener(this.authStateSubscription,_,y,M)}beforeAuthStateChanged(_,y){return this.beforeStateQueue.pushCallback(_,y)}onIdTokenChanged(_,y,M){return this.registerStateListener(this.idTokenSubscription,_,y,M)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,y){var M=this;return(0,g.Z)(function*(){const ge=yield M.getOrInitRedirectPersistenceManager(y);return null===_?ge.removeCurrentUser():ge.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var y=this;return(0,g.Z)(function*(){if(!y.redirectPersistenceManager){const M=_&&tn(_)||y._popupRedirectResolver;Ne(M,y,"argument-error"),y.redirectPersistenceManager=yield xe.create(y,[tn(M._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(_){var y=this;return(0,g.Z)(function*(){var M,ge;return y._isInitialized&&(yield y.queue((0,g.Z)(function*(){}))),(null===(M=y._currentUser)||void 0===M?void 0:M._redirectEventId)===_?y._currentUser:(null===(ge=y.redirectUser)||void 0===ge?void 0:ge._redirectEventId)===_?y.redirectUser:null})()}_persistUserIfCurrent(_){var y=this;return(0,g.Z)(function*(){if(_===y.currentUser)return y.queue((0,g.Z)(function*(){return y.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(y=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,y,M,ge){if(this._deleted)return()=>{};const Pe="function"==typeof y?y:y.next.bind(y),At=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(At,this,"internal-error"),At.then(()=>Pe(this.currentUser)),"function"==typeof y?_.addObserver(y,M,ge):_.addObserver(y)}directlySetCurrentUser(_){var y=this;return(0,g.Z)(function*(){y.currentUser&&y.currentUser!==_&&y._currentUser._stopProactiveRefresh(),_&&y.isProactiveRefreshEnabled&&_._startProactiveRefresh(),y.currentUser=_,_?yield y.assertedPersistence.setCurrentUser(_):yield y.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=Ur(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,g.Z)(function*(){var y;const M={"X-Client-Version":_.clientVersion};_.app.options.appId&&(M["X-Firebase-gmpid"]=_.app.options.appId);const ge=yield null===(y=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return ge&&(M["X-Firebase-Client"]=ge),M})()}}function In(A){return(0,S.m9)(A)}class mr{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,S.ne)(y=>this.observer=y)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kr(A,_,y){const M=In(A);Ne(M._canInitEmulator,M,"emulator-config-failed"),Ne(/^https?:\/\//.test(_),M,"invalid-emulator-scheme");const ge=!!(null==y?void 0:y.disableWarnings),Pe=wi(_),{host:At,port:bn}=function $i(A){const _=wi(A),y=/(\/\/)?([^?#/]+)/.exec(A.substr(_.length));if(!y)return{host:"",port:null};const M=y[2].split("@").pop()||"",ge=/^(\[[^\]]+\])(:|$)/.exec(M);if(ge){const Pe=ge[1];return{host:Pe,port:pi(M.substr(Pe.length+1))}}{const[Pe,At]=M.split(":");return{host:Pe,port:pi(At)}}}(_);M.config.emulator={url:`${Pe}//${At}${null===bn?"":`:${bn}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:At,port:bn,protocol:Pe.replace(":",""),options:Object.freeze({disableWarnings:ge})}),ge||function Oi(){function A(){const _=document.createElement("p"),y=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}function wi(A){const _=A.indexOf(":");return _<0?"":A.substr(0,_+1)}function pi(A){if(!A)return null;const _=Number(A);return isNaN(_)?null:_}class Nr{constructor(_,y){this.providerId=_,this.signInMethod=y}toJSON(){return gt("not implemented")}_getIdTokenResponse(_){return gt("not implemented")}_linkToIdToken(_,y){return gt("not implemented")}_getReauthenticationResolver(_){return gt("not implemented")}}function Pi(A,_){return li.apply(this,arguments)}function li(){return(li=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:resetPassword",wn(A,_))})).apply(this,arguments)}function hr(A,_){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Wr(A,_){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:update",wn(A,_))})).apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(A,_){return fn(A,"POST","/v1/accounts:signInWithPassword",wn(A,_))})).apply(this,arguments)}function Gi(A,_){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:sendOobCode",wn(A,_))})).apply(this,arguments)}function Ht(A,_){return ct.apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(A,_){return Gi(A,_)})).apply(this,arguments)}function Bt(A,_){return An.apply(this,arguments)}function An(){return(An=(0,g.Z)(function*(A,_){return Gi(A,_)})).apply(this,arguments)}function _n(A,_){return _r.apply(this,arguments)}function _r(){return(_r=(0,g.Z)(function*(A,_){return Gi(A,_)})).apply(this,arguments)}function Ei(A,_){return ti.apply(this,arguments)}function ti(){return(ti=(0,g.Z)(function*(A,_){return Gi(A,_)})).apply(this,arguments)}function Fr(){return(Fr=(0,g.Z)(function*(A,_){return fn(A,"POST","/v1/accounts:signInWithEmailLink",wn(A,_))})).apply(this,arguments)}function Qs(){return(Qs=(0,g.Z)(function*(A,_){return fn(A,"POST","/v1/accounts:signInWithEmailLink",wn(A,_))})).apply(this,arguments)}class xs extends Nr{constructor(_,y,M,ge=null){super("password",M),this._email=_,this._password=y,this._tenantId=ge}static _fromEmailAndPassword(_,y){return new xs(_,y,"password")}static _fromEmailAndCode(_,y,M=null){return new xs(_,y,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const y="string"==typeof _?JSON.parse(_):_;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(_){var y=this;return(0,g.Z)(function*(){switch(y.signInMethod){case"password":return function ns(A,_){return di.apply(this,arguments)}(_,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Zr(A,_){return Fr.apply(this,arguments)}(_,{email:y._email,oobCode:y._password});default:Mt(_,"internal-error")}})()}_linkToIdToken(_,y){var M=this;return(0,g.Z)(function*(){switch(M.signInMethod){case"password":return hr(_,{idToken:y,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function Qi(A,_){return Qs.apply(this,arguments)}(_,{idToken:y,email:M._email,oobCode:M._password});default:Mt(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Ii(A,_){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(A,_){return fn(A,"POST","/v1/accounts:signInWithIdp",wn(A,_))})).apply(this,arguments)}class mt extends Nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const y=new mt(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(y.idToken=_.idToken),_.accessToken&&(y.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(y.nonce=_.nonce),_.pendingToken&&(y.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(y.accessToken=_.oauthToken,y.secret=_.oauthTokenSecret):Mt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const y="string"==typeof _?JSON.parse(_):_,{providerId:M,signInMethod:ge}=y,Pe=(0,de._T)(y,["providerId","signInMethod"]);if(!M||!ge)return null;const At=new mt(M,ge);return At.idToken=Pe.idToken||void 0,At.accessToken=Pe.accessToken||void 0,At.secret=Pe.secret,At.nonce=Pe.nonce,At.pendingToken=Pe.pendingToken||null,At}_getIdTokenResponse(_){return Ii(_,this.buildRequest())}_linkToIdToken(_,y){const M=this.buildRequest();return M.idToken=y,Ii(_,M)}_getReauthenticationResolver(_){const y=this.buildRequest();return y.autoCreate=!1,Ii(_,y)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),_.postBody=(0,S.xO)(y)}return _}}function Pt(A,_){return on.apply(this,arguments)}function on(){return(on=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:sendVerificationCode",wn(A,_))})).apply(this,arguments)}function Yn(){return(Yn=(0,g.Z)(function*(A,_){return fn(A,"POST","/v1/accounts:signInWithPhoneNumber",wn(A,_))})).apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(A,_){const y=yield fn(A,"POST","/v1/accounts:signInWithPhoneNumber",wn(A,_));if(y.temporaryProof)throw ur(A,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const yi={USER_NOT_FOUND:"user-not-found"};function ks(){return(ks=(0,g.Z)(function*(A,_){return fn(A,"POST","/v1/accounts:signInWithPhoneNumber",wn(A,Object.assign(Object.assign({},_),{operation:"REAUTH"})),yi)})).apply(this,arguments)}class Zi extends Nr{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,y){return new Zi({verificationId:_,verificationCode:y})}static _fromTokenResponse(_,y){return new Zi({phoneNumber:_,temporaryProof:y})}_getIdTokenResponse(_){return function kn(A,_){return Yn.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,y){return function vr(A,_){return bi.apply(this,arguments)}(_,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Ps(A,_){return ks.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:y,verificationId:M,verificationCode:ge}=this.params;return _&&y?{temporaryProof:_,phoneNumber:y}:{sessionInfo:M,code:ge}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:y,verificationCode:M,phoneNumber:ge,temporaryProof:Pe}=_;return M||y||ge||Pe?new Zi({verificationId:y,verificationCode:M,phoneNumber:ge,temporaryProof:Pe}):null}}class Ri{constructor(_){var y,M,ge,Pe,At,bn;const Xn=(0,S.zd)((0,S.pd)(_)),yr=null!==(y=Xn.apiKey)&&void 0!==y?y:null,oi=null!==(M=Xn.oobCode)&&void 0!==M?M:null,ss=function ma(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ge=Xn.mode)&&void 0!==ge?ge:null);Ne(yr&&oi&&ss,"argument-error"),this.apiKey=yr,this.operation=ss,this.code=oi,this.continueUrl=null!==(Pe=Xn.continueUrl)&&void 0!==Pe?Pe:null,this.languageCode=null!==(At=Xn.languageCode)&&void 0!==At?At:null,this.tenantId=null!==(bn=Xn.tenantId)&&void 0!==bn?bn:null}static parseLink(_){const y=function Ds(A){const _=(0,S.zd)((0,S.pd)(A)).link,y=_?(0,S.zd)((0,S.pd)(_)).deep_link_id:null,M=(0,S.zd)((0,S.pd)(A)).deep_link_id;return(M?(0,S.zd)((0,S.pd)(M)).link:null)||M||y||_||A}(_);try{return new Ri(y)}catch(M){return null}}}let rs=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(y,M){return xs._fromEmailAndPassword(y,M)}static credentialWithLink(y,M){const ge=Ri.parseLink(M);return Ne(ge,"argument-error"),xs._fromEmailAndCode(y,ge.code,ge.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class js{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Xr extends js{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Ns extends Xr{static credentialFromJSON(_){const y="string"==typeof _?JSON.parse(_):_;return Ne("providerId"in y&&"signInMethod"in y,"argument-error"),mt._fromParams(y)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return Ne(_.idToken||_.accessToken,"argument-error"),mt._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Ns.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Ns.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:y,oauthAccessToken:M,oauthTokenSecret:ge,pendingToken:Pe,nonce:At,providerId:bn}=_;if(!M&&!ge&&!y&&!Pe||!bn)return null;try{return new Ns(bn)._credential({idToken:y,accessToken:M,nonce:At,pendingToken:Pe})}catch(Xn){return null}}}let Ss=(()=>{class A extends Xr{constructor(){super("facebook.com")}static credential(y){return mt._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return A.credentialFromTaggedObject(y)}static credentialFromError(y){return A.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return A.credential(y.oauthAccessToken)}catch(M){return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),cs=(()=>{class A extends Xr{constructor(){super("google.com"),this.addScope("profile")}static credential(y,M){return mt._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:M})}static credentialFromResult(y){return A.credentialFromTaggedObject(y)}static credentialFromError(y){return A.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:M,oauthAccessToken:ge}=y;if(!M&&!ge)return null;try{return A.credential(M,ge)}catch(Pe){return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),mo=(()=>{class A extends Xr{constructor(){super("github.com")}static credential(y){return mt._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return A.credentialFromTaggedObject(y)}static credentialFromError(y){return A.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return A.credential(y.oauthAccessToken)}catch(M){return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class Fs extends Nr{constructor(_,y){super(_,_),this.pendingToken=y}_getIdTokenResponse(_){return Ii(_,this.buildRequest())}_linkToIdToken(_,y){const M=this.buildRequest();return M.idToken=y,Ii(_,M)}_getReauthenticationResolver(_){const y=this.buildRequest();return y.autoCreate=!1,Ii(_,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const y="string"==typeof _?JSON.parse(_):_,{providerId:M,signInMethod:ge,pendingToken:Pe}=y;return M&&ge&&Pe&&M===ge?new Fs(M,Pe):null}static _create(_,y){return new Fs(_,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xs extends js{constructor(_){Ne(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Xs.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Xs.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const y=Fs.fromJSON(_);return Ne(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:y,providerId:M}=_;if(!y||!M)return null;try{return Fs._create(M,y)}catch(ge){return null}}}let Is=(()=>{class A extends Xr{constructor(){super("twitter.com")}static credential(y,M){return mt._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:M})}static credentialFromResult(y){return A.credentialFromTaggedObject(y)}static credentialFromError(y){return A.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:M,oauthTokenSecret:ge}=y;if(!M||!ge)return null;try{return A.credential(M,ge)}catch(Pe){return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function oo(A,_){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,g.Z)(function*(A,_){return fn(A,"POST","/v1/accounts:signUp",wn(A,_))})).apply(this,arguments)}class is{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,y,M,ge=!1){return(0,g.Z)(function*(){const Pe=yield X._fromIdTokenResponse(_,M,ge),At=Co(M);return new is({user:Pe,providerId:At,_tokenResponse:M,operationType:y})})()}static _forOperation(_,y,M){return(0,g.Z)(function*(){yield _._updateTokensIfNecessary(M,!0);const ge=Co(M);return new is({user:_,providerId:ge,_tokenResponse:M,operationType:y})})()}}function Co(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function fr(A){return Br.apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(A){var _;const y=In(A);if(yield y._initializationPromise,null===(_=y.currentUser)||void 0===_?void 0:_.isAnonymous)return new is({user:y.currentUser,providerId:null,operationType:"signIn"});const M=yield oo(y,{returnSecureToken:!0}),ge=yield is._fromIdTokenResponse(y,"signIn",M,!0);return yield y._updateCurrentUser(ge.user),ge})).apply(this,arguments)}class Sr extends S.ZR{constructor(_,y,M,ge){var Pe;super(y.code,y.message),this.operationType=M,this.user=ge,Object.setPrototypeOf(this,Sr.prototype),this.customData={appName:_.name,tenantId:null!==(Pe=_.tenantId)&&void 0!==Pe?Pe:void 0,_serverResponse:y.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(_,y,M,ge){return new Sr(_,y,M,ge)}}function os(A,_,y,M){return("reauthenticate"===_?y._getReauthenticationResolver(A):y._getIdTokenResponse(A)).catch(Pe=>{throw"auth/multi-factor-auth-required"===Pe.code?Sr._fromErrorAndOperation(A,Pe,_,M):Pe})}function ci(A){return new Set(A.map(({providerId:_})=>_).filter(_=>!!_))}function As(A,_){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,g.Z)(function*(A,_){const y=(0,S.m9)(A);yield fe(!0,y,_);const{providerUserInfo:M}=yield Tn(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[_]}),ge=ci(M||[]);return y.providerData=y.providerData.filter(Pe=>ge.has(Pe.providerId)),ge.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function gi(A,_){return H.apply(this,arguments)}function H(){return(H=(0,g.Z)(function*(A,_,y=!1){const M=yield zt(A,_._linkToIdToken(A.auth,yield A.getIdToken()),y);return is._forOperation(A,"link",M)})).apply(this,arguments)}function fe(A,_,y){return V.apply(this,arguments)}function V(){return(V=(0,g.Z)(function*(A,_,y){yield lr(_);const ge=!1===A?"provider-already-linked":"no-such-provider";Ne(ci(_.providerData).has(y)===A,_.auth,ge)})).apply(this,arguments)}function Ee(A,_){return ot.apply(this,arguments)}function ot(){return(ot=(0,g.Z)(function*(A,_,y=!1){const{auth:M}=A,ge="reauthenticate";try{const Pe=yield zt(A,os(M,ge,_,A),y);Ne(Pe.idToken,M,"internal-error");const At=Ft(Pe.idToken);Ne(At,M,"internal-error");const{sub:bn}=At;return Ne(A.uid===bn,M,"user-mismatch"),is._forOperation(A,ge,Pe)}catch(Pe){throw"auth/user-not-found"===(null==Pe?void 0:Pe.code)&&Mt(M,"user-mismatch"),Pe}})).apply(this,arguments)}function Wt(A,_){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,g.Z)(function*(A,_,y=!1){const M="signIn",ge=yield os(A,M,_),Pe=yield is._fromIdTokenResponse(A,M,ge);return y||(yield A._updateCurrentUser(Pe.user)),Pe})).apply(this,arguments)}function zn(A,_){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,g.Z)(function*(A,_){return Wt(In(A),_)})).apply(this,arguments)}function ri(A,_){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(A,_){const y=(0,S.m9)(A);return yield fe(!1,y,_.providerId),gi(y,_)})).apply(this,arguments)}function Vr(A,_){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(A,_){return Ee((0,S.m9)(A),_)})).apply(this,arguments)}function qr(A,_){return mi.apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(A,_){return fn(A,"POST","/v1/accounts:signInWithCustomToken",wn(A,_))})).apply(this,arguments)}function Hs(A,_){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(A,_){const y=In(A),M=yield qr(y,{token:_,returnSecureToken:!0}),ge=yield is._fromIdTokenResponse(y,"signIn",M);return yield y._updateCurrentUser(ge.user),ge})).apply(this,arguments)}class dr{constructor(_,y){this.factorId=_,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(_,y){return"phoneInfo"in y?Js._fromServerResponse(_,y):Mt(_,"internal-error")}}class Js extends dr{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,y){return new Js(y)}}function eo(A,_,y){var M;Ne((null===(M=y.url)||void 0===M?void 0:M.length)>0,A,"invalid-continue-uri"),Ne(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),_.continueUrl=y.url,_.dynamicLinkDomain=y.dynamicLinkDomain,_.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Ne(y.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),_.iOSBundleId=y.iOS.bundleId),y.android&&(Ne(y.android.packageName.length>0,A,"missing-android-pkg-name"),_.androidInstallApp=y.android.installApp,_.androidMinimumVersionCode=y.android.minimumVersion,_.androidPackageName=y.android.packageName)}function $s(A,_,y){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A),ge={requestType:"PASSWORD_RESET",email:_};y&&eo(M,ge,y),yield Bt(M,ge)})).apply(this,arguments)}function To(A,_,y){return Do.apply(this,arguments)}function Do(){return(Do=(0,g.Z)(function*(A,_,y){yield Pi((0,S.m9)(A),{oobCode:_,newPassword:y})})).apply(this,arguments)}function ao(A,_){return an.apply(this,arguments)}function an(){return(an=(0,g.Z)(function*(A,_){yield Wr((0,S.m9)(A),{oobCode:_})})).apply(this,arguments)}function G(A,_){return z.apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(A,_){const y=(0,S.m9)(A),M=yield Pi(y,{oobCode:_}),ge=M.requestType;switch(Ne(ge,y,"internal-error"),ge){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(M.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(M.mfaInfo,y,"internal-error");default:Ne(M.email,y,"internal-error")}let Pe=null;return M.mfaInfo&&(Pe=dr._fromServerResponse(In(y),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:Pe},operation:ge}})).apply(this,arguments)}function Se(A,_){return We.apply(this,arguments)}function We(){return(We=(0,g.Z)(function*(A,_){const{data:y}=yield G((0,S.m9)(A),_);return y.email})).apply(this,arguments)}function bt(A,_,y){return jt.apply(this,arguments)}function jt(){return(jt=(0,g.Z)(function*(A,_,y){const M=In(A),ge=yield oo(M,{returnSecureToken:!0,email:_,password:y}),Pe=yield is._fromIdTokenResponse(M,"signIn",ge);return yield M._updateCurrentUser(Pe.user),Pe})).apply(this,arguments)}function yn(A,_,y){return zn((0,S.m9)(A),rs.credential(_,y))}function rr(A,_,y){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A),ge={requestType:"EMAIL_SIGNIN",email:_};Ne(y.handleCodeInApp,M,"argument-error"),y&&eo(M,ge,y),yield _n(M,ge)})).apply(this,arguments)}function Rr(A,_){const y=Ri.parseLink(_);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function zr(A,_,y){return hi.apply(this,arguments)}function hi(){return(hi=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A),ge=rs.credentialWithLink(_,y||Ze());return Ne(ge._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),zn(M,ge)})).apply(this,arguments)}function jr(A,_){return ii.apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:createAuthUri",wn(A,_))})).apply(this,arguments)}function Li(A,_){return ne.apply(this,arguments)}function ne(){return(ne=(0,g.Z)(function*(A,_){const M={identifier:_,continueUri:ft()?Ze():"http://localhost"},{signinMethods:ge}=yield jr((0,S.m9)(A),M);return ge||[]})).apply(this,arguments)}function E(A,_){return C.apply(this,arguments)}function C(){return(C=(0,g.Z)(function*(A,_){const y=(0,S.m9)(A),ge={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};_&&eo(y.auth,ge,_);const{email:Pe}=yield Ht(y.auth,ge);Pe!==A.email&&(yield A.reload())})).apply(this,arguments)}function B(A,_,y){return le.apply(this,arguments)}function le(){return(le=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A),Pe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:_};y&&eo(M.auth,Pe,y);const{email:At}=yield Ei(M.auth,Pe);At!==A.email&&(yield A.reload())})).apply(this,arguments)}function Oe(A,_){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,g.Z)(function*(A,_){return Ot(A,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function nt(A,_){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(A,{displayName:_,photoURL:y}){if(void 0===_&&void 0===y)return;const M=(0,S.m9)(A),Pe={idToken:yield M.getIdToken(),displayName:_,photoUrl:y,returnSecureToken:!0},At=yield zt(M,Oe(M.auth,Pe));M.displayName=At.displayName||null,M.photoURL=At.photoUrl||null;const bn=M.providerData.find(({providerId:Xn})=>"password"===Xn);bn&&(bn.displayName=M.displayName,bn.photoURL=M.photoURL),yield M._updateTokensIfNecessary(At)})).apply(this,arguments)}function Qt(A,_){return ir((0,S.m9)(A),_,null)}function cn(A,_){return ir((0,S.m9)(A),null,_)}function ir(A,_,y){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(A,_,y){const{auth:M}=A,Pe={idToken:yield A.getIdToken(),returnSecureToken:!0};_&&(Pe.email=_),y&&(Pe.password=y);const At=yield zt(A,hr(M,Pe));yield A._updateTokensIfNecessary(At,!0)})).apply(this,arguments)}class Hn{constructor(_,y,M={}){this.isNewUser=_,this.providerId=y,this.profile=M}}class Mr extends Hn{constructor(_,y,M,ge){super(_,y,M),this.username=ge}}class Di extends Hn{constructor(_,y){super(_,"facebook.com",y)}}class Bi extends Mr{constructor(_,y){super(_,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class qi extends Hn{constructor(_,y){super(_,"google.com",y)}}class as extends Mr{constructor(_,y,M){super(_,"twitter.com",y,M)}}function si(A){const{user:_,_tokenResponse:y}=A;return _.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Jr(A){var _,y;if(!A)return null;const{providerId:M}=A,ge=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},Pe=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!M&&(null==A?void 0:A.idToken)){const At=null===(y=null===(_=Ft(A.idToken))||void 0===_?void 0:_.firebase)||void 0===y?void 0:y.sign_in_provider;if(At)return new Hn(Pe,"anonymous"!==At&&"custom"!==At?At:null)}if(!M)return null;switch(M){case"facebook.com":return new Di(Pe,ge);case"github.com":return new Bi(Pe,ge);case"google.com":return new qi(Pe,ge);case"twitter.com":return new as(Pe,ge,A.screenName||null);case"custom":case"anonymous":return new Hn(Pe,null);default:return new Hn(Pe,M,ge)}}(y)}class Ws{constructor(_,y,M){this.type=_,this.credential=y,this.auth=M}static _fromIdtoken(_,y){return new Ws("enroll",_,y)}static _fromMfaPendingCredential(_){return new Ws("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var y,M;if(null==_?void 0:_.multiFactorSession){if(null===(y=_.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return Ws._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null===(M=_.multiFactorSession)||void 0===M?void 0:M.idToken)return Ws._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Cn{constructor(_,y,M){this.session=_,this.hints=y,this.signInResolver=M}static _fromError(_,y){const M=In(_),ge=y.customData._serverResponse,Pe=(ge.mfaInfo||[]).map(bn=>dr._fromServerResponse(M,bn));Ne(ge.mfaPendingCredential,M,"internal-error");const At=Ws._fromMfaPendingCredential(ge.mfaPendingCredential);return new Cn(At,Pe,function(){var bn=(0,g.Z)(function*(Xn){const yr=yield Xn._process(M,At);delete ge.mfaInfo,delete ge.mfaPendingCredential;const oi=Object.assign(Object.assign({},ge),{idToken:yr.idToken,refreshToken:yr.refreshToken});switch(y.operationType){case"signIn":const ss=yield is._fromIdTokenResponse(M,y.operationType,oi);return yield M._updateCurrentUser(ss.user),ss;case"reauthenticate":return Ne(y.user,M,"internal-error"),is._forOperation(y.user,y.operationType,oi);default:Mt(M,"internal-error")}});return function(Xn){return bn.apply(this,arguments)}}())}resolveSignIn(_){var y=this;return(0,g.Z)(function*(){return y.signInResolver(_)})()}}function Un(A,_){var y;const M=(0,S.m9)(A),ge=_;return Ne(_.customData.operationType,M,"argument-error"),Ne(null===(y=ge.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,M,"argument-error"),Cn._fromError(M,ge)}function Gn(A,_){return Ot(A,"POST","/v2/accounts/mfaEnrollment:start",wn(A,_))}class Vn{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(M=>dr._fromServerResponse(_.auth,M)))})}static _fromUser(_){return new Vn(_)}getSession(){var _=this;return(0,g.Z)(function*(){return Ws._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,y){var M=this;return(0,g.Z)(function*(){const ge=_,Pe=yield M.getSession(),At=yield zt(M.user,ge._process(M.user.auth,Pe,y));return yield M.user._updateTokensIfNecessary(At),M.user.reload()})()}unenroll(_){var y=this;return(0,g.Z)(function*(){const M="string"==typeof _?_:_.uid,ge=yield y.user.getIdToken();try{const Pe=yield zt(y.user,function En(A,_){return Ot(A,"POST","/v2/accounts/mfaEnrollment:withdraw",wn(A,_))}(y.user.auth,{idToken:ge,mfaEnrollmentId:M}));y.enrolledFactors=y.enrolledFactors.filter(({uid:At})=>At!==M),yield y.user._updateTokensIfNecessary(Pe),yield y.user.reload()}catch(Pe){throw Pe}})()}}const zs=new WeakMap;function On(A){const _=(0,S.m9)(A);return zs.has(_)||zs.set(_,Vn._fromUser(_)),zs.get(_)}const Lt="__sak";class Jt{constructor(_,y){this.storageRetriever=_,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Lt,"1"),this.storage.removeItem(Lt),Promise.resolve(!0)):Promise.resolve(!1)}catch(_){return Promise.resolve(!1)}}_set(_,y){return this.storage.setItem(_,JSON.stringify(y)),Promise.resolve()}_get(_){const y=this.storage.getItem(_);return Promise.resolve(y?JSON.parse(y):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vi=(()=>{class A extends Jt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,M)=>this.onStorageEvent(y,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xi(){const A=(0,S.z$)();return $(A)||Dn(A)}()&&function ai(){try{return!(!window||window===window.top)}catch(A){return!1}}(),this.fallbackToPolling=xr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const M of Object.keys(this.listeners)){const ge=this.storage.getItem(M),Pe=this.localCache[M];ge!==Pe&&y(M,Pe,ge)}}onStorageEvent(y,M=!1){if(!y.key)return void this.forAllChangedKeys((bn,Xn,yr)=>{this.notifyListeners(bn,yr)});const ge=y.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const bn=this.storage.getItem(ge);if(y.newValue!==bn)null!==y.newValue?this.storage.setItem(ge,y.newValue):this.storage.removeItem(ge);else if(this.localCache[ge]===y.newValue&&!M)return}const Pe=()=>{const bn=this.storage.getItem(ge);!M&&this.localCache[ge]===bn||this.notifyListeners(ge,bn)},At=this.storage.getItem(ge);!function nr(){return(0,S.w1)()&&10===document.documentMode}()||At===y.newValue||y.newValue===y.oldValue?Pe():setTimeout(Pe,10)}notifyListeners(y,M){this.localCache[y]=M;const ge=this.listeners[y];if(ge)for(const Pe of Array.from(ge))Pe(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,M,ge)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:M,newValue:ge}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(M)}_removeListener(y,M){this.listeners[y]&&(this.listeners[y].delete(M),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,M){var ge=()=>super._set,Pe=this;return(0,g.Z)(function*(){yield ge().call(Pe,y,M),Pe.localCache[y]=JSON.stringify(M)})()}_get(y){var M=()=>super._get,ge=this;return(0,g.Z)(function*(){const Pe=yield M().call(ge,y);return ge.localCache[y]=JSON.stringify(Pe),Pe})()}_remove(y){var M=()=>super._remove,ge=this;return(0,g.Z)(function*(){yield M().call(ge,y),delete ge.localCache[y]})()}}return A.type="LOCAL",A})(),Wo=(()=>{class A extends Jt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,M){}_removeListener(y,M){}}return A.type="SESSION",A})();let co=(()=>{class A{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const M=this.receivers.find(Pe=>Pe.isListeningto(y));if(M)return M;const ge=new A(y);return this.receivers.push(ge),ge}isListeningto(y){return this.eventTarget===y}handleEvent(y){var M=this;return(0,g.Z)(function*(){const ge=y,{eventId:Pe,eventType:At,data:bn}=ge.data,Xn=M.handlersMap[At];if(!(null==Xn?void 0:Xn.size))return;ge.ports[0].postMessage({status:"ack",eventId:Pe,eventType:At});const yr=Array.from(Xn).map(function(){var ss=(0,g.Z)(function*(Os){return Os(ge.origin,bn)});return function(Os){return ss.apply(this,arguments)}}()),oi=yield function Ga(A){return Promise.all(A.map(function(){var _=(0,g.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(M){return{fulfilled:!1,reason:M}}});return function(y){return _.apply(this,arguments)}}()))}(yr);ge.ports[0].postMessage({status:"done",eventId:Pe,eventType:At,response:oi})})()}_subscribe(y,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(M)}_unsubscribe(y,M){this.handlersMap[y]&&M&&this.handlersMap[y].delete(M),(!M||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function zo(A="",_=10){let y="";for(let M=0;M<_;M++)y+=Math.floor(10*Math.random());return A+y}class aa{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,y,M=50){var ge=this;return(0,g.Z)(function*(){const Pe="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Pe)throw new Error("connection_unavailable");let At,bn;return new Promise((Xn,yr)=>{const oi=zo("",20);Pe.port1.start();const ss=setTimeout(()=>{yr(new Error("unsupported_event"))},M);bn={messageChannel:Pe,onMessage(Os){const La=Os;if(La.data.eventId===oi)switch(La.data.status){case"ack":clearTimeout(ss),At=setTimeout(()=>{yr(new Error("timeout"))},3e3);break;case"done":clearTimeout(At),Xn(La.data.response);break;default:clearTimeout(ss),clearTimeout(At),yr(new Error("invalid_response"))}}},ge.handlers.add(bn),Pe.port1.addEventListener("message",bn.onMessage),ge.target.postMessage({eventType:_,eventId:oi,data:y},[Pe.port2])}).finally(()=>{bn&&ge.removeMessageHandler(bn)})})()}}function Ji(){return window}function Zs(){return void 0!==Ji().WorkerGlobalScope&&"function"==typeof Ji().importScripts}function x(){return(x=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(A){return null}})).apply(this,arguments)}const j="firebaseLocalStorageDb",ve="firebaseLocalStorage",Ae="fbase_key";class st{constructor(_){this.request=_}toPromise(){return new Promise((_,y)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function qt(A,_){return A.transaction([ve],_?"readwrite":"readonly").objectStore(ve)}function Yr(){const A=indexedDB.open(j,1);return new Promise((_,y)=>{A.addEventListener("error",()=>{y(A.error)}),A.addEventListener("upgradeneeded",()=>{const M=A.result;try{M.createObjectStore(ve,{keyPath:Ae})}catch(ge){y(ge)}}),A.addEventListener("success",(0,g.Z)(function*(){const M=A.result;M.objectStoreNames.contains(ve)?_(M):(M.close(),yield function Wn(){const A=indexedDB.deleteDatabase(j);return new st(A).toPromise()}(),_(yield Yr()))}))})}function ar(A,_,y){return _i.apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(A,_,y){const M=qt(A,!0).put({[Ae]:_,value:y});return new st(M).toPromise()})).apply(this,arguments)}function ni(){return(ni=(0,g.Z)(function*(A,_){const y=qt(A,!1).get(_),M=yield new st(y).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function ds(A,_){const y=qt(A,!0).delete(_);return new st(y).toPromise()}const ya=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,g.Z)(function*(){return y.db||(y.db=yield Yr()),y.db})()}_withRetries(y){var M=this;return(0,g.Z)(function*(){let ge=0;for(;;)try{const Pe=yield M._openDb();return yield y(Pe)}catch(Pe){if(ge++>3)throw Pe;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,g.Z)(function*(){return Zs()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,g.Z)(function*(){y.receiver=co._getInstance(function T(){return Zs()?self:null}()),y.receiver._subscribe("keyChanged",function(){var M=(0,g.Z)(function*(ge,Pe){return{keyProcessed:(yield y._poll()).includes(Pe.key)}});return function(ge,Pe){return M.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var M=(0,g.Z)(function*(ge,Pe){return["keyChanged"]});return function(ge,Pe){return M.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,g.Z)(function*(){var M,ge;if(y.activeServiceWorker=yield function xo(){return x.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new aa(y.activeServiceWorker);const Pe=yield y.sender._send("ping",{},800);!Pe||(null===(M=Pe[0])||void 0===M?void 0:M.fulfilled)&&(null===(ge=Pe[0])||void 0===ge?void 0:ge.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var M=this;return(0,g.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function D(){var A;return(null===(A=null==navigator?void 0:navigator.serviceWorker)||void 0===A?void 0:A.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:y},M.serviceWorkerReceiverAvailable?800:50)}catch(ge){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Yr();return yield ar(y,Lt,"1"),yield ds(y,Lt),!0}catch(y){}return!1})()}_withPendingWrite(y){var M=this;return(0,g.Z)(function*(){M.pendingWrites++;try{yield y()}finally{M.pendingWrites--}})()}_set(y,M){var ge=this;return(0,g.Z)(function*(){return ge._withPendingWrite((0,g.Z)(function*(){return yield ge._withRetries(Pe=>ar(Pe,y,M)),ge.localCache[y]=M,ge.notifyServiceWorker(y)}))})()}_get(y){var M=this;return(0,g.Z)(function*(){const ge=yield M._withRetries(Pe=>function vi(A,_){return ni.apply(this,arguments)}(Pe,y));return M.localCache[y]=ge,ge})()}_remove(y){var M=this;return(0,g.Z)(function*(){return M._withPendingWrite((0,g.Z)(function*(){return yield M._withRetries(ge=>ds(ge,y)),delete M.localCache[y],M.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,g.Z)(function*(){const M=yield y._withRetries(At=>{const bn=qt(At,!1).getAll();return new st(bn).toPromise()});if(!M)return[];if(0!==y.pendingWrites)return[];const ge=[],Pe=new Set;for(const{fbase_key:At,value:bn}of M)Pe.add(At),JSON.stringify(y.localCache[At])!==JSON.stringify(bn)&&(y.notifyListeners(At,bn),ge.push(At));for(const At of Object.keys(y.localCache))y.localCache[At]&&!Pe.has(At)&&(y.notifyListeners(At,null),ge.push(At));return ge})()}notifyListeners(y,M){this.localCache[y]=M;const ge=this.listeners[y];if(ge)for(const Pe of Array.from(ge))Pe(M)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(M)}_removeListener(y,M){this.listeners[y]&&(this.listeners[y].delete(M),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})();function _o(A,_){return Ot(A,"POST","/v2/accounts/mfaSignIn:start",wn(A,_))}function to(){return(to=(0,g.Z)(function*(A){return(yield Ot(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gl(A){return new Promise((_,y)=>{const M=document.createElement("script");M.setAttribute("src",A),M.onload=_,M.onerror=ge=>{const Pe=ze("internal-error");Pe.customData=ge,y(Pe)},M.type="text/javascript",M.charset="UTF-8",function Ls(){var A,_;return null!==(_=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==_?_:document}().appendChild(M)})}function no(A){return`__${A}${Math.floor(1e6*Math.random())}`}const Us=1e12;class ml{constructor(_){this.auth=_,this.counter=Us,this._widgets=new Map}render(_,y){const M=this.counter;return this._widgets.set(M,new Ka(_,this.auth.name,y||{})),this.counter++,M}reset(_){var y;const M=_||Us;null===(y=this._widgets.get(M))||void 0===y||y.delete(),this._widgets.delete(M)}getResponse(_){var y;return(null===(y=this._widgets.get(_||Us))||void 0===y?void 0:y.getResponse())||""}execute(_){var y=this;return(0,g.Z)(function*(){var M;return null===(M=y._widgets.get(_||Us))||void 0===M||M.execute(),""})()}}class Ka{constructor(_,y,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ge="string"==typeof _?document.getElementById(_):_;Ne(ge,"argument-error",{appName:y}),this.container=ge,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gd(A){const _=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<A;M++)_.push(y.charAt(Math.floor(Math.random()*y.length)));return _.join("")}(50);const{callback:_,"expired-callback":y}=this.params;if(_)try{_(this.responseToken)}catch(M){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(M){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sc=no("rcb"),Mi=new Rt(3e4,6e4);class ru{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(_=Ji().grecaptcha)||void 0===_?void 0:_.render)}load(_,y=""){return Ne(function iu(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(y),_,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Ji().grecaptcha):new Promise((M,ge)=>{const Pe=Ji().setTimeout(()=>{ge(ze(_,"network-request-failed"))},Mi.get());Ji()[Sc]=()=>{Ji().clearTimeout(Pe),delete Ji()[Sc];const bn=Ji().grecaptcha;if(!bn)return void ge(ze(_,"internal-error"));const Xn=bn.render;bn.render=(yr,oi)=>{const ss=Xn(yr,oi);return this.counter++,ss},this.hostLanguage=y,M(bn)},gl(`https://www.google.com/recaptcha/api.js??${(0,S.xO)({onload:Sc,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(Pe),ge(ze(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var y;return!!(null===(y=Ji().grecaptcha)||void 0===y?void 0:y.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sh{load(_){return(0,g.Z)(function*(){return new ml(_)})()}clearedOneInstance(){}}const Za="recaptcha",md={theme:"light",type:"image"};class Ll{constructor(_,y=Object.assign({},md),M){this.parameters=y,this.type=Za,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(M),this.isInvisible="invisible"===this.parameters.size,Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const ge="string"==typeof _?document.getElementById(_):_;Ne(ge,this.auth,"argument-error"),this.container=ge,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sh:new ru,this.validateStartingState()}verify(){var _=this;return(0,g.Z)(function*(){_.assertNotDestroyed();const y=yield _.render(),M=_.getAssertedRecaptcha();return M.getResponse(y)||new Promise(Pe=>{const At=bn=>{!bn||(_.tokenChangeListeners.delete(At),Pe(bn))};_.tokenChangeListeners.add(At),_.isInvisible&&M.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return y=>{if(this.tokenChangeListeners.forEach(M=>M(y)),"function"==typeof _)_(y);else if("string"==typeof _){const M=Ji()[_];"function"==typeof M&&M(y)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,g.Z)(function*(){if(yield _.init(),!_.widgetId){let y=_.container;if(!_.isInvisible){const M=document.createElement("div");y.appendChild(M),y=M}_.widgetId=_.getAssertedRecaptcha().render(y,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,g.Z)(function*(){Ne(ft()&&!Zs(),_.auth,"internal-error"),yield function Aa(){let A=null;return new Promise(_=>{"complete"!==document.readyState?(A=()=>_(),window.addEventListener("load",A)):_()}).catch(_=>{throw A&&window.removeEventListener("load",A),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const y=yield function Vt(A){return to.apply(this,arguments)}(_.auth);Ne(y,_.auth,"internal-error"),_.parameters.sitekey=y})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ra{constructor(_,y){this.verificationId=_,this.onConfirmation=y}confirm(_){const y=Zi._fromVerification(this.verificationId,_);return this.onConfirmation(y)}}function hs(A,_,y){return la.apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(A,_,y){const M=In(A),ge=yield Ms(M,_,(0,S.m9)(y));return new Ra(ge,Pe=>zn(M,Pe))})).apply(this,arguments)}function _l(A,_,y){return ac.apply(this,arguments)}function ac(){return(ac=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A);yield fe(!1,M,"phone");const ge=yield Ms(M.auth,_,(0,S.m9)(y));return new Ra(ge,Pe=>ri(M,Pe))})).apply(this,arguments)}function Rs(A,_,y){return yo.apply(this,arguments)}function yo(){return(yo=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A),ge=yield Ms(M.auth,_,(0,S.m9)(y));return new Ra(ge,Pe=>Vr(M,Pe))})).apply(this,arguments)}function Ms(A,_,y){return es.apply(this,arguments)}function es(){return(es=(0,g.Z)(function*(A,_,y){var M;const ge=yield y.verify();try{let Pe;if(Ne("string"==typeof ge,A,"argument-error"),Ne(y.type===Za,A,"argument-error"),Pe="string"==typeof _?{phoneNumber:_}:_,"session"in Pe){const At=Pe.session;if("phoneNumber"in Pe)return Ne("enroll"===At.type,A,"internal-error"),(yield Gn(A,{idToken:At.credential,phoneEnrollmentInfo:{phoneNumber:Pe.phoneNumber,recaptchaToken:ge}})).phoneSessionInfo.sessionInfo;{Ne("signin"===At.type,A,"internal-error");const bn=(null===(M=Pe.multiFactorHint)||void 0===M?void 0:M.uid)||Pe.multiFactorUid;return Ne(bn,A,"missing-multi-factor-info"),(yield _o(A,{mfaPendingCredential:At.credential,mfaEnrollmentId:bn,phoneSignInInfo:{recaptchaToken:ge}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:At}=yield Pt(A,{phoneNumber:Pe.phoneNumber,recaptchaToken:ge});return At}}finally{y._reset()}})).apply(this,arguments)}function Ko(A,_){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,g.Z)(function*(A,_){yield gi((0,S.m9)(A),_)})).apply(this,arguments)}let Ul=(()=>{class A{constructor(y){this.providerId=A.PROVIDER_ID,this.auth=In(y)}verifyPhoneNumber(y,M){return Ms(this.auth,y,(0,S.m9)(M))}static credential(y,M){return Zi._fromVerification(y,M)}static credentialFromResult(y){return A.credentialFromTaggedObject(y)}static credentialFromError(y){return A.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:M,temporaryProof:ge}=y;return M&&ge?Zi._fromTokenResponse(M,ge):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function Po(A,_){return _?tn(_):(Ne(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class Vo extends Nr{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Ii(_,this._buildIdpRequest())}_linkToIdToken(_,y){return Ii(_,this._buildIdpRequest(y))}_getReauthenticationResolver(_){return Ii(_,this._buildIdpRequest())}_buildIdpRequest(_){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(y.idToken=_),y}}function Bl(A){return Wt(A.auth,new Vo(A),A.bypassAuthState)}function va(A){const{auth:_,user:y}=A;return Ne(y,_,"internal-error"),Ee(y,new Vo(A),A.bypassAuthState)}function uo(A){return fs.apply(this,arguments)}function fs(){return(fs=(0,g.Z)(function*(A){const{auth:_,user:y}=A;return Ne(y,_,"internal-error"),gi(y,new Vo(A),A.bypassAuthState)})).apply(this,arguments)}class qo{constructor(_,y,M,ge,Pe=!1){this.auth=_,this.resolver=M,this.user=ge,this.bypassAuthState=Pe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var _=this;return new Promise(function(){var y=(0,g.Z)(function*(M,ge){_.pendingPromise={resolve:M,reject:ge};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(Pe){_.reject(Pe)}});return function(M,ge){return y.apply(this,arguments)}}())}onAuthEvent(_){var y=this;return(0,g.Z)(function*(){const{urlResponse:M,sessionId:ge,postBody:Pe,tenantId:At,error:bn,type:Xn}=_;if(bn)return void y.reject(bn);const yr={auth:y.auth,requestUri:M,sessionId:ge,tenantId:At||void 0,postBody:Pe||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Xn)(yr))}catch(oi){y.reject(oi)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return Bl;case"linkViaPopup":case"linkViaRedirect":return uo;case"reauthViaPopup":case"reauthViaRedirect":return va;default:Mt(this.auth,"internal-error")}}resolve(_){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yl=new Rt(2e3,1e4);function Vl(A,_,y){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,g.Z)(function*(A,_,y){const M=In(A);Ge(A,_,js);const ge=Po(M,y);return new cc(M,"signInViaPopup",_,ge).executeNotNull()})).apply(this,arguments)}function qa(A,_,y){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A);Ge(M.auth,_,js);const ge=Po(M.auth,y);return new cc(M.auth,"reauthViaPopup",_,ge,M).executeNotNull()})).apply(this,arguments)}function vl(A,_,y){return lc.apply(this,arguments)}function lc(){return(lc=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A);Ge(M.auth,_,js);const ge=Po(M.auth,y);return new cc(M.auth,"linkViaPopup",_,ge,M).executeNotNull()})).apply(this,arguments)}let cc=(()=>{class A extends qo{constructor(y,M,ge,Pe,At){super(y,M,Pe,At),this.provider=ge,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var y=this;return(0,g.Z)(function*(){const M=yield y.execute();return Ne(M,y.auth,"internal-error"),M})()}onExecution(){var y=this;return(0,g.Z)(function*(){vt(1===y.filter.length,"Popup operations only handle one event");const M=zo();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],M),y.authWindow.associatedEvent=M,y.resolver._originValidation(y.auth).catch(ge=>{y.reject(ge)}),y.resolver._isIframeWebStorageSupported(y.auth,ge=>{ge||y.reject(ze(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(ze(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const y=()=>{var M,ge;this.pollId=(null===(ge=null===(M=this.authWindow)||void 0===M?void 0:M.window)||void 0===ge?void 0:ge.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ze(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,yl.get())};y()}}return A.currentPopupAction=null,A})();const Qo=new Map;class jo extends qo{constructor(_,y,M=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,M),this.eventId=null}execute(){var _=()=>super.execute,y=this;return(0,g.Z)(function*(){let M=Qo.get(y.auth._key());if(!M){try{const Pe=(yield function _d(A,_){return Ya.apply(this,arguments)}(y.resolver,y.auth))?yield _().call(y):null;M=()=>Promise.resolve(Pe)}catch(ge){M=()=>Promise.reject(ge)}Qo.set(y.auth._key(),M)}return y.bypassAuthState||Qo.set(y.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(_){var y=()=>super.onAuthEvent,M=this;return(0,g.Z)(function*(){if("signInViaRedirect"===_.type)return y().call(M,_);if("unknown"!==_.type){if(_.eventId){const ge=yield M.auth._redirectUserForId(_.eventId);if(ge)return M.user=ge,y().call(M,_);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Ya(){return(Ya=(0,g.Z)(function*(A,_){const y=Z(_),M=F(A);if(!(yield M._isAvailable()))return!1;const ge="true"===(yield M._get(y));return yield M._remove(y),ge})).apply(this,arguments)}function Oa(A,_){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,g.Z)(function*(A,_){return F(A)._set(Z(_),"true")})).apply(this,arguments)}function Ea(){Qo.clear()}function jl(A,_){Qo.set(A._key(),_)}function F(A){return tn(A._redirectPersistence)}function Z(A){return we("pendingRedirect",A.config.apiKey,A.name)}function me(A,_,y){return function je(A,_,y){return Ct.apply(this,arguments)}(A,_,y)}function Ct(){return(Ct=(0,g.Z)(function*(A,_,y){const M=In(A);Ge(A,_,js),yield M._initializationPromise;const ge=Po(M,y);return yield Oa(ge,M),ge._openRedirect(M,_,"signInViaRedirect")})).apply(this,arguments)}function $t(A,_,y){return function dn(A,_,y){return cr.apply(this,arguments)}(A,_,y)}function cr(){return(cr=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A);Ge(M.auth,_,js),yield M.auth._initializationPromise;const ge=Po(M.auth,y);yield Oa(ge,M.auth);const Pe=yield ba(M);return ge._openRedirect(M.auth,_,"reauthViaRedirect",Pe)})).apply(this,arguments)}function Er(A,_,y){return function pr(A,_,y){return ei.apply(this,arguments)}(A,_,y)}function ei(){return(ei=(0,g.Z)(function*(A,_,y){const M=(0,S.m9)(A);Ge(M.auth,_,js),yield M.auth._initializationPromise;const ge=Po(M.auth,y);yield fe(!1,M,_.providerId),yield Oa(ge,M.auth);const Pe=yield ba(M);return ge._openRedirect(M.auth,_,"linkViaRedirect",Pe)})).apply(this,arguments)}function $r(A,_){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(A,_){return yield In(A)._initializationPromise,_s(A,_,!1)})).apply(this,arguments)}function _s(A,_){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,g.Z)(function*(A,_,y=!1){const M=In(A),ge=Po(M,_),At=yield new jo(M,ge,y).execute();return At&&!y&&(delete At.user._redirectEventId,yield M._persistUserIfCurrent(At.user),yield M._setRedirectUser(null,_)),At})).apply(this,arguments)}function ba(A){return wa.apply(this,arguments)}function wa(){return(wa=(0,g.Z)(function*(A){const _=zo(`${A.uid}:::`);return A._redirectEventId=_,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),_})).apply(this,arguments)}class ua{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let y=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(_,M)&&(y=!0,this.sendToConsumer(_,M),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function Ia(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xa(A);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=_,y=!0)),y}sendToConsumer(_,y){var M;if(_.error&&!Xa(_)){const ge=(null===(M=_.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";y.onError(ze(this.auth,ge))}else y.onAuthEvent(_)}isEventForConsumer(_,y){const M=null===y.eventId||!!_.eventId&&_.eventId===y.eventId;return y.filter.includes(_.type)&&M}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(El(_))}saveEventToCache(_){this.cachedEventUids.add(El(_)),this.lastProcessedEventTime=Date.now()}}function El(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(_=>_).join("-")}function Xa({type:A,error:_}){return"unknown"===A&&"auth/no-auth-event"===(null==_?void 0:_.code)}function ts(A){return uc.apply(this,arguments)}function uc(){return(uc=(0,g.Z)(function*(A,_={}){return Ot(A,"GET","/v1/projects",_)})).apply(this,arguments)}const vo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ni=/^https?/;function el(){return(el=(0,g.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:_}=yield ts(A);for(const y of _)try{if(Xo(y))return}catch(M){}Mt(A,"unauthorized-domain")})).apply(this,arguments)}function Xo(A){const _=Ze(),{protocol:y,hostname:M}=new URL(_);if(A.startsWith("chrome-extension://")){const At=new URL(A);return""===At.hostname&&""===M?"chrome-extension:"===y&&A.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===y&&At.hostname===M}if(!Ni.test(y))return!1;if(vo.test(A))return M===A;const ge=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ge+"|"+ge+")$","i").test(M)}const Bs=new Rt(3e4,6e4);function dc(){const A=Ji().___jsl;if(null==A?void 0:A.H)for(const _ of Object.keys(A.H))if(A.H[_].r=A.H[_].r||[],A.H[_].L=A.H[_].L||[],A.H[_].r=[...A.H[_].L],A.CP)for(let y=0;y<A.CP.length;y++)A.CP[y]=null}let tl=null;function su(A){return tl=tl||function ys(A){return new Promise((_,y)=>{var M,ge,Pe;function At(){dc(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{dc(),y(ze(A,"network-request-failed"))},timeout:Bs.get()})}if(null===(ge=null===(M=Ji().gapi)||void 0===M?void 0:M.iframes)||void 0===ge?void 0:ge.Iframe)_(gapi.iframes.getContext());else{if(!(null===(Pe=Ji().gapi)||void 0===Pe?void 0:Pe.load)){const bn=no("iframefcb");return Ji()[bn]=()=>{gapi.load?At():y(ze(A,"network-request-failed"))},gl(`https://apis.google.com/js/api.js?onload=${bn}`).catch(Xn=>y(Xn))}At()}}).catch(_=>{throw tl=null,_})}(A),tl}const bl=new Rt(5e3,15e3),da={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ou=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function au(A){const _=A.config;Ne(_.authDomain,A,"auth-domain-config-required");const y=_.emulator?Yt(_,"emulator/auth/iframe"):`https://${A.config.authDomain}/__/auth/iframe`,M={apiKey:_.apiKey,appName:A.name,v:U.SDK_VERSION},ge=ou.get(A.config.apiHost);ge&&(M.eid=ge);const Pe=A._getFrameworks();return Pe.length&&(M.fw=Pe.join(",")),`${y}?${(0,S.xO)(M).slice(1)}`}function Hl(){return Hl=(0,g.Z)(function*(A){const _=yield su(A),y=Ji().gapi;return Ne(y,A,"internal-error"),_.open({where:document.body,url:au(A),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:da,dontclear:!0},M=>new Promise(function(){var ge=(0,g.Z)(function*(Pe,At){yield M.restyle({setHideOnLeave:!1});const bn=ze(A,"network-request-failed"),Xn=Ji().setTimeout(()=>{At(bn)},bl.get());function yr(){Ji().clearTimeout(Xn),Pe(M)}M.ping(yr).then(yr,()=>{At(bn)})});return function(Pe,At){return ge.apply(this,arguments)}}()))}),Hl.apply(this,arguments)}const ha={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ka{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(_){}}}function Jo(A,_,y,M,ge,Pe){Ne(A.config.authDomain,A,"auth-domain-config-required"),Ne(A.config.apiKey,A,"invalid-api-key");const At={apiKey:A.config.apiKey,appName:A.name,authType:y,redirectUrl:M,v:U.SDK_VERSION,eventId:ge};if(_ instanceof js){_.setDefaultLanguage(A.languageCode),At.providerId=_.providerId||"",(0,S.xb)(_.getCustomParameters())||(At.customParameters=JSON.stringify(_.getCustomParameters()));for(const[Xn,yr]of Object.entries(Pe||{}))At[Xn]=yr}if(_ instanceof Xr){const Xn=_.getScopes().filter(yr=>""!==yr);Xn.length>0&&(At.scopes=Xn.join(","))}A.tenantId&&(At.tid=A.tenantId);const bn=At;for(const Xn of Object.keys(bn))void 0===bn[Xn]&&delete bn[Xn];return`${function Na({config:A}){return A.emulator?Yt(A,"emulator/auth/handler"):`https://${A.authDomain}/__/auth/handler`}(A)}?${(0,S.xO)(bn).slice(1)}`}const Fa="webStorageSupport",hc=class du{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wo,this._completeRedirectFn=_s,this._overrideRedirectResult=jl}_openPopup(_,y,M,ge){var Pe=this;return(0,g.Z)(function*(){var At;vt(null===(At=Pe.eventManagers[_._key()])||void 0===At?void 0:At.manager,"_initialize() not called before _openPopup()");const bn=Jo(_,y,M,Ze(),ge);return function ko(A,_,y,M=500,ge=600){const Pe=Math.max((window.screen.availHeight-ge)/2,0).toString(),At=Math.max((window.screen.availWidth-M)/2,0).toString();let bn="";const Xn=Object.assign(Object.assign({},ha),{width:M.toString(),height:ge.toString(),top:Pe,left:At}),yr=(0,S.z$)().toLowerCase();y&&(bn=ae(yr)?"_blank":y),be(yr)&&(_=_||"http://localhost",Xn.scrollbars="yes");const oi=Object.entries(Xn).reduce((Os,[La,rl])=>`${Os}${La}=${rl},`,"");if(function Ir(A=(0,S.z$)()){var _;return Dn(A)&&!!(null===(_=window.navigator)||void 0===_?void 0:_.standalone)}(yr)&&"_self"!==bn)return function cu(A,_){const y=document.createElement("a");y.href=A,y.target=_;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(M)}(_||"",bn),new ka(null);const ss=window.open(_||"",bn,oi);Ne(ss,A,"popup-blocked");try{ss.focus()}catch(Os){}return new ka(ss)}(_,bn,zo())})()}_openRedirect(_,y,M,ge){var Pe=this;return(0,g.Z)(function*(){return yield Pe._originValidation(_),function Or(A){Ji().location.href=A}(Jo(_,y,M,Ze(),ge)),new Promise(()=>{})})()}_initialize(_){const y=_._key();if(this.eventManagers[y]){const{manager:ge,promise:Pe}=this.eventManagers[y];return ge?Promise.resolve(ge):(vt(Pe,"If manager is not set, promise should be"),Pe)}const M=this.initAndGetManager(_);return this.eventManagers[y]={promise:M},M.catch(()=>{delete this.eventManagers[y]}),M}initAndGetManager(_){var y=this;return(0,g.Z)(function*(){const M=yield function Pa(A){return Hl.apply(this,arguments)}(_),ge=new ua(_);return M.register("authEvent",Pe=>(Ne(null==Pe?void 0:Pe.authEvent,_,"invalid-auth-event"),{status:ge.onEvent(Pe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[_._key()]={manager:ge},y.iframes[_._key()]=M,ge})()}_isIframeWebStorageSupported(_,y){this.iframes[_._key()].send(Fa,{type:Fa},ge=>{var Pe;const At=null===(Pe=null==ge?void 0:ge[0])||void 0===Pe?void 0:Pe[Fa];void 0!==At&&y(!!At),Mt(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const y=_._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ja(A){return el.apply(this,arguments)}(_)),this.originValidationPromises[y]}get _shouldInitProactively(){return xr()||$()||Dn()}};class fc extends class $l{constructor(_){this.factorId=_}_process(_,y,M){switch(y.type){case"enroll":return this._finalizeEnroll(_,y.credential,M);case"signin":return this._finalizeSignIn(_,y.credential);default:return gt("unexpected MultiFactorSessionType")}}}{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new fc(_)}_finalizeEnroll(_,y,M){return function br(A,_){return Ot(A,"POST","/v2/accounts/mfaEnrollment:finalize",wn(A,_))}(_,{idToken:y,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,y){return function Wa(A,_){return Ot(A,"POST","/v2/accounts/mfaSignIn:finalize",wn(A,_))}(_,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ku=(()=>{class A{constructor(){}static assertion(y){return fc._fromCredential(y)}}return A.FACTOR_ID="phone",A})();var hu="@firebase/auth";class yd{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var y=this;return(0,g.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const y=this.auth.onIdTokenChanged(M=>{_((null==M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,y),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const y=this.internalListeners.get(_);!y||(this.internalListeners.delete(_),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wl=(0,S.Pz)("authIdTokenMaxAge")||300;let zl=null;const Il=A=>function(){var _=(0,g.Z)(function*(y){const M=y&&(yield y.getIdTokenResult()),ge=M&&((new Date).getTime()-Date.parse(M.issuedAtTime))/1e3;if(ge&&ge>Wl)return;const Pe=null==M?void 0:M.token;zl!==Pe&&(zl=Pe,yield fetch(A,{method:Pe?"POST":"DELETE",headers:Pe?{Authorization:`Bearer ${Pe}`}:{}}))});return function(y){return _.apply(this,arguments)}}();function ea(A=(0,U.getApp)()){const _=(0,U._getProvider)(A,"auth");if(_.isInitialized())return _.getImmediate();const y=function vn(A,_){const y=(0,U._getProvider)(A,"auth");if(y.isInitialized()){const ge=y.getImmediate(),Pe=y.getOptions();if((0,S.vZ)(Pe,null!=_?_:{}))return ge;Mt(ge,"already-initialized")}return y.initialize({options:_})}(A,{popupRedirectResolver:hc,persistence:[ya,Vi,Wo]}),M=(0,S.Pz)("authTokenSyncURL");if(M){const Pe=Il(M);(function ls(A,_,y){(0,S.m9)(A).beforeAuthStateChanged(_,y)})(y,Pe,()=>Pe(y.currentUser)),function Si(A,_,y,M){(0,S.m9)(A).onIdTokenChanged(_,y,M)}(y,At=>Pe(At))}const ge=(0,S.q4)("auth");return ge&&Kr(y,`http://${ge}`),y}!function pc(A){(0,U._registerComponent)(new Ie.wA("auth",(_,{options:y})=>{const M=_.getProvider("app").getImmediate(),ge=_.getProvider("heartbeat"),{apiKey:Pe,authDomain:At}=M.options;return((bn,Xn)=>{Ne(Pe&&!Pe.includes(":"),"invalid-api-key",{appName:bn.name}),Ne(!(null==At?void 0:At.includes(":")),"argument-error",{appName:bn.name});const yr={apiKey:Pe,authDomain:At,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ur(A)},oi=new Ki(bn,Xn,yr);return function xn(A,_){const y=(null==_?void 0:_.persistence)||[],M=(Array.isArray(y)?y:[y]).map(tn);(null==_?void 0:_.errorMap)&&A._updateErrorMap(_.errorMap),A._initializeWithPersistence(M,null==_?void 0:_.popupRedirectResolver)}(oi,y),oi})(M,ge)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,y,M)=>{_.getProvider("auth-internal").initialize()})),(0,U._registerComponent)(new Ie.wA("auth-internal",_=>{const y=In(_.getProvider("auth").getImmediate());return new yd(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,U.registerVersion)(hu,"0.21.5",function oh(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,U.registerVersion)(hu,"0.21.5","esm2017")}("Browser")},5525:(Je,Te,b)=>{b.d(Te,{u7:()=>up,Jj:()=>Qc,IX:()=>np,my:()=>wo,xU:()=>hd,Lz:()=>Xc,WA:()=>Jt,F8:()=>zh,$q:()=>ef,W:()=>fd,EK:()=>x,PU:()=>$u,l7:()=>Za,Ky:()=>Ae,Xb:()=>ve,Cf:()=>Fi,K9:()=>zs,Me:()=>ac,yq:()=>Gn,Wi:()=>Hm,ET:()=>c_,Ab:()=>h_,vr:()=>Mv,Fc:()=>ay,hJ:()=>wg,B$:()=>Ig,at:()=>Gm,oe:()=>l_,AK:()=>Rv,TF:()=>Sg,JU:()=>Wm,ST:()=>Km,fH:()=>Dg,Ix:()=>qm,Wu:()=>Ng,Lx:()=>i_,qY:()=>io,GL:()=>pd,QT:()=>Cy,kl:()=>Ty,Xk:()=>Dy,PL:()=>Sy,UQ:()=>Ay,zN:()=>Ry,nP:()=>f_,b9:()=>yy,vh:()=>r_,Pb:()=>cy,L$:()=>Ym,cf:()=>u_,sc:()=>d_,Xo:()=>_y,IO:()=>t_,iE:()=>Xd,Eo:()=>tp,i3:()=>ih,Bt:()=>Hg,pl:()=>o_,Ub:()=>Ws,qK:()=>Iy,TQ:()=>vy,e0:()=>lp,r7:()=>a_,Mx:()=>Zm,ar:()=>my});var oe,g=b(5861),S=b(9681),U=b(4859),re=b(1877),de=b(2090),Ie="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ce={},ce=ce||{},te=Ie||self;function se(){}function ke(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function qe(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var ut="closure_uid_"+(1e9*Math.random()>>>0),Et=0;function et(i,e,t){return i.call.apply(i.bind,arguments)}function at(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function He(i,e,t){return(He=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?et:at).apply(null,arguments)}function Mt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function ze(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,u,f){for(var v=Array(arguments.length-2),O=2;O<arguments.length;O++)v[O-2]=arguments[O];return e.prototype[u].apply(o,v)}}function Be(){this.s=this.s,this.o=this.o}Be.prototype.s=!1,Be.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function it(i){Object.prototype.hasOwnProperty.call(i,ut)&&i[ut]||(i[ut]=++Et)}(this)},Be.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qe=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Ne(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function gt(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(ke(o)){const u=i.length||0,f=o.length||0;i.length=u+f;for(let v=0;v<f;v++)i[u+v]=o[v]}else i.push(o)}}function vt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}vt.prototype.h=function(){this.defaultPrevented=!0};var sn=function(){if(!te.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{te.addEventListener("test",se,e),te.removeEventListener("test",se,e)}catch(t){}return i}();function tn(i){return/^[\s\xa0]*$/.test(i)}var vn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function xn(i,e){return i<e?-1:i>e?1:0}function Ze(){var i=te.navigator;return i&&(i=i.userAgent)?i:""}function ft(i){return-1!=Ze().indexOf(i)}function St(i){return St[" "](i),i}St[" "]=se;var Ot,i,Ut=ft("Opera"),Rt=ft("Trident")||ft("MSIE"),Yt=ft("Edge"),Nn=Yt||Rt,jn=ft("Gecko")&&!(-1!=Ze().toLowerCase().indexOf("webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),nn=-1!=Ze().toLowerCase().indexOf("webkit")&&!ft("Edge");function wn(){var i=te.document;return i?i.documentMode:void 0}e:{var hn="",xt=(i=Ze(),jn?/rv:([^\);]+)(\)|;)/.exec(i):Yt?/Edge\/([\d\.]+)/.exec(i):Rt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):nn?/WebKit\/(\S+)/.exec(i):Ut?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(xt&&(hn=xt?xt[1]:""),Rt){var rn=wn();if(null!=rn&&rn>parseFloat(hn)){Ot=String(rn);break e}}Ot=hn}var fn={};var ur=te.document&&Rt&&(wn()||parseInt(Ot,10))||void 0;function Dr(i,e){if(vt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(jn){e:{try{St(e.nodeName);var u=!0;break e}catch(f){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:mn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Dr.X.h.call(this)}}ze(Dr,vt);var mn={2:"touch",3:"pen",4:"mouse"};Dr.prototype.h=function(){Dr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Tn="closure_listenable_"+(1e6*Math.random()|0),De=0;function qn(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=u,this.key=++De,this.ba=this.ea=!1}function rt(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Y(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function J(i){const e={};for(const t in i)e[t]=i[t];return e}const Re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xe(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let f=0;f<Re.length;f++)t=Re[f],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function yt(i){this.src=i,this.g={},this.h=0}function Ft(i,e){var t=e.type;if(t in i.g){var f,o=i.g[t],u=Qe(o,e);(f=0<=u)&&Array.prototype.splice.call(o,u,1),f&&(rt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Zt(i,e,t,o){for(var u=0;u<i.length;++u){var f=i[u];if(!f.ba&&f.listener==e&&f.capture==!!t&&f.ha==o)return u}return-1}yt.prototype.add=function(i,e,t,o,u){var f=i.toString();(i=this.g[f])||(i=this.g[f]=[],this.h++);var v=Zt(i,e,o,u);return-1<v?(e=i[v],t||(e.ea=!1)):((e=new qn(e,this.src,f,!!o,u)).ea=t,i.push(e)),e};var zt="closure_lm_"+(1e6*Math.random()|0),Mn={};function Kn(i,e,t,o,u){if(o&&o.once)return lr(i,e,t,o,u);if(Array.isArray(e)){for(var f=0;f<e.length;f++)Kn(i,e[f],t,o,u);return null}return t=N(t),i&&i[Tn]?i.N(e,t,qe(o)?!!o.capture:!!o,u):Bn(i,e,t,!1,o,u)}function Bn(i,e,t,o,u,f){if(!e)throw Error("Invalid event type");var v=qe(u)?!!u.capture:!!u,O=It(i);if(O||(i[zt]=O=new yt(i)),(t=O.add(e,t,o,v,f)).proxy)return t;if(o=function gr(){const e=Ue;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)sn||(u=v),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(dt(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function lr(i,e,t,o,u){if(Array.isArray(e)){for(var f=0;f<e.length;f++)lr(i,e[f],t,o,u);return null}return t=N(t),i&&i[Tn]?i.O(e,t,qe(o)?!!o.capture:!!o,u):Bn(i,e,t,!0,o,u)}function tr(i,e,t,o,u){if(Array.isArray(e))for(var f=0;f<e.length;f++)tr(i,e[f],t,o,u);else o=qe(o)?!!o.capture:!!o,t=N(t),i&&i[Tn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Zt(f=i.g[e],t,o,u))&&(rt(f[t]),Array.prototype.splice.call(f,t,1),0==f.length&&(delete i.g[e],i.h--))):i&&(i=It(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Zt(e,t,o,u)),(t=-1<i?e[i]:null)&&pt(t))}function pt(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Tn])Ft(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(dt(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=It(e))?(Ft(t,i),0==t.h&&(t.src=null,e[zt]=null)):rt(i)}}}function dt(i){return i in Mn?Mn[i]:Mn[i]="on"+i}function Ue(i,e){if(i.ba)i=!0;else{e=new Dr(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&pt(i),i=t.call(o,e)}return i}function It(i){return(i=i[zt])instanceof yt?i:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function N(i){return"function"==typeof i?i:(i[he]||(i[he]=function(e){return i.handleEvent(e)}),i[he])}function L(){Be.call(this),this.i=new yt(this),this.P=this,this.I=null}function q(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new vt(e,i);else if(e instanceof vt)e.target=e.target||i;else{var u=e;Xe(e=new vt(o,i),u)}if(u=!0,t)for(var f=t.length-1;0<=f;f--){var v=e.g=t[f];u=X(v,o,!0,e)&&u}if(u=X(v=e.g=i,o,!0,e)&&u,u=X(v,o,!1,e)&&u,t)for(f=0;f<t.length;f++)u=X(v=e.g=t[f],o,!1,e)&&u}function X(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,f=0;f<e.length;++f){var v=e[f];if(v&&!v.ba&&v.capture==t){var O=v.listener,W=v.ha||v.src;v.ea&&Ft(i.i,v),u=!1!==O.call(W,o)&&u}}return u&&!o.defaultPrevented}ze(L,Be),L.prototype[Tn]=!0,L.prototype.removeEventListener=function(i,e,t,o){tr(this,i,e,t,o)},L.prototype.M=function(){if(L.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)rt(t[o]);delete i.g[e],i.h--}}this.I=null},L.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},L.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Fe=te.JSON.stringify;function ht(){var i=Tt;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ae,xe=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ue,i=>i.reset());class ue{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function be(i){te.setTimeout(()=>{throw i},0)}function $(i,e){ae||function _e(){var i=te.Promise.resolve(void 0);ae=function(){i.then(un)}}(),Ve||(ae(),Ve=!0),Tt.add(i,e)}var Ve=!1,Tt=new class we{constructor(){this.h=this.g=null}add(e,t){const o=xe.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function un(){for(var i;i=ht();){try{i.h.call(i.g)}catch(t){be(t)}var e=xe;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Ve=!1}function Dn(i,e){L.call(this),this.h=i||1,this.g=e||te,this.j=He(this.lb,this),this.l=Date.now()}function Ln(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Ir(i,e,t){if("function"==typeof i)t&&(i=He(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=He(i.handleEvent,i)}return 2147483647<Number(e)?-1:te.setTimeout(i,e||0)}function nr(i){i.g=Ir(()=>{i.g=null,i.i&&(i.i=!1,nr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ze(Dn,L),(oe=Dn.prototype).ca=!1,oe.R=null,oe.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),q(this,"tick"),this.ca&&(Ln(this),this.start()))}},oe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},oe.M=function(){Dn.X.M.call(this),Ln(this),delete this.g};class xr extends Be{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nr(this)}M(){super.M(),this.g&&(te.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(i){Be.call(this),this.h=i,this.g={}}ze(ai,Be);var Ur=[];function Hi(i,e,t,o){Array.isArray(t)||(t&&(Ur[0]=t.toString()),t=Ur);for(var u=0;u<t.length;u++){var f=Kn(e,t[u],o||i.handleEvent,!1,i.h||i);if(!f)break;i.g[f.key]=f}}function Ki(i){Y(i.g,function(e,t){this.g.hasOwnProperty(t)&&pt(e)},i),i.g={}}function In(){this.g=!0}function wi(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function pi(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var f=u[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var v=1;v<u.length;v++)u[v]=""}}}return Fe(t)}catch(O){return e}}(i,t)+(o?" "+o:"")})}ai.prototype.M=function(){ai.X.M.call(this),Ki(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},In.prototype.Aa=function(){this.g=!1},In.prototype.info=function(){};var Oi={},Nr=null;function Pi(){return Nr=Nr||new L}function li(i){vt.call(this,Oi.Pa,i)}function hr(i){const e=Pi();q(e,new li(e))}function ps(i,e){vt.call(this,Oi.STAT_EVENT,i),this.stat=e}function Wr(i){const e=Pi();q(e,new ps(e,i))}function Yi(i,e){vt.call(this,Oi.Qa,i),this.size=e}function ns(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return te.setTimeout(function(){i()},e)}Oi.Pa="serverreachability",ze(li,vt),Oi.STAT_EVENT="statevent",ze(ps,vt),Oi.Qa="timingevent",ze(Yi,vt);var di={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Gi={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ke(){}function ct(){}Ke.prototype.h=null;var _r,Bt={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function An(){vt.call(this,"d")}function _n(){vt.call(this,"c")}function Ei(){}function ti(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new ai(this),this.O=Fr,this.T=new Dn(i=Nn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Zr}function Zr(){this.i=null,this.g="",this.h=!1}ze(An,vt),ze(_n,vt),ze(Ei,Ke),Ei.prototype.g=function(){return new XMLHttpRequest},Ei.prototype.i=function(){return{}},_r=new Ei;var Fr=45e3,Qi={},Qs={};function xs(i,e,t){i.K=1,i.v=Ns(Ri(e)),i.s=t,i.P=!0,Ii(i,null)}function Ii(i,e){i.F=Date.now(),Pt(i),i.A=Ri(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),fr(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Zr,i.g=Qt(i.l,t?e:null,!i.s),0<i.N&&(i.L=new xr(He(i.La,i,i.g),i.N)),Hi(i.S,i.g,"readystatechange",i.ib),e=i.H?J(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),hr(),function mr(i,e,t,o,u,f){i.info(function(){if(i.g)if(f)for(var v="",O=f.split("&"),W=0;W<O.length;W++){var ie=O[W].split("=");if(1<ie.length){var Me=ie[0];ie=ie[1];var lt=Me.split("_");v=2<=lt.length&&"type"==lt[1]?v+(Me+"=")+ie+"&":v+(Me+"=redacted&")}}else v=null;else v=f;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Ts(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function wt(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=mt(i,t),u==Qs){4==e&&(i.o=4,Wr(14),o=!1),wi(i.j,i.m,null,"[Incomplete Response]");break}if(u==Qi){i.o=4,Wr(15),wi(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}wi(i.j,i.m,u,null),bi(i,u)}Ts(i)&&u!=Qs&&u!=Qi&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Wr(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),E(e),e.K=!0,Wr(11))):(wi(i.j,i.m,t,"[Invalid Chunked Response]"),vr(i),Yn(i))}function mt(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Qs:(t=Number(e.substring(t,o)),isNaN(t)?Qi:(o+=1)+t>e.length?Qs:(e=e.substr(o,t),i.C=o+t,e))}function Pt(i){i.V=Date.now()+i.O,on(i,i.O)}function on(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ns(He(i.gb,i),e)}function kn(i){i.B&&(te.clearTimeout(i.B),i.B=null)}function Yn(i){0==i.l.G||i.I||le(i.l,i)}function vr(i){kn(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ln(i.T),Ki(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function bi(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||H(t.h,i)))if(!i.J&&H(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch(ie){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=ns(He(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;B(t),rr(t)}ne(t),Wr(18)}if(1>=gi(t.h)&&t.ja){try{t.ja()}catch(ie){}t.ja=void 0}}else Ye(t,11)}else if((i.J||t.g==i)&&B(t),!tn(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let ie=u[e];if(t.T=ie[0],ie=ie[1],2==t.G)if("c"==ie[0]){t.I=ie[1],t.ka=ie[2];const Me=ie[3];null!=Me&&(t.ma=Me,t.j.info("VER="+t.ma));const lt=ie[4];null!=lt&&(t.Ca=lt,t.j.info("SVER="+t.Ca));const Nt=ie[5];null!=Nt&&"number"==typeof Nt&&0<Nt&&(t.J=o=1.5*Nt,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const ln=i.g;if(ln){const Pn=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pn){var f=o.h;f.g||-1==Pn.indexOf("spdy")&&-1==Pn.indexOf("quic")&&-1==Pn.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(fe(f,f.h),f.h=null))}if(o.D){const Jn=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Jn&&(o.za=Jn,Xr(o.F,o.D,Jn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var v=i;if((o=t).sa=Dt(o,o.H?o.ka:null,o.V),v.J){V(o.h,v);var O=v,W=o.J;W&&O.setTimeout(W),O.B&&(kn(O),Pt(O)),o.g=v}else Li(o);0<t.i.length&&Rr(t)}else"stop"!=ie[0]&&"close"!=ie[0]||Ye(t,7);else 3==t.G&&("stop"==ie[0]||"close"==ie[0]?"stop"==ie[0]?Ye(t,7):yn(t):"noop"!=ie[0]&&t.l&&t.l.wa(ie),t.A=0)}hr()}catch(ie){}}function ks(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ke(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function Ps(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(ke(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function yi(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ke(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length,f=0;f<u;f++)e.call(void 0,o[f],t&&t[f],i)}(oe=ti.prototype).setTimeout=function(i){this.O=i},oe.ib=function(i){i=i.target;const e=this.L;e&&3==G(i)?e.l():this.La(i)},oe.La=function(i){try{if(i==this.g)e:{const Me=G(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Me)&&(3!=Me||Nn||this.g&&(this.h.h||this.g.fa()||z(this.g)))){this.I||4!=Me||7==e||hr(),kn(this);var t=this.g.aa();this.Y=t;t:if(Ts(this)){var o=z(this.g);i="";var u=o.length,f=4==G(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vr(this),Yn(this);var v="";break t}this.h.i=new te.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:f&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.fa();if(this.i=200==t,function Kr(i,e,t,o,u,f,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+f+" "+v})}(this.j,this.u,this.A,this.m,this.U,Me,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var O,W=this.g;if((O=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tn(O)){var ie=O;break t}}ie=null}if(!(t=ie)){this.i=!1,this.o=3,Wr(12),vr(this),Yn(this);break e}wi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bi(this,t)}this.P?(wt(this,Me,v),Nn&&this.i&&3==Me&&(Hi(this.S,this.T,"tick",this.hb),this.T.start())):(wi(this.j,this.m,v,null),bi(this,v)),4==Me&&vr(this),this.i&&!this.I&&(4==Me?le(this.l,this):(this.i=!1,Pt(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,Wr(12)):(this.o=0,Wr(13)),vr(this),Yn(this)}}}catch(Me){}},oe.hb=function(){if(this.g){var i=G(this.g),e=this.g.fa();this.C<e.length&&(kn(this),wt(this,i,e),this.i&&4!=i&&Pt(this))}},oe.cancel=function(){this.I=!0,vr(this)},oe.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function $i(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(hr(),Wr(17)),vr(this),this.o=2,Yn(this)):on(this,this.V-i)};var Zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ds(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Ds){this.h=void 0!==e?e:i.h,oa(this,i.j),this.s=i.s,this.g=i.g,rs(this,i.m),this.l=i.l,e=i.i;var t=new oo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),js(this,t),this.o=i.o}else i&&(t=String(i).match(Zi))?(this.h=!!e,oa(this,t[1]||"",!0),this.s=Ss(t[2]||""),this.g=Ss(t[3]||"",!0),rs(this,t[4]),this.l=Ss(t[5]||"",!0),js(this,t[6]||"",!0),this.o=Ss(t[7]||"")):(this.h=!!e,this.i=new oo(null,this.h))}function Ri(i){return new Ds(i)}function oa(i,e,t){i.j=t?Ss(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function rs(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function js(i,e,t){e instanceof oo?(i.i=e,function Sr(i,e){e&&!i.j&&(Ci(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(is(this,o),fr(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=cs(e,Xs)),i.i=new oo(e,i.h))}function Xr(i,e,t){i.i.set(e,t)}function Ns(i){return Xr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ss(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function cs(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,mo),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function mo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ds.prototype.toString=function(){var i=[],e=this.j;e&&i.push(cs(e,Fo,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(cs(e,Fo,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(cs(t,"/"==t.charAt(0)?Ro:Fs,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",cs(t,Is)),i.join("")};var Fo=/[#\/\?@]/g,Fs=/[#\?:]/g,Ro=/[#\?]/g,Xs=/[#\?@]/g,Is=/#/g;function oo(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ci(i){i.g||(i.g=new Map,i.h=0,i.i&&function ma(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var f=i[t].substring(0,o);u=i[t].substring(o+1)}else f=i[t];e(f,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function is(i,e){Ci(i),e=Br(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Co(i,e){return Ci(i),e=Br(i,e),i.g.has(e)}function fr(i,e,t){is(i,e),0<t.length&&(i.i=null,i.g.set(Br(i,e),Ne(t)),i.h+=t.length)}function Br(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ci(i){this.l=i||As,i=te.PerformanceNavigationTiming?0<(i=te.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(te.g&&te.g.Ga&&te.g.Ga()&&te.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(oe=oo.prototype).add=function(i,e){Ci(this),this.i=null,i=Br(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},oe.forEach=function(i,e){Ci(this),this.g.forEach(function(t,o){t.forEach(function(u){i.call(e,u,o,this)},this)},this)},oe.oa=function(){Ci(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const u=i[o];for(let f=0;f<u.length;f++)t.push(e[o])}return t},oe.W=function(i){Ci(this);let e=[];if("string"==typeof i)Co(this,i)&&(e=e.concat(this.g.get(Br(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},oe.set=function(i,e){return Ci(this),this.i=null,Co(this,i=Br(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},oe.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const f=encodeURIComponent(String(o)),v=this.W(o);for(o=0;o<v.length;o++){var u=f;""!==v[o]&&(u+="="+encodeURIComponent(String(v[o]))),i.push(u)}}return this.i=i.join("&")};var As=10;function Mo(i){return!!i.h||!!i.g&&i.g.size>=i.j}function gi(i){return i.h?1:i.g?i.g.size:0}function H(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function fe(i,e){i.g?i.g.add(e):i.h=e}function V(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ee(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Ne(i.i)}function ot(){}function Wt(){this.g=new ot}function Kt(i,e,t){const o=t||"";try{ks(i,function(u,f){let v=u;qe(u)&&(v=Fe(u)),e.push(o+f+"="+encodeURIComponent(v))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Pr(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(f){}}function ri(i){this.l=i.ac||null,this.j=i.jb||!1}function Lr(i,e){L.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Vr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ci.prototype.cancel=function(){if(this.i=Ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ot.prototype.stringify=function(i){return te.JSON.stringify(i,void 0)},ot.prototype.parse=function(i){return te.JSON.parse(i,void 0)},ze(ri,Ke),ri.prototype.g=function(){return new Lr(this.l,this.j)},ri.prototype.i=function(i){return function(){return i}}({}),ze(Lr,L);var Vr=0;function Ti(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function qr(i){i.readyState=4,i.l=null,i.j=null,i.A=null,mi(i)}function mi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(oe=Lr.prototype).open=function(i,e){if(this.readyState!=Vr)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,mi(this)},oe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||te).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qr(this)),this.readyState=Vr},oe.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==te.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ti(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},oe.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?qr(this):mi(this),3==this.readyState&&Ti(this)}},oe.Va=function(i){this.g&&(this.response=this.responseText=i,qr(this))},oe.Ua=function(i){this.g&&(this.response=i,qr(this))},oe.ga=function(){this.g&&qr(this)},oe.setRequestHeader=function(i,e){this.v.append(i,e)},oe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},oe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Hs=te.JSON.parse;function Hr(i){L.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=dr,this.K=this.L=!1}ze(Hr,L);var dr="",Js=/^https?$/i,eo=["POST","PUT"];function Ar(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,To(i),ao(i)}function To(i){i.D||(i.D=!0,q(i,"complete"),q(i,"error"))}function Do(i){if(i.h&&void 0!==ce&&(!i.C[1]||4!=G(i)||2!=i.aa()))if(i.v&&4==G(i))Ir(i.Ha,0,i);else if(q(i,"readystatechange"),4==G(i)){i.h=!1;try{const O=i.aa();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===O){var u=String(i.H).match(Zi)[1]||null;if(!u&&te.self&&te.self.location){var f=te.self.location.protocol;u=f.substr(0,f.length-1)}o=!Js.test(u?u.toLowerCase():"")}t=o}if(t)q(i,"complete"),q(i,"success");else{i.m=6;try{var v=2<G(i)?i.g.statusText:""}catch(W){v=""}i.j=v+" ["+i.aa()+"]",To(i)}}finally{ao(i)}}}function ao(i,e){if(i.g){an(i);const t=i.g,o=i.C[0]?se:null;i.g=null,i.C=null,e||q(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function an(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(te.clearTimeout(i.A),i.A=null)}function G(i){return i.g?i.g.readyState:0}function z(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case dr:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Se(i){let e="";return Y(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function We(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Se(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Xr(i,e,t))}function bt(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function jt(i){this.Ca=0,this.i=[],this.j=new In,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=bt("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=bt("baseRetryDelayMs",5e3,i),this.bb=bt("retryDelaySeedMs",1e4,i),this.$a=bt("forwardChannelMaxRetries",2,i),this.ta=bt("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ci(i&&i.concurrentRequestLimit),this.Fa=new Wt,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function yn(i){if(Qn(i),3==i.G){var e=i.U++,t=Ri(i.F);Xr(t,"SID",i.I),Xr(t,"RID",e),Xr(t,"TYPE","terminate"),jr(i,t),(e=new ti(i,i.j,e,void 0)).K=2,e.v=Ns(Ri(t)),t=!1,te.navigator&&te.navigator.sendBeacon&&(t=te.navigator.sendBeacon(e.v.toString(),"")),!t&&te.Image&&((new Image).src=e.v,t=!0),t||(e.g=Qt(e.l,null),e.g.da(e.v)),e.F=Date.now(),Pt(e)}nt(i)}function rr(i){i.g&&(E(i),i.g.cancel(),i.g=null)}function Qn(i){rr(i),i.u&&(te.clearTimeout(i.u),i.u=null),B(i),i.h.cancel(),i.m&&("number"==typeof i.m&&te.clearTimeout(i.m),i.m=null)}function Rr(i){Mo(i.h)||i.m||(i.m=!0,$(i.Ja,i),i.C=0)}function hi(i,e){var t;t=e?e.m:i.U++;const o=Ri(i.F);Xr(o,"SID",i.I),Xr(o,"RID",t),Xr(o,"AID",i.T),jr(i,o),i.o&&i.s&&We(o,i.o,i.s),t=new ti(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=ii(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),fe(i.h,t),xs(t,o,e)}function jr(i,e){i.ia&&Y(i.ia,function(t,o){Xr(e,o,t)}),i.l&&ks({},function(t,o){Xr(e,o,t)})}function ii(i,e,t){t=Math.min(i.i.length,t);var o=i.l?He(i.l.Ra,i.l,i):null;e:{var u=i.i;let f=-1;for(;;){const v=["count="+t];-1==f?0<t?(f=u[0].h,v.push("ofs="+f)):f=0:v.push("ofs="+f);let O=!0;for(let W=0;W<t;W++){let ie=u[W].h;const Me=u[W].g;if(ie-=f,0>ie)f=Math.max(0,u[W].h-100),O=!1;else try{Kt(Me,v,"req"+ie+"_")}catch(lt){o&&o(Me)}}if(O){o=v.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function Li(i){i.g||i.u||(i.Z=1,$(i.Ia,i),i.A=0)}function ne(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=ns(He(i.Ia,i),Oe(i,i.A)),i.A++,0))}function E(i){null!=i.B&&(te.clearTimeout(i.B),i.B=null)}function C(i){i.g=new ti(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Ri(i.sa);Xr(e,"RID","rpc"),Xr(e,"SID",i.I),Xr(e,"CI",i.L?"0":"1"),Xr(e,"AID",i.T),Xr(e,"TYPE","xmlhttp"),jr(i,e),i.o&&i.s&&We(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Ns(Ri(e)),t.s=null,t.P=!0,Ii(t,i)}function B(i){null!=i.v&&(te.clearTimeout(i.v),i.v=null)}function le(i,e){var t=null;if(i.g==e){B(i),E(i),i.g=null;var o=2}else{if(!H(i.h,e))return;t=e.D,V(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;q(o=Pi(),new Yi(o,t)),Rr(i)}else Li(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==o&&function zr(i,e){return!(gi(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=ns(He(i.Ja,i,e),Oe(i,i.C)),i.C++,0)))}(i,e)||2==o&&ne(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:Ye(i,5);break;case 4:Ye(i,10);break;case 3:Ye(i,6);break;default:Ye(i,2)}}function Oe(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Ye(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=He(i.kb,i);t||(t=new Ds("//www.google.com/images/cleardot.gif"),te.location&&"http"==te.location.protocol||oa(t,"https"),Ns(t)),function zn(i,e){const t=new In;if(te.Image){const o=new Image;o.onload=Mt(Pr,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Mt(Pr,t,o,"TestLoadImage: error",!1,e),o.onabort=Mt(Pr,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Mt(Pr,t,o,"TestLoadImage: timeout",!1,e),te.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Wr(2);i.G=0,i.l&&i.l.va(e),nt(i),Qn(i)}function nt(i){if(i.G=0,i.la=[],i.l){const e=Ee(i.h);(0!=e.length||0!=i.i.length)&&(gt(i.la,e),gt(i.la,i.i),i.h.i.length=0,Ne(i.i),i.i.length=0),i.l.ua()}}function Dt(i,e,t){var o=t instanceof Ds?Ri(t):new Ds(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),rs(o,o.m);else{var u=te.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var f=new Ds(null,void 0);o&&oa(f,o),e&&(f.g=e),u&&rs(f,u),t&&(f.l=t),o=f}return e=i.za,(t=i.D)&&e&&Xr(o,t,e),Xr(o,"VER",i.ma),jr(i,o),o}function Qt(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hr(t&&i.Da&&!i.ra?new ri({jb:!0}):i.ra)).Ka(i.H),e}function cn(){}function ir(){if(Rt&&!(10<=Number(ur)))throw Error("Environmental error: no available transport.")}function or(i,e){L.call(this),this.g=new jt(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!tn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Mr(this)}function Jr(i){An.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Hn(){_n.call(this),this.status=1}function Mr(i){this.g=i}(oe=Hr.prototype).Ka=function(i){this.L=i},oe.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_r.g(),this.C=function Ht(i){return i.h||(i.h=i.i())}(this.u?this.u:_r),this.g.onreadystatechange=He(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(f){return void Ar(this,f)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)t.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const f of o.keys())t.set(f,o.get(f))}o=Array.from(t.keys()).find(f=>"content-type"==f.toLowerCase()),u=te.FormData&&i instanceof te.FormData,!(0<=Qe(eo,e))||o||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,v]of t)this.g.setRequestHeader(f,v);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{an(this),0<this.B&&((this.K=function $s(i){return Rt&&function Fn(){return function Gt(i){var e=fn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=vn(String(Ot)).split("."),t=vn("9").split("."),o=Math.max(e.length,t.length);for(let v=0;0==i&&v<o;v++){var u=e[v]||"",f=t[v]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==u[0].length&&0==f[0].length)break;i=xn(0==u[1].length?0:parseInt(u[1],10),0==f[1].length?0:parseInt(f[1],10))||xn(0==u[2].length,0==f[2].length)||xn(u[2],f[2]),u=u[3],f=f[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=He(this.qa,this)):this.A=Ir(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(f){Ar(this,f)}},oe.qa=function(){void 0!==ce&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,q(this,"timeout"),this.abort(8))},oe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,q(this,"complete"),q(this,"abort"),ao(this))},oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ao(this,!0)),Hr.X.M.call(this)},oe.Ha=function(){this.s||(this.F||this.v||this.l?Do(this):this.fb())},oe.fb=function(){Do(this)},oe.aa=function(){try{return 2<G(this)?this.g.status:-1}catch(i){return-1}},oe.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},oe.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Hs(e)}},oe.Ea=function(){return this.m},oe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(oe=jt.prototype).ma=8,oe.G=1,oe.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new ti(this,this.j,i,void 0);let f=this.s;if(this.S&&(f?(f=J(f),Xe(f,this.S)):f=this.S),null!==this.o||this.N||(u.H=f,f=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ii(this,u,e),Xr(t=Ri(this.F),"RID",i),Xr(t,"CVER",22),this.D&&Xr(t,"X-HTTP-Session-Id",this.D),jr(this,t),f&&(this.N?e="headers="+encodeURIComponent(String(Se(f)))+"&"+e:this.o&&We(t,this.o,f)),fe(this.h,u),this.Ya&&Xr(t,"TYPE","init"),this.O?(Xr(t,"$req",e),Xr(t,"SID","null"),u.Z=!0,xs(u,t,null)):xs(u,t,e),this.G=2}}else 3==this.G&&(i?hi(this,i):0==this.i.length||Mo(this.h)||hi(this))},oe.Ia=function(){if(this.u=null,C(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=ns(He(this.eb,this),i)}},oe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Wr(10),rr(this),C(this))},oe.cb=function(){null!=this.v&&(this.v=null,rr(this),ne(this),Wr(19))},oe.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Wr(2)):(this.j.info("Failed to ping google.com"),Wr(1))},(oe=cn.prototype).xa=function(){},oe.wa=function(){},oe.va=function(){},oe.ua=function(){},oe.Ra=function(){},ir.prototype.g=function(i,e){return new or(i,e)},ze(or,L),or.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Wr(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Dt(i,null,i.V),Rr(i)},or.prototype.close=function(){yn(this.g)},or.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Fe(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Rr(e)},or.prototype.M=function(){this.g.l=null,delete this.j,yn(this.g),delete this.g,or.X.M.call(this)},ze(Jr,An),ze(Hn,_n),ze(Mr,cn),Mr.prototype.xa=function(){q(this.g,"a")},Mr.prototype.wa=function(i){q(this.g,new Jr(i))},Mr.prototype.va=function(i){q(this.g,new Hn)},Mr.prototype.ua=function(){q(this.g,"b")},ir.prototype.createWebChannel=ir.prototype.g,or.prototype.send=or.prototype.u,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,di.NO_ERROR=0,di.TIMEOUT=8,di.HTTP_ERROR=6,Gi.COMPLETE="complete",ct.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",L.prototype.listen=L.prototype.N,Hr.prototype.listenOnce=Hr.prototype.O,Hr.prototype.getLastError=Hr.prototype.Oa,Hr.prototype.getLastErrorCode=Hr.prototype.Ea,Hr.prototype.getStatus=Hr.prototype.aa,Hr.prototype.getResponseJson=Hr.prototype.Sa,Hr.prototype.getResponseText=Hr.prototype.fa,Hr.prototype.send=Hr.prototype.da,Hr.prototype.setWithCredentials=Hr.prototype.Ka;var Di=Ce.createWebChannelTransport=function(){return new ir},Bi=Ce.getStatEventTarget=function(){return Pi()},qi=Ce.ErrorCode=di,as=Ce.EventType=Gi,si=Ce.Event=Oi,gs=Ce.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Si=Ce.FetchXmlHttpFactory=ri,ls=Ce.WebChannel=ct,ki=Ce.XhrIo=Hr;const Oo="@firebase/firestore";class xi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");let lo="9.18.0";const Gs=new re.Yd("@firebase/firestore");function us(){return Gs.logLevel}function Ws(i){Gs.setLogLevel(i)}function Cn(i,...e){if(Gs.logLevel<=re.in.DEBUG){const t=e.map(br);Gs.debug(`Firestore (${lo}): ${i}`,...t)}}function Un(i,...e){if(Gs.logLevel<=re.in.ERROR){const t=e.map(br);Gs.error(`Firestore (${lo}): ${i}`,...t)}}function Gn(i,...e){if(Gs.logLevel<=re.in.WARN){const t=e.map(br);Gs.warn(`Firestore (${lo}): ${i}`,...t)}}function br(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function En(i="Unexpected state"){const e=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: `+i;throw Un(e),new Error(e)}function Vn(i,e){i||En()}function zs(i,e){i||En()}function On(i,e){return i}const Lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends de.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Sa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ks{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xi.UNAUTHENTICATED))}shutdown(){}}class _a{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Vi{constructor(e){this.t=e,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const f=ie=>this.i!==u?(u=this.i,t(ie)):Promise.resolve();let v=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new Xi,e.enqueueRetryable(()=>f(this.currentUser))};const O=()=>{const ie=v;e.enqueueRetryable((0,g.Z)(function*(){yield ie.promise,yield f(o.currentUser)}))},W=ie=>{Cn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ie,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(ie=>W(ie)),setTimeout(()=>{if(!this.auth){const ie=this.t.getImmediate({optional:!0});ie?W(ie):(Cn("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new Xi)}},0),O()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Cn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Vn("string"==typeof o.accessToken),new Sa(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Vn(null===e||"string"==typeof e),new xi(e)}}class Lo{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Vn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Wo{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new Lo(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ga{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class co{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=f=>{null!=f.error&&Cn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const v=f.token!==this.A;return this.A=f.token,Cn("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>o(f))};const u=f=>{Cn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.T.onInit(f=>u(f)),setTimeout(()=>{if(!this.appCheck){const f=this.T.getImmediate({optional:!0});f?u(f):Cn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Vn("string"==typeof t.token),this.A=t.token,new Ga(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function aa(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Ji{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=aa(40);for(let f=0;f<u.length;++f)o.length<20&&u[f]<t&&(o+=e.charAt(u[f]%e.length))}return o}}function Or(i,e){return i<e?-1:i>e?1:0}function Zs(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function xo(i){return i+"\0"}class x{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jt(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jt(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Jt(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jt(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return x.fromMillis(Date.now())}static fromDate(e){return x.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new x(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Or(this.nanoseconds,e.nanoseconds):Or(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class D{constructor(e){this.timestamp=e}static fromTimestamp(e){return new D(e)}static min(){return new D(new x(0,0))}static max(){return new D(new x(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class T{constructor(e,t,o){void 0===t?t=0:t>e.length&&En(),void 0===o?o=e.length-t:o>e.length-t&&En(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===T.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof T?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const f=e.get(u),v=t.get(u);if(f<v)return-1;if(f>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class j extends T{construct(e,t,o){return new j(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new j(t)}static emptyPath(){return new j([])}}const Q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ve extends T{construct(e,t,o){return new ve(e,t,o)}static isValidIdentifier(e){return Q.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ve.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ve(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const f=()=>{if(0===o.length)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let v=!1;for(;u<e.length;){const O=e[u];if("\\"===O){if(u+1===e.length)throw new Jt(Lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const W=e[u+1];if("\\"!==W&&"."!==W&&"`"!==W)throw new Jt(Lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=W,u+=2}else"`"===O?(v=!v,u++):"."!==O||v?(o+=O,u++):(f(),u++)}if(f(),v)throw new Jt(Lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ve(t)}static emptyPath(){return new ve([])}}class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(j.fromString(e))}static fromName(e){return new Ae(j.fromString(e).popFirst(5))}static empty(){return new Ae(j.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===j.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return j.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new j(e.slice()))}}class st{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function qt(i){return i.fields.find(e=>2===e.kind)}function Wn(i){return i.fields.filter(e=>2!==e.kind)}st.UNKNOWN_ID=-1;class ar{constructor(e,t){this.fieldPath=e,this.kind=t}}class vi{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vi(0,ms.min())}}function ni(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=D.fromTimestamp(1e9===o?new x(t+1,0):new x(t,o));return new ms(u,Ae.empty(),e)}function ds(i){return new ms(i.readTime,i.key,-1)}class ms{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new ms(D.min(),Ae.empty(),-1)}static max(){return new ms(D.max(),Ae.empty(),-1)}}function Uo(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ae.comparator(i.documentKey,e.documentKey),0!==t?t:Or(i.largestBatchId,e.largestBatchId))}const Bo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ya{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function _o(i){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,g.Z)(function*(i){if(i.code!==Lt.FAILED_PRECONDITION||i.message!==Bo)throw i;Cn("LocalStore","Unexpectedly lost primary lease")}),Wa.apply(this,arguments)}class Vt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&En(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Vt((o,u)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(o,u)},this.catchCallback=f=>{this.wrapFailure(t,f).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Vt?t:Vt.resolve(t)}catch(t){return Vt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Vt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Vt.reject(t)}static resolve(e){return new Vt((t,o)=>{t(e)})}static reject(e){return new Vt((t,o)=>{o(e)})}static waitFor(e){return new Vt((t,o)=>{let u=0,f=0,v=!1;e.forEach(O=>{++u,O.next(()=>{++f,v&&f===u&&t()},W=>o(W))}),v=!0,f===u&&t()})}static or(e){let t=Vt.resolve(!1);for(const o of e)t=t.next(u=>u?Vt.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,f)=>{o.push(t.call(this,u,f))}),this.waitFor(o)}static mapArray(e,t){return new Vt((o,u)=>{const f=e.length,v=new Array(f);let O=0;for(let W=0;W<f;W++){const ie=W;t(e[ie]).next(Me=>{v[ie]=Me,++O,O===f&&o(v)},Me=>u(Me))}})}static doWhile(e,t){return new Vt((o,u)=>{const f=()=>{!0===e()?t().next(()=>{f()},u):o()};f()})}}class to{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Xi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new no(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=Ka(o.target.error);this.P.reject(new no(e,u))}}static open(e,t,o,u){try{return new to(t,e.transaction(u,o))}catch(f){throw new no(t,f)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Cn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new za(t)}}class Ls{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===Ls.D((0,de.z$)())&&Un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Cn("SimpleDb","Removing database:",e),Us(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,de.hl)())return!1;if(Ls.N())return!0;const e=(0,de.z$)(),t=Ls.D(e),o=0<t&&t<10,u=Ls.k(e),f=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||f)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var t=this;return(0,g.Z)(function*(){return t.db||(Cn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const f=indexedDB.open(t.name,t.version);f.onsuccess=v=>{o(v.target.result)},f.onblocked=()=>{u(new no(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=v=>{const O=v.target.error;u("VersionError"===O.name?new Jt(Lt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new Jt(Lt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new no(e,O))},f.onupgradeneeded=v=>{Cn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.S.F(v.target.result,f.transaction,v.oldVersion,t.version).next(()=>{Cn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var f=this;return(0,g.Z)(function*(){const v="readonly"===t;let O=0;for(;;){++O;try{f.db=yield f.O(e);const W=to.open(f.db,e,v?"readonly":"readwrite",o),ie=u(W).next(Me=>(W.V(),Me)).catch(Me=>(W.abort(Me),Vt.reject(Me))).toPromise();return ie.catch(()=>{}),yield W.v,ie}catch(W){const ie=W,Me="FirebaseError"!==ie.name&&O<3;if(Cn("SimpleDb","Transaction failed with error:",ie.message,"Retrying:",Me),f.close(),!Me)return Promise.reject(ie)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gl{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Us(this.q.delete())}}class no extends Jt{constructor(e,t){super(Lt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function So(i){return"IndexedDbTransactionError"===i.name}class za{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Cn("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Cn("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Us(o)}add(e){return Cn("SimpleDb","ADD",this.store.name,e,e),Us(this.store.add(e))}get(e){return Us(this.store.get(e)).next(t=>(void 0===t&&(t=null),Cn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Cn("SimpleDb","DELETE",this.store.name,e),Us(this.store.delete(e))}count(){return Cn("SimpleDb","COUNT",this.store.name),Us(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),f=[];return this.H(u,(v,O)=>{f.push(O)}).next(()=>f)}{const u=this.store.getAll(o.range);return new Vt((f,v)=>{u.onerror=O=>{v(O.target.error)},u.onsuccess=O=>{f(O.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Vt((u,f)=>{o.onerror=v=>{f(v.target.error)},o.onsuccess=v=>{u(v.target.result)}})}Y(e,t){Cn("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.Z=!1;const u=this.cursor(o);return this.H(u,(f,v,O)=>O.delete())}X(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new Vt((o,u)=>{t.onerror=f=>{const v=Ka(f.target.error);u(v)},t.onsuccess=f=>{const v=f.target.result;v?e(v.primaryKey,v.value).next(O=>{O?v.continue():o()}):o()}})}H(e,t){const o=[];return new Vt((u,f)=>{e.onerror=v=>{f(v.target.error)},e.onsuccess=v=>{const O=v.target.result;if(!O)return void u();const W=new gl(O),ie=t(O.primaryKey,O.value,W);if(ie instanceof Vt){const Me=ie.catch(lt=>(W.done(),Vt.reject(lt)));o.push(Me)}W.isDone?u():null===W.G?O.continue():O.continue(W.G)}}).next(()=>Vt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.Z?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Us(i){return new Vt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Ka(o.target.error);t(u)}})}let ml=!1;function Ka(i){const e=Ls.D((0,de.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Jt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ml||(ml=!0,setTimeout(()=>{throw o},0)),o}}return i}class gd{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Cn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,g.Z)(function*(){t.task=null;try{Cn("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){So(o)?Cn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield _o(o)}yield t.nt(6e4)}))}}class Sc{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,g.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,f=!0;return Vt.doWhile(()=>!0===f&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!o.has(v))return Cn("IndexBackiller",`Processing collection: ${v}`),this.rt(e,v,u).next(O=>{u-=O,o.add(v)});f=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(f=>{const v=f.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.ot(u,f)).next(O=>(Cn("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,t,O))).next(()=>v.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,f)=>{const v=ds(f);Uo(v,o)>0&&(o=v)}),new ms(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Mi=(()=>{class i{constructor(t,o){this.previousValue=t,o&&(o.sequenceNumberHandler=u=>this.ut(u),this.ct=u=>o.writeSequenceNumber(u))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class sh{constructor(e,t,o,u,f,v,O,W){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=f,this.forceLongPolling=v,this.autoDetectLongPolling=O,this.useFetchStreams=W}}class Za{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}function md(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ll(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Aa(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ra(i){return null==i}function hs(i){return 0===i&&1/i==-1/0}function la(i){return"number"==typeof i&&Number.isInteger(i)&&!hs(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class _l extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function ac(){return"undefined"!=typeof atob}class Rs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw u instanceof DOMException?new _l("Invalid base64 string: "+u):u}}(e);return new Rs(t)}static fromUint8Array(e){const t=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new Rs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Or(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rs.EMPTY_BYTE_STRING=new Rs("");const yo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(i){if(Vn(!!i),"string"==typeof i){let e=0;const t=yo.exec(i);if(Vn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:es(i.seconds),nanos:es(i.nanos)}}function es(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ko(i){return"string"==typeof i?Rs.fromBase64String(i):Rs.fromUint8Array(i)}function Zo(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ul(i){const e=i.mapValue.fields.__previous_value__;return Zo(e)?Ul(e):e}function Po(i){const e=Ms(i.mapValue.fields.__local_write_time__.timestampValue);return new x(e.seconds,e.nanos)}const Vo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bl={nullValue:"NULL_VALUE"};function va(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Zo(i)?4:jo(i)?9007199254740991:10:En()}function uo(i,e){if(i===e)return!0;const t=va(i);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Po(i).isEqual(Po(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Ms(o.timestampValue),v=Ms(u.timestampValue);return f.seconds===v.seconds&&f.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Ko(i.bytesValue).isEqual(Ko(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return es(o.geoPointValue.latitude)===es(u.geoPointValue.latitude)&&es(o.geoPointValue.longitude)===es(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return es(o.integerValue)===es(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=es(o.doubleValue),v=es(u.doubleValue);return f===v?hs(f)===hs(v):isNaN(f)&&isNaN(v)}return!1}(i,e);case 9:return Zs(i.arrayValue.values||[],e.arrayValue.values||[],uo);case 10:return function(o,u){const f=o.mapValue.fields||{},v=u.mapValue.fields||{};if(md(f)!==md(v))return!1;for(const O in f)if(f.hasOwnProperty(O)&&(void 0===v[O]||!uo(f[O],v[O])))return!1;return!0}(i,e);default:return En()}var u}function fs(i,e){return void 0!==(i.values||[]).find(t=>uo(t,e))}function qo(i,e){if(i===e)return 0;const t=va(i),o=va(e);if(t!==o)return Or(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Or(i.booleanValue,e.booleanValue);case 2:return function(u,f){const v=es(u.integerValue||u.doubleValue),O=es(f.integerValue||f.doubleValue);return v<O?-1:v>O?1:v===O?0:isNaN(v)?isNaN(O)?0:-1:1}(i,e);case 3:return yl(i.timestampValue,e.timestampValue);case 4:return yl(Po(i),Po(e));case 5:return Or(i.stringValue,e.stringValue);case 6:return function(u,f){const v=Ko(u),O=Ko(f);return v.compareTo(O)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const v=u.split("/"),O=f.split("/");for(let W=0;W<v.length&&W<O.length;W++){const ie=Or(v[W],O[W]);if(0!==ie)return ie}return Or(v.length,O.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const v=Or(es(u.latitude),es(f.latitude));return 0!==v?v:Or(es(u.longitude),es(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,f){const v=u.values||[],O=f.values||[];for(let W=0;W<v.length&&W<O.length;++W){const ie=qo(v[W],O[W]);if(ie)return ie}return Or(v.length,O.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,f){if(u===Vo.mapValue&&f===Vo.mapValue)return 0;if(u===Vo.mapValue)return 1;if(f===Vo.mapValue)return-1;const v=u.fields||{},O=Object.keys(v),W=f.fields||{},ie=Object.keys(W);O.sort(),ie.sort();for(let Me=0;Me<O.length&&Me<ie.length;++Me){const lt=Or(O[Me],ie[Me]);if(0!==lt)return lt;const Nt=qo(v[O[Me]],W[ie[Me]]);if(0!==Nt)return Nt}return Or(O.length,ie.length)}(i.mapValue,e.mapValue);default:throw En()}}function yl(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Or(i,e);const t=Ms(i),o=Ms(e),u=Or(t.seconds,o.seconds);return 0!==u?u:Or(t.nanos,o.nanos)}function Vl(i){return Ma(i)}function Ma(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Ms(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ko(i.bytesValue).toBase64():"referenceValue"in i?Ae.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",f=!0;for(const v of o.values||[])f?f=!1:u+=",",u+=Ma(v);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let f="{",v=!0;for(const O of u)v?v=!1:f+=",",f+=`${O}:${Ma(o.fields[O])}`;return f+"}"}(i.mapValue):En();var e}function qa(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ca(i){return!!i&&"integerValue"in i}function vl(i){return!!i&&"arrayValue"in i}function lc(i){return!!i&&"nullValue"in i}function cc(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Yo(i){return!!i&&"mapValue"in i}function Qo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ll(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Qo(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qo(i.arrayValue.values[t]);return e}return Object.assign({},i)}function jo(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function _d(i){return"nullValue"in i?Bl:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?qa(Za.empty(),Ae.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:En()}function Ya(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?qa(Za.empty(),Ae.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Vo:En()}function Oa(i,e){const t=qo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Qa(i,e){const t=qo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ea{constructor(e,t){this.position=e,this.inclusive=t}}function jl(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const f=e[u],v=i.position[u];if(o=f.field.isKeyField()?Ae.comparator(Ae.fromName(v.referenceValue),t.key):qo(v,t.data.field(f.field)),"desc"===f.dir&&(o*=-1),0!==o)break}return o}function F(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!uo(i.position[t],e.position[t]))return!1;return!0}class Z{}class me extends Z{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,o):new Cs(e,t,o):"array-contains"===t?new wa(e,o):"in"===t?new ho(e,o):"not-in"===t?new ua(e,o):"array-contains-any"===t?new El(e,o):new me(e,t,o)}static createKeyFieldInFilter(e,t,o){return"in"===t?new _s(e,o):new Ho(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qo(t,this.value)):null!==t&&va(this.value)===va(t)&&this.matchesComparison(qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return En()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class je extends Z{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new je(e,t)}matches(e){return Ct(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ct(i){return"and"===i.op}function $t(i){return"or"===i.op}function dn(i){return cr(i)&&Ct(i)}function cr(i){for(const e of i.filters)if(e instanceof je)return!1;return!0}function Er(i){if(i instanceof me)return i.field.canonicalString()+i.op.toString()+Vl(i.value);if(dn(i))return i.filters.map(e=>Er(e)).join(",");{const e=i.filters.map(t=>Er(t)).join(",");return`${i.op}(${e})`}}function pr(i,e){return i instanceof me?(t=i,(o=e)instanceof me&&t.op===o.op&&t.field.isEqual(o.field)&&uo(t.value,o.value)):i instanceof je?function(t,o){return o instanceof je&&t.op===o.op&&t.filters.length===o.filters.length&&t.filters.reduce((u,f,v)=>u&&pr(f,o.filters[v]),!0)}(i,e):void En();var t,o}function ei(i,e){const t=i.filters.concat(e);return je.create(t,i.op)}function $r(i){return i instanceof me?`${(e=i).field.canonicalString()} ${e.op} ${Vl(e.value)}`:i instanceof je?function(e){return e.op.toString()+" {"+e.getFilters().map($r).join(" ,")+"}"}(i):"Filter";var e}class Cs extends me{constructor(e,t,o){super(e,t,o),this.key=Ae.fromName(o.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class _s extends me{constructor(e,t){super(e,"in",t),this.keys=ba(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ho extends me{constructor(e,t){super(e,"not-in",t),this.keys=ba(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ba(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Ae.fromName(o.referenceValue))}class wa extends me{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vl(t)&&fs(t.arrayValue,this.value)}}class ho extends me{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fs(this.value.arrayValue,t)}}class ua extends me{constructor(e,t){super(e,"not-in",t)}matches(e){if(fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fs(this.value.arrayValue,t)}}class El extends me{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>fs(this.value.arrayValue,o))}}class Xa{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ia(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ts{constructor(e,t){this.comparator=e,this.root=t||vo.EMPTY}insert(e,t){return new ts(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vo.BLACK,null,null))}remove(e){return new ts(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uc(this.root,e,this.comparator,!0)}}class uc{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?o(e.key,t):1,t&&u&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vo{constructor(e,t,o,u,f){this.key=e,this.value=t,this.color=null!=o?o:vo.RED,this.left=null!=u?u:vo.EMPTY,this.right=null!=f?f:vo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,f){return new vo(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=f?f:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const f=o(e,u.key);return u=f<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===f?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return vo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return vo.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw En();const e=this.left.check();if(e!==this.right.check())throw En();return e+(this.isRed()?0:1)}}vo.EMPTY=null,vo.RED=!0,vo.BLACK=!1,vo.EMPTY=new class{constructor(){this.size=0}get key(){throw En()}get value(){throw En()}get color(){throw En()}get left(){throw En()}get right(){throw En()}copy(i,e,t,o,u){return this}insert(i,e,t){return new vo(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ni{constructor(e){this.comparator=e,this.data=new ts(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ja(this.data.getIterator())}getIteratorFrom(e){return new Ja(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,f=o.getNext().key;if(0!==this.comparator(u,f))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ni(this.comparator);return t.data=e,t}}class Ja{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function el(i){return i.hasNext()?i.getNext():void 0}class Xo{constructor(e){this.fields=e,e.sort(ve.comparator)}static empty(){return new Xo([])}unionWith(e){let t=new Ni(ve.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Xo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Bs{constructor(e){this.value=e}static empty(){return new Bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Yo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qo(t)}setAll(e){let t=ve.emptyPath(),o={},u=[];e.forEach((v,O)=>{if(!t.isImmediateParentOf(O)){const W=this.getFieldsMap(t);this.applyChanges(W,o,u),o={},u=[],t=O.popLast()}v?o[O.lastSegment()]=Qo(v):u.push(O.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,o,u)}delete(e){const t=this.field(e.popLast());Yo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Yo(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ll(t,(u,f)=>e[u]=f);for(const u of o)delete e[u]}clone(){return new Bs(Qo(this.value))}}function dc(i){const e=[];return Ll(i.fields,(t,o)=>{const u=new ve([t]);if(Yo(o)){const f=dc(o.mapValue).fields;if(0===f.length)e.push(u);else for(const v of f)e.push(u.child(v))}else e.push(u)}),new Xo(e)}class ys{constructor(e,t,o,u,f,v,O){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.createTime=f,this.data=v,this.documentState=O}static newInvalidDocument(e){return new ys(e,0,D.min(),D.min(),D.min(),Bs.empty(),0)}static newFoundDocument(e,t,o,u){return new ys(e,1,t,D.min(),o,u,0)}static newNoDocument(e,t){return new ys(e,2,t,D.min(),D.min(),Bs.empty(),0)}static newUnknownDocument(e,t){return new ys(e,3,t,D.min(),D.min(),Bs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(D.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=D.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ys&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ys(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tl{constructor(e,t=null,o=[],u=[],f=null,v=null,O=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=f,this.startAt=v,this.endAt=O,this._t=null}}function su(i,e=null,t=[],o=[],u=null,f=null,v=null){return new tl(i,e,t,o,u,f,v)}function bl(i){const e=On(i);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>Er(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Ra(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Vl(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Vl(o)).join(",")),e._t=t}return e._t}function nl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Ia(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!pr(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!F(i.startAt,e.startAt)&&F(i.endAt,e.endAt)}function xa(i){return Ae.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function da(i,e){return i.filters.filter(t=>t instanceof me&&t.field.isEqual(e))}function ou(i,e,t){let o=Bl,u=!0;for(const f of da(i,e)){let v=Bl,O=!0;switch(f.op){case"<":case"<=":v=_d(f.value);break;case"==":case"in":case">=":v=f.value;break;case">":v=f.value,O=!1;break;case"!=":case"not-in":v=Bl}Oa({value:o,inclusive:u},{value:v,inclusive:O})<0&&(o=v,u=O)}if(null!==t)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const v=t.position[f];Oa({value:o,inclusive:u},{value:v,inclusive:t.inclusive})<0&&(o=v,u=t.inclusive);break}return{value:o,inclusive:u}}function au(i,e,t){let o=Vo,u=!0;for(const f of da(i,e)){let v=Vo,O=!0;switch(f.op){case">=":case">":v=Ya(f.value),O=!1;break;case"==":case"in":case"<=":v=f.value;break;case"<":v=f.value,O=!1;break;case"!=":case"not-in":v=Vo}Qa({value:o,inclusive:u},{value:v,inclusive:O})>0&&(o=v,u=O)}if(null!==t)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const v=t.position[f];Qa({value:o,inclusive:u},{value:v,inclusive:t.inclusive})>0&&(o=v,u=t.inclusive);break}return{value:o,inclusive:u}}class Pa{constructor(e,t=null,o=[],u=[],f=null,v="F",O=null,W=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=f,this.limitType=v,this.startAt=O,this.endAt=W,this.wt=null,this.gt=null}}function Hl(i,e,t,o,u,f,v,O){return new Pa(i,e,t,o,u,f,v,O)}function ha(i){return new Pa(i)}function zu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function lu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Ac(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ca(i){return null!==i.collectionGroup}function ka(i){const e=On(i);if(null===e.wt){e.wt=[];const t=Ac(e),o=lu(e);if(null!==t&&null===o)t.isKeyField()||e.wt.push(new Xa(t)),e.wt.push(new Xa(ve.keyField(),"asc"));else{let u=!1;for(const f of e.explicitOrderBy)e.wt.push(f),f.field.isKeyField()&&(u=!0);if(!u){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Xa(ve.keyField(),f))}}}return e.wt}function ko(i){const e=On(i);if(!e.gt)if("F"===e.limitType)e.gt=su(e.path,e.collectionGroup,ka(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const f of ka(e))t.push(new Xa(f.field,"desc"===f.dir?"asc":"desc"));const o=e.endAt?new Ea(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Ea(e.startAt.position,e.startAt.inclusive):null;e.gt=su(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.gt}function cu(i,e){e.getFirstInequalityField(),Ac(i);const t=i.filters.concat([e]);return new Pa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function uu(i,e,t){return new Pa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Rc(i,e){return nl(ko(i),ko(e))&&i.limitType===e.limitType}function Jo(i){return`${bl(ko(i))}|lt:${i.limitType}`}function Na(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(o=>$r(o)).join(", ")}]`),Ra(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(o=>{return`${(u=o).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Vl(o)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Vl(o)).join(",")),`Target(${t})`}(ko(i))}; limitType=${i.limitType})`}function Fa(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Ae.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of ka(t))if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,f,v){const O=jl(u,f,v);return u.inclusive?O<=0:O<0}(t.startAt,ka(t),o)||t.endAt&&!function(u,f,v){const O=jl(u,f,v);return u.inclusive?O>=0:O>0}(t.endAt,ka(t),o)));var t,o}function du(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function hc(i){return(e,t)=>{let o=!1;for(const u of ka(i)){const f=$l(u,e,t);if(0!==f)return f;o=o||u.field.isKeyField()}return 0}}function $l(i,e,t){const o=i.field.isKeyField()?Ae.comparator(e.key,t.key):function(u,f,v){const O=f.data.field(u),W=v.data.field(u);return null!==O&&null!==W?qo(O,W):En()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return En()}}function fc(i,e){if(i.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hs(e)?"-0":e}}function Ku(i){return{integerValue:""+i}}function hu(i,e){return la(e)?Ku(e):fc(i,e)}class wl{constructor(){this._=void 0}}function yd(i,e,t){return i instanceof Gl?function(o,u){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(f.fields.__previous_value__=u),{mapValue:f}}(t,e):i instanceof Wl?zl(i,e):i instanceof Il?ea(i,e):function(o,u){const f=pc(o,u),v=_(f)+_(o.It);return ca(f)&&ca(o.It)?Ku(v):fc(o.Tt,v)}(i,e)}function oh(i,e,t){return i instanceof Wl?zl(i,e):i instanceof Il?ea(i,e):t}function pc(i,e){return i instanceof A?ca(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Gl extends wl{}class Wl extends wl{constructor(e){super(),this.elements=e}}function zl(i,e){const t=y(e);for(const o of i.elements)t.some(u=>uo(u,o))||t.push(o);return{arrayValue:{values:t}}}class Il extends wl{constructor(e){super(),this.elements=e}}function ea(i,e){let t=y(e);for(const o of i.elements)t=t.filter(u=>!uo(u,o));return{arrayValue:{values:t}}}class A extends wl{constructor(e,t){super(),this.Tt=e,this.It=t}}function _(i){return es(i.integerValue||i.doubleValue)}function y(i){return vl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class M{constructor(e,t){this.field=e,this.transform=t}}class Pe{constructor(e,t){this.version=e,this.transformResults=t}}class At{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new At}static exists(e){return new At(void 0,e)}static updateTime(e){return new At(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bn(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Xn{}function yr(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new il(i.key,At.none()):new rl(i.key,i.data,At.none());{const t=i.data,o=Bs.empty();let u=new Ni(ve.comparator);for(let f of e.fields)if(!u.has(f)){let v=t.field(f);null===v&&f.length>1&&(f=f.popLast(),v=t.field(f)),null===v?o.delete(f):o.set(f,v),u=u.add(f)}return new ta(i.key,o,new Xo(u.toArray()),At.none())}}function oi(i,e,t){i instanceof rl?function(o,u,f){const v=o.value.clone(),O=Ao(o.fieldTransforms,u,f.transformResults);v.setAll(O),u.convertToFoundDocument(f.version,v).setHasCommittedMutations()}(i,e,t):i instanceof ta?function(o,u,f){if(!bn(o.precondition,u))return void u.convertToUnknownDocument(f.version);const v=Ao(o.fieldTransforms,u,f.transformResults),O=u.data;O.setAll(Mc(o)),O.setAll(v),u.convertToFoundDocument(f.version,O).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ss(i,e,t,o){return i instanceof rl?function(u,f,v,O){if(!bn(u.precondition,f))return v;const W=u.value.clone(),ie=Kl(u.fieldTransforms,O,f);return W.setAll(ie),f.convertToFoundDocument(f.version,W).setHasLocalMutations(),null}(i,e,t,o):i instanceof ta?function(u,f,v,O){if(!bn(u.precondition,f))return v;const W=Kl(u.fieldTransforms,O,f),ie=f.data;return ie.setAll(Mc(u)),ie.setAll(W),f.convertToFoundDocument(f.version,ie).setHasLocalMutations(),null===v?null:v.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(Me=>Me.field))}(i,e,t,o):(v=t,bn(i.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):v);var f,v}function Os(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),f=pc(o.transform,u||null);null!=f&&(null===t&&(t=Bs.empty()),t.set(o.field,f))}return t||null}function La(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Zs(t,o,(u,f)=>function ge(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Wl&&o instanceof Wl||t instanceof Il&&o instanceof Il?Zs(t.elements,o.elements,uo):t instanceof A&&o instanceof A?uo(t.It,o.It):t instanceof Gl&&o instanceof Gl);var t,o}(u,f))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class rl extends Xn{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class ta extends Xn{constructor(e,t,o,u,f=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function Mc(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Ao(i,e,t){const o=new Map;Vn(i.length===t.length);for(let u=0;u<t.length;u++){const f=i[u],v=f.transform,O=e.data.field(f.field);o.set(f.field,oh(v,O,t[u]))}return o}function Kl(i,e,t){const o=new Map;for(const u of i){const f=u.transform,v=t.data.field(u.field);o.set(u.field,yd(f,v,e))}return o}class il extends Xn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zl extends Xn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vd{constructor(e){this.count=e}}var ui,Ai;function Zu(i){switch(i){default:return En();case Lt.CANCELLED:case Lt.UNKNOWN:case Lt.DEADLINE_EXCEEDED:case Lt.RESOURCE_EXHAUSTED:case Lt.INTERNAL:case Lt.UNAVAILABLE:case Lt.UNAUTHENTICATED:return!1;case Lt.INVALID_ARGUMENT:case Lt.NOT_FOUND:case Lt.ALREADY_EXISTS:case Lt.PERMISSION_DENIED:case Lt.FAILED_PRECONDITION:case Lt.ABORTED:case Lt.OUT_OF_RANGE:case Lt.UNIMPLEMENTED:case Lt.DATA_LOSS:return!0}}function Ua(i){if(void 0===i)return Un("GRPC error has no .code"),Lt.UNKNOWN;switch(i){case ui.OK:return Lt.OK;case ui.CANCELLED:return Lt.CANCELLED;case ui.UNKNOWN:return Lt.UNKNOWN;case ui.DEADLINE_EXCEEDED:return Lt.DEADLINE_EXCEEDED;case ui.RESOURCE_EXHAUSTED:return Lt.RESOURCE_EXHAUSTED;case ui.INTERNAL:return Lt.INTERNAL;case ui.UNAVAILABLE:return Lt.UNAVAILABLE;case ui.UNAUTHENTICATED:return Lt.UNAUTHENTICATED;case ui.INVALID_ARGUMENT:return Lt.INVALID_ARGUMENT;case ui.NOT_FOUND:return Lt.NOT_FOUND;case ui.ALREADY_EXISTS:return Lt.ALREADY_EXISTS;case ui.PERMISSION_DENIED:return Lt.PERMISSION_DENIED;case ui.FAILED_PRECONDITION:return Lt.FAILED_PRECONDITION;case ui.ABORTED:return Lt.ABORTED;case ui.OUT_OF_RANGE:return Lt.OUT_OF_RANGE;case ui.UNIMPLEMENTED:return Lt.UNIMPLEMENTED;case ui.DATA_LOSS:return Lt.DATA_LOSS;default:return En()}}(Ai=ui||(ui={}))[Ai.OK=0]="OK",Ai[Ai.CANCELLED=1]="CANCELLED",Ai[Ai.UNKNOWN=2]="UNKNOWN",Ai[Ai.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ai[Ai.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ai[Ai.NOT_FOUND=5]="NOT_FOUND",Ai[Ai.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ai[Ai.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ai[Ai.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ai[Ai.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ai[Ai.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ai[Ai.ABORTED=10]="ABORTED",Ai[Ai.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ai[Ai.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ai[Ai.INTERNAL=13]="INTERNAL",Ai[Ai.UNAVAILABLE=14]="UNAVAILABLE",Ai[Ai.DATA_LOSS=15]="DATA_LOSS";class Ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,f]of o)if(this.equalsFn(u,e))return f}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let f=0;f<u.length;f++)if(this.equalsFn(u[f][0],e))return void(u[f]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ll(this.inner,(t,o)=>{for(const[u,f]of o)e(u,f)})}isEmpty(){return Aa(this.inner)}size(){return this.innerSize}}const rf=new ts(Ae.comparator);function fa(){return rf}const Ed=new ts(Ae.comparator);function gc(...i){let e=Ed;for(const t of i)e=e.insert(t.key,t);return e}function sf(i){let e=Ed;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function sl(){return ql()}function _p(){return ql()}function ql(){return new Ba(i=>i.toString(),(i,e)=>i.isEqual(e))}const na=new ts(Ae.comparator),bd=new Ni(Ae.comparator);function fi(...i){let e=bd;for(const t of i)e=e.add(t);return e}const af=new Ni(Or);function Eo(){return af}class ol{constructor(e,t,o,u,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const u=new Map;return u.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new ol(D.min(),u,Eo(),fa(),fi())}}class mc{constructor(e,t,o,u,f){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new mc(o,t,fi(),fi(),fi())}}class wd{constructor(e,t,o,u){this.Et=e,this.removedTargetIds=t,this.key=o,this.At=u}}class Oc{constructor(e,t){this.targetId=e,this.Rt=t}}class Cl{constructor(e,t,o=Rs.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class lf{constructor(){this.Pt=0,this.vt=ah(),this.bt=Rs.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=fi(),t=fi(),o=fi();return this.vt.forEach((u,f)=>{switch(f){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:En()}}),new mc(this.bt,this.Vt,e,t,o)}kt(){this.St=!1,this.vt=ah()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class Id{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=fa(),this.Kt=qu(),this.Gt=new Ni(Or)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const o=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&o.xt(e.resumeToken);break;case 1:o.Ft(),o.Dt||o.kt(),o.xt(e.resumeToken);break;case 2:o.Ft(),o.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(o.Bt(),o.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),o.xt(e.resumeToken));break;default:En()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((o,u)=>{this.Jt(u)&&t(u)})}Zt(e){const t=e.targetId,o=e.Rt.count,u=this.Xt(t);if(u){const f=u.target;if(xa(f))if(0===o){const v=new Ae(f.path);this.zt(t,v,ys.newNoDocument(v,D.min()))}else Vn(1===o);else this.te(t)!==o&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((f,v)=>{const O=this.Xt(v);if(O){if(f.current&&xa(O.target)){const W=new Ae(O.target.path);null!==this.Ut.get(W)||this.ne(v,W)||this.zt(v,W,ys.newNoDocument(W,e))}f.Ct&&(t.set(v,f.Nt()),f.kt())}});let o=fi();this.Kt.forEach((f,v)=>{let O=!0;v.forEachWhile(W=>{const ie=this.Xt(W);return!ie||2===ie.purpose||(O=!1,!1)}),O&&(o=o.add(f))}),this.Ut.forEach((f,v)=>v.setReadTime(e));const u=new ol(e,t,this.Gt,this.Ut,o);return this.Ut=fa(),this.Kt=qu(),this.Gt=new Ni(Or),u}jt(e,t){if(!this.Jt(e))return;const o=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,o){if(!this.Jt(e))return;const u=this.Ht(e);this.ne(e,t)?u.$t(t,1):u.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new lf,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new Ni(Or),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Cn("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new lf),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function qu(){return new ts(Ae.comparator)}function ah(){return new ts(Ae.comparator)}const fu={asc:"ASCENDING",desc:"DESCENDING"},yp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cd={and:"AND",or:"OR"};class cf{constructor(e,t){this.databaseId=e,this.yt=t}}function xc(i,e){return i.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pc(i,e){return i.yt?e.toBase64():e.toUint8Array()}function lh(i,e){return xc(i,e.toTimestamp())}function Vs(i){return Vn(!!i),D.fromTimestamp(function(e){const t=Ms(e);return new x(t.seconds,t.nanos)}(i))}function pu(i,e){return(t=i,new j(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function uf(i){const e=j.fromString(i);return Vn(Fc(e)),e}function kc(i,e){return pu(i.databaseId,e.path)}function Tl(i,e){const t=uf(e);if(t.get(1)!==i.databaseId.projectId)throw new Jt(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Jt(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ae(ch(t))}function Td(i,e){return pu(i.databaseId,e)}function df(i){const e=uf(i);return 4===e.length?j.emptyPath():ch(e)}function Nc(i){return new j(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ch(i){return Vn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Dd(i,e,t){return{name:kc(i,e),fields:t.value.mapValue.fields}}function uh(i,e,t){const o=Tl(i,e.name),u=Vs(e.updateTime),f=e.createTime?Vs(e.createTime):D.min(),v=new Bs({mapValue:{fields:e.fields}}),O=ys.newFoundDocument(o,u,f,v);return t&&O.setHasCommittedMutations(),t?O.setHasCommittedMutations():O}function Va(i,e){let t;if(e instanceof rl)t={update:Dd(i,e.key,e.value)};else if(e instanceof il)t={delete:kc(i,e.key)};else if(e instanceof ta)t={update:Dd(i,e.key,e.data),updateMask:Qu(e.fieldMask)};else{if(!(e instanceof Zl))return En();t={verify:kc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,f){const v=f.transform;if(v instanceof Gl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Wl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Il)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof A)return{fieldPath:f.field.canonicalString(),increment:v.It};throw En()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:lh(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:En()),t;var u}function gu(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?At.updateTime(Vs(u.updateTime)):void 0!==u.exists?At.exists(u.exists):At.none():At.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(f,v){let O=null;"setToServerValue"in v?(Vn("REQUEST_TIME"===v.setToServerValue),O=new Gl):"appendMissingElements"in v?O=new Wl(v.appendMissingElements.values||[]):"removeAllFromArray"in v?O=new Il(v.removeAllFromArray.values||[]):"increment"in v?O=new A(f,v.increment):En();const W=ve.fromServerFormat(v.fieldPath);return new M(W,O)}(i,u)):[];var u;if(e.update){const u=Tl(i,e.update.name),f=new Bs({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new Xo((e.updateMask.fieldPaths||[]).map(ie=>ve.fromServerFormat(ie)));return new ta(u,f,v,t,o)}return new rl(u,f,t,o)}if(e.delete){const u=Tl(i,e.delete);return new il(u,t)}if(e.verify){const u=Tl(i,e.verify);return new Zl(u,t)}return En()}function Ta(i,e){return{documents:[Td(i,e.path)]}}function Da(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Td(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Td(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(W){if(0!==W.length)return dh(je.create(W,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const f=function(W){if(0!==W.length)return W.map(ie=>{return{field:Sl((Me=ie).field),direction:Xg(Me.dir)};var Me})}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const v=(ie=e.limit,i.yt||Ra(ie)?ie:{value:ie});var ie,O,W;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(t.structuredQuery.endAt={before:!(W=e.endAt).inclusive,values:W.position}),t}function hf(i){let e=df(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){Vn(1===o);const Me=t.from[0];Me.allDescendants?u=Me.collectionId:e=e.child(Me.collectionId)}let f=[];t.where&&(f=function(Me){const lt=ff(Me);return lt instanceof je&&dn(lt)?lt.getFilters():[lt]}(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(Me=>{return new Xa(_u((lt=Me).field),function(Nt){switch(Nt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(lt.direction));var lt}));let O=null;t.limit&&(O=function(Me){let lt;return lt="object"==typeof Me?Me.value:Me,Ra(lt)?null:lt}(t.limit));let W=null;var Me;t.startAt&&(W=new Ea((Me=t.startAt).values||[],!!Me.before));let ie=null;return t.endAt&&(ie=function(Me){return new Ea(Me.values||[],!Me.before)}(t.endAt)),Hl(e,u,v,f,O,"F",W,ie)}function ff(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=_u(e.unaryFilter.field);return me.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=_u(e.unaryFilter.field);return me.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=_u(e.unaryFilter.field);return me.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=_u(e.unaryFilter.field);return me.create(f,"!=",{nullValue:"NULL_VALUE"});default:return En()}}(i):void 0!==i.fieldFilter?me.create(_u((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return En()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return je.create(e.compositeFilter.filters.map(t=>ff(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return En()}}(e.compositeFilter.op))}(i):En();var e}function Xg(i){return fu[i]}function Dl(i){return yp[i]}function Yu(i){return Cd[i]}function Sl(i){return{fieldPath:i.canonicalString()}}function _u(i){return ve.fromServerFormat(i.fieldPath)}function dh(i){return i instanceof me?function(e){if("=="===e.op){if(cc(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NAN"}};if(lc(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(cc(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NOT_NAN"}};if(lc(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sl(e.field),op:Dl(e.op),value:e.value}}}(i):i instanceof je?function(e){const t=e.getFilters().map(o=>dh(o));return 1===t.length?t[0]:{compositeFilter:{op:Yu(e.op),filters:t}}}(i):En()}function Qu(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function bo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=yu(e)),e=Lc(i.get(t),e);return yu(e)}function Lc(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const f=i.charAt(u);switch(f){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=f}}return t}function yu(i){return i+"\x01\x01"}function Ha(i){const e=i.length;if(Vn(e>=2),2===e)return Vn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),j.emptyPath();const t=e-2,o=[];let u="";for(let f=0;f<e;){const v=i.indexOf("\x01",f);switch((v<0||v>t)&&En(),i.charAt(v+1)){case"\x01":const O=i.substring(f,v);let W;0===u.length?W=O:(u+=O,W=u,u=""),o.push(W);break;case"\x10":u+=i.substring(f,v),u+="\0";break;case"\x11":u+=i.substring(f,v+1);break;default:En()}f=v+2}return new j(o)}const pf=["userId","batchId"];function Al(i,e){return[i,bo(e)]}function Xu(i,e,t){return[i,bo(e),t]}const hh={},al=["prefixPath","collectionGroup","readTime","documentId"],Ad=["prefixPath","collectionGroup","documentId"],vp=["collectionGroup","readTime","prefixPath","documentId"],Ep=["canonicalId","targetId"],bp=["targetId","path"],gf=["path","targetId"],wp=["collectionId","parent"],Ip=["indexId","uid"],mf=["uid","sequenceNumber"],fh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_f=["indexId","uid","orderedDocumentKey"],ph=["userId","collectionPath","documentId"],Cp=["userId","collectionPath","largestBatchId"],Tp=["userId","collectionGroup","largestBatchId"],gh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yf=[...gh,"documentOverlays"],_c=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mh=_c,vf=[...mh,"indexConfiguration","indexState","indexEntries"];class _h extends ya{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function ro(i,e){const t=On(i);return Ls.M(t.re,e)}class yh{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const f=this.mutations[u];f.key.isEqual(e.key)&&oi(f,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=ss(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=ss(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=_p();return this.mutations.forEach(u=>{const f=e.get(u.key),v=f.overlayedDocument;let O=this.applyToLocalView(v,f.mutatedFields);O=t.has(u.key)?null:O;const W=yr(v,O);null!==W&&o.set(u.key,W),v.isValidDocument()||v.convertToNoDocument(D.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fi())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(t,o)=>La(t,o))&&Zs(this.baseMutations,e.baseMutations,(t,o)=>La(t,o))}}class Rd{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){Vn(e.mutations.length===o.length);let u=na;const f=e.mutations;for(let v=0;v<f.length;v++)u=u.insert(f[v].key,o[v].version);return new Rd(e,t,o,u)}}class ga{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yl{constructor(e,t,o,u,f=D.min(),v=D.min(),O=Rs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=O}withSequenceNumber(e){return new Yl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vu{constructor(e){this.oe=e}}function Ju(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:kc(u=i.oe,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:xc(u,f.version.toTimestamp()),createTime:xc(u,f.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:vc(e.version)};else{if(!e.isUnknownDocument())return En();o.unknownDocument={path:t.path.toArray(),version:vc(e.version)}}var u,f;return o}function yc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function vc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ql(i){const e=new x(i.seconds,i.nanoseconds);return D.fromTimestamp(e)}function Ec(i,e){const t=(e.baseMutations||[]).map(f=>gu(i.oe,f));for(let f=0;f<e.mutations.length-1;++f){const v=e.mutations[f];f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(v.updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f)}const o=e.mutations.map(f=>gu(i.oe,f)),u=x.fromMillis(e.localWriteTimeMs);return new yh(e.batchId,u,t,o)}function Uc(i){const e=Ql(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Ql(i.lastLimboFreeSnapshotVersion):D.min();let o;var u;return void 0!==i.query.documents?(Vn(1===(u=i.query).documents.length),o=ko(ha(df(u.documents[0])))):o=ko(hf(i.query)),new Yl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Rs.fromBase64String(i.resumeToken))}function Bc(i,e){const t=vc(e.snapshotVersion),o=vc(e.lastLimboFreeSnapshotVersion);let u;u=xa(e.target)?Ta(i.oe,e.target):Da(i.oe,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bl(e.target),readTime:t,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Eh(i){const e=hf({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?uu(e,e.limit,"L"):e}function Md(i,e){return new ga(e.largestBatchId,gu(i.oe,e.overlayMutation))}function Dp(i,e){const t=e.path.lastSegment();return[i,bo(e.path.popLast()),t]}function bh(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:vc(o.readTime),documentKey:bo(o.documentKey.path),largestBatchId:o.largestBatchId}}class Ef{getBundleMetadata(e,t){return Od(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Ql(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Od(e).put({bundleId:(o=t).id,createTime:vc(Vs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return wh(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:Eh(u.bundledQuery),readTime:Ql(u.readTime)};var u})}saveNamedQuery(e,t){return wh(e).put({name:(o=t).name,readTime:vc(Vs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Od(i){return ro(i,"bundles")}function wh(i){return ro(i,"namedQueries")}class Ih{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new Ih(e,t.uid||"")}getOverlay(e,t){return Eu(e).get(Dp(this.userId,t)).next(o=>o?Md(this.Tt,o):null)}getOverlays(e,t){const o=sl();return Vt.forEach(t,u=>this.getOverlay(e,u).next(f=>{null!==f&&o.set(u,f)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((f,v)=>{const O=new ga(t,v);u.push(this.ce(e,O))}),Vt.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(v=>u.add(bo(v.getCollectionPath())));const f=[];return u.forEach(v=>{const O=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,o+1],!1,!0);f.push(Eu(e).Y("collectionPathOverlayIndex",O))}),Vt.waitFor(f)}getOverlaysForCollection(e,t,o){const u=sl(),f=bo(t),v=IDBKeyRange.bound([this.userId,f,o],[this.userId,f,Number.POSITIVE_INFINITY],!0);return Eu(e).W("collectionPathOverlayIndex",v).next(O=>{for(const W of O){const ie=Md(this.Tt,W);u.set(ie.getKey(),ie)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const f=sl();let v;const O=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Eu(e).X({index:"collectionGroupOverlayIndex",range:O},(W,ie,Me)=>{const lt=Md(this.Tt,ie);f.size()<u||lt.largestBatchId===v?(f.set(lt.getKey(),lt),v=lt.largestBatchId):Me.done()}).next(()=>f)}ce(e,t){return Eu(e).put(function(o,u,f){const[v,O,W]=Dp(u,f.mutation.key);return{userId:u,collectionPath:O,documentId:W,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:Va(o.oe,f.mutation)}}(this.Tt,this.userId,t))}}function Eu(i){return ro(i,"documentOverlays")}class Vc{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(es(e.integerValue));else if("doubleValue"in e){const o=es(e.doubleValue);isNaN(o)?this.fe(t,13):(this.fe(t,15),hs(o)?t.de(0):t.de(o))}else if("timestampValue"in e){const o=e.timestampValue;this.fe(t,20),"string"==typeof o?t._e(o):(t._e(`${o.seconds||""}`),t.de(o.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Ko(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.fe(t,45),t.de(o.latitude||0),t.de(o.longitude||0)}else"mapValue"in e?jo(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):En()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const o=e.fields||{};this.fe(t,55);for(const u of Object.keys(o))this.we(u,t),this.he(o[u],t)}Ie(e,t){const o=e.values||[];this.fe(t,50);for(const u of o)this.he(u,t)}ye(e,t){this.fe(t,37),Ae.fromName(e).path.forEach(o=>{this.fe(t,60),this.Te(o,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function bf(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function wf(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const f=bf(255&t[u]);if(o+=f,8!==f)break}return o}(i);return Math.ceil(e/8)}Vc.Ee=new Vc;class Sp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Re(o.value),o=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.be(o.value),o=t.next();this.Ve()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Re(o);else if(o<2048)this.Re(960|o>>>6),this.Re(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Re(480|o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o);else{const u=t.codePointAt(0);this.Re(240|u>>>18),this.Re(128|63&u>>>12),this.Re(128|63&u>>>6),this.Re(128|63&u)}}this.Pe()}De(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.be(o);else if(o<2048)this.be(960|o>>>6),this.be(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.be(480|o>>>12),this.be(128|63&o>>>6),this.be(128|63&o);else{const u=t.codePointAt(0);this.be(240|u>>>18),this.be(128|63&u>>>12),this.be(128|63&u>>>6),this.be(128|63&u)}}this.Ve()}Ce(e){const t=this.xe(e),o=wf(t);this.Ne(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}ke(e){const t=this.xe(e),o=wf(t);this.Ne(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(u){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,u,!1),new Uint8Array(f.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Rl{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class Jg{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class bu{constructor(){this.Le=new Sp,this.qe=new Rl(this.Le),this.Ue=new Jg(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class jc{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new jc(this.indexId,this.documentKey,this.arrayValue,o)}}function bc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ch(i.arrayValue,e.arrayValue),0!==t?t:(t=Ch(i.directionalValue,e.directionalValue),0!==t?t:Ae.comparator(i.documentKey,e.documentKey)))}function Ch(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Ap{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const o=t;o.isInequality()?this.ze=o:this.je.push(o)}}We(e){Vn(e.collectionGroup===this.collectionId);const t=qt(e);if(void 0!==t&&!this.He(t))return!1;const o=Wn(e);let u=0,f=0;for(;u<o.length&&this.He(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.ze){const v=o[u];if(!this.Je(this.ze,v)||!this.Ye(this.Qe[f++],v))return!1;++u}for(;u<o.length;++u){const v=o[u];if(f>=this.Qe.length||!this.Ye(this.Qe[f++],v))return!1}return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Th(i){var e,t;if(Vn(i instanceof me||i instanceof je),i instanceof me){if(i instanceof ho){const u=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(f=>me.create(i.field,"==",f)))||[];return je.create(u,"or")}return i}const o=i.filters.map(u=>Th(u));return je.create(o,i.op)}function Rp(i){if(0===i.getFilters().length)return[];const e=$o(Th(i));return Vn(Cr(e)),Dh(e)||Ml(e)?[e]:e.getFilters()}function Dh(i){return i instanceof me}function Ml(i){return i instanceof je&&dn(i)}function Cr(i){return Dh(i)||Ml(i)||function(e){if(e instanceof je&&$t(e)){for(const t of e.getFilters())if(!Dh(t)&&!Ml(t))return!1;return!0}return!1}(i)}function $o(i){if(Vn(i instanceof me||i instanceof je),i instanceof me)return i;if(1===i.filters.length)return $o(i.filters[0]);const e=i.filters.map(o=>$o(o));let t=je.create(e,i.op);return t=Hc(t),Cr(t)?t:(Vn(t instanceof je),Vn(Ct(t)),Vn(t.filters.length>1),t.filters.reduce((o,u)=>wc(o,u)))}function wc(i,e){let t;return Vn(i instanceof me||i instanceof je),Vn(e instanceof me||e instanceof je),t=i instanceof me?e instanceof me?je.create([i,e],"and"):Sh(i,e):e instanceof me?Sh(e,i):function(o,u){if(Vn(o.filters.length>0&&u.filters.length>0),Ct(o)&&Ct(u))return ei(o,u.getFilters());const f=$t(o)?o:u,v=$t(o)?u:o,O=f.filters.map(W=>wc(W,v));return je.create(O,"or")}(i,e),Hc(t)}function Sh(i,e){if(Ct(e))return ei(e,i.getFilters());{const t=e.filters.map(o=>wc(i,o));return je.create(t,"or")}}function Hc(i){if(Vn(i instanceof me||i instanceof je),i instanceof me)return i;const e=i.getFilters();if(1===e.length)return Hc(e[0]);if(cr(i))return i;const t=e.map(u=>Hc(u)),o=[];return t.forEach(u=>{u instanceof me?o.push(u):u instanceof je&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:je.create(o,i.op)}class ll{constructor(){this.Ze=new xd}addToCollectionParentIndex(e,t){return this.Ze.add(t),Vt.resolve()}getCollectionParents(e,t){return Vt.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return Vt.resolve()}deleteFieldIndex(e,t){return Vt.resolve()}getDocumentsMatchingTarget(e,t){return Vt.resolve(null)}getIndexType(e,t){return Vt.resolve(0)}getFieldIndexes(e,t){return Vt.resolve([])}getNextCollectionGroupToUpdate(e){return Vt.resolve(null)}getMinOffset(e,t){return Vt.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return Vt.resolve(ms.min())}updateCollectionGroup(e,t,o){return Vt.resolve()}updateIndexEntries(e,t){return Vt.resolve()}}class xd{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new Ni(j.comparator),f=!u.has(o);return this.index[t]=u.add(o),f}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Ni(j.comparator)).toArray()}}const Pd=new Uint8Array(0);class Ah{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new xd,this.tn=new Ba(o=>bl(o),(o,u)=>nl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const f={collectionId:o,parent:bo(u)};return Ol(e).put(f)}return Vt.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[xo(t),""],!1,!0);return Ol(e).W(u).next(f=>{for(const v of f){if(v.collectionId!==t)break;o.push(Ha(v.parent))}return o})}addFieldIndex(e,t){const o=wu(e),u={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var v;delete u.indexId;const f=o.add(u);if(t.indexState){const v=Ic(e);return f.next(O=>{v.put(bh(O,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return f.next()}deleteFieldIndex(e,t){const o=wu(e),u=Ic(e),f=$c(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=$c(e);let u=!0;const f=new Map;return Vt.forEach(this.en(t),v=>this.nn(e,v).next(O=>{u&&(u=!!O),f.set(v,O)})).next(()=>{if(u){let v=fi();const O=[];return Vt.forEach(f,(W,ie)=>{var Me;Cn("IndexedDbIndexManager",`Using index ${Me=W,`id=${Me.indexId}|cg=${Me.collectionGroup}|f=${Me.fields.map(Wi=>`${Wi.fieldPath}:${Wi.kind}`).join(",")}`} to execute ${bl(t)}`);const lt=function(Wi,ia){const bs=qt(ia);if(void 0===bs)return null;for(const zi of da(Wi,bs.fieldPath))switch(zi.op){case"array-contains-any":return zi.value.arrayValue.values||[];case"array-contains":return[zi.value]}return null}(ie,W),Nt=function(Wi,ia){const bs=new Map;for(const zi of Wn(ia))for(const sa of da(Wi,zi.fieldPath))switch(sa.op){case"==":case"in":bs.set(zi.fieldPath.canonicalString(),sa.value);break;case"not-in":case"!=":return bs.set(zi.fieldPath.canonicalString(),sa.value),Array.from(bs.values())}return null}(ie,W),ln=function(Wi,ia){const bs=[];let zi=!0;for(const sa of Wn(ia)){const Jc=0===sa.kind?ou(Wi,sa.fieldPath,Wi.startAt):au(Wi,sa.fieldPath,Wi.startAt);bs.push(Jc.value),zi&&(zi=Jc.inclusive)}return new Ea(bs,zi)}(ie,W),Pn=function(Wi,ia){const bs=[];let zi=!0;for(const sa of Wn(ia)){const Jc=0===sa.kind?au(Wi,sa.fieldPath,Wi.endAt):ou(Wi,sa.fieldPath,Wi.endAt);bs.push(Jc.value),zi&&(zi=Jc.inclusive)}return new Ea(bs,zi)}(ie,W),Jn=this.sn(W,ie,ln),kr=this.sn(W,ie,Pn),Es=this.rn(W,ie,Nt),Ys=this.on(W.indexId,lt,Jn,ln.inclusive,kr,Pn.inclusive,Es);return Vt.forEach(Ys,Wi=>o.J(Wi,t.limit).next(ia=>{ia.forEach(bs=>{const zi=Ae.fromSegments(bs.documentKey);v.has(zi)||(v=v.add(zi),O.push(zi))})}))}).next(()=>O)}return Vt.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:Rp(je.create(e.filters,"and")).map(o=>su(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,o,u,f,v,O){const W=(null!=t?t.length:1)*Math.max(o.length,f.length),ie=W/(null!=t?t.length:1),Me=[];for(let lt=0;lt<W;++lt){const Nt=t?this.un(t[lt/ie]):Pd,ln=this.cn(e,Nt,o[lt%ie],u),Pn=this.an(e,Nt,f[lt%ie],v),Jn=O.map(kr=>this.cn(e,Nt,kr,!0));Me.push(...this.createRange(ln,Pn,Jn))}return Me}cn(e,t,o,u){const f=new jc(e,Ae.empty(),t,o);return u?f:f.Ge()}an(e,t,o,u){const f=new jc(e,Ae.empty(),t,o);return u?f.Ge():f}nn(e,t){const o=new Ap(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(f=>{let v=null;for(const O of f)o.We(O)&&(!v||O.fields.length>v.fields.length)&&(v=O);return v})}getIndexType(e,t){let o=2;const u=this.en(t);return Vt.forEach(u,f=>this.nn(e,f).next(v=>{v?0!==o&&v.fields.length<function(O){let W=new Ni(ve.comparator),ie=!1;for(const Me of O.filters)for(const lt of Me.getFlattenedFilters())lt.field.isKeyField()||("array-contains"===lt.op||"array-contains-any"===lt.op?ie=!0:W=W.add(lt.field));for(const Me of O.orderBy)Me.field.isKeyField()||(W=W.add(Me.field));return W.size+(ie?1:0)}(f)&&(o=1):o=0})).next(()=>null!==t.limit&&u.length>1&&2===o?1:o)}hn(e,t){const o=new bu;for(const u of Wn(e)){const f=t.data.field(u.fieldPath);if(null==f)return null;const v=o.Ke(u.kind);Vc.Ee.ae(f,v)}return o.Be()}un(e){const t=new bu;return Vc.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const o=new bu;return Vc.Ee.ae(qa(this.databaseId,t),o.Ke(function(u){const f=Wn(u);return 0===f.length?0:f[f.length-1].kind}(e))),o.Be()}rn(e,t,o){if(null===o)return[];let u=[];u.push(new bu);let f=0;for(const v of Wn(e)){const O=o[f++];for(const W of u)if(this.fn(t,v.fieldPath)&&vl(O))u=this.dn(u,v,O);else{const ie=W.Ke(v.kind);Vc.Ee.ae(O,ie)}}return this._n(u)}sn(e,t,o){return this.rn(e,t,o.position)}_n(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Be();return t}dn(e,t,o){const u=[...e],f=[];for(const v of o.arrayValue.values||[])for(const O of u){const W=new bu;W.seed(O.Be()),Vc.Ee.ae(v,W.Ke(t.kind)),f.push(W)}return f}fn(e,t){return!!e.filters.find(o=>o instanceof me&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=wu(e),u=Ic(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(f=>{const v=[];return Vt.forEach(f,O=>u.get([O.indexId,this.uid]).next(W=>{v.push(function(ie,Me){const lt=Me?new vi(Me.sequenceNumber,new ms(Ql(Me.readTime),new Ae(Ha(Me.documentKey)),Me.largestBatchId)):vi.empty(),Nt=ie.fields.map(([ln,Pn])=>new ar(ve.fromServerFormat(ln),Pn));return new st(ie.indexId,ie.collectionGroup,Nt,lt)}(O,W))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const f=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==f?f:Or(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=wu(e),f=Ic(e);return this.wn(e).next(v=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(O=>Vt.forEach(O,W=>f.put(bh(W.indexId,this.user,v,o)))))}updateIndexEntries(e,t){const o=new Map;return Vt.forEach(t,(u,f)=>{const v=o.get(u.collectionGroup);return(v?Vt.resolve(v):this.getFieldIndexes(e,u.collectionGroup)).next(O=>(o.set(u.collectionGroup,O),Vt.forEach(O,W=>this.mn(e,u,W).next(ie=>{const Me=this.gn(f,W);return ie.isEqual(Me)?Vt.resolve():this.yn(e,f,W,ie,Me)}))))})}pn(e,t,o,u){return $c(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.ln(o,t.key),documentKey:t.key.path.toArray()})}In(e,t,o,u){return $c(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.ln(o,t.key),t.key.path.toArray()])}mn(e,t,o){const u=$c(e);let f=new Ni(bc);return u.X({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.ln(o,t)])},(v,O)=>{f=f.add(new jc(o.indexId,t,O.arrayValue,O.directionalValue))}).next(()=>f)}gn(e,t){let o=new Ni(bc);const u=this.hn(t,e);if(null==u)return o;const f=qt(t);if(null!=f){const v=e.data.field(f.fieldPath);if(vl(v))for(const O of v.arrayValue.values||[])o=o.add(new jc(t.indexId,e.key,this.un(O),u))}else o=o.add(new jc(t.indexId,e.key,Pd,u));return o}yn(e,t,o,u,f){Cn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(O,W,ie,Me,lt){const Nt=O.getIterator(),ln=W.getIterator();let Pn=el(Nt),Jn=el(ln);for(;Pn||Jn;){let kr=!1,Es=!1;if(Pn&&Jn){const Ys=ie(Pn,Jn);Ys<0?Es=!0:Ys>0&&(kr=!0)}else null!=Pn?Es=!0:kr=!0;kr?(Me(Jn),Jn=el(ln)):Es?(lt(Pn),Pn=el(Nt)):(Pn=el(Nt),Jn=el(ln))}}(u,f,bc,O=>{v.push(this.pn(e,t,o,O))},O=>{v.push(this.In(e,t,o,O))}),Vt.waitFor(v)}wn(e){let t=1;return Ic(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,f)=>{f.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((v,O)=>bc(v,O)).filter((v,O,W)=>!O||0!==bc(v,W[O-1]));const u=[];u.push(e);for(const v of o){const O=bc(v,e),W=bc(v,t);if(0===O)u[0]=e.Ge();else if(O>0&&W<0)u.push(v),u.push(v.Ge());else if(W>0)break}u.push(t);const f=[];for(let v=0;v<u.length;v+=2){if(this.Tn(u[v],u[v+1]))return[];f.push(IDBKeyRange.bound([u[v].indexId,this.uid,u[v].arrayValue,u[v].directionalValue,Pd,[]],[u[v+1].indexId,this.uid,u[v+1].arrayValue,u[v+1].directionalValue,Pd,[]]))}return f}Tn(e,t){return bc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(If)}getMinOffset(e,t){return Vt.mapArray(this.en(t),o=>this.nn(e,o).next(u=>u||En())).next(If)}}function Ol(i){return ro(i,"collectionParents")}function $c(i){return ro(i,"indexEntries")}function wu(i){return ro(i,"indexConfiguration")}function Ic(i){return ro(i,"indexState")}function If(i){Vn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Uo(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new ms(e.readTime,e.documentKey,t)}const kd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class No{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new No(e,No.DEFAULT_COLLECTION_PERCENTILE,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ed(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),f=[],v=IDBKeyRange.only(t.batchId);let O=0;const W=o.X({range:v},(Me,lt,Nt)=>(O++,Nt.delete()));f.push(W.next(()=>{Vn(1===O)}));const ie=[];for(const Me of t.mutations){const lt=Xu(e,Me.key.path,t.batchId);f.push(u.delete(lt)),ie.push(Me.key)}return Vt.waitFor(f).next(()=>ie)}function Cc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw En();e=i.noDocument}return JSON.stringify(e).length}No.DEFAULT_COLLECTION_PERCENTILE=10,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,No.DEFAULT=new No(41943040,No.DEFAULT_COLLECTION_PERCENTILE,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),No.DISABLED=new No(-1,0,0);class Iu{constructor(e,t,o,u){this.userId=e,this.Tt=t,this.indexManager=o,this.referenceDelegate=u,this.En={}}static ue(e,t,o,u){Vn(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new Iu(f,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cl(e).X({index:"userMutationsIndex",range:o},(u,f,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const f=Cu(e),v=cl(e);return v.add({}).next(O=>{Vn("number"==typeof O);const W=new yh(O,t,o,u),ie=function(Nt,ln,Pn){const Jn=Pn.baseMutations.map(Es=>Va(Nt.oe,Es)),kr=Pn.mutations.map(Es=>Va(Nt.oe,Es));return{userId:ln,batchId:Pn.batchId,localWriteTimeMs:Pn.localWriteTime.toMillis(),baseMutations:Jn,mutations:kr}}(this.Tt,this.userId,W),Me=[];let lt=new Ni((Nt,ln)=>Or(Nt.canonicalString(),ln.canonicalString()));for(const Nt of u){const ln=Xu(this.userId,Nt.key.path,O);lt=lt.add(Nt.key.path.popLast()),Me.push(v.put(ie)),Me.push(f.put(ln,hh))}return lt.forEach(Nt=>{Me.push(this.indexManager.addToCollectionParentIndex(e,Nt))}),e.addOnCommittedListener(()=>{this.En[O]=W.keys()}),Vt.waitFor(Me).next(()=>W)})}lookupMutationBatch(e,t){return cl(e).get(t).next(o=>o?(Vn(o.userId===this.userId),Ec(this.Tt,o)):null)}An(e,t){return this.En[t]?Vt.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.En[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let f=null;return cl(e).X({index:"userMutationsIndex",range:u},(v,O,W)=>{O.userId===this.userId&&(Vn(O.batchId>=o),f=Ec(this.Tt,O)),W.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return cl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(u,f,v)=>{o=f.batchId,v.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cl(e).W("userMutationsIndex",t).next(o=>o.map(u=>Ec(this.Tt,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Al(this.userId,t.path),u=IDBKeyRange.lowerBound(o),f=[];return Cu(e).X({range:u},(v,O,W)=>{const[ie,Me,lt]=v,Nt=Ha(Me);if(ie===this.userId&&t.path.isEqual(Nt))return cl(e).get(lt).next(ln=>{if(!ln)throw En();Vn(ln.userId===this.userId),f.push(Ec(this.Tt,ln))});W.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ni(Or);const u=[];return t.forEach(f=>{const v=Al(this.userId,f.path),O=IDBKeyRange.lowerBound(v),W=Cu(e).X({range:O},(ie,Me,lt)=>{const[Nt,ln,Pn]=ie,Jn=Ha(ln);Nt===this.userId&&f.path.isEqual(Jn)?o=o.add(Pn):lt.done()});u.push(W)}),Vt.waitFor(u).next(()=>this.Rn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,f=Al(this.userId,o),v=IDBKeyRange.lowerBound(f);let O=new Ni(Or);return Cu(e).X({range:v},(W,ie,Me)=>{const[lt,Nt,ln]=W,Pn=Ha(Nt);lt===this.userId&&o.isPrefixOf(Pn)?Pn.length===u&&(O=O.add(ln)):Me.done()}).next(()=>this.Rn(e,O))}Rn(e,t){const o=[],u=[];return t.forEach(f=>{u.push(cl(e).get(f).next(v=>{if(null===v)throw En();Vn(v.userId===this.userId),o.push(Ec(this.Tt,v))}))}),Vt.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return ed(e.re,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),Vt.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Vt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Cu(e).X({range:o},(f,v,O)=>{if(f[0]===this.userId){const W=Ha(f[1]);u.push(W)}else O.done()}).next(()=>{Vn(0===u.length)})})}containsKey(e,t){return Nd(e,this.userId,t)}vn(e){return Rh(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Nd(i,e,t){const o=Al(e,t.path),u=o[1],f=IDBKeyRange.lowerBound(o);let v=!1;return Cu(i).X({range:f,Z:!0},(O,W,ie)=>{const[Me,lt,Nt]=O;Me===e&&lt===u&&(v=!0),ie.done()}).next(()=>v)}function cl(i){return ro(i,"mutations")}function Cu(i){return ro(i,"documentMutations")}function Rh(i){return ro(i,"mutationQueues")}class Gc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new Gc(0)}static Sn(){return new Gc(-1)}}class Mp{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const o=new Gc(t.highestTargetId);return t.highestTargetId=o.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>D.fromTimestamp(new x(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Dn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Cn(e,u)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(o=>(o.targetCount+=1,this.Nn(t,o),this.Cn(e,o))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tu(e).delete(t.targetId)).next(()=>this.Dn(e)).next(o=>(Vn(o.targetCount>0),o.targetCount-=1,this.Cn(e,o)))}removeTargets(e,t,o){let u=0;const f=[];return Tu(e).X((v,O)=>{const W=Uc(O);W.sequenceNumber<=t&&null===o.get(W.targetId)&&(u++,f.push(this.removeTargetData(e,W)))}).next(()=>Vt.waitFor(f)).next(()=>u)}forEachTarget(e,t){return Tu(e).X((o,u)=>{const f=Uc(u);t(f)})}Dn(e){return Fd(e).get("targetGlobalKey").next(t=>(Vn(null!==t),t))}Cn(e,t){return Fd(e).put("targetGlobalKey",t)}xn(e,t){return Tu(e).put(Bc(this.Tt,t))}Nn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=bl(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let f=null;return Tu(e).X({range:u,index:"queryTargetsIndex"},(v,O,W)=>{const ie=Uc(O);nl(t,ie.target)&&(f=ie,W.done())}).next(()=>f)}addMatchingKeys(e,t,o){const u=[],f=Wc(e);return t.forEach(v=>{const O=bo(v.path);u.push(f.put({targetId:o,path:O})),u.push(this.referenceDelegate.addReference(e,o,v))}),Vt.waitFor(u)}removeMatchingKeys(e,t,o){const u=Wc(e);return Vt.forEach(t,f=>{const v=bo(f.path);return Vt.waitFor([u.delete([o,v]),this.referenceDelegate.removeReference(e,o,f)])})}removeMatchingKeysForTargetId(e,t){const o=Wc(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Wc(e);let f=fi();return u.X({range:o,Z:!0},(v,O,W)=>{const ie=Ha(v[1]),Me=new Ae(ie);f=f.add(Me)}).next(()=>f)}containsKey(e,t){const o=bo(t.path),u=IDBKeyRange.bound([o],[xo(o)],!1,!0);let f=0;return Wc(e).X({index:"documentTargetsIndex",Z:!0,range:u},([v,O],W,ie)=>{0!==v&&(f++,ie.done())}).next(()=>f>0)}ie(e,t){return Tu(e).get(t).next(o=>o?Uc(o):null)}}function Tu(i){return ro(i,"targets")}function Fd(i){return ro(i,"targetGlobal")}function Wc(i){return ro(i,"targetDocuments")}function Cf([i,e],[t,o]){const u=Or(i,t);return 0===u?Or(e,o):u}class Op{constructor(e){this.kn=e,this.buffer=new Ni(Cf),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Cf(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Tf{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;Cn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,g.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){So(o)?Cn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield _o(o)}yield t.Bn(3e5)}))}}class Df{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Vt.resolve(Mi.at);const o=new Op(t);return this.Ln.forEachTarget(e,u=>o.On(u.sequenceNumber)).next(()=>this.Ln.Un(e,u=>o.On(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Ln.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Cn("LruGarbageCollector","Garbage collection skipped; disabled"),Vt.resolve(kd)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Cn("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kd):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let o,u,f,v,O,W,ie;const Me=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(lt=>(lt>this.params.maximumSequenceNumbersToCollect?(Cn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${lt}`),u=this.params.maximumSequenceNumbersToCollect):u=lt,v=Date.now(),this.nthSequenceNumber(e,u))).next(lt=>(o=lt,O=Date.now(),this.removeTargets(e,o,t))).next(lt=>(f=lt,W=Date.now(),this.removeOrphanedDocuments(e,o))).next(lt=>(ie=Date.now(),us()<=re.in.DEBUG&&Cn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-Me}ms\n\tDetermined least recently used ${u} in `+(O-v)+`ms\n\tRemoved ${f} targets in `+(W-O)+`ms\n\tRemoved ${lt} documents in `+(ie-W)+`ms\nTotal Duration: ${ie-Me}ms`),Vt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:f,documentsRemoved:lt})))}}class xp{constructor(e,t){this.db=e,this.garbageCollector=new Df(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}Gn(e){let t=0;return this.Un(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(o,u)=>t(u))}addReference(e,t,o){return Du(e,o)}removeReference(e,t,o){return Du(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Du(e,t)}jn(e,t){return function(o,u){let f=!1;return Rh(o).tt(v=>Nd(o,v,u).next(O=>(O&&(f=!0),Vt.resolve(!O)))).next(()=>f)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let f=0;return this.Qn(e,(v,O)=>{if(O<=t){const W=this.jn(e,v).next(ie=>{if(!ie)return f++,o.getEntry(e,v).next(()=>(o.removeEntry(v,D.min()),Wc(e).delete([0,bo(v.path)])))});u.push(W)}}).next(()=>Vt.waitFor(u)).next(()=>o.apply(e)).next(()=>f)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Du(e,t)}Qn(e,t){const o=Wc(e);let u,f=Mi.at;return o.X({index:"documentTargetsIndex"},([v,O],{path:W,sequenceNumber:ie})=>{0===v?(f!==Mi.at&&t(new Ae(Ha(u)),f),f=ie,u=W):f=Mi.at}).next(()=>{f!==Mi.at&&t(new Ae(Ha(u)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Du(i,e){return Wc(i).put((o=i.currentSequenceNumber,{targetId:0,path:bo(e.path),sequenceNumber:o}));var o}class Pp{constructor(){this.changes=new Ba(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ys.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Vt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class em{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Su(e).put(o)}removeEntry(e,t,o){return Su(e).delete(function(u,f){const v=u.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],yc(f),v[v.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.zn(e,o)))}getEntry(e,t){let o=ys.newInvalidDocument(t);return Su(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(fo(t))},(u,f)=>{o=this.Wn(t,f)}).next(()=>o)}Hn(e,t){let o={size:0,document:ys.newInvalidDocument(t)};return Su(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(fo(t))},(u,f)=>{o={document:this.Wn(t,f),size:Cc(f)}}).next(()=>o)}getEntries(e,t){let o=fa();return this.Jn(e,t,(u,f)=>{const v=this.Wn(u,f);o=o.insert(u,v)}).next(()=>o)}Yn(e,t){let o=fa(),u=new ts(Ae.comparator);return this.Jn(e,t,(f,v)=>{const O=this.Wn(f,v);o=o.insert(f,O),u=u.insert(f,Cc(v))}).next(()=>({documents:o,Zn:u}))}Jn(e,t,o){if(t.isEmpty())return Vt.resolve();let u=new Ni(zc);t.forEach(W=>u=u.add(W));const f=IDBKeyRange.bound(fo(u.first()),fo(u.last())),v=u.getIterator();let O=v.getNext();return Su(e).X({index:"documentKeyIndex",range:f},(W,ie,Me)=>{const lt=Ae.fromSegments([...ie.prefixPath,ie.collectionGroup,ie.documentId]);for(;O&&zc(O,lt)<0;)o(O,null),O=v.getNext();O&&O.isEqual(lt)&&(o(O,ie),O=v.hasNext()?v.getNext():null),O?Me.j(fo(O)):Me.done()}).next(()=>{for(;O;)o(O,null),O=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,t,o,u){const f=t.path,v=[f.popLast().toArray(),f.lastSegment(),yc(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],O=[f.popLast().toArray(),f.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Su(e).W(IDBKeyRange.bound(v,O,!0)).next(W=>{let ie=fa();for(const Me of W){const lt=this.Wn(Ae.fromSegments(Me.prefixPath.concat(Me.collectionGroup,Me.documentId)),Me);lt.isFoundDocument()&&(Fa(t,lt)||u.has(lt.key))&&(ie=ie.insert(lt.key,lt))}return ie})}getAllFromCollectionGroup(e,t,o,u){let f=fa();const v=Np(t,o),O=Np(t,ms.max());return Su(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,O,!0)},(W,ie,Me)=>{const lt=this.Wn(Ae.fromSegments(ie.prefixPath.concat(ie.collectionGroup,ie.documentId)),ie);f=f.insert(lt.key,lt),f.size===u&&Me.done()}).next(()=>f)}newChangeBuffer(e){return new tm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return kp(e).get("remoteDocumentGlobalKey").next(t=>(Vn(!!t),t))}zn(e,t){return kp(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const o=function vh(i,e){let t;if(e.document)t=uh(i.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ae.fromSegments(e.noDocument.path),u=Ql(e.noDocument.readTime);t=ys.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return En();{const o=Ae.fromSegments(e.unknownDocument.path),u=Ql(e.unknownDocument.version);t=ys.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new x(o[0],o[1]);return D.fromTimestamp(u)}(e.readTime)),t}(this.Tt,t);if(!o.isNoDocument()||!o.version.isEqual(D.min()))return o}return ys.newInvalidDocument(e)}}function Mh(i){return new em(i)}class tm extends Pp{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new Ba(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new Ni((f,v)=>Or(f.canonicalString(),v.canonicalString()));return this.changes.forEach((f,v)=>{const O=this.ts.get(f);if(t.push(this.Xn.removeEntry(e,f,O.readTime)),v.isValidDocument()){const W=Ju(this.Xn.Tt,v);u=u.add(f.path.popLast()),o+=Cc(W)-O.size,t.push(this.Xn.addEntry(e,f,W))}else if(o-=O.size,this.trackRemovals){const W=Ju(this.Xn.Tt,v.convertToNoDocument(D.min()));t.push(this.Xn.addEntry(e,f,W))}}),u.forEach(f=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,f))}),t.push(this.Xn.updateMetadata(e,o)),Vt.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(o=>(this.ts.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:o,Zn:u})=>(u.forEach((f,v)=>{this.ts.set(f,{size:v,readTime:o.get(f).readTime})}),o))}}function kp(i){return ro(i,"remoteDocumentGlobal")}function Su(i){return ro(i,"remoteDocumentsV14")}function fo(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Np(i,e){const t=e.documentKey.path.toArray();return[i,yc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zc(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let f=0;f<t.length-2&&f<o.length-2;++f)if(u=Or(t[f],o[f]),u)return u;return u=Or(t.length,o.length),u||(u=Or(t[t.length-2],o[o.length-2]),u||Or(t[t.length-1],o[o.length-1]))}class nm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $a{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(null!==o&&ss(o.mutation,u,Xo.empty(),x.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,fi()).next(()=>o))}getLocalViewOfDocuments(e,t,o=fi()){const u=sl();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(f=>{let v=gc();return f.forEach((O,W)=>{v=v.insert(O,W.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const o=sl();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,fi()))}populateOverlays(e,t,o){const u=[];return o.forEach(f=>{t.has(f)||u.push(f)}),this.documentOverlayCache.getOverlays(e,u).next(f=>{f.forEach((v,O)=>{t.set(v,O)})})}computeViews(e,t,o,u){let f=fa();const v=ql(),O=ql();return t.forEach((W,ie)=>{const Me=o.get(ie.key);u.has(ie.key)&&(void 0===Me||Me.mutation instanceof ta)?f=f.insert(ie.key,ie):void 0!==Me?(v.set(ie.key,Me.mutation.getFieldMask()),ss(Me.mutation,ie,Me.mutation.getFieldMask(),x.now())):v.set(ie.key,Xo.empty())}),this.recalculateAndSaveOverlays(e,f).next(W=>(W.forEach((ie,Me)=>v.set(ie,Me)),t.forEach((ie,Me)=>{var lt;return O.set(ie,new nm(Me,null!==(lt=v.get(ie))&&void 0!==lt?lt:null))}),O))}recalculateAndSaveOverlays(e,t){const o=ql();let u=new ts((v,O)=>v-O),f=fi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const O of v)O.keys().forEach(W=>{const ie=t.get(W);if(null===ie)return;let Me=o.get(W)||Xo.empty();Me=O.applyToLocalView(ie,Me),o.set(W,Me);const lt=(u.get(O.batchId)||fi()).add(W);u=u.insert(O.batchId,lt)})}).next(()=>{const v=[],O=u.getReverseIterator();for(;O.hasNext();){const W=O.getNext(),ie=W.key,Me=W.value,lt=_p();Me.forEach(Nt=>{if(!f.has(Nt)){const ln=yr(t.get(Nt),o.get(Nt));null!==ln&&lt.set(Nt,ln),f=f.add(Nt)}}),v.push(this.documentOverlayCache.saveOverlays(e,ie,lt))}return Vt.waitFor(v)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Ae.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ca(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(f=>{const v=u-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-f.size):Vt.resolve(sl());let O=-1,W=f;return v.next(ie=>Vt.forEach(ie,(Me,lt)=>(O<lt.largestBatchId&&(O=lt.largestBatchId),f.get(Me)?Vt.resolve():this.remoteDocumentCache.getEntry(e,Me).next(Nt=>{W=W.insert(Me,Nt)}))).next(()=>this.populateOverlays(e,ie,f)).next(()=>this.computeViews(e,W,ie,fi())).next(Me=>({batchId:O,changes:sf(Me)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(o=>{let u=gc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let f=gc();return this.indexManager.getCollectionParents(e,u).next(v=>Vt.forEach(v,O=>{const W=(ie=t,Me=O.child(u),new Pa(Me,null,ie.explicitOrderBy.slice(),ie.filters.slice(),ie.limit,ie.limitType,ie.startAt,ie.endAt));var ie,Me;return this.getDocumentsMatchingCollectionQuery(e,W,o).next(ie=>{ie.forEach((Me,lt)=>{f=f.insert(Me,lt)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,u))).next(f=>{u.forEach((O,W)=>{const ie=W.getKey();null===f.get(ie)&&(f=f.insert(ie,ys.newInvalidDocument(ie)))});let v=gc();return f.forEach((O,W)=>{const ie=u.get(O);void 0!==ie&&ss(ie.mutation,W,Xo.empty(),x.now()),Fa(t,W)&&(v=v.insert(O,W))}),v})}}class Oh{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return Vt.resolve(this.es.get(t))}saveBundleMetadata(e,t){var o;return this.es.set(t.id,{id:(o=t).id,version:o.version,createTime:Vs(o.createTime)}),Vt.resolve()}getNamedQuery(e,t){return Vt.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(o=t).name,query:Eh(o.bundledQuery),readTime:Vs(o.readTime)}),Vt.resolve();var o}}class td{constructor(){this.overlays=new ts(Ae.comparator),this.ss=new Map}getOverlay(e,t){return Vt.resolve(this.overlays.get(t))}getOverlays(e,t){const o=sl();return Vt.forEach(t,u=>this.getOverlay(e,u).next(f=>{null!==f&&o.set(u,f)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,f)=>{this.ce(e,t,f)}),Vt.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.ss.get(o);return void 0!==u&&(u.forEach(f=>this.overlays=this.overlays.remove(f)),this.ss.delete(o)),Vt.resolve()}getOverlaysForCollection(e,t,o){const u=sl(),f=t.length+1,v=new Ae(t.child("")),O=this.overlays.getIteratorFrom(v);for(;O.hasNext();){const W=O.getNext().value,ie=W.getKey();if(!t.isPrefixOf(ie.path))break;ie.path.length===f&&W.largestBatchId>o&&u.set(W.getKey(),W)}return Vt.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let f=new ts((ie,Me)=>ie-Me);const v=this.overlays.getIterator();for(;v.hasNext();){const ie=v.getNext().value;if(ie.getKey().getCollectionGroup()===t&&ie.largestBatchId>o){let Me=f.get(ie.largestBatchId);null===Me&&(Me=sl(),f=f.insert(ie.largestBatchId,Me)),Me.set(ie.getKey(),ie)}}const O=sl(),W=f.getIterator();for(;W.hasNext()&&(W.getNext().value.forEach((ie,Me)=>O.set(ie,Me)),!(O.size()>=u)););return Vt.resolve(O)}ce(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const v=this.ss.get(u.largestBatchId).delete(o.key);this.ss.set(u.largestBatchId,v)}this.overlays=this.overlays.insert(o.key,new ga(t,o));let f=this.ss.get(t);void 0===f&&(f=fi(),this.ss.set(t,f)),this.ss.set(t,f.add(o.key))}}class xl{constructor(){this.rs=new Ni(qs.os),this.us=new Ni(qs.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const o=new qs(e,t);this.rs=this.rs.add(o),this.us=this.us.add(o)}hs(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.ls(new qs(e,t))}fs(e,t){e.forEach(o=>this.removeReference(o,t))}ds(e){const t=new Ae(new j([])),o=new qs(t,e),u=new qs(t,e+1),f=[];return this.us.forEachInRange([o,u],v=>{this.ls(v),f.push(v.key)}),f}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new Ae(new j([])),o=new qs(t,e),u=new qs(t,e+1);let f=fi();return this.us.forEachInRange([o,u],v=>{f=f.add(v.key)}),f}containsKey(e){const t=new qs(e,0),o=this.rs.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class qs{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return Ae.comparator(e.key,t.key)||Or(e.gs,t.gs)}static cs(e,t){return Or(e.gs,t.gs)||Ae.comparator(e.key,t.key)}}class Sf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new Ni(qs.os)}checkEmpty(e){return Vt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const f=this.ys;this.ys++;const v=new yh(f,t,o,u);this.mutationQueue.push(v);for(const O of u)this.ps=this.ps.add(new qs(O.key,f)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return Vt.resolve(v)}lookupMutationBatch(e,t){return Vt.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.Ts(t+1),f=u<0?0:u;return Vt.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Vt.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return Vt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new qs(t,0),u=new qs(t,Number.POSITIVE_INFINITY),f=[];return this.ps.forEachInRange([o,u],v=>{const O=this.Is(v.gs);f.push(O)}),Vt.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ni(Or);return t.forEach(u=>{const f=new qs(u,0),v=new qs(u,Number.POSITIVE_INFINITY);this.ps.forEachInRange([f,v],O=>{o=o.add(O.gs)})}),Vt.resolve(this.Es(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let f=o;Ae.isDocumentKey(f)||(f=f.child(""));const v=new qs(new Ae(f),0);let O=new Ni(Or);return this.ps.forEachWhile(W=>{const ie=W.key.path;return!!o.isPrefixOf(ie)&&(ie.length===u&&(O=O.add(W.gs)),!0)},v),Vt.resolve(this.Es(O))}Es(e){const t=[];return e.forEach(o=>{const u=this.Is(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){Vn(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let o=this.ps;return Vt.forEach(t.mutations,u=>{const f=new qs(u.key,t.batchId);return o=o.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.ps=o})}Pn(e){}containsKey(e,t){const o=new qs(t,0),u=this.ps.firstAfterOrEqual(o);return Vt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return Vt.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Kc{constructor(e){this.Rs=e,this.docs=new ts(Ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),f=u?u.size:0,v=this.Rs(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:v}),this.size+=v-f,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Vt.resolve(o?o.document.mutableCopy():ys.newInvalidDocument(t))}getEntries(e,t){let o=fa();return t.forEach(u=>{const f=this.docs.get(u);o=o.insert(u,f?f.document.mutableCopy():ys.newInvalidDocument(u))}),Vt.resolve(o)}getDocumentsMatchingQuery(e,t,o,u){let f=fa();const v=t.path,O=new Ae(v.child("")),W=this.docs.getIteratorFrom(O);for(;W.hasNext();){const{key:ie,value:{document:Me}}=W.getNext();if(!v.isPrefixOf(ie.path))break;ie.path.length>v.length+1||Uo(ds(Me),o)<=0||(u.has(Me.key)||Fa(t,Me))&&(f=f.insert(Me.key,Me.mutableCopy()))}return Vt.resolve(f)}getAllFromCollectionGroup(e,t,o,u){En()}Ps(e,t){return Vt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Zc(this)}getSize(e){return Vt.resolve(this.size)}}class Zc extends Pp{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Xn.addEntry(e,u)):this.Xn.removeEntry(o)}),Vt.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class Tc{constructor(e){this.persistence=e,this.vs=new Ba(t=>bl(t),nl),this.lastRemoteSnapshotVersion=D.min(),this.highestTargetId=0,this.bs=0,this.Vs=new xl,this.targetCount=0,this.Ss=Gc.Vn()}forEachTarget(e,t){return this.vs.forEach((o,u)=>t(u)),Vt.resolve()}getLastRemoteSnapshotVersion(e){return Vt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Vt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),Vt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),Vt.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new Gc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,Vt.resolve()}updateTargetData(e,t){return this.xn(t),Vt.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,Vt.resolve()}removeTargets(e,t,o){let u=0;const f=[];return this.vs.forEach((v,O)=>{O.sequenceNumber<=t&&null===o.get(O.targetId)&&(this.vs.delete(v),f.push(this.removeMatchingKeysForTargetId(e,O.targetId)),u++)}),Vt.waitFor(f).next(()=>u)}getTargetCount(e){return Vt.resolve(this.targetCount)}getTargetData(e,t){const o=this.vs.get(t)||null;return Vt.resolve(o)}addMatchingKeys(e,t,o){return this.Vs.hs(t,o),Vt.resolve()}removeMatchingKeys(e,t,o){this.Vs.fs(t,o);const u=this.persistence.referenceDelegate,f=[];return u&&t.forEach(v=>{f.push(u.markPotentiallyOrphaned(e,v))}),Vt.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),Vt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Vs.ws(t);return Vt.resolve(o)}containsKey(e,t){return Vt.resolve(this.Vs.containsKey(t))}}class Af{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Mi(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new Tc(this),this.indexManager=new ll,this.remoteDocumentCache=new Kc(o=>this.referenceDelegate.ks(o)),this.Tt=new vu(t),this.$s=new Oh(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new td,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ds[e.toKey()];return o||(o=new Sf(t,this.referenceDelegate),this.Ds[e.toKey()]=o),o}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,o){Cn("MemoryPersistence","Starting transaction:",e);const u=new Fp(this.Cs.next());return this.referenceDelegate.Ms(),o(u).next(f=>this.referenceDelegate.Os(u).next(()=>f)).toPromise().then(f=>(u.raiseOnCommittedEvent(),f))}Fs(e,t){return Vt.or(Object.values(this.Ds).map(o=>()=>o.containsKey(e,t)))}}class Fp extends ya{constructor(e){super(),this.currentSequenceNumber=e}}class Au{constructor(e){this.persistence=e,this.Bs=new xl,this.Ls=null}static qs(e){return new Au(e)}get Us(){if(this.Ls)return this.Ls;throw En()}addReference(e,t,o){return this.Bs.addReference(o,t),this.Us.delete(o.toString()),Vt.resolve()}removeReference(e,t,o){return this.Bs.removeReference(o,t),this.Us.add(o.toString()),Vt.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),Vt.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(u=>this.Us.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(f=>this.Us.add(f.toString()))}).next(()=>o.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Vt.forEach(this.Us,o=>{const u=Ae.fromPath(o);return this.Ks(e,u).next(f=>{f||t.removeEntry(u,D.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(o=>{o?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return Vt.or([()=>Vt.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class Lp{constructor(e){this.Tt=e}F(e,t,o,u){const f=new to("createOrUpgrade",t);var O;o<1&&u>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pf,{unique:!0}),O.createObjectStore("documentMutations"),xh(e),function(O){O.createObjectStore("remoteDocuments")}(e));let v=Vt.resolve();return o<3&&u>=3&&(0!==o&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),xh(e)),v=v.next(()=>function(O){const W=O.store("targetGlobal"),ie={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:D.min().toTimestamp(),targetCount:0};return W.put("targetGlobalKey",ie)}(f))),o<4&&u>=4&&(0!==o&&(v=v.next(()=>function(O,W){return W.store("mutations").W().next(ie=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pf,{unique:!0});const Me=W.store("mutations"),lt=ie.map(Nt=>Me.put(Nt));return Vt.waitFor(lt)})}(e,f))),v=v.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(v=v.next(()=>this.Gs(f))),o<6&&u>=6&&(v=v.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(f)))),o<7&&u>=7&&(v=v.next(()=>this.js(f))),o<8&&u>=8&&(v=v.next(()=>this.zs(e,f))),o<9&&u>=9&&(v=v.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(v=v.next(()=>this.Ws(f))),o<11&&u>=11&&(v=v.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(v=v.next(()=>{!function(O){const W=O.createObjectStore("documentOverlays",{keyPath:ph});W.createIndex("collectionPathOverlayIndex",Cp,{unique:!1}),W.createIndex("collectionGroupOverlayIndex",Tp,{unique:!1})}(e)})),o<13&&u>=13&&(v=v.next(()=>function(O){const W=O.createObjectStore("remoteDocumentsV14",{keyPath:al});W.createIndex("documentKeyIndex",Ad),W.createIndex("collectionGroupIndex",vp)}(e)).next(()=>this.Hs(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(v=v.next(()=>this.Js(e,f))),o<15&&u>=15&&(v=v.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:Ip}).createIndex("sequenceNumberIndex",mf,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:fh}).createIndex("documentKeyIndex",_f,{unique:!1})}(e))),v}Qs(e){let t=0;return e.store("remoteDocuments").X((o,u)=>{t+=Cc(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Gs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>Vt.forEach(u,f=>{const v=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",v).next(O=>Vt.forEach(O,W=>{Vn(W.userId===f.userId);const ie=Ec(this.Tt,W);return ed(e,f.userId,ie).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const f=[];return o.X((v,O)=>{const W=new j(v),ie=[0,bo(W)];f.push(t.get(ie).next(Me=>Me?Vt.resolve():t.put({targetId:0,path:bo(W),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Vt.waitFor(f))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:wp});const o=t.store("collectionParents"),u=new xd,f=v=>{if(u.add(v)){const O=v.lastSegment(),W=v.popLast();return o.put({collectionId:O,parent:bo(W)})}};return t.store("remoteDocuments").X({Z:!0},(v,O)=>{const W=new j(v);return f(W.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([v,O,W],ie)=>{const Me=Ha(O);return f(Me.popLast())}))}Ws(e){const t=e.store("targets");return t.X((o,u)=>{const f=Uc(u),v=Bc(this.Tt,f);return t.put(v)})}Hs(e,t){const o=t.store("remoteDocuments"),u=[];return o.X((f,v)=>{const O=t.store("remoteDocumentsV14"),W=(ie=v,ie.document?new Ae(j.fromString(ie.document.name).popFirst(5)):ie.noDocument?Ae.fromSegments(ie.noDocument.path):ie.unknownDocument?Ae.fromSegments(ie.unknownDocument.path):En()).path.toArray();var ie;const Me={prefixPath:W.slice(0,W.length-2),collectionGroup:W[W.length-2],documentId:W[W.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};u.push(O.put(Me))}).next(()=>Vt.waitFor(u))}Js(e,t){const o=t.store("mutations"),u=Mh(this.Tt),f=new Af(Au.qs,this.Tt.oe);return o.W().next(v=>{const O=new Map;return v.forEach(W=>{var ie;let Me=null!==(ie=O.get(W.userId))&&void 0!==ie?ie:fi();Ec(this.Tt,W).keys().forEach(lt=>Me=Me.add(lt)),O.set(W.userId,Me)}),Vt.forEach(O,(W,ie)=>{const Me=new xi(ie),lt=Ih.ue(this.Tt,Me),Nt=f.getIndexManager(Me),ln=Iu.ue(Me,this.Tt,Nt,f.referenceDelegate);return new $a(u,ln,lt,Nt).recalculateAndSaveOverlaysForDocumentKeys(new _h(t,Mi.at),W).next()})})}}function xh(i){i.createObjectStore("targetDocuments",{keyPath:bp}).createIndex("documentTargetsIndex",gf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ep,{unique:!0}),i.createObjectStore("targetGlobal")}const Ph="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ld{constructor(e,t,o,u,f,v,O,W,ie,Me,lt=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Ys=f,this.window=v,this.document=O,this.Zs=ie,this.Xs=Me,this.ti=lt,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=Nt=>Promise.resolve(),!Ld.C())throw new Jt(Lt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xp(this,u),this.oi=t+"main",this.Tt=new vu(W),this.ui=new Ls(this.oi,this.ti,new Lp(this.Tt)),this.Ns=new Mp(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Mh(this.Tt),this.$s=new Ef,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===Me&&Un("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Jt(Lt.FAILED_PRECONDITION,Ph);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Mi(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var o=(0,g.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,g.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,g.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(So(e))return Cn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Cn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Xl(e).get("owner").next(t=>Vt.resolve(this.yi(t)))}pi(e){return Jl(e).delete(this.clientId)}Ii(){var e=this;return(0,g.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=ro(o,"clientMetadata");return u.W().next(f=>{const v=e.Ei(f,18e5),O=f.filter(W=>-1===v.indexOf(W));return Vt.forEach(O,W=>u.delete(W.clientId)).next(()=>O)})}).catch(()=>[]);if(e.ci)for(const o of t)e.ci.removeItem(e.Ai(o.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?Vt.resolve(!0):Xl(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Jt(Lt.FAILED_PRECONDITION,Ph);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jl(e).W().next(o=>void 0===this.Ei(o,5e3).find(u=>{if(this.clientId!==u.clientId){const v=!this.inForeground&&u.inForeground,O=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||v&&O)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Cn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,g.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new _h(t,Mi.at);return e.mi(o).next(()=>e.pi(o))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(o=>this.Ti(o.updateTimeMs,t)&&!this.Ri(o.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Jl(e).W().next(t=>this.Ei(t,18e5).map(o=>o.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return Iu.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ah(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Ih.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,o){Cn("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",f=15===(v=this.ti)?vf:14===v?mh:13===v?_c:12===v?yf:11===v?gh:void En();var v;let O;return this.ui.runTransaction(e,u,f,W=>(O=new _h(W,this.Cs?this.Cs.next():Mi.at),"readwrite-primary"===t?this._i(O).next(ie=>!!ie||this.wi(O)).next(ie=>{if(!ie)throw Un(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Jt(Lt.FAILED_PRECONDITION,Bo);return o(O)}).next(ie=>this.gi(O).next(()=>ie)):this.Di(O).next(()=>o(O)))).then(W=>(O.raiseOnCommittedEvent(),W))}Di(e){return Xl(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Jt(Lt.FAILED_PRECONDITION,Ph)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xl(e).put("owner",t)}static C(){return Ls.C()}mi(e){const t=Xl(e);return t.get("owner").next(o=>this.yi(o)?(Cn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Vt.resolve())}Ti(e,t){const o=Date.now();return!(e<o-t||e>o&&(Un(`Detected an update time that is in the future: ${e} > ${o}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,de.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const o=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Cn("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Un("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Un("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(e){}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xl(i){return ro(i,"owner")}function Jl(i){return ro(i,"clientMetadata")}function nd(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class d{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Ci=o,this.xi=u}static Ni(e,t){let o=fi(),u=fi();for(const f of t.docChanges)switch(f.type){case 0:o=o.add(f.doc.key);break;case 1:u=u.add(f.doc.key)}return new d(e,t.fromCache,o,u)}}class a{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,o,u){return this.Mi(e,t).next(f=>f||this.Oi(e,t,u,o)).next(f=>f||this.Fi(e,t))}Mi(e,t){if(zu(t))return Vt.resolve(null);let o=ko(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=uu(t,null,"F"),o=ko(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(f=>{const v=fi(...f);return this.$i.getDocuments(e,v).next(O=>this.indexManager.getMinOffset(e,o).next(W=>{const ie=this.Bi(t,O);return this.Li(t,ie,v,W.readTime)?this.Mi(e,uu(t,null,"F")):this.qi(e,ie,t,W)}))})))}Oi(e,t,o,u){return zu(t)||u.isEqual(D.min())?this.Fi(e,t):this.$i.getDocuments(e,o).next(f=>{const v=this.Bi(t,f);return this.Li(t,v,o,u)?this.Fi(e,t):(us()<=re.in.DEBUG&&Cn("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Na(t)),this.qi(e,v,t,ni(u,-1)))})}Bi(e,t){let o=new Ni(hc(e));return t.forEach((u,f)=>{Fa(e,f)&&(o=o.add(f))}),o}Li(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const f="F"===e.limitType?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(u)>0)}Fi(e,t){return us()<=re.in.DEBUG&&Cn("QueryEngine","Using full collection scan to execute query:",Na(t)),this.$i.getDocumentsMatchingQuery(e,t,ms.min())}qi(e,t,o,u){return this.$i.getDocumentsMatchingQuery(e,o,u).next(f=>(t.forEach(v=>{f=f.insert(v.key,v)}),f))}}class c{constructor(e,t,o,u){this.persistence=e,this.Ui=t,this.Tt=u,this.Ki=new ts(Or),this.Gi=new Ba(f=>bl(f),nl),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(o)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $a(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function p(i,e,t,o){return new c(i,e,t,o)}function w(i,e){return P.apply(this,arguments)}function P(){return P=(0,g.Z)(function*(i,e){const t=On(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(f=>(u=f,t.zi(e),t.mutationQueue.getAllMutationBatches(o))).next(f=>{const v=[],O=[];let W=fi();for(const ie of u){v.push(ie.batchId);for(const Me of ie.mutations)W=W.add(Me.key)}for(const ie of f){O.push(ie.batchId);for(const Me of ie.mutations)W=W.add(Me.key)}return t.localDocuments.getDocuments(o,W).next(ie=>({Wi:ie,removedBatchIds:v,addedBatchIds:O}))})})}),P.apply(this,arguments)}function K(i,e){const t=On(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),f=t.ji.newChangeBuffer({trackRemovals:!0});return function(v,O,W,ie){const Me=W.batch,lt=Me.keys();let Nt=Vt.resolve();return lt.forEach(ln=>{Nt=Nt.next(()=>ie.getEntry(O,ln)).next(Pn=>{const Jn=W.docVersions.get(ln);Vn(null!==Jn),Pn.version.compareTo(Jn)<0&&(Me.applyToRemoteDocument(Pn,W),Pn.isValidDocument()&&(Pn.setReadTime(W.commitVersion),ie.addEntry(Pn)))})}),Nt.next(()=>v.mutationQueue.removeMutationBatch(O,Me))}(t,o,e,f).next(()=>f.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(v){let O=fi();for(let W=0;W<v.mutationResults.length;++W)v.mutationResults[W].transformResults.length>0&&(O=O.add(v.batch.mutations[W].key));return O}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function pe(i){const e=On(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function Le(i,e){const t=On(i),o=e.snapshotVersion;let u=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const v=t.ji.newChangeBuffer({trackRemovals:!0});u=t.Ki;const O=[];e.targetChanges.forEach((Me,lt)=>{const Nt=u.get(lt);if(!Nt)return;O.push(t.Ns.removeMatchingKeys(f,Me.removedDocuments,lt).next(()=>t.Ns.addMatchingKeys(f,Me.addedDocuments,lt)));let ln=Nt.withSequenceNumber(f.currentSequenceNumber);var Pn,Jn,kr;e.targetMismatches.has(lt)?ln=ln.withResumeToken(Rs.EMPTY_BYTE_STRING,D.min()).withLastLimboFreeSnapshotVersion(D.min()):Me.resumeToken.approximateByteSize()>0&&(ln=ln.withResumeToken(Me.resumeToken,o)),u=u.insert(lt,ln),Jn=ln,kr=Me,(0===(Pn=Nt).resumeToken.approximateByteSize()||Jn.snapshotVersion.toMicroseconds()-Pn.snapshotVersion.toMicroseconds()>=3e8||kr.addedDocuments.size+kr.modifiedDocuments.size+kr.removedDocuments.size>0)&&O.push(t.Ns.updateTargetData(f,ln))});let W=fa(),ie=fi();if(e.documentUpdates.forEach(Me=>{e.resolvedLimboDocuments.has(Me)&&O.push(t.persistence.referenceDelegate.updateLimboDocument(f,Me))}),O.push(tt(f,v,e.documentUpdates).next(Me=>{W=Me.Hi,ie=Me.Ji})),!o.isEqual(D.min())){const Me=t.Ns.getLastRemoteSnapshotVersion(f).next(lt=>t.Ns.setTargetsMetadata(f,f.currentSequenceNumber,o));O.push(Me)}return Vt.waitFor(O).next(()=>v.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,W,ie)).next(()=>W)}).then(f=>(t.Ki=u,f))}function tt(i,e,t){let o=fi(),u=fi();return t.forEach(f=>o=o.add(f)),e.getEntries(i,o).next(f=>{let v=fa();return t.forEach((O,W)=>{const ie=f.get(O);W.isFoundDocument()!==ie.isFoundDocument()&&(u=u.add(O)),W.isNoDocument()&&W.version.isEqual(D.min())?(e.removeEntry(O,W.readTime),v=v.insert(O,W)):!ie.isValidDocument()||W.version.compareTo(ie.version)>0||0===W.version.compareTo(ie.version)&&ie.hasPendingWrites?(e.addEntry(W),v=v.insert(O,W)):Cn("LocalStore","Ignoring outdated watch update for ",O,". Current version:",ie.version," Watch version:",W.version)}),{Hi:v,Ji:u}})}function en(i,e){const t=On(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Xt(i,e){const t=On(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Ns.getTargetData(o,e).next(f=>f?(u=f,Vt.resolve(u)):t.Ns.allocateTargetId(o).next(v=>(u=new Yl(e,v,0,o.currentSequenceNumber),t.Ns.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ki.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(o.targetId,o),t.Gi.set(e,o.targetId)),o})}function gn(i,e,t){return sr.apply(this,arguments)}function sr(){return sr=(0,g.Z)(function*(i,e,t){const o=On(i),u=o.Ki.get(e),f=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",f,v=>o.persistence.referenceDelegate.removeTarget(v,u)))}catch(v){if(!So(v))throw v;Cn("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}o.Ki=o.Ki.remove(e),o.Gi.delete(u.target)}),sr.apply(this,arguments)}function Tr(i,e,t){const o=On(i);let u=D.min(),f=fi();return o.persistence.runTransaction("Execute query","readonly",v=>function(O,W,ie){const Me=On(O),lt=Me.Gi.get(ie);return void 0!==lt?Vt.resolve(Me.Ki.get(lt)):Me.Ns.getTargetData(W,ie)}(o,v,ko(e)).next(O=>{if(O)return u=O.lastLimboFreeSnapshotVersion,o.Ns.getMatchingKeysForTargetId(v,O.targetId).next(W=>{f=W})}).next(()=>o.Ui.getDocumentsMatchingQuery(v,e,t?u:D.min(),t?f:fi())).next(O=>(ul(o,du(e),O),{documents:O,Yi:f})))}function Ui(i,e){const t=On(i),o=On(t.Ns),u=t.Ki.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",f=>o.ie(f,e).next(v=>v?v.target:null))}function po(i,e){const t=On(i),o=t.Qi.get(e)||D.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.ji.getAllFromCollectionGroup(u,e,ni(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(ul(t,e,u),u))}function ul(i,e,t){let o=i.Qi.get(e)||D.min();t.forEach((u,f)=>{f.readTime.compareTo(o)>0&&(o=f.readTime)}),i.Qi.set(e,o)}function go(){return go=(0,g.Z)(function*(i,e,t,o){const u=On(i);let f=fi(),v=fa();for(const ie of t){const Me=e.Zi(ie.metadata.name);ie.document&&(f=f.add(Me));const lt=e.Xi(ie);lt.setReadTime(e.tr(ie.metadata.readTime)),v=v.insert(Me,lt)}const O=u.ji.newChangeBuffer({trackRemovals:!0}),W=yield Xt(u,(ie=o,ko(ha(j.fromString(`__bundle__/docs/${ie}`)))));var ie;return u.persistence.runTransaction("Apply bundle documents","readwrite",ie=>tt(ie,O,v).next(Me=>(O.apply(ie),Me)).next(Me=>u.Ns.removeMatchingKeysForTargetId(ie,W.targetId).next(()=>u.Ns.addMatchingKeys(ie,f,W.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(ie,Me.Hi,Me.Ji)).next(()=>Me.Hi)))}),go.apply(this,arguments)}function Up(i,e){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,g.Z)(function*(i,e,t=fi()){const o=yield Xt(i,ko(Eh(e.bundledQuery))),u=On(i);return u.persistence.runTransaction("Save named query","readwrite",f=>{const v=Vs(e.readTime);if(o.snapshotVersion.compareTo(v)>=0)return u.$s.saveNamedQuery(f,e);const O=o.withResumeToken(Rs.EMPTY_BYTE_STRING,v);return u.Ki=u.Ki.insert(O.targetId,O),u.Ns.updateTargetData(f,O).next(()=>u.Ns.removeMatchingKeysForTargetId(f,o.targetId)).next(()=>u.Ns.addMatchingKeys(f,t,o.targetId)).next(()=>u.$s.saveNamedQuery(f,e))})}),Bp.apply(this,arguments)}function D_(i,e){return`firestore_clients_${i}_${e}`}function S_(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Rf(i,e){return`firestore_targets_${i}_${e}`}class Vp{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static er(e,t,o){const u=JSON.parse(o);let f,v="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return v&&u.error&&(v="string"==typeof u.error.message&&"string"==typeof u.error.code,v&&(f=new Jt(u.error.code,u.error.message))),v?new Vp(e,t,u.state,f):(Un("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static er(e,t){const o=JSON.parse(t);let u,f="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return f&&o.error&&(f="string"==typeof o.error.message&&"string"==typeof o.error.code,f&&(u=new Jt(o.error.code,o.error.message))),f?new kh(e,o.state,u):(Un("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ud{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,f=Eo();for(let v=0;u&&v<o.activeTargetIds.length;++v)u=la(o.activeTargetIds[v]),f=f.add(o.activeTargetIds[v]);return u?new Ud(e,f):(Un("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Mf{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Mf(t.clientId,t.onlineState):(Un("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jp{constructor(){this.activeTargetIds=Eo()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hp{constructor(e,t,o,u,f){this.window=e,this.Ys=t,this.persistenceKey=o,this.rr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new ts(Or),this.started=!1,this.hr=[];const v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.lr=D_(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new jp),this._r=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,g.Z)(function*(){const t=yield e.syncEngine.Si();for(const u of t){if(u===e.rr)continue;const f=e.getItem(D_(e.persistenceKey,u));if(f){const v=Ud.er(u,f);v&&(e.ar=e.ar.insert(v.clientId,v))}}e.pr();const o=e.storage.getItem(e.gr);if(o){const u=e.Ir(o);u&&e.Tr(u)}for(const u of e.hr)e.cr(u);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,o){this.Ar(e,t,o),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Rf(this.persistenceKey,e));if(o){const u=kh.er(e,o);u&&(t=u.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rf(this.persistenceKey,e))}updateQueryState(e,t,o){this.vr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Rr(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Cn("SharedClientState","READ",e,t),t}setItem(e,t){Cn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Cn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Cn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.lr)return void Un("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,g.Z)(function*(){if(t.started){if(null!==o.key)if(t._r.test(o.key)){if(null==o.newValue){const u=t.Sr(o.key);return t.Dr(u,null)}{const u=t.Cr(o.key,o.newValue);if(u)return t.Dr(u.clientId,u)}}else if(t.wr.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(t.mr.test(o.key)){if(null!==o.newValue){const u=t.$r(o.key,o.newValue);if(u)return t.Mr(u)}}else if(o.key===t.gr){if(null!==o.newValue){const u=t.Ir(o.newValue);if(u)return t.Tr(u)}}else if(o.key===t.dr){const u=function(f){let v=Mi.at;if(null!=f)try{const O=JSON.parse(f);Vn("number"==typeof O),v=O}catch(O){Un("SharedClientState","Failed to read sequence number from WebStorage",O)}return v}(o.newValue);u!==Mi.at&&t.sequenceNumberHandler(u)}else if(o.key===t.yr){const u=t.Or(o.newValue);yield Promise.all(u.map(f=>t.syncEngine.Fr(f)))}}else t.hr.push(o)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,o){const u=new Vp(this.currentUser,e,t,o),f=S_(this.persistenceKey,this.currentUser,e);this.setItem(f,u.nr())}Rr(e){const t=S_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,o){const u=Rf(this.persistenceKey,e),f=new kh(e,t,o);this.setItem(u,f.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const o=this.Sr(e);return Ud.er(o,t)}Nr(e,t){const o=this.wr.exec(e),u=Number(o[1]);return Vp.er(new xi(void 0!==o[2]?o[2]:null),u,t)}$r(e,t){const o=this.mr.exec(e),u=Number(o[1]);return kh.er(u,t)}Ir(e){return Mf.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,g.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Cn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const o=t?this.ar.insert(e,t):this.ar.remove(e),u=this.Er(this.ar),f=this.Er(o),v=[],O=[];return f.forEach(W=>{u.has(W)||v.push(W)}),u.forEach(W=>{f.has(W)||O.push(W)}),this.syncEngine.qr(v,O).then(()=>{this.ar=o})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=Eo();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class rm{constructor(){this.Ur=new jp,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,o){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new jp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class im{Gr(e){}shutdown(){}}class sm{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Cn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Cn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Nh=null;function $p(){return null===Nh?Nh=268435456+Math.round(2147483648*Math.random()):Nh++,"0x"+Nh.toString(16)}const A_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class om{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const ra="WebChannelConnection";class R_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,o,u,f){const v=$p(),O=this.fo(e,t);Cn("RestConnection",`Sending RPC '${e}' ${v}:`,O,o);const W={};return this._o(W,u,f),this.wo(e,O,W,o).then(ie=>(Cn("RestConnection",`Received RPC '${e}' ${v}: `,ie),ie),ie=>{throw Gn("RestConnection",`RPC '${e}' ${v} failed with error: `,ie,"url: ",O,"request:",o),ie})}mo(e,t,o,u,f,v){return this.lo(e,t,o,u,f)}_o(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+lo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,f)=>e[f]=u),o&&o.headers.forEach((u,f)=>e[f]=u)}fo(e,t){return`${this.co}/v1/${t}:${A_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,o,u){const f=$p();return new Promise((v,O)=>{const W=new ki;W.setWithCredentials(!0),W.listenOnce(as.COMPLETE,()=>{try{switch(W.getLastErrorCode()){case qi.NO_ERROR:const Me=W.getResponseJson();Cn(ra,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(Me)),v(Me);break;case qi.TIMEOUT:Cn(ra,`RPC '${e}' ${f} timed out`),O(new Jt(Lt.DEADLINE_EXCEEDED,"Request time out"));break;case qi.HTTP_ERROR:const lt=W.getStatus();if(Cn(ra,`RPC '${e}' ${f} failed with status:`,lt,"response text:",W.getResponseText()),lt>0){let Nt=W.getResponseJson();Array.isArray(Nt)&&(Nt=Nt[0]);const ln=null==Nt?void 0:Nt.error;if(ln&&ln.status&&ln.message){const Pn=function(Jn){const kr=Jn.toLowerCase().replace(/_/g,"-");return Object.values(Lt).indexOf(kr)>=0?kr:Lt.UNKNOWN}(ln.status);O(new Jt(Pn,ln.message))}else O(new Jt(Lt.UNKNOWN,"Server responded with status "+W.getStatus()))}else O(new Jt(Lt.UNAVAILABLE,"Connection failed."));break;default:En()}}finally{Cn(ra,`RPC '${e}' ${f} completed.`)}});const ie=JSON.stringify(u);Cn(ra,`RPC '${e}' ${f} sending request:`,u),W.send(t,"POST",ie,o,15)})}yo(e,t,o){const u=$p(),f=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=Di(),O=Bi(),W={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(W.xmlHttpFactory=new Si({})),this._o(W.initMessageHeaders,t,o),W.encodeInitMessageHeaders=!0;const ie=f.join("");Cn(ra,`Creating RPC '${e}' stream ${u}: ${ie}`,W);const Me=v.createWebChannel(ie,W);let lt=!1,Nt=!1;const ln=new om({Yr:Jn=>{Nt?Cn(ra,`Not sending because RPC '${e}' stream ${u} is closed:`,Jn):(lt||(Cn(ra,`Opening RPC '${e}' stream ${u} transport.`),Me.open(),lt=!0),Cn(ra,`RPC '${e}' stream ${u} sending:`,Jn),Me.send(Jn))},Zr:()=>Me.close()}),Pn=(Jn,kr,Es)=>{Jn.listen(kr,Ys=>{try{Es(Ys)}catch(Wi){setTimeout(()=>{throw Wi},0)}})};return Pn(Me,ls.EventType.OPEN,()=>{Nt||Cn(ra,`RPC '${e}' stream ${u} transport opened.`)}),Pn(Me,ls.EventType.CLOSE,()=>{Nt||(Nt=!0,Cn(ra,`RPC '${e}' stream ${u} transport closed`),ln.oo())}),Pn(Me,ls.EventType.ERROR,Jn=>{Nt||(Nt=!0,Gn(ra,`RPC '${e}' stream ${u} transport errored:`,Jn),ln.oo(new Jt(Lt.UNAVAILABLE,"The operation could not be completed")))}),Pn(Me,ls.EventType.MESSAGE,Jn=>{var kr;if(!Nt){const Es=Jn.data[0];Vn(!!Es);const Ys=Es,Wi=Ys.error||(null===(kr=Ys[0])||void 0===kr?void 0:kr.error);if(Wi){Cn(ra,`RPC '${e}' stream ${u} received error:`,Wi);const ia=Wi.status;let bs=function(sa){const Jc=ui[sa];if(void 0!==Jc)return Ua(Jc)}(ia),zi=Wi.message;void 0===bs&&(bs=Lt.INTERNAL,zi="Unknown error status: "+ia+" with message "+Wi.message),Nt=!0,ln.oo(new Jt(bs,zi)),Me.close()}else Cn(ra,`RPC '${e}' stream ${u} received:`,Es),ln.uo(Es)}}),Pn(O,si.STAT_EVENT,Jn=>{Jn.stat===gs.PROXY?Cn(ra,`RPC '${e}' stream ${u} detected buffering proxy`):Jn.stat===gs.NOPROXY&&Cn(ra,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{ln.ro()},0),ln}}function tc(){return"undefined"!=typeof window?window:null}function Bd(){return"undefined"!=typeof document?document:null}function Fh(i){return new cf(i,!0)}class Gp{constructor(e,t,o=1e3,u=1.5,f=6e4){this.Ys=e,this.timerId=t,this.po=o,this.Io=u,this.To=f,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),o=Math.max(0,Date.now()-this.Ro),u=Math.max(0,t-o);u>0&&Cn("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,u,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class M_{constructor(e,t,o,u,f,v,O,W){this.Ys=e,this.So=o,this.Do=u,this.connection=f,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=O,this.listener=W,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Gp(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,g.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,g.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var o=this;return(0,g.Z)(function*(){o.Uo(),o.Ko(),o.ko.cancel(),o.Co++,4!==e?o.ko.reset():t&&t.code===Lt.RESOURCE_EXHAUSTED?(Un(t.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),o.ko.Po()):t&&t.code===Lt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Go(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Co===t&&this.jo(o,u)},o=>{e(()=>{const u=new Jt(Lt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.zo(u)})})}jo(e,t){const o=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{o(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(u=>{o(()=>this.zo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.ko.vo((0,g.Z)(function*(){e.state=0,e.start()}))}zo(e){return Cn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Cn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class am extends M_{constructor(e,t,o,u,f,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,v),this.Tt=f}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function Sd(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(W=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===W?1:"REMOVE"===W?2:"CURRENT"===W?3:"RESET"===W?4:En(),u=e.targetChange.targetIds||[],f=function(W,ie){return W.yt?(Vn(void 0===ie||"string"==typeof ie),Rs.fromBase64String(ie||"")):(Vn(void 0===ie||ie instanceof Uint8Array),Rs.fromUint8Array(ie||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,O=v&&function(W){const ie=void 0===W.code?Lt.UNKNOWN:Ua(W.code);return new Jt(ie,W.message||"")}(v);t=new Cl(o,u,f,O||null)}else if("documentChange"in e){const o=e.documentChange,u=Tl(i,o.document.name),f=Vs(o.document.updateTime),v=o.document.createTime?Vs(o.document.createTime):D.min(),O=new Bs({mapValue:{fields:o.document.fields}}),W=ys.newFoundDocument(u,f,v,O);t=new wd(o.targetIds||[],o.removedTargetIds||[],W.key,W)}else if("documentDelete"in e){const o=e.documentDelete,u=Tl(i,o.document),f=o.readTime?Vs(o.readTime):D.min(),v=ys.newNoDocument(u,f);t=new wd([],o.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const o=e.documentRemove,u=Tl(i,o.document);t=new wd([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return En();{const o=e.filter,f=new vd(o.count||0);t=new Oc(o.targetId,f)}}var W;return t}(this.Tt,e),o=function(u){if(!("targetChange"in u))return D.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?D.min():f.readTime?Vs(f.readTime):D.min()}(e);return this.listener.Ho(t,o)}Jo(e){const t={};t.database=Nc(this.Tt),t.addTarget=function(u,f){let v;const O=f.target;return v=xa(O)?{documents:Ta(u,O)}:{query:Da(u,O)},v.targetId=f.targetId,f.resumeToken.approximateByteSize()>0?v.resumeToken=Pc(u,f.resumeToken):f.snapshotVersion.compareTo(D.min())>0&&(v.readTime=xc(u,f.snapshotVersion.toTimestamp())),v}(this.Tt,e);const o=function mu(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return En()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.qo(t)}Yo(e){const t={};t.database=Nc(this.Tt),t.removeTarget=e,this.qo(t)}}class O_ extends M_{constructor(e,t,o,u,f,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,v),this.Tt=f,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(Vn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function ja(i,e){return i&&i.length>0?(Vn(void 0!==e),i.map(t=>function(o,u){let f=Vs(o.updateTime?o.updateTime:u);return f.isEqual(D.min())&&(f=Vs(u)),new Pe(f,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Vs(e.commitTime);return this.listener.eu(o,t)}return Vn(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Nc(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Va(this.Tt,o))};this.qo(t)}}class x_ extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.Tt=u,this.iu=!1}ru(){if(this.iu)throw new Jt(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,o){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.lo(e,t,o,u,f)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Jt(Lt.UNKNOWN,u.toString())})}mo(e,t,o,u){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,v])=>this.connection.mo(e,t,o,f,v,u)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Jt(Lt.UNKNOWN,f.toString())})}terminate(){this.iu=!0}}class k_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Un(t),this.cu=!1):Cn("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class N_{constructor(e,t,o,u,f){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=f,this.yu.Gr(O=>{o.enqueueAndForget((0,g.Z)(function*(){var W;qc(v)&&(Cn("RemoteStore","Restarting streams for network reachability change."),yield(W=(0,g.Z)(function*(ie){const Me=On(ie);Me.mu.add(4),yield Vd(Me),Me.pu.set("Unknown"),Me.mu.delete(4),yield Ru(Me)}),function(ie){return W.apply(this,arguments)})(v))}))}),this.pu=new k_(o,u)}}function Ru(i){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,g.Z)(function*(i){if(qc(i))for(const e of i.gu)yield e(!0)}),Uh.apply(this,arguments)}function Vd(i){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,g.Z)(function*(i){for(const e of i.gu)yield e(!1)}),Bh.apply(this,arguments)}function jd(i,e){const t=On(i);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),cm(t)?Vh(t):nc(t).Mo()&&Wp(t,e))}function Hd(i,e){const t=On(i),o=nc(t);t.wu.delete(e),o.Mo()&&lm(t,e),0===t.wu.size&&(o.Mo()?o.Bo():qc(t)&&t.pu.set("Unknown"))}function Wp(i,e){i.Iu.Ot(e.targetId),nc(i).Jo(e)}function lm(i,e){i.Iu.Ot(e),nc(i).Yo(e)}function Vh(i){i.Iu=new Id({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>i.wu.get(e)||null}),nc(i).start(),i.pu.au()}function cm(i){return qc(i)&&!nc(i).$o()&&i.wu.size>0}function qc(i){return 0===On(i).mu.size}function zp(i){i.Iu=void 0}function um(i){return Of.apply(this,arguments)}function Of(){return Of=(0,g.Z)(function*(i){i.wu.forEach((e,t)=>{Wp(i,e)})}),Of.apply(this,arguments)}function dm(i,e){return xf.apply(this,arguments)}function xf(){return xf=(0,g.Z)(function*(i,e){zp(i),cm(i)?(i.pu.fu(e),Vh(i)):i.pu.set("Unknown")}),xf.apply(this,arguments)}function Yc(i,e,t){return $d.apply(this,arguments)}function $d(){return $d=(0,g.Z)(function*(i,e,t){if(i.pu.set("Online"),e instanceof Cl&&2===e.state&&e.cause)try{yield(o=(0,g.Z)(function*(u,f){const v=f.cause;for(const O of f.targetIds)u.wu.has(O)&&(yield u.remoteSyncer.rejectListen(O,v),u.wu.delete(O),u.Iu.removeTarget(O))}),function(u,f){return o.apply(this,arguments)})(i,e)}catch(o){Cn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Pf(i,o)}else if(e instanceof wd?i.Iu.Qt(e):e instanceof Oc?i.Iu.Zt(e):i.Iu.Wt(e),!t.isEqual(D.min()))try{const o=yield pe(i.localStore);t.compareTo(o)>=0&&(yield function(u,f){const v=u.Iu.ee(f);return v.targetChanges.forEach((O,W)=>{if(O.resumeToken.approximateByteSize()>0){const ie=u.wu.get(W);ie&&u.wu.set(W,ie.withResumeToken(O.resumeToken,f))}}),v.targetMismatches.forEach(O=>{const W=u.wu.get(O);if(!W)return;u.wu.set(O,W.withResumeToken(Rs.EMPTY_BYTE_STRING,W.snapshotVersion)),lm(u,O);const ie=new Yl(W.target,O,1,W.sequenceNumber);Wp(u,ie)}),u.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(o){Cn("RemoteStore","Failed to raise snapshot:",o),yield Pf(i,o)}var o}),$d.apply(this,arguments)}function Pf(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,g.Z)(function*(i,e,t){if(!So(e))throw e;i.mu.add(1),yield Vd(i),i.pu.set("Offline"),t||(t=()=>pe(i.localStore)),i.asyncQueue.enqueueRetryable((0,g.Z)(function*(){Cn("RemoteStore","Retrying IndexedDB access"),yield t(),i.mu.delete(1),yield Ru(i)}))}),Kp.apply(this,arguments)}function F_(i,e){return e().catch(t=>Pf(i,t,e))}function Mu(i){return kf.apply(this,arguments)}function kf(){return kf=(0,g.Z)(function*(i){const e=On(i),t=Ou(e);let o=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Zp(e);)try{const u=yield en(e.localStore,o);if(null===u){0===e._u.length&&t.Bo();break}o=u.batchId,jh(e,u)}catch(u){yield Pf(e,u)}hm(e)&&Nf(e)}),kf.apply(this,arguments)}function Zp(i){return qc(i)&&i._u.length<10}function jh(i,e){i._u.push(e);const t=Ou(i);t.Mo()&&t.Xo&&t.tu(e.mutations)}function hm(i){return qc(i)&&!Ou(i).$o()&&i._u.length>0}function Nf(i){Ou(i).start()}function fm(i){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,g.Z)(function*(i){Ou(i).su()}),Ff.apply(this,arguments)}function pm(i){return qp.apply(this,arguments)}function qp(){return qp=(0,g.Z)(function*(i){const e=Ou(i);for(const t of i._u)e.tu(t.mutations)}),qp.apply(this,arguments)}function Yp(i,e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,g.Z)(function*(i,e,t){const o=i._u.shift(),u=Rd.from(o,e,t);yield F_(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Mu(i)}),Qp.apply(this,arguments)}function L_(i,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,g.Z)(function*(i,e){var t;e&&Ou(i).Xo&&(yield(t=(0,g.Z)(function*(o,u){if(Zu(f=u.code)&&f!==Lt.ABORTED){const v=o._u.shift();Ou(o).Fo(),yield F_(o,()=>o.remoteSyncer.rejectFailedWrite(v.batchId,u)),yield Mu(o)}var f}),function(o,u){return t.apply(this,arguments)})(i,e)),hm(i)&&Nf(i)}),Lf.apply(this,arguments)}function rd(i,e){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,g.Z)(function*(i,e){const t=On(i);t.asyncQueue.verifyOperationInProgress(),Cn("RemoteStore","RemoteStore received new credentials");const o=qc(t);t.mu.add(3),yield Vd(t),o&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield Ru(t)}),Uf.apply(this,arguments)}function Xp(i,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,g.Z)(function*(i,e){const t=On(i);e?(t.mu.delete(2),yield Ru(t)):e||(t.mu.add(2),yield Vd(t),t.pu.set("Unknown"))}),Jp.apply(this,arguments)}function nc(i){return i.Tu||(i.Tu=function(e,t,o){const u=On(e);return u.ru(),new am(t,u.connection,u.authCredentials,u.appCheckCredentials,u.Tt,o)}(i.datastore,i.asyncQueue,{Xr:um.bind(null,i),no:dm.bind(null,i),Ho:Yc.bind(null,i)}),i.gu.push(function(){var e=(0,g.Z)(function*(t){t?(i.Tu.Fo(),cm(i)?Vh(i):i.pu.set("Unknown")):(yield i.Tu.stop(),zp(i))});return function(t){return e.apply(this,arguments)}}())),i.Tu}function Ou(i){return i.Eu||(i.Eu=function(e,t,o){const u=On(e);return u.ru(),new O_(t,u.connection,u.authCredentials,u.appCheckCredentials,u.Tt,o)}(i.datastore,i.asyncQueue,{Xr:fm.bind(null,i),no:L_.bind(null,i),nu:pm.bind(null,i),eu:Yp.bind(null,i)}),i.gu.push(function(){var e=(0,g.Z)(function*(t){t?(i.Eu.Fo(),yield Mu(i)):(yield i.Eu.stop(),i._u.length>0&&(Cn("RemoteStore",`Stopping write stream with ${i._u.length} pending writes`),i._u=[]))});return function(t){return e.apply(this,arguments)}}())),i.Eu}class eg{constructor(e,t,o,u,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=f,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,o,u,f){const v=Date.now()+o,O=new eg(e,t,v,u,f);return O.start(o),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jt(Lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gd(i,e){if(Un("AsyncQueue",`${e}: ${i}`),So(i))return new Jt(Lt.UNAVAILABLE,`${e}: ${i}`);throw i}class Wd{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ae.comparator(t.key,o.key):(t,o)=>Ae.comparator(t.key,o.key),this.keyedMap=gc(),this.sortedSet=new ts(this.comparator)}static emptySet(e){return new Wd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,f=o.getNext().key;if(!u.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Wd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Pl{constructor(){this.Au=new ts(Ae.comparator)}track(e){const t=e.doc.key,o=this.Au.get(t);o?0!==e.type&&3===o.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==o.type?this.Au=this.Au.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Au=this.Au.remove(t):1===e.type&&2===o.type?this.Au=this.Au.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):En():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,o)=>{e.push(o)}),e}}class xu{constructor(e,t,o,u,f,v,O,W,ie){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=f,this.fromCache=v,this.syncStateChanged=O,this.excludesMetadataChanges=W,this.hasCachedResults=ie}static fromInitialDocuments(e,t,o,u,f){const v=[];return t.forEach(O=>{v.push({type:0,doc:O})}),new xu(e,t,Wd.emptySet(t),v,o,u,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class gm{constructor(){this.Pu=void 0,this.listeners=[]}}class mm{constructor(){this.queries=new Ba(e=>Jo(e),Rc),this.onlineState="Unknown",this.vu=new Set}}function Bf(i,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,g.Z)(function*(i,e){const t=On(i),o=e.query;let u=!1,f=t.queries.get(o);if(f||(u=!0,f=new gm),u)try{f.Pu=yield t.onListen(o)}catch(v){const O=Gd(v,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(O)}t.queries.set(o,f),f.listeners.push(e),e.bu(t.onlineState),f.Pu&&e.Vu(f.Pu)&&jf(t)}),Vf.apply(this,arguments)}function tg(i,e){return ng.apply(this,arguments)}function ng(){return ng=(0,g.Z)(function*(i,e){const t=On(i),o=e.query;let u=!1;const f=t.queries.get(o);if(f){const v=f.listeners.indexOf(e);v>=0&&(f.listeners.splice(v,1),u=0===f.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),ng.apply(this,arguments)}function U_(i,e){const t=On(i);let o=!1;for(const u of e){const v=t.queries.get(u.query);if(v){for(const O of v.listeners)O.Vu(u)&&(o=!0);v.Pu=u}}o&&jf(t)}function B_(i,e,t){const o=On(i),u=o.queries.get(e);if(u)for(const f of u.listeners)f.onError(t);o.queries.delete(e)}function jf(i){i.vu.forEach(e=>{e.next()})}class _m{constructor(e,t,o){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=o||{}}Vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new xu(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=xu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class ym{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class vm{constructor(e){this.Tt=e}Zi(e){return Tl(this.Tt,e)}Xi(e){return e.metadata.exists?uh(this.Tt,e.document,!1):ys.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Vs(e)}}class V_{constructor(e,t,o){this.Fu=e,this.localStore=t,this.Tt=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=j_(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const o=j.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,o=new vm(this.Tt);for(const u of e)if(u.metadata.queries){const f=o.Zi(u.metadata.name);for(const v of u.metadata.queries){const O=(t.get(v)||fi()).add(f);t.set(v,O)}}return t}complete(){var e=this;return(0,g.Z)(function*(){const t=yield function ec(i,e,t,o){return go.apply(this,arguments)}(e.localStore,new vm(e.Tt),e.documents,e.Fu.id),o=e.Lu(e.documents);for(const u of e.queries)yield Up(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function j_(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class H_{constructor(e){this.key=e}}class Hf{constructor(e){this.key=e}}class Em{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=fi(),this.mutatedKeys=fi(),this.ju=hc(e),this.zu=new Wd(this.ju)}get Wu(){return this.Ku}Hu(e,t){const o=t?t.Ju:new Pl,u=t?t.zu:this.zu;let f=t?t.mutatedKeys:this.mutatedKeys,v=u,O=!1;const W="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,ie="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Me,lt)=>{const Nt=u.get(Me),ln=Fa(this.query,lt)?lt:null,Pn=!!Nt&&this.mutatedKeys.has(Nt.key),Jn=!!ln&&(ln.hasLocalMutations||this.mutatedKeys.has(ln.key)&&ln.hasCommittedMutations);let kr=!1;Nt&&ln?Nt.data.isEqual(ln.data)?Pn!==Jn&&(o.track({type:3,doc:ln}),kr=!0):this.Yu(Nt,ln)||(o.track({type:2,doc:ln}),kr=!0,(W&&this.ju(ln,W)>0||ie&&this.ju(ln,ie)<0)&&(O=!0)):!Nt&&ln?(o.track({type:0,doc:ln}),kr=!0):Nt&&!ln&&(o.track({type:1,doc:Nt}),kr=!0,(W||ie)&&(O=!0)),kr&&(ln?(v=v.add(ln),f=Jn?f.add(Me):f.delete(Me)):(v=v.delete(Me),f=f.delete(Me)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const Me="F"===this.query.limitType?v.last():v.first();v=v.delete(Me.key),f=f.delete(Me.key),o.track({type:1,doc:Me})}return{zu:v,Ju:o,Li:O,mutatedKeys:f}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const f=e.Ju.Ru();f.sort((ie,Me)=>function(lt,Nt){const ln=Pn=>{switch(Pn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return En()}};return ln(lt)-ln(Nt)}(ie.type,Me.type)||this.ju(ie.doc,Me.doc)),this.Zu(o);const v=t?this.Xu():[],O=0===this.Qu.size&&this.current?1:0,W=O!==this.Gu;return this.Gu=O,0!==f.length||W?{snapshot:new xu(this.query,e.zu,u,f,e.mutatedKeys,0===O,W,!1,!!o&&o.resumeToken.approximateByteSize()>0),tc:v}:{tc:v}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Pl,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=fi(),this.zu.forEach(o=>{this.ec(o.key)&&(this.Qu=this.Qu.add(o.key))});const t=[];return e.forEach(o=>{this.Qu.has(o)||t.push(new Hf(o))}),this.Qu.forEach(o=>{e.has(o)||t.push(new H_(o))}),t}nc(e){this.Ku=e.Yi,this.Qu=fi();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return xu.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class bm{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class wm{constructor(e){this.key=e,this.ic=!1}}class Iv{constructor(e,t,o,u,f,v){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=f,this.maxConcurrentLimboResolutions=v,this.rc={},this.oc=new Ba(O=>Jo(O),Rc),this.uc=new Map,this.cc=new Set,this.ac=new ts(Ae.comparator),this.hc=new Map,this.lc=new xl,this.fc={},this.dc=new Map,this._c=Gc.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function rc(i,e){return Im.apply(this,arguments)}function Im(){return Im=(0,g.Z)(function*(i,e){const t=Kf(i);let o,u;const f=t.oc.get(e);if(f)o=f.targetId,t.sharedClientState.addLocalQueryTarget(o),u=f.view.sc();else{const v=yield Xt(t.localStore,ko(e));t.isPrimaryClient&&jd(t.remoteStore,v);const O=t.sharedClientState.addLocalQueryTarget(v.targetId);o=v.targetId,u=yield Cm(t,e,o,"current"===O,v.resumeToken)}return u}),Im.apply(this,arguments)}function Cm(i,e,t,o,u){return $f.apply(this,arguments)}function $f(){return $f=(0,g.Z)(function*(i,e,t,o,u){i.mc=(lt,Nt,ln)=>{return(Pn=(0,g.Z)(function*(Jn,kr,Es,Ys){let Wi=kr.view.Hu(Es);Wi.Li&&(Wi=yield Tr(Jn.localStore,kr.query,!1).then(({documents:zi})=>kr.view.Hu(zi,Wi)));const ia=Ys&&Ys.targetChanges.get(kr.targetId),bs=kr.view.applyChanges(Wi,Jn.isPrimaryClient,ia);return cg(Jn,kr.targetId,bs.tc),bs.snapshot}),function(Jn,kr,Es,Ys){return Pn.apply(this,arguments)})(i,lt,Nt,ln);var Pn};const f=yield Tr(i.localStore,e,!0),v=new Em(e,f.Yi),O=v.Hu(f.documents),W=mc.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,u),ie=v.applyChanges(O,i.isPrimaryClient,W);cg(i,t,ie.tc);const Me=new bm(e,t,v);return i.oc.set(e,Me),i.uc.has(t)?i.uc.get(t).push(e):i.uc.set(t,[e]),ie.snapshot}),$f.apply(this,arguments)}function Tm(i,e){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,g.Z)(function*(i,e){const t=On(i),o=t.oc.get(e),u=t.uc.get(o.targetId);if(u.length>1)return t.uc.set(o.targetId,u.filter(f=>!Rc(f,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield gn(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Hd(t.remoteStore,o.targetId),Dc(t,o.targetId)}).catch(_o))):(Dc(t,o.targetId),yield gn(t.localStore,o.targetId,!0))}),Gf.apply(this,arguments)}function Dm(){return Dm=(0,g.Z)(function*(i,e,t){const o=Zf(i);try{const u=yield function(f,v){const O=On(f),W=x.now(),ie=v.reduce((Nt,ln)=>Nt.add(ln.key),fi());let Me,lt;return O.persistence.runTransaction("Locally write mutations","readwrite",Nt=>{let ln=fa(),Pn=fi();return O.ji.getEntries(Nt,ie).next(Jn=>{ln=Jn,ln.forEach((kr,Es)=>{Es.isValidDocument()||(Pn=Pn.add(kr))})}).next(()=>O.localDocuments.getOverlayedDocuments(Nt,ln)).next(Jn=>{Me=Jn;const kr=[];for(const Es of v){const Ys=Os(Es,Me.get(Es.key).overlayedDocument);null!=Ys&&kr.push(new ta(Es.key,Ys,dc(Ys.value.mapValue),At.exists(!0)))}return O.mutationQueue.addMutationBatch(Nt,W,kr,v)}).next(Jn=>{lt=Jn;const kr=Jn.applyToLocalDocumentSet(Me,Pn);return O.documentOverlayCache.saveOverlays(Nt,Jn.batchId,kr)})}).then(()=>({batchId:lt.batchId,changes:sf(Me)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(f,v,O){let W=f.fc[f.currentUser.toKey()];W||(W=new ts(Or)),W=W.insert(v,O),f.fc[f.currentUser.toKey()]=W}(o,u.batchId,t),yield dl(o,u.changes),yield Mu(o.remoteStore)}catch(u){const f=Gd(u,"Failed to persist write");t.reject(f)}}),Dm.apply(this,arguments)}function rg(i,e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,g.Z)(function*(i,e){const t=On(i);try{const o=yield Le(t.localStore,e);e.targetChanges.forEach((u,f)=>{const v=t.hc.get(f);v&&(Vn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?v.ic=!0:u.modifiedDocuments.size>0?Vn(v.ic):u.removedDocuments.size>0&&(Vn(v.ic),v.ic=!1))}),yield dl(t,o,e)}catch(o){yield _o(o)}}),Hh.apply(this,arguments)}function Sm(i,e,t){const o=On(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.oc.forEach((f,v)=>{const O=v.view.bu(e);O.snapshot&&u.push(O.snapshot)}),function(f,v){const O=On(f);O.onlineState=v;let W=!1;O.queries.forEach((ie,Me)=>{for(const lt of Me.listeners)lt.bu(v)&&(W=!0)}),W&&jf(O)}(o.eventManager,e),u.length&&o.rc.Ho(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function ig(i,e,t){return sg.apply(this,arguments)}function sg(){return sg=(0,g.Z)(function*(i,e,t){const o=On(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.hc.get(e),f=u&&u.key;if(f){let v=new ts(Ae.comparator);v=v.insert(f,ys.newNoDocument(f,D.min()));const O=fi().add(f),W=new ol(D.min(),new Map,new Ni(Or),v,O);yield rg(o,W),o.ac=o.ac.remove(f),o.hc.delete(e),kl(o)}else yield gn(o.localStore,e,!1).then(()=>Dc(o,e,t)).catch(_o)}),sg.apply(this,arguments)}function G_(i,e){return og.apply(this,arguments)}function og(){return og=(0,g.Z)(function*(i,e){const t=On(i),o=e.batch.batchId;try{const u=yield K(t.localStore,e);lg(t,o,null),Pu(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield dl(t,u)}catch(u){yield _o(u)}}),og.apply(this,arguments)}function W_(i,e,t){return ag.apply(this,arguments)}function ag(){return ag=(0,g.Z)(function*(i,e,t){const o=On(i);try{const u=yield function(f,v){const O=On(f);return O.persistence.runTransaction("Reject batch","readwrite-primary",W=>{let ie;return O.mutationQueue.lookupMutationBatch(W,v).next(Me=>(Vn(null!==Me),ie=Me.keys(),O.mutationQueue.removeMutationBatch(W,Me))).next(()=>O.mutationQueue.performConsistencyCheck(W)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(W,ie,v)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(W,ie)).next(()=>O.localDocuments.getDocuments(W,ie))})}(o.localStore,e);lg(o,e,t),Pu(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield dl(o,u)}catch(u){yield _o(u)}}),ag.apply(this,arguments)}function zd(){return zd=(0,g.Z)(function*(i,e){const t=On(i);qc(t.remoteStore)||Cn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(f){const v=On(f);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>v.mutationQueue.getHighestUnacknowledgedBatchId(O))}(t.localStore);if(-1===o)return void e.resolve();const u=t.dc.get(o)||[];u.push(e),t.dc.set(o,u)}catch(o){const u=Gd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),zd.apply(this,arguments)}function Pu(i,e){(i.dc.get(e)||[]).forEach(t=>{t.resolve()}),i.dc.delete(e)}function lg(i,e,t){const o=On(i);let u=o.fc[o.currentUser.toKey()];if(u){const f=u.get(e);f&&(t?f.reject(t):f.resolve(),u=u.remove(e)),o.fc[o.currentUser.toKey()]=u}}function Dc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.uc.get(e))i.oc.delete(o),t&&i.rc.gc(o,t);i.uc.delete(e),i.isPrimaryClient&&i.lc.ds(e).forEach(o=>{i.lc.containsKey(o)||Am(i,o)})}function Am(i,e){i.cc.delete(e.path.canonicalString());const t=i.ac.get(e);null!==t&&(Hd(i.remoteStore,t),i.ac=i.ac.remove(e),i.hc.delete(t),kl(i))}function cg(i,e,t){for(const o of t)o instanceof H_?(i.lc.addReference(o.key,e),ug(i,o)):o instanceof Hf?(Cn("SyncEngine","Document no longer in limbo: "+o.key),i.lc.removeReference(o.key,e),i.lc.containsKey(o.key)||Am(i,o.key)):En()}function ug(i,e){const t=e.key,o=t.path.canonicalString();i.ac.get(t)||i.cc.has(o)||(Cn("SyncEngine","New document in limbo: "+t),i.cc.add(o),kl(i))}function kl(i){for(;i.cc.size>0&&i.ac.size<i.maxConcurrentLimboResolutions;){const e=i.cc.values().next().value;i.cc.delete(e);const t=new Ae(j.fromString(e)),o=i._c.next();i.hc.set(o,new wm(t)),i.ac=i.ac.insert(t,o),jd(i.remoteStore,new Yl(ko(ha(t.path)),o,2,Mi.at))}}function dl(i,e,t){return Go.apply(this,arguments)}function Go(){return Go=(0,g.Z)(function*(i,e,t){const o=On(i),u=[],f=[],v=[];var O;o.oc.isEmpty()||(o.oc.forEach((O,W)=>{v.push(o.mc(W,e,t).then(ie=>{if((ie||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(W.targetId,(null==ie?void 0:ie.fromCache)?"not-current":"current"),ie){u.push(ie);const Me=d.Ni(W.targetId,ie);f.push(Me)}}))}),yield Promise.all(v),o.rc.Ho(u),yield(O=(0,g.Z)(function*(W,ie){const Me=On(W);try{yield Me.persistence.runTransaction("notifyLocalViewChanges","readwrite",lt=>Vt.forEach(ie,Nt=>Vt.forEach(Nt.Ci,ln=>Me.persistence.referenceDelegate.addReference(lt,Nt.targetId,ln)).next(()=>Vt.forEach(Nt.xi,ln=>Me.persistence.referenceDelegate.removeReference(lt,Nt.targetId,ln)))))}catch(lt){if(!So(lt))throw lt;Cn("LocalStore","Failed to update sequence numbers: "+lt)}for(const lt of ie){const Nt=lt.targetId;if(!lt.fromCache){const ln=Me.Ki.get(Nt),Jn=ln.withLastLimboFreeSnapshotVersion(ln.snapshotVersion);Me.Ki=Me.Ki.insert(Nt,Jn)}}}),function(W,ie){return O.apply(this,arguments)})(o.localStore,f))}),Go.apply(this,arguments)}function id(i,e){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,g.Z)(function*(i,e){const t=On(i);if(!t.currentUser.isEqual(e)){Cn("SyncEngine","User change. New user:",e.toKey());const o=yield w(t.localStore,e);t.currentUser=e,(u=t).dc.forEach(v=>{v.forEach(O=>{O.reject(new Jt(Lt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.dc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield dl(t,o.Wi)}var u}),Kd.apply(this,arguments)}function Nl(i,e){const t=On(i),o=t.hc.get(e);if(o&&o.ic)return fi().add(o.key);{let u=fi();const f=t.uc.get(e);if(!f)return u;for(const v of f){const O=t.oc.get(v);u=u.unionWith(O.view.Wu)}return u}}function dg(i,e){return ku.apply(this,arguments)}function ku(){return ku=(0,g.Z)(function*(i,e){const t=On(i),o=yield Tr(t.localStore,e.query,!0),u=e.view.nc(o);return t.isPrimaryClient&&cg(t,e.targetId,u.tc),u}),ku.apply(this,arguments)}function Zd(i,e){return Nu.apply(this,arguments)}function Nu(){return Nu=(0,g.Z)(function*(i,e){const t=On(i);return po(t.localStore,e).then(o=>dl(t,o))}),Nu.apply(this,arguments)}function qd(i,e,t,o){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,g.Z)(function*(i,e,t,o){const u=On(i),f=yield function(v,O){const W=On(v),ie=On(W.mutationQueue);return W.persistence.runTransaction("Lookup mutation documents","readonly",Me=>ie.An(Me,O).next(lt=>lt?W.localDocuments.getDocuments(Me,lt):Vt.resolve(null)))}(u.localStore,e);var O;null!==f?("pending"===t?yield Mu(u.remoteStore):"acknowledged"===t||"rejected"===t?(lg(u,e,o||null),Pu(u,e),O=e,On(On(u.localStore).mutationQueue).Pn(O)):En(),yield dl(u,f)):Cn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Fu.apply(this,arguments)}function Lu(){return Lu=(0,g.Z)(function*(i,e){const t=On(i);if(Kf(t),Zf(t),!0===e&&!0!==t.wc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield sd(t,o.toArray());t.wc=!0,yield Xp(t.remoteStore,!0);for(const f of u)jd(t.remoteStore,f)}else if(!1===e&&!1!==t.wc){const o=[];let u=Promise.resolve();t.uc.forEach((f,v)=>{t.sharedClientState.isLocalQueryTarget(v)?o.push(v):u=u.then(()=>(Dc(t,v),gn(t.localStore,v,!0))),Hd(t.remoteStore,v)}),yield u,yield sd(t,o),function(f){const v=On(f);v.hc.forEach((O,W)=>{Hd(v.remoteStore,W)}),v.lc._s(),v.hc=new Map,v.ac=new ts(Ae.comparator)}(t),t.wc=!1,yield Xp(t.remoteStore,!1)}}),Lu.apply(this,arguments)}function sd(i,e,t){return Uu.apply(this,arguments)}function Uu(){return Uu=(0,g.Z)(function*(i,e,t){const o=On(i),u=[],f=[];for(const v of e){let O;const W=o.uc.get(v);if(W&&0!==W.length){O=yield Xt(o.localStore,ko(W[0]));for(const ie of W){const Me=o.oc.get(ie),lt=yield dg(o,Me);lt.snapshot&&f.push(lt.snapshot)}}else{const ie=yield Ui(o.localStore,v);O=yield Xt(o.localStore,ie),yield Cm(o,hg(ie),v,!1,O.resumeToken)}u.push(O)}return o.rc.Ho(f),u}),Uu.apply(this,arguments)}function hg(i){return Hl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Rm(i){const e=On(i);return On(On(e.localStore).persistence).Si()}function Mm(i,e,t,o){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,g.Z)(function*(i,e,t,o){const u=On(i);if(u.wc)return void Cn("SyncEngine","Ignoring unexpected query state notification.");const f=u.uc.get(e);if(f&&f.length>0)switch(t){case"current":case"not-current":{const v=yield po(u.localStore,du(f[0])),O=ol.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Rs.EMPTY_BYTE_STRING);yield dl(u,v,O);break}case"rejected":yield gn(u.localStore,e,!0),Dc(u,e,o);break;default:En()}}),Wf.apply(this,arguments)}function Om(i,e,t){return zf.apply(this,arguments)}function zf(){return zf=(0,g.Z)(function*(i,e,t){const o=Kf(i);if(o.wc){for(const u of e){if(o.uc.has(u)){Cn("SyncEngine","Adding an already active target "+u);continue}const f=yield Ui(o.localStore,u),v=yield Xt(o.localStore,f);yield Cm(o,hg(f),v.targetId,!1,v.resumeToken),jd(o.remoteStore,v)}for(const u of t)o.uc.has(u)&&(yield gn(o.localStore,u,!1).then(()=>{Hd(o.remoteStore,u),Dc(o,u)}).catch(_o))}}),zf.apply(this,arguments)}function Kf(i){const e=On(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=rg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ig.bind(null,e),e.rc.Ho=U_.bind(null,e.eventManager),e.rc.gc=B_.bind(null,e.eventManager),e}function Zf(i){const e=On(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W_.bind(null,e),e}class Pm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,g.Z)(function*(){t.Tt=Fh(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return p(this.persistence,new a,e.initialUser,this.Tt)}Tc(e){return new Af(Au.qs,this.Tt)}Ic(e){return new rm}terminate(){var e=this;return(0,g.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class fg extends Pm{constructor(e,t,o){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,g.Z)(function*(){yield t().call(o,e),yield o.Pc.initialize(o,e),yield Zf(o.Pc.syncEngine),yield Mu(o.Pc.remoteStore),yield o.persistence.di(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return p(this.persistence,new a,e.initialUser,this.Tt)}Ac(e,t){return new Tf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const o=new Sc(t,this.persistence);return new gd(e.asyncQueue,o)}Tc(e){const t=nd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?No.withCacheSize(this.cacheSizeBytes):No.DEFAULT;return new Ld(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,tc(),Bd(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new rm}}class K_ extends fg{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,g.Z)(function*(){yield t().call(o,e);const u=o.Pc.syncEngine;o.sharedClientState instanceof Hp&&(o.sharedClientState.syncEngine={Br:qd.bind(null,u),Lr:Mm.bind(null,u),qr:Om.bind(null,u),Si:Rm.bind(null,u),Fr:Zd.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.di(function(){var f=(0,g.Z)(function*(v){yield function Yd(i,e){return Lu.apply(this,arguments)}(o.Pc.syncEngine,v),o.gcScheduler&&(v&&!o.gcScheduler.started?o.gcScheduler.start():v||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(v&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():v||o.indexBackfillerScheduler.stop())});return function(v){return f.apply(this,arguments)}}())})()}Ic(e){const t=tc();if(!Hp.C(t))throw new Jt(Lt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=nd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hp(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class qf{initialize(e,t){var o=this;return(0,g.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Sm(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=id.bind(null,o.syncEngine),yield Xp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mm}createDatastore(e){const t=Fh(e.databaseInfo.databaseId),o=new R_(e.databaseInfo);return new x_(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,f=O=>Sm(this.syncEngine,O,0),v=sm.C()?new sm:new im,new N_(t,o,u,f,v);var t,o,u,f,v}createSyncEngine(e,t){return function(o,u,f,v,O,W,ie){const Me=new Iv(o,u,f,v,O,W);return ie&&(Me.wc=!0),Me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,g.Z)(function*(t){const o=On(t);Cn("RemoteStore","RemoteStore shutting down."),o.mu.add(5),yield Vd(o),o.yu.shutdown(),o.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pg(i,e=10240){let t=0;return{read:()=>(0,g.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,g.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Yf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Z_{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new Xi,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.Mu)}`))},o=>this.metadata.reject(o))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,g.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,g.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,g.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const o=e.Sc.decode(t),u=Number(o);isNaN(u)&&e.xc(`length string (${o}) is not valid number`);const f=yield e.Nc(u);return new ym(JSON.parse(f),t.length+u)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,g.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Nc(e){var t=this;return(0,g.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const o=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,g.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class km{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,g.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Jt(Lt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,g.Z)(function*(f,v){const O=On(f),W=Nc(O.Tt)+"/documents",ie={documents:v.map(ln=>kc(O.Tt,ln))},Me=yield O.mo("BatchGetDocuments",W,ie,v.length),lt=new Map;Me.forEach(ln=>{const Pn=function pa(i,e){return"found"in e?function(t,o){Vn(!!o.found);const u=Tl(t,o.found.name),f=Vs(o.found.updateTime),v=o.found.createTime?Vs(o.found.createTime):D.min(),O=new Bs({mapValue:{fields:o.found.fields}});return ys.newFoundDocument(u,f,v,O)}(i,e):"missing"in e?function(t,o){Vn(!!o.missing),Vn(!!o.readTime);const u=Tl(t,o.missing),f=Vs(o.readTime);return ys.newNoDocument(u,f)}(i,e):En()}(O.Tt,ln);lt.set(Pn.key.toString(),Pn)});const Nt=[];return v.forEach(ln=>{const Pn=lt.get(ln.toString());Vn(!!Pn),Nt.push(Pn)}),Nt}),function(f,v){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,g.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const f=Ae.fromPath(u);e.mutations.push(new Zl(f,e.precondition(f)))}),yield(o=(0,g.Z)(function*(u,f){const v=On(u),O=Nc(v.Tt)+"/documents",W={writes:f.map(ie=>Va(v.Tt,ie))};yield v.lo("Commit",O,W)}),function(u,f){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw En();t=D.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Jt(Lt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(D.min())?At.exists(!1):At.updateTime(t):At.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(D.min()))throw new Jt(Lt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return At.updateTime(t)}return At.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class q_{constructor(e,t,o,u,f){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=f,this.Mc=o.maxAttempts,this.ko=new Gp(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,g.Z)(function*(){const t=new km(e.datastore),o=e.Fc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(f=>{e.Bc(f)}))}).catch(u=>{e.Bc(u)})}))}Fc(e){try{const t=this.updateFunction(e);return!Ra(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Zu(t)}return!1}}class Nm{constructor(e,t,o,u){var f=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=xi.UNAUTHENTICATED,this.clientId=Ji.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var v=(0,g.Z)(function*(O){Cn("FirestoreClient","Received user=",O.uid),yield f.authCredentialListener(O),f.user=O});return function(O){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(o,v=>(Cn("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,g.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jt(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,g.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=Gd(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Fm(i,e){return gg.apply(this,arguments)}function gg(){return gg=(0,g.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Cn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,g.Z)(function*(f){o.isEqual(f)||(yield w(e.localStore,f),o=f)});return function(f){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),gg.apply(this,arguments)}function Y_(i,e){return mg.apply(this,arguments)}function mg(){return mg=(0,g.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield $h(i);Cn("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>rd(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,f)=>rd(e.remoteStore,f)),i.onlineComponents=e}),mg.apply(this,arguments)}function $h(i){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,g.Z)(function*(i){return i.offlineComponents||(Cn("FirestoreClient","Using default OfflineComponentProvider"),yield Fm(i,new Pm)),i.offlineComponents}),Gh.apply(this,arguments)}function Qf(i){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,g.Z)(function*(i){return i.onlineComponents||(Cn("FirestoreClient","Using default OnlineComponentProvider"),yield Y_(i,new qf)),i.onlineComponents}),Lm.apply(this,arguments)}function Q_(i){return $h(i).then(e=>e.persistence)}function _g(i){return $h(i).then(e=>e.localStore)}function yg(i){return Qf(i).then(e=>e.remoteStore)}function Xf(i){return Qf(i).then(e=>e.syncEngine)}function Qd(i){return Bu.apply(this,arguments)}function Bu(){return Bu=(0,g.Z)(function*(i){const e=yield Qf(i),t=e.eventManager;return t.onListen=rc.bind(null,e.syncEngine),t.onUnlisten=Tm.bind(null,e.syncEngine),t}),Bu.apply(this,arguments)}function vg(i,e,t={}){const o=new Xi;return i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function(u,f,v,O,W){const ie=new Yf({next:lt=>{f.enqueueAndForget(()=>tg(u,Me));const Nt=lt.docs.has(v);!Nt&&lt.fromCache?W.reject(new Jt(Lt.UNAVAILABLE,"Failed to get document because the client is offline.")):Nt&&lt.fromCache&&O&&"server"===O.source?W.reject(new Jt(Lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):W.resolve(lt)},error:lt=>W.reject(lt)}),Me=new _m(ha(v.path),ie,{includeMetadataChanges:!0,$u:!0});return Bf(u,Me)}(yield Qd(i),i.asyncQueue,e,t,o)})),o.promise}function Bm(i,e,t={}){const o=new Xi;return i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function(u,f,v,O,W){const ie=new Yf({next:lt=>{f.enqueueAndForget(()=>tg(u,Me)),lt.fromCache&&"server"===O.source?W.reject(new Jt(Lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):W.resolve(lt)},error:lt=>W.reject(lt)}),Me=new _m(v,ie,{includeMetadataChanges:!0,$u:!0});return Bf(u,Me)}(yield Qd(i),i.asyncQueue,e,t,o)})),o.promise}const jm=new Map;function Eg(i,e,t){if(!t)throw new Jt(Lt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Hm(i,e,t,o){if(!0===e&&!0===o)throw new Jt(Lt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function bg(i){if(!Ae.isDocumentKey(i))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function $m(i){if(Ae.isDocumentKey(i))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Wh(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":En()}function Fi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Jt(Lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wh(i);throw new Jt(Lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function ep(i,e){if(e<=0)throw new Jt(Lt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class ry{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Jt(Lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jt(Lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Hm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ry({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Jt(Lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jt(Lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ry(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ks;switch(t.type){case"gapi":return new Wo(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Jt(Lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jm.get(e);t&&(Cn("ComponentProvider","Removing Datastore"),jm.delete(e),t.terminate())}(this),Promise.resolve()}}function Gm(i,e,t,o={}){var u;const f=(i=Fi(i,od))._getSettings();if("firestore.googleapis.com"!==f.host&&f.host!==e&&Gn("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},f),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let v,O;if("string"==typeof o.mockUserToken)v=o.mockUserToken,O=xi.MOCK_USER;else{v=(0,de.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const W=o.mockUserToken.sub||o.mockUserToken.user_id;if(!W)throw new Jt(Lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new xi(W)}i._authCredentials=new _a(new Sa(v,O))}}class wo{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wo(this.firestore,e,this._key)}}class Io{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Io(this.firestore,e,this._query)}}class ic extends Io{constructor(e,t,o){super(e,t,ha(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wo(this.firestore,null,new Ae(e))}withConverter(e){return new ic(this.firestore,e,this._path)}}function wg(i,e,...t){if(i=(0,de.m9)(i),Eg("collection","path",e),i instanceof od){const o=j.fromString(e,...t);return $m(o),new ic(i,null,o)}{if(!(i instanceof wo||i instanceof ic))throw new Jt(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(j.fromString(e,...t));return $m(o),new ic(i.firestore,null,o)}}function Ig(i,e){if(i=Fi(i,od),Eg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Io(i,null,(t=e,new Pa(j.emptyPath(),t)));var t}function Wm(i,e,...t){if(i=(0,de.m9)(i),1===arguments.length&&(e=Ji.R()),Eg("doc","path",e),i instanceof od){const o=j.fromString(e,...t);return bg(o),new wo(i,null,new Ae(o))}{if(!(i instanceof wo||i instanceof ic))throw new Jt(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(j.fromString(e,...t));return bg(o),new wo(i.firestore,i instanceof ic?i.converter:null,new Ae(o))}}function tp(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),(i instanceof wo||i instanceof ic)&&(e instanceof wo||e instanceof ic)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Xd(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),i instanceof Io&&e instanceof Io&&i.firestore===e.firestore&&Rc(i._query,e._query)&&i.converter===e.converter}class Cg{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Gp(this,"async_queue_retry"),this.Hc=()=>{const t=Bd();t&&Cn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=Bd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=Bd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new Xi;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,g.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!So(t))throw t;Cn("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(o=>{throw this.Qc=o,this.jc=!1,Un("INTERNAL UNHANDLED ERROR: ",function(f){let v=f.message||"";return f.stack&&(v=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),v}(o)),o}).then(o=>(this.jc=!1,o))));return this.qc=t,t}enqueueAfterDelay(e,t,o){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const u=eg.createAndSchedule(this,e,t,o,f=>this.Xc(f));return this.Gc.push(u),u}Jc(){this.Qc&&En()}verifyOperationInProgress(){}ta(){var e=this;return(0,g.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function zm(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class iy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const np=-1;class vs extends od{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new Cg,this._persistenceKey=(null==u?void 0:u.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Tg(this),this._firestoreClient.terminate()}}function io(i){return i._firestoreClient||Tg(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Tg(i){var e;const t=i._freezeSettings(),o=(f=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new sh(i._databaseId,f,i._persistenceKey,(O=t).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var f,O;i._firestoreClient=new Nm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Km(i,e){Ag(i=Fi(i,vs));const t=io(i),o=i._freezeSettings(),u=new qf;return rp(t,u,new fg(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function Dg(i){Ag(i=Fi(i,vs));const e=io(i),t=i._freezeSettings(),o=new qf;return rp(e,o,new K_(o,t.cacheSizeBytes))}function rp(i,e,t){const o=new Xi;return i.asyncQueue.enqueue((0,g.Z)(function*(){try{yield Fm(i,t),yield Y_(i,e),o.resolve()}catch(u){const f=u;if(!("FirebaseError"===(v=f).name?v.code===Lt.FAILED_PRECONDITION||v.code===Lt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw f;Gn("Error enabling offline persistence. Falling back to persistence disabled: "+f),o.reject(f)}var v})).then(()=>o.promise)}function ay(i){if(i._initialized&&!i._terminated)throw new Jt(Lt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,g.Z)(function*(){try{yield(t=(0,g.Z)(function*(o){if(!Ls.C())return Promise.resolve();const u=o+"main";yield Ls.delete(u)}),function(o){return t.apply(this,arguments)})(nd(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function Zm(i){return function(e){const t=new Xi;return e.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function z_(i,e){return zd.apply(this,arguments)}(yield Xf(e),t)})),t.promise}(io(i=Fi(i,vs)))}function qm(i){return function J_(i){return i.asyncQueue.enqueue((0,g.Z)(function*(){const e=yield Q_(i),t=yield yg(i);return e.setNetworkEnabled(!0),function(o){const u=On(o);return u.mu.delete(0),Ru(u)}(t)}))}(io(i=Fi(i,vs)))}function Sg(i){return function Um(i){return i.asyncQueue.enqueue((0,g.Z)(function*(){const e=yield Q_(i),t=yield yg(i);return e.setNetworkEnabled(!1),(o=(0,g.Z)(function*(u){const f=On(u);f.mu.add(0),yield Vd(f),f.pu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(io(i=Fi(i,vs)))}function cy(i,e){const t=io(i=Fi(i,vs)),o=new iy;return function ty(i,e,t,o){const u=function(f,v){let O;return O="string"==typeof f?(new TextEncoder).encode(f):f,W=function(W,ie){if(W instanceof Uint8Array)return pg(W,void 0);if(W instanceof ArrayBuffer)return pg(new Uint8Array(W),void 0);if(W instanceof ReadableStream)return W.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new Z_(W,v);var W}(t,Fh(e));i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){!function xm(i,e,t){const o=On(i);var u;(u=(0,g.Z)(function*(f,v,O){try{const W=yield v.getMetadata();if(yield function(Nt,ln){const Pn=On(Nt),Jn=Vs(ln.createTime);return Pn.persistence.runTransaction("hasNewerBundle","readonly",kr=>Pn.$s.getBundleMetadata(kr,ln.id)).then(kr=>!!kr&&kr.createTime.compareTo(Jn)>=0)}(f.localStore,W))return yield v.close(),O._completeWith({taskState:"Success",documentsLoaded:(Nt=W).totalDocuments,bytesLoaded:Nt.totalBytes,totalDocuments:Nt.totalDocuments,totalBytes:Nt.totalBytes}),Promise.resolve(new Set);O._updateProgress(j_(W));const ie=new V_(W,f.localStore,v.Tt);let Me=yield v.yc();for(;Me;){const Nt=yield ie.Bu(Me);Nt&&O._updateProgress(Nt),Me=yield v.yc()}const lt=yield ie.complete();return yield dl(f,lt.Uu,void 0),yield function(Nt,ln){const Pn=On(Nt);return Pn.persistence.runTransaction("Save bundle","readwrite",Jn=>Pn.$s.saveBundleMetadata(Jn,ln))}(f.localStore,W),O._completeWith(lt.progress),Promise.resolve(lt.qu)}catch(W){return Gn("SyncEngine",`Loading bundle failed with ${W}`),O._failWith(W),Promise.resolve(new Set)}var Nt}),function(f,v,O){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Xf(i),u,o)}))}(t,i._databaseId,e,o),o}function Ym(i,e){return function ny(i,e){return i.asyncQueue.enqueue((0,g.Z)(function*(){return function(t,o){const u=On(t);return u.persistence.runTransaction("Get named query","readonly",f=>u.$s.getNamedQuery(f,o))}(yield _g(i),e)}))}(io(i=Fi(i,vs)),e).then(t=>t?new Io(i,null,t.query):null)}function Ag(i){if(i._initialized||i._terminated)throw new Jt(Lt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Qc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qc(Rs.fromBase64String(e))}catch(t){throw new Jt(Lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qc(Rs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Jt(Lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ve(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vu{constructor(e){this._methodName=e}}class zh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jt(Lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jt(Lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Or(this._lat,e._lat)||Or(this._long,e._long)}}const Qm=/^__.*__$/;class Xm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new rl(e,this.data,t,this.fieldTransforms)}}class Mg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new ta(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dy(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw En()}}class ip{constructor(e,t,o,u,f,v){this.settings=e,this.databaseId=t,this.Tt=o,this.ignoreUndefinedProperties=u,void 0===f&&this.ia(),this.fieldTransforms=f||[],this.fieldMask=v||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new ip(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.oa({path:o,ca:!1});return u.aa(e),u}ha(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.oa({path:o,ca:!1});return u.ia(),u}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return th(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(dy(this.ra)&&Qm.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class hy{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=o||Fh(e)}wa(e,t,o,u=!1){return new ip({ra:e,methodName:t,_a:o,path:ve.emptyPath(),ca:!1,da:u},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function ju(i){const e=i._freezeSettings(),t=Fh(i._databaseId);return new hy(i._databaseId,!!e.ignoreUndefinedProperties,t)}function sp(i,e,t,o,u,f={}){const v=i.wa(f.merge||f.mergeFields?2:0,e,t,u);kg("Data must be an object, but it was:",v,o);const O=e_(o,v);let W,ie;if(f.merge)W=new Xo(v.fieldMask),ie=v.fieldTransforms;else if(f.mergeFields){const Me=[];for(const lt of f.mergeFields){const Nt=Jd(e,lt,t);if(!v.contains(Nt))throw new Jt(Lt.INVALID_ARGUMENT,`Field '${Nt}' is specified in your field mask but missing from your input data.`);sc(Me,Nt)||Me.push(Nt)}W=new Xo(Me),ie=v.fieldTransforms.filter(lt=>W.covers(lt.field))}else W=null,ie=v.fieldTransforms;return new Xm(new Bs(O),W,ie)}class so extends Vu{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof so}}function Og(i,e,t){return new ip({ra:3,_a:e.settings._a,methodName:i._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class xg extends Vu{_toFieldTransform(e){return new M(e.path,new Gl)}isEqual(e){return e instanceof xg}}class fy extends Vu{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=Og(this,e,!0),o=this.ma.map(f=>cd(f,t)),u=new Wl(o);return new M(e.path,u)}isEqual(e){return this===e}}class Jm extends Vu{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=Og(this,e,!0),o=this.ma.map(f=>cd(f,t)),u=new Il(o);return new M(e.path,u)}isEqual(e){return this===e}}class py extends Vu{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new A(e.Tt,hu(e.Tt,this.ga));return new M(e.path,t)}isEqual(e){return this===e}}function op(i,e,t,o){const u=i.wa(1,e,t);kg("Data must be an object, but it was:",u,o);const f=[],v=Bs.empty();Ll(o,(W,ie)=>{const Me=eh(e,W,t);ie=(0,de.m9)(ie);const lt=u.ha(Me);if(ie instanceof so)f.push(Me);else{const Nt=cd(ie,lt);null!=Nt&&(f.push(Me),v.set(Me,Nt))}});const O=new Xo(f);return new Mg(v,O,u.fieldTransforms)}function ap(i,e,t,o,u,f){const v=i.wa(1,e,t),O=[Jd(e,o,t)],W=[u];if(f.length%2!=0)throw new Jt(Lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Nt=0;Nt<f.length;Nt+=2)O.push(Jd(e,f[Nt])),W.push(f[Nt+1]);const ie=[],Me=Bs.empty();for(let Nt=O.length-1;Nt>=0;--Nt)if(!sc(ie,O[Nt])){const ln=O[Nt];let Pn=W[Nt];Pn=(0,de.m9)(Pn);const Jn=v.ha(ln);if(Pn instanceof so)ie.push(ln);else{const kr=cd(Pn,Jn);null!=kr&&(ie.push(ln),Me.set(ln,kr))}}const lt=new Xo(ie);return new Mg(Me,lt,v.fieldTransforms)}function ld(i,e,t,o=!1){return cd(t,i.wa(o?4:3,e))}function cd(i,e){if(Pg(i=(0,de.m9)(i)))return kg("Unsupported field value:",e,i),e_(i,e);if(i instanceof Vu)return function(t,o){if(!dy(o.ra))throw o.fa(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.fa(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,o){const u=[];let f=0;for(const v of t){let O=cd(v,o.la(f));null==O&&(O={nullValue:"NULL_VALUE"}),u.push(O),f++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,de.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hu(o.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=x.fromDate(t);return{timestampValue:xc(o.Tt,u)}}if(t instanceof x){const u=new x(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xc(o.Tt,u)}}if(t instanceof zh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qc)return{bytesValue:Pc(o.Tt,t._byteString)};if(t instanceof wo){const u=o.databaseId,f=t.firestore._databaseId;if(!f.isEqual(u))throw o.fa(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:pu(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.fa(`Unsupported field value: ${Wh(t)}`)}(i,e)}function e_(i,e){const t={};return Aa(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ll(i,(o,u)=>{const f=cd(u,e.ua(o));null!=f&&(t[o]=f)}),{mapValue:{fields:t}}}function Pg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof x||i instanceof zh||i instanceof Qc||i instanceof wo||i instanceof Vu)}function kg(i,e,t){if(!Pg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Wh(t);throw e.fa("an object"===o?i+" a custom object":i+" "+o)}var o}function Jd(i,e,t){if((e=(0,de.m9)(e))instanceof Xc)return e._internalPath;if("string"==typeof e)return eh(i,e);throw th("Field path arguments must be of type string or ",i,!1,void 0,t)}const Cv=new RegExp("[~\\*/\\[\\]]");function eh(i,e,t){if(e.search(Cv)>=0)throw th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Xc(...e.split("."))._internalPath}catch(o){throw th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function th(i,e,t,o,u){const f=o&&!o.isEmpty(),v=void 0!==u;let O=`Function ${e}() called with invalid data`;t&&(O+=" (via `toFirestore()`)"),O+=". ";let W="";return(f||v)&&(W+=" (found",f&&(W+=` in field ${o}`),v&&(W+=` in document ${u}`),W+=")"),new Jt(Lt.INVALID_ARGUMENT,O+i+W)}function sc(i,e){return i.some(t=>t.isEqual(e))}class Kh{constructor(e,t,o,u,f){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new wo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gy extends Kh{data(){return super.data()}}function hl(i,e){return"string"==typeof e?eh(i,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}function Fl(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Jt(Lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fl{}class nh extends fl{}function t_(i,e,...t){let o=[];e instanceof fl&&o.push(e),o=o.concat(t),function(u){const f=u.filter(O=>O instanceof rh).length,v=u.filter(O=>O instanceof Zh).length;if(f>1||f>0&&v>0)throw new Jt(Lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Zh extends nh{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new Zh(e,t,o)}_apply(e){const t=this._parse(e);return Lg(e._query,t),new Io(e.firestore,e.converter,cu(e._query,t))}_parse(e){const t=ju(e.firestore);return function(u,f,v,O,W,ie,Me){let lt;if(W.isKeyField()){if("array-contains"===ie||"array-contains-any"===ie)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ie}' queries on documentId().`);if("in"===ie||"not-in"===ie){Fg(Me,ie);const Nt=[];for(const ln of Me)Nt.push(cp(O,u,ln));lt={arrayValue:{values:Nt}}}else lt=cp(O,u,Me)}else"in"!==ie&&"not-in"!==ie&&"array-contains-any"!==ie||Fg(Me,ie),lt=ld(v,"where",Me,"in"===ie||"not-in"===ie);return me.create(W,ie,lt)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function my(i,e,t){const o=e,u=hl("where",i);return Zh._create(u,o,t)}class rh extends fl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rh(e,t)}_parse(e){const t=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===t.length?t[0]:je.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(o,u){let f=o;const v=u.getFlattenedFilters();for(const O of v)Lg(f,O),f=cu(f,O)}(e._query,t),new Io(e.firestore,e.converter,cu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ud extends nh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ud(e,t)}_apply(e){const t=function(o,u,f){if(null!==o.startAt)throw new Jt(Lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Jt(Lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new Xa(u,f);return function(O,W){if(null===lu(O)){const ie=Ac(O);null!==ie&&Ug(0,ie,W.field)}}(o,v),v}(e._query,this._field,this._direction);return new Io(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new Pa(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function _y(i,e="asc"){const t=e,o=hl("orderBy",i);return ud._create(o,t)}class qh extends nh{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new qh(e,t,o)}_apply(e){return new Io(e.firestore,e.converter,uu(e._query,this._limit,this._limitType))}}function yy(i){return ep("limit",i),qh._create("limit",i,"F")}function r_(i){return ep("limitToLast",i),qh._create("limitToLast",i,"L")}class Yh extends nh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new Yh(e,t,o)}_apply(e){const t=Xh(e,this.type,this._docOrFields,this._inclusive);return new Io(e.firestore,e.converter,(u=t,new Pa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}function lp(...i){return Yh._create("startAt",i,!0)}function vy(...i){return Yh._create("startAfter",i,!1)}class Qh extends nh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new Qh(e,t,o)}_apply(e){const t=Xh(e,this.type,this._docOrFields,this._inclusive);return new Io(e.firestore,e.converter,(u=t,new Pa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function i_(...i){return Qh._create("endBefore",i,!1)}function Ng(...i){return Qh._create("endAt",i,!0)}function Xh(i,e,t,o){if(t[0]=(0,de.m9)(t[0]),t[0]instanceof Kh)return function(u,f,v,O,W){if(!O)throw new Jt(Lt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const ie=[];for(const Me of ka(u))if(Me.field.isKeyField())ie.push(qa(f,O.key));else{const lt=O.data.field(Me.field);if(Zo(lt))throw new Jt(Lt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===lt){const Nt=Me.field.canonicalString();throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Nt}' (used as the orderBy) does not exist.`)}ie.push(lt)}return new Ea(ie,W)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=ju(i.firestore);return function(f,v,O,W,ie,Me){const lt=f.explicitOrderBy;if(ie.length>lt.length)throw new Jt(Lt.INVALID_ARGUMENT,`Too many arguments provided to ${W}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Nt=[];for(let ln=0;ln<ie.length;ln++){const Pn=ie[ln];if(lt[ln].field.isKeyField()){if("string"!=typeof Pn)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${W}(), but got a ${typeof Pn}`);if(!Ca(f)&&-1!==Pn.indexOf("/"))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${W}() must be a plain document ID, but '${Pn}' contains a slash.`);const Jn=f.path.child(j.fromString(Pn));if(!Ae.isDocumentKey(Jn))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${W}() must result in a valid document path, but '${Jn}' is not because it contains an odd number of segments.`);const kr=new Ae(Jn);Nt.push(qa(v,kr))}else{const Jn=ld(O,W,Pn);Nt.push(Jn)}}return new Ea(Nt,Me)}(i._query,i.firestore._databaseId,u,e,t,o)}}function cp(i,e,t){if("string"==typeof(t=(0,de.m9)(t))){if(""===t)throw new Jt(Lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ca(e)&&-1!==t.indexOf("/"))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(j.fromString(t));if(!Ae.isDocumentKey(o))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return qa(i,new Ae(o))}if(t instanceof wo)return qa(i,t._key);throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(t)}.`)}function Fg(i,e){if(!Array.isArray(i)||0===i.length)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lg(i,e){if(e.isInequality()){const o=Ac(i),u=e.field;if(null!==o&&!o.isEqual(u))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${o.toString()}' and '${u.toString()}'`);const f=lu(i);null!==f&&Ug(0,u,f)}const t=function(o,u){for(const f of o)for(const v of f.getFlattenedFilters())if(u.indexOf(v.op)>=0)return v.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Jt(Lt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ug(i,e,t){if(!t.isEqual(e))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class up{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return es(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw En()}}convertObject(e,t){const o={};return Ll(e.fields,(u,f)=>{o[u]=this.convertValue(f,t)}),o}convertGeoPoint(e){return new zh(es(e.latitude),es(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Ul(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Po(e));default:return null}}convertTimestamp(e){const t=Ms(e);return new x(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=j.fromString(e);Vn(Fc(o));const u=new Za(o.get(1),o.get(3)),f=new Ae(o.popFirst(5));return u.isEqual(t)||Un(`Document ${f} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}function Jh(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class s_ extends up{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wo(this.firestore,null,t)}}class dd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hd extends Kh{constructor(e,t,o,u,f,v){super(e,t,o,u,v),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(hl("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class ef extends hd{data(e={}){return super.data(e)}}class fd{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new dd(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new ef(this._firestore,this._userDataWriter,o.key,o,new dd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Jt(Lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(v=>({type:"added",doc:new ef(o._firestore,o._userDataWriter,v.doc.key,v.doc,new dd(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:f++}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(v=>u||3!==v.type).map(v=>{const O=new ef(o._firestore,o._userDataWriter,v.doc.key,v.doc,new dd(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter);let W=-1,ie=-1;return 0!==v.type&&(W=f.indexOf(v.doc.key),f=f.delete(v.doc.key)),1!==v.type&&(f=f.add(v.doc),ie=f.indexOf(v.doc.key)),{type:wy(v.type),doc:O,oldIndex:W,newIndex:ie}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return En()}}function Iy(i,e){return i instanceof hd&&e instanceof hd?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof fd&&e instanceof fd&&i._firestore===e._firestore&&Xd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Cy(i){i=Fi(i,wo);const e=Fi(i.firestore,vs);return vg(io(e),i._key).then(t=>dp(e,i,t))}class Hu extends up{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wo(this.firestore,null,t)}}function Ty(i){i=Fi(i,wo);const e=Fi(i.firestore,vs),t=io(e),o=new Hu(e);return function ey(i,e){const t=new Xi;return i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return(o=(0,g.Z)(function*(u,f,v){try{const O=yield function(W,ie){const Me=On(W);return Me.persistence.runTransaction("read document","readonly",lt=>Me.localDocuments.getDocument(lt,ie))}(u,f);O.isFoundDocument()?v.resolve(O):O.isNoDocument()?v.resolve(null):v.reject(new Jt(Lt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const W=Gd(O,`Failed to get document '${f} from cache`);v.reject(W)}}),function(u,f,v){return o.apply(this,arguments)})(yield _g(i),e,t);var o})),t.promise}(t,i._key).then(u=>new hd(e,o,i._key,u,new dd(null!==u&&u.hasLocalMutations,!0),i.converter))}function Dy(i){i=Fi(i,wo);const e=Fi(i.firestore,vs);return vg(io(e),i._key,{source:"server"}).then(t=>dp(e,i,t))}function Sy(i){i=Fi(i,Io);const e=Fi(i.firestore,vs),t=io(e),o=new Hu(e);return Fl(i._query),Bm(t,i._query).then(u=>new fd(e,o,i,u))}function Ay(i){i=Fi(i,Io);const e=Fi(i.firestore,vs),t=io(e),o=new Hu(e);return function Jf(i,e){const t=new Xi;return i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return(o=(0,g.Z)(function*(u,f,v){try{const O=yield Tr(u,f,!0),W=new Em(f,O.Yi),ie=W.Hu(O.documents),Me=W.applyChanges(ie,!1);v.resolve(Me.snapshot)}catch(O){const W=Gd(O,`Failed to execute query '${f} against cache`);v.reject(W)}}),function(u,f,v){return o.apply(this,arguments)})(yield _g(i),e,t);var o})),t.promise}(t,i._query).then(u=>new fd(e,o,i,u))}function Ry(i){i=Fi(i,Io);const e=Fi(i.firestore,vs),t=io(e),o=new Hu(e);return Bm(t,i._query,{source:"server"}).then(u=>new fd(e,o,i,u))}function o_(i,e,t){i=Fi(i,wo);const o=Fi(i.firestore,vs),u=Jh(i.converter,e,t);return pd(o,[sp(ju(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,At.none())])}function a_(i,e,t,...o){i=Fi(i,wo);const u=Fi(i.firestore,vs),f=ju(u);let v;return v="string"==typeof(e=(0,de.m9)(e))||e instanceof Xc?ap(f,"updateDoc",i._key,e,t,o):op(f,"updateDoc",i._key,e),pd(u,[v.toMutation(i._key,At.exists(!0))])}function l_(i){return pd(Fi(i.firestore,vs),[new il(i._key,At.none())])}function c_(i,e){const t=Fi(i.firestore,vs),o=Wm(i),u=Jh(i.converter,e);return pd(t,[sp(ju(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,At.exists(!1))]).then(()=>o)}function u_(i,...e){var t,o,u;i=(0,de.m9)(i);let f={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||zm(e[v])||(f=e[v],v++);const O={includeMetadataChanges:f.includeMetadataChanges};if(zm(e[v])){const lt=e[v];e[v]=null===(t=lt.next)||void 0===t?void 0:t.bind(lt),e[v+1]=null===(o=lt.error)||void 0===o?void 0:o.bind(lt),e[v+2]=null===(u=lt.complete)||void 0===u?void 0:u.bind(lt)}let W,ie,Me;if(i instanceof wo)ie=Fi(i.firestore,vs),Me=ha(i._key.path),W={next:lt=>{e[v]&&e[v](dp(ie,i,lt))},error:e[v+1],complete:e[v+2]};else{const lt=Fi(i,Io);ie=Fi(lt.firestore,vs),Me=lt._query;const Nt=new Hu(ie);W={next:ln=>{e[v]&&e[v](new fd(ie,Nt,lt,ln))},error:e[v+1],complete:e[v+2]},Fl(i._query)}return function(lt,Nt,ln,Pn){const Jn=new Yf(Pn),kr=new _m(Nt,Jn,ln);return lt.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return Bf(yield Qd(lt),kr)})),()=>{Jn.bc(),lt.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return tg(yield Qd(lt),kr)}))}}(io(ie),Me,O,W)}function d_(i,e){return function Vm(i,e){const t=new Yf(e);return i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return o=yield Qd(i),u=t,On(o).vu.add(u),void u.next();var o,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return o=yield Qd(i),u=t,void On(o).vu.delete(u);var o,u}))}}(io(i=Fi(i,vs)),zm(e)?e:{next:e})}function pd(i,e){return function(t,o){const u=new Xi;return t.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function $_(i,e,t){return Dm.apply(this,arguments)}(yield Xf(t),o,u)})),u.promise}(io(i),e)}function dp(i,e,t){const o=t.docs.get(e._key),u=new Hu(i);return new hd(i,u,e._key,o,new dd(t.hasPendingWrites,t.fromCache),e.converter)}const jg={maxAttempts:5};class $u{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ju(e)}set(e,t,o){this._verifyNotCommitted();const u=Gu(e,this._firestore),f=Jh(u.converter,t,o),v=sp(this._dataReader,"WriteBatch.set",u._key,f,null!==u.converter,o);return this._mutations.push(v.toMutation(u._key,At.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const f=Gu(e,this._firestore);let v;return v="string"==typeof(t=(0,de.m9)(t))||t instanceof Xc?ap(this._dataReader,"WriteBatch.update",f._key,t,o,u):op(this._dataReader,"WriteBatch.update",f._key,t),this._mutations.push(v.toMutation(f._key,At.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Gu(e,this._firestore);return this._mutations=this._mutations.concat(new il(t._key,At.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jt(Lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gu(i,e){if((i=(0,de.m9)(i)).firestore!==e)throw new Jt(Lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Oy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ju(e)}get(e){const t=Gu(e,this._firestore),o=new s_(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return En();const f=u[0];if(f.isFoundDocument())return new Kh(this._firestore,o,f.key,f,t.converter);if(f.isNoDocument())return new Kh(this._firestore,o,t._key,null,t.converter);throw En()})}set(e,t,o){const u=Gu(e,this._firestore),f=Jh(u.converter,t,o),v=sp(this._dataReader,"Transaction.set",u._key,f,null!==u.converter,o);return this._transaction.set(u._key,v),this}update(e,t,o,...u){const f=Gu(e,this._firestore);let v;return v="string"==typeof(t=(0,de.m9)(t))||t instanceof Xc?ap(this._dataReader,"Transaction.update",f._key,t,o,u):op(this._dataReader,"Transaction.update",f._key,t),this._transaction.update(f._key,v),this}delete(e){const t=Gu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Gu(e,this._firestore),o=new Hu(this._firestore);return super.get(e).then(u=>new hd(this._firestore,o,t._key,u._document,new dd(!1,!1),t.converter))}}function ih(i,e,t){i=Fi(i,vs);const o=Object.assign(Object.assign({},jg),t);return function(u){if(u.maxAttempts<1)throw new Jt(Lt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(u,f,v){const O=new Xi;return u.asyncQueue.enqueueAndForget((0,g.Z)(function*(){const W=yield function X_(i){return Qf(i).then(e=>e.datastore)}(u);new q_(u.asyncQueue,W,v,f,O).run()})),O.promise}(io(i),u=>e(new Oy(i,u)),o)}function Rv(){return new so("deleteField")}function Hg(){return new xg("serverTimestamp")}function Mv(...i){return new fy("arrayUnion",i)}function h_(...i){return new Jm("arrayRemove",i)}function f_(i){return new py("increment",i)}!function(i,e=!0){lo=S.SDK_VERSION,(0,S._registerComponent)(new U.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const f=t.getProvider("app").getImmediate(),v=new vs(new Vi(t.getProvider("auth-internal")),new co(t.getProvider("app-check-internal")),function(O,W){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new Jt(Lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(O.options.projectId,W)}(f,o),f);return u=Object.assign({useFetchStreams:e},u),v._setSettings(u),v},"PUBLIC").setMultipleInstances(!0)),(0,S.registerVersion)(Oo,"3.9.0",i),(0,S.registerVersion)(Oo,"3.9.0","esm2017")}()},2090:(Je,Te,b)=>{b.d(Te,{BH:()=>Ge,LL:()=>nn,ZR:()=>jn,gQ:()=>Xe,zI:()=>Yt,hu:()=>S,g5:()=>U,US:()=>Ie,tV:()=>te,h$:()=>oe,L:()=>ce,$s:()=>q,r3:()=>ur,Sg:()=>Qe,ne:()=>yt,p$:()=>se,vZ:()=>De,ZB:()=>ke,gK:()=>Bn,pd:()=>Re,aH:()=>ze,q4:()=>He,Pz:()=>Be,m9:()=>ht,z$:()=>Ne,GJ:()=>Zn,jU:()=>sn,ru:()=>tn,xb:()=>mn,w1:()=>Ze,hl:()=>Ut,uI:()=>gt,UG:()=>vt,Yr:()=>St,b$:()=>vn,G6:()=>Gt,w9:()=>Sn,cI:()=>hn,UI:()=>Tn,xO:()=>Y,zd:()=>J,DV:()=>Dr,ug:()=>dt,dS:()=>pt,Wl:()=>xt,Dv:()=>Kn,Wj:()=>lr,lb:()=>tr,eu:()=>Rt});const S=function(we,xe){if(!we)throw U(xe)},U=function(we){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+we)},re=function(we){const xe=[];let ue=0;for(let be=0;be<we.length;be++){let $=we.charCodeAt(be);$<128?xe[ue++]=$:$<2048?(xe[ue++]=$>>6|192,xe[ue++]=63&$|128):55296==(64512&$)&&be+1<we.length&&56320==(64512&we.charCodeAt(be+1))?($=65536+((1023&$)<<10)+(1023&we.charCodeAt(++be)),xe[ue++]=$>>18|240,xe[ue++]=$>>12&63|128,xe[ue++]=$>>6&63|128,xe[ue++]=63&$|128):(xe[ue++]=$>>12|224,xe[ue++]=$>>6&63|128,xe[ue++]=63&$|128)}return xe},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(we,xe){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ue=xe?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let $=0;$<we.length;$+=3){const ae=we[$],_e=$+1<we.length,Ve=_e?we[$+1]:0,Tt=$+2<we.length,un=Tt?we[$+2]:0;let Ir=(15&Ve)<<2|un>>6,nr=63&un;Tt||(nr=64,_e||(Ir=64)),be.push(ue[ae>>2],ue[(3&ae)<<4|Ve>>4],ue[Ir],ue[nr])}return be.join("")},encodeString(we,xe){return this.HAS_NATIVE_SUPPORT&&!xe?btoa(we):this.encodeByteArray(re(we),xe)},decodeString(we,xe){return this.HAS_NATIVE_SUPPORT&&!xe?atob(we):function(we){const xe=[];let ue=0,be=0;for(;ue<we.length;){const $=we[ue++];if($<128)xe[be++]=String.fromCharCode($);else if($>191&&$<224){const ae=we[ue++];xe[be++]=String.fromCharCode((31&$)<<6|63&ae)}else if($>239&&$<365){const Tt=((7&$)<<18|(63&we[ue++])<<12|(63&we[ue++])<<6|63&we[ue++])-65536;xe[be++]=String.fromCharCode(55296+(Tt>>10)),xe[be++]=String.fromCharCode(56320+(1023&Tt))}else{const ae=we[ue++],_e=we[ue++];xe[be++]=String.fromCharCode((15&$)<<12|(63&ae)<<6|63&_e)}}return xe.join("")}(this.decodeStringToByteArray(we,xe))},decodeStringToByteArray(we,xe){this.init_();const ue=xe?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let $=0;$<we.length;){const ae=ue[we.charAt($++)],Ve=$<we.length?ue[we.charAt($)]:0;++$;const un=$<we.length?ue[we.charAt($)]:64;++$;const Ln=$<we.length?ue[we.charAt($)]:64;if(++$,null==ae||null==Ve||null==un||null==Ln)throw new Ce;be.push(ae<<2|Ve>>4),64!==un&&(be.push(Ve<<4&240|un>>2),64!==Ln&&be.push(un<<6&192|Ln))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oe=function(we){const xe=re(we);return Ie.encodeByteArray(xe,!0)},ce=function(we){return oe(we).replace(/\./g,"")},te=function(we){try{return Ie.decodeString(we,!0)}catch(xe){console.error("base64Decode failed: ",xe)}return null};function se(we){return ke(void 0,we)}function ke(we,xe){if(!(xe instanceof Object))return xe;switch(xe.constructor){case Date:return new Date(xe.getTime());case Object:void 0===we&&(we={});break;case Array:we=[];break;default:return xe}for(const ue in xe)!xe.hasOwnProperty(ue)||!qe(ue)||(we[ue]=ke(we[ue],xe[ue]));return we}function qe(we){return"__proto__"!==we}const at=()=>{try{return function it(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const we=process.env.__FIREBASE_DEFAULTS__;return we?JSON.parse(we):void 0})()||(()=>{if("undefined"==typeof document)return;let we;try{we=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ue){return}const xe=we&&te(we[1]);return xe&&JSON.parse(xe)})()}catch(we){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${we}`)}},He=we=>{var xe,ue;return null===(ue=null===(xe=at())||void 0===xe?void 0:xe.emulatorHosts)||void 0===ue?void 0:ue[we]},ze=()=>{var we;return null===(we=at())||void 0===we?void 0:we.config},Be=we=>{var xe;return null===(xe=at())||void 0===xe?void 0:xe[`_${we}`]};class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((xe,ue)=>{this.resolve=xe,this.reject=ue})}wrapCallback(xe){return(ue,be)=>{ue?this.reject(ue):this.resolve(be),"function"==typeof xe&&(this.promise.catch(()=>{}),1===xe.length?xe(ue):xe(ue,be))}}}function Qe(we,xe){if(we.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=xe||"demo-project",$=we.iat||0,ae=we.sub||we.user_id;if(!ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _e=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:$,exp:$+3600,auth_time:$,sub:ae,user_id:ae,firebase:{sign_in_provider:"custom",identities:{}}},we);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(_e)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function gt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function vt(){var we;const xe=null===(we=at())||void 0===we?void 0:we.forceEnvironment;if("node"===xe)return!0;if("browser"===xe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ue){return!1}}function sn(){return"object"==typeof self&&self.self===self}function tn(){const we="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof we&&void 0!==we.id}function vn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const we=Ne();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function St(){return!1}function Gt(){return!vt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ut(){try{return"object"==typeof indexedDB}catch(we){return!1}}function Rt(){return new Promise((we,xe)=>{try{let ue=!0;const be="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(be);$.onsuccess=()=>{$.result.close(),ue||self.indexedDB.deleteDatabase(be),we(!0)},$.onupgradeneeded=()=>{ue=!1},$.onerror=()=>{var ae;xe((null===(ae=$.error)||void 0===ae?void 0:ae.message)||"")}}catch(ue){xe(ue)}})}function Yt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class jn extends Error{constructor(xe,ue,be){super(ue),this.code=xe,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nn.prototype.create)}}class nn{constructor(xe,ue,be){this.service=xe,this.serviceName=ue,this.errors=be}create(xe,...ue){const be=ue[0]||{},$=`${this.service}/${xe}`,ae=this.errors[xe],_e=ae?function wn(we,xe){return we.replace(Ot,(ue,be)=>{const $=xe[be];return null!=$?String($):`<${be}?>`})}(ae,be):"Error";return new jn($,`${this.serviceName}: ${_e} (${$}).`,be)}}const Ot=/\{\$([^}]+)}/g;function hn(we){return JSON.parse(we)}function xt(we){return JSON.stringify(we)}const rn=function(we){let xe={},ue={},be={},$="";try{const ae=we.split(".");xe=hn(te(ae[0])||""),ue=hn(te(ae[1])||""),$=ae[2],be=ue.d||{},delete ue.d}catch(ae){}return{header:xe,claims:ue,data:be,signature:$}},Sn=function(we){const ue=rn(we).claims;return!!ue&&"object"==typeof ue&&ue.hasOwnProperty("iat")},Zn=function(we){const xe=rn(we).claims;return"object"==typeof xe&&!0===xe.admin};function ur(we,xe){return Object.prototype.hasOwnProperty.call(we,xe)}function Dr(we,xe){if(Object.prototype.hasOwnProperty.call(we,xe))return we[xe]}function mn(we){for(const xe in we)if(Object.prototype.hasOwnProperty.call(we,xe))return!1;return!0}function Tn(we,xe,ue){const be={};for(const $ in we)Object.prototype.hasOwnProperty.call(we,$)&&(be[$]=xe.call(ue,we[$],$,we));return be}function De(we,xe){if(we===xe)return!0;const ue=Object.keys(we),be=Object.keys(xe);for(const $ of ue){if(!be.includes($))return!1;const ae=we[$],_e=xe[$];if(qn(ae)&&qn(_e)){if(!De(ae,_e))return!1}else if(ae!==_e)return!1}for(const $ of be)if(!ue.includes($))return!1;return!0}function qn(we){return null!==we&&"object"==typeof we}function Y(we){const xe=[];for(const[ue,be]of Object.entries(we))Array.isArray(be)?be.forEach($=>{xe.push(encodeURIComponent(ue)+"="+encodeURIComponent($))}):xe.push(encodeURIComponent(ue)+"="+encodeURIComponent(be));return xe.length?"&"+xe.join("&"):""}function J(we){const xe={};return we.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[$,ae]=be.split("=");xe[decodeURIComponent($)]=decodeURIComponent(ae)}}),xe}function Re(we){const xe=we.indexOf("?");if(!xe)return"";const ue=we.indexOf("#",xe);return we.substring(xe,ue>0?ue:void 0)}class Xe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let xe=1;xe<this.blockSize;++xe)this.pad_[xe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(xe,ue){ue||(ue=0);const be=this.W_;if("string"==typeof xe)for(let Ln=0;Ln<16;Ln++)be[Ln]=xe.charCodeAt(ue)<<24|xe.charCodeAt(ue+1)<<16|xe.charCodeAt(ue+2)<<8|xe.charCodeAt(ue+3),ue+=4;else for(let Ln=0;Ln<16;Ln++)be[Ln]=xe[ue]<<24|xe[ue+1]<<16|xe[ue+2]<<8|xe[ue+3],ue+=4;for(let Ln=16;Ln<80;Ln++){const Ir=be[Ln-3]^be[Ln-8]^be[Ln-14]^be[Ln-16];be[Ln]=4294967295&(Ir<<1|Ir>>>31)}let un,Dn,$=this.chain_[0],ae=this.chain_[1],_e=this.chain_[2],Ve=this.chain_[3],Tt=this.chain_[4];for(let Ln=0;Ln<80;Ln++){Ln<40?Ln<20?(un=Ve^ae&(_e^Ve),Dn=1518500249):(un=ae^_e^Ve,Dn=1859775393):Ln<60?(un=ae&_e|Ve&(ae|_e),Dn=2400959708):(un=ae^_e^Ve,Dn=3395469782);const Ir=($<<5|$>>>27)+un+Tt+Dn+be[Ln]&4294967295;Tt=Ve,Ve=_e,_e=4294967295&(ae<<30|ae>>>2),ae=$,$=Ir}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+ae&4294967295,this.chain_[2]=this.chain_[2]+_e&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+Tt&4294967295}update(xe,ue){if(null==xe)return;void 0===ue&&(ue=xe.length);const be=ue-this.blockSize;let $=0;const ae=this.buf_;let _e=this.inbuf_;for(;$<ue;){if(0===_e)for(;$<=be;)this.compress_(xe,$),$+=this.blockSize;if("string"==typeof xe){for(;$<ue;)if(ae[_e]=xe.charCodeAt($),++_e,++$,_e===this.blockSize){this.compress_(ae),_e=0;break}}else for(;$<ue;)if(ae[_e]=xe[$],++_e,++$,_e===this.blockSize){this.compress_(ae),_e=0;break}}this.inbuf_=_e,this.total_+=ue}digest(){const xe=[];let ue=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&ue,ue/=256;this.compress_(this.buf_);let be=0;for(let $=0;$<5;$++)for(let ae=24;ae>=0;ae-=8)xe[be]=this.chain_[$]>>ae&255,++be;return xe}}function yt(we,xe){const ue=new Ft(we,xe);return ue.subscribe.bind(ue)}class Ft{constructor(xe,ue){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ue,this.task.then(()=>{xe(this)}).catch(be=>{this.error(be)})}next(xe){this.forEachObserver(ue=>{ue.next(xe)})}error(xe){this.forEachObserver(ue=>{ue.error(xe)}),this.close(xe)}complete(){this.forEachObserver(xe=>{xe.complete()}),this.close()}subscribe(xe,ue,be){let $;if(void 0===xe&&void 0===ue&&void 0===be)throw new Error("Missing Observer.");$=function zt(we,xe){if("object"!=typeof we||null===we)return!1;for(const ue of xe)if(ue in we&&"function"==typeof we[ue])return!0;return!1}(xe,["next","error","complete"])?xe:{next:xe,error:ue,complete:be},void 0===$.next&&($.next=Mn),void 0===$.error&&($.error=Mn),void 0===$.complete&&($.complete=Mn);const ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(_e){}}),this.observers.push($),ae}unsubscribeOne(xe){void 0===this.observers||void 0===this.observers[xe]||(delete this.observers[xe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(xe){if(!this.finalized)for(let ue=0;ue<this.observers.length;ue++)this.sendOne(ue,xe)}sendOne(xe,ue){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[xe])try{ue(this.observers[xe])}catch(be){"undefined"!=typeof console&&console.error&&console.error(be)}})}close(xe){this.finalized||(this.finalized=!0,void 0!==xe&&(this.finalError=xe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mn(){}const Kn=function(we,xe,ue,be){let $;if(be<xe?$="at least "+xe:be>ue&&($=0===ue?"none":"no more than "+ue),$)throw new Error(we+" failed: Was called with "+be+(1===be?" argument.":" arguments.")+" Expects "+$+".")};function Bn(we,xe){return`${we} failed: ${xe} argument `}function lr(we,xe,ue,be){if((!be||ue)&&"function"!=typeof ue)throw new Error(Bn(we,xe)+"must be a valid function.")}function tr(we,xe,ue,be){if((!be||ue)&&("object"!=typeof ue||null===ue))throw new Error(Bn(we,xe)+"must be a valid context object.")}const pt=function(we){const xe=[];let ue=0;for(let be=0;be<we.length;be++){let $=we.charCodeAt(be);if($>=55296&&$<=56319){const ae=$-55296;be++,S(be<we.length,"Surrogate pair missing trail surrogate."),$=65536+(ae<<10)+(we.charCodeAt(be)-56320)}$<128?xe[ue++]=$:$<2048?(xe[ue++]=$>>6|192,xe[ue++]=63&$|128):$<65536?(xe[ue++]=$>>12|224,xe[ue++]=$>>6&63|128,xe[ue++]=63&$|128):(xe[ue++]=$>>18|240,xe[ue++]=$>>12&63|128,xe[ue++]=$>>6&63|128,xe[ue++]=63&$|128)}return xe},dt=function(we){let xe=0;for(let ue=0;ue<we.length;ue++){const be=we.charCodeAt(ue);be<128?xe++:be<2048?xe+=2:be>=55296&&be<=56319?(xe+=4,ue++):xe+=3}return xe};function q(we,xe=1e3,ue=2){const be=xe*Math.pow(ue,we),$=Math.round(.5*be*(Math.random()-.5)*2);return Math.min(144e5,be+$)}function ht(we){return we&&we._delegate?we._delegate:we}},1449:(Je,Te,b)=>{b.d(Te,{P:()=>de});var g=b(9808),S=b(4848),U=b(1271),re=b(5e3);let de=(()=>{class Ie{static forRoot(){return{ngModule:Ie,providers:[S.l]}}}return Ie.\u0275fac=function(oe){return new(oe||Ie)},Ie.\u0275mod=re.oAB({type:Ie}),Ie.\u0275inj=re.cJS({imports:[[g.ez,U.ZX]]}),Ie})()},4848:(Je,Te,b)=>{b.d(Te,{l:()=>re});var g=b(1271),S=b(5e3);let U=(()=>{class de{constructor(Ce){this.data=Ce,this.message=Ce.message}ngOnInit(){}}return de.\u0275fac=function(Ce){return new(Ce||de)(S.Y36(g.qD))},de.\u0275cmp=S.Xpm({type:de,selectors:[["app-custom-notification"]],decls:2,vars:1,template:function(Ce,oe){1&Ce&&(S.TgZ(0,"p"),S._uU(1),S.qZA()),2&Ce&&(S.xp6(1),S.Oqu(oe.message))},styles:[""]}),de})(),re=(()=>{class de{constructor(Ce){this.snackBar=Ce}error(Ce){this.snackBar.openFromComponent(U,{duration:3e3,data:{message:Ce},horizontalPosition:"left",verticalPosition:"bottom",panelClass:["mat-snackbar_error"]})}success(Ce){this.snackBar.openFromComponent(U,{duration:3e3,data:{message:Ce},horizontalPosition:"left",verticalPosition:"bottom",panelClass:["mat-snackbar_success"]})}}return de.\u0275fac=function(Ce){return new(Ce||de)(S.LFG(g.ux))},de.\u0275prov=S.Yz7({token:de,factory:de.\u0275fac}),de})()},7051:(Je,Te,b)=>{b.d(Te,{Yk:()=>S,jd:()=>U,MW:()=>re,wh:()=>de,Sf:()=>Ie,cL:()=>Ce,AP:()=>oe,wK:()=>ce,Mo:()=>te,CG:()=>se,pg:()=>ke,lv:()=>qe,co:()=>it,V1:()=>ut,r4:()=>Et,MU:()=>et,wU:()=>at,Nq:()=>He,qB:()=>Mt,Pv:()=>ze});var g=b(5620),S=(()=>{return(Be=S||(S={})).INIT="[User] Init: Start",Be.INIT_AUTHORIZED="[User] Init: Authorized",Be.INIT_UNAUTHORIZED="[User] Init: Unauthorized",Be.INIT_ERROR="[User] Init: Error",Be.SIGN_IN_EMAIL="[User] Sign In with email: Start",Be.SIGN_IN_EMAIL_SUCCESS="[User] Sign In with email: Success",Be.SIGN_IN_EMAIL_ERROR="[User] Sign In with email: Error",Be.SIGN_UP_EMAIL="[User] Sign Up with email: Start",Be.SIGN_UP_EMAIL_SUCCESS="[User] Sign Up with email: Success",Be.SIGN_UP_EMAIL_ERROR="[User] Sign Up with email: Error",Be.SIGN_OUT="[User] Sign Out: Start",Be.SIGN_OUT_SUCCESS="[User] Sign Out: Success",Be.SIGN_OUT_ERROR="[User] Sign Out: Error",Be.CREATE_USER="[User] create user : create",Be.CREATE_USER_SUCCESS="[User] create user : success",Be.CREATE_USER_ERROR="[User] create user : Error",Be.UPDATE_USER="[User] update user : UPDATE",Be.UPDATE_USER_SUCCESS="[User] update user : success",Be.UPDATE_USER_ERROR="[User] update user : Error",S;var Be})();const U=(0,g.PH)(S.INIT),re=(0,g.PH)(S.INIT_AUTHORIZED,(0,g.Ky)()),de=(0,g.PH)(S.INIT_UNAUTHORIZED),Ie=(0,g.PH)(S.INIT_ERROR,(0,g.Ky)()),Ce=(0,g.PH)(S.SIGN_IN_EMAIL,(0,g.Ky)()),oe=(0,g.PH)(S.SIGN_IN_EMAIL_SUCCESS,(0,g.Ky)()),ce=(0,g.PH)(S.SIGN_IN_EMAIL_ERROR,(0,g.Ky)()),te=(0,g.PH)(S.SIGN_UP_EMAIL,(0,g.Ky)()),se=(0,g.PH)(S.SIGN_UP_EMAIL_SUCCESS,(0,g.Ky)()),ke=(0,g.PH)(S.SIGN_UP_EMAIL_ERROR,(0,g.Ky)()),qe=(0,g.PH)(S.SIGN_OUT),it=(0,g.PH)(S.SIGN_OUT_SUCCESS),ut=(0,g.PH)(S.SIGN_OUT_ERROR,(0,g.Ky)()),Et=(0,g.PH)(S.CREATE_USER,(0,g.Ky)()),et=(0,g.PH)(S.CREATE_USER_SUCCESS,(0,g.Ky)()),at=(0,g.PH)(S.CREATE_USER_ERROR,(0,g.Ky)()),He=(0,g.PH)(S.UPDATE_USER,(0,g.Ky)()),Mt=(0,g.PH)(S.UPDATE_USER_SUCCESS,(0,g.Ky)()),ze=(0,g.PH)(S.UPDATE_USER_ERROR,(0,g.Ky)())},875:(Je,Te,b)=>{b.d(Te,{V_:()=>S,PR:()=>U,Kv:()=>re,vh:()=>de,J5:()=>Ce});var g=b(5620);const S=(0,g.ZF)("users"),U=(0,g.P1)(S,oe=>oe.entity),re=(0,g.P1)(S,oe=>oe.loading),de=(0,g.P1)(S,oe=>!!oe.uid),Ce=((0,g.P1)(S,oe=>oe.entity&&oe.entity.roleId),(0,g.P1)(S,oe=>oe.entity&&"employee"!==oe.entity.roleId))},1665:(Je,Te,b)=>{var g=b(2313),S=b(5e3),U=b(1402);const re=[{path:"demo",loadChildren:()=>Promise.all([b.e(507),b.e(204),b.e(651),b.e(592),b.e(86)]).then(b.bind(b,3086)).then(d=>d.DemoModule)},{path:"auth",loadChildren:()=>Promise.all([b.e(507),b.e(204),b.e(592),b.e(74)]).then(b.bind(b,2074)).then(d=>d.AuthModule)},{path:"static",loadChildren:()=>b.e(916).then(b.bind(b,7916)).then(d=>d.StaticModule)},{path:"myProfile",loadChildren:()=>Promise.all([b.e(507),b.e(204),b.e(651),b.e(592),b.e(327)]).then(b.bind(b,8327)).then(d=>d.ProfileModule)},{path:"employees",loadChildren:()=>Promise.all([b.e(507),b.e(592),b.e(426)]).then(b.bind(b,8426)).then(d=>d.EmployeesModule)},{path:"jobs",loadChildren:()=>Promise.all([b.e(507),b.e(204),b.e(651),b.e(592),b.e(85)]).then(b.bind(b,9085)).then(d=>d.JobsModule)},{path:"",pathMatch:"full",redirectTo:"static/welcome"},{path:"**",pathMatch:"full",redirectTo:"static/404"}];let de=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=S.oAB({type:d}),d.\u0275inj=S.cJS({imports:[[U.Bz.forRoot(re)],U.Bz]}),d})();var Ie=b(5620),Ce=(()=>{return(d=Ce||(Ce={})).READ="[Dictionaries] read: start",d.READ_SUCCESS="[Dictionaries] read: success",d.READ_ERROR="[Dictionaries] read: error",Ce;var d})();const oe=(0,Ie.PH)(Ce.READ),ce=(0,Ie.PH)(Ce.READ_SUCCESS,(0,Ie.Ky)()),te=(0,Ie.PH)(Ce.READ_ERROR,(0,Ie.Ky)());var se=b(7051),ke=b(9300),qe=b(5698),it=b(875),ut=b(7977),Et=b(9808);function et(d,a){1&d&&(S.TgZ(0,"a",12),S._uU(1,"Login"),S.qZA())}function at(d,a){1&d&&(S.TgZ(0,"a",13),S._uU(1,"Register"),S.qZA())}function He(d,a){if(1&d){const c=S.EpF();S.TgZ(0,"a",14),S.NdJ("click",function(){return S.CHM(c),S.oxw().onProfileNavigate()}),S._uU(1,"Profile"),S.qZA()}}function Mt(d,a){1&d&&(S.TgZ(0,"a",15),S._uU(1,"Employees"),S.qZA())}function ze(d,a){1&d&&(S.TgZ(0,"a",16),S._uU(1,"Jobs"),S.qZA())}function Be(d,a){if(1&d){const c=S.EpF();S.TgZ(0,"a",14),S.NdJ("click",function(){return S.CHM(c),S.oxw().signOut()}),S._uU(1,"Logout"),S.qZA()}}function Ge(d,a){1&d&&(S.TgZ(0,"a",12),S._uU(1,"Login"),S.qZA())}function Qe(d,a){1&d&&(S.TgZ(0,"a",13),S._uU(1,"Register"),S.qZA())}function Ne(d,a){if(1&d){const c=S.EpF();S.TgZ(0,"a",14),S.NdJ("click",function(){return S.CHM(c),S.oxw().onProfileNavigate()}),S._uU(1,"Profile"),S.qZA()}}function gt(d,a){1&d&&(S.TgZ(0,"a",15),S._uU(1,"Employees"),S.qZA())}function vt(d,a){1&d&&(S.TgZ(0,"a",16),S._uU(1,"Jobs"),S.qZA())}function sn(d,a){if(1&d){const c=S.EpF();S.TgZ(0,"a",14),S.NdJ("click",function(){return S.CHM(c),S.oxw().signOut()}),S._uU(1,"Logout"),S.qZA()}}const tn=function(){return["/"]};let vn=(()=>{class d{constructor(c){this.router=c,this.SignOut=new S.vpe}ngOnInit(){}signOut(){this.SignOut.emit()}onProfileNavigate(){this.router.navigate(["/myProfile",this.user?this.user.uid:"new"])}myFunction(){var c=document.getElementById("myTopnav"),p=document.getElementById("vLinks");"topnav"===c.className&&"v-nav-links"==p.className?(c.className+=" responsive",p.className+=" responsive"):(c.className="topnav",p.className="v-nav-links")}}return d.\u0275fac=function(c){return new(c||d)(S.Y36(U.F0))},d.\u0275cmp=S.Xpm({type:d,selectors:[["header"]],inputs:{IsAuthorized:"IsAuthorized",user:"user"},outputs:{SignOut:"SignOut"},decls:20,vars:14,consts:[[1,"header"],["id","myTopnav",1,"topnav"],[1,"header__title",3,"routerLink"],[1,"nav-links"],["class","app-a","routerLink","/auth/login","routerLinkActive","app-a_active",4,"ngIf"],["class","app-a","routerLink","/auth/register","routerLinkActive","app-a_active",4,"ngIf"],["class","app-a","routerLinkActive","app-a_active",3,"click",4,"ngIf"],["class","app-a","routerLink","/employees","routerLinkActive","app-a_active",4,"ngIf"],["class","app-a","routerLink","/jobs","routerLinkActive","app-a_active",4,"ngIf"],[1,"icon",3,"click"],[1,"fa","fa-bars"],["id","vLinks",1,"v-nav-links"],["routerLink","/auth/login","routerLinkActive","app-a_active",1,"app-a"],["routerLink","/auth/register","routerLinkActive","app-a_active",1,"app-a"],["routerLinkActive","app-a_active",1,"app-a",3,"click"],["routerLink","/employees","routerLinkActive","app-a_active",1,"app-a"],["routerLink","/jobs","routerLinkActive","app-a_active",1,"app-a"]],template:function(c,p){1&c&&(S.TgZ(0,"div",0)(1,"div",1)(2,"div",2),S._uU(3,"Link"),S.qZA(),S.TgZ(4,"div",3),S.YNc(5,et,2,0,"a",4),S.YNc(6,at,2,0,"a",5),S.YNc(7,He,2,0,"a",6),S.YNc(8,Mt,2,0,"a",7),S.YNc(9,ze,2,0,"a",8),S.YNc(10,Be,2,0,"a",6),S.TgZ(11,"a",9),S.NdJ("click",function(){return p.myFunction()}),S._UZ(12,"i",10),S.qZA()()(),S.TgZ(13,"div",11),S.YNc(14,Ge,2,0,"a",4),S.YNc(15,Qe,2,0,"a",5),S.YNc(16,Ne,2,0,"a",6),S.YNc(17,gt,2,0,"a",7),S.YNc(18,vt,2,0,"a",8),S.YNc(19,sn,2,0,"a",6),S.qZA()()),2&c&&(S.xp6(2),S.Q6J("routerLink",S.DdM(13,tn)),S.xp6(3),S.Q6J("ngIf",!p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",!p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",p.IsAuthorized),S.xp6(4),S.Q6J("ngIf",!p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",!p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",p.IsAuthorized),S.xp6(1),S.Q6J("ngIf",p.IsAuthorized))},directives:[U.rH,Et.O5,U.yS,U.Od],styles:[".header[_ngcontent-%COMP%]{background-color:#333;padding:15px 20px}.topnav[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.topnav[_ngcontent-%COMP%]   .header__title[_ngcontent-%COMP%]{font-size:1.2em;display:inline-flex;align-items:center;color:#fff;font-size:20px;cursor:pointer}.topnav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f2f2f2;text-align:center;padding:14px 16px;font-size:17px}.topnav[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .v-nav-links[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 600px){.topnav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:none}.topnav[_ngcontent-%COMP%]   a.icon[_ngcontent-%COMP%]{float:right;display:block}}@media screen and (max-width: 600px){.topnav.responsive[_ngcontent-%COMP%]{position:relative}.topnav.responsive[_ngcontent-%COMP%]   a.icon[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.v-nav-links.responsive[_ngcontent-%COMP%]{margin-top:30px;display:flex;flex-direction:column;gap:20px}.v-nav-links.responsive[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f2f2f2}}"]}),d})(),xn=(()=>{class d{constructor(){}ngOnInit(){}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275cmp=S.Xpm({type:d,selectors:[["footer"]],decls:3,vars:0,consts:[[1,"footer"]],template:function(c,p){1&c&&(S.TgZ(0,"div",0)(1,"p"),S._uU(2,"@ 20 May,2023 , All Rights Reserved , Developed by /Asmaa Hassan v1.0.0"),S.qZA()())},styles:[".footer[_ngcontent-%COMP%]{background-color:#333;padding:10px 20px;color:#fff;text-align:center;font-size:12px}"]}),d})(),Ze=(()=>{class d{constructor(c,p){this.fs=c,this.store=p}ngOnInit(){this.user$=this.store.pipe((0,Ie.Ys)(it.PR)),this.store.dispatch((0,se.jd)()),this.store.pipe((0,Ie.Ys)(it.V_),(0,ke.h)(c=>!!(null==c?void 0:c.uid)),(0,qe.q)(1)).subscribe(()=>{this.store.dispatch(oe())}),this.isAuthorized=this.store.select(it.vh)}logout(){this.store.dispatch((0,se.lv)())}}return d.\u0275fac=function(c){return new(c||d)(S.Y36(ut.ST),S.Y36(Ie.yh))},d.\u0275cmp=S.Xpm({type:d,selectors:[["app-root"]],decls:5,vars:6,consts:[[3,"user","IsAuthorized","SignOut"]],template:function(c,p){1&c&&(S.TgZ(0,"header",0),S.NdJ("SignOut",function(){return p.logout()}),S.ALo(1,"async"),S.ALo(2,"async"),S.qZA(),S._UZ(3,"router-outlet")(4,"footer")),2&c&&S.Q6J("user",S.lcZ(1,2,p.user$))("IsAuthorized",S.lcZ(2,4,p.isAuthorized))},directives:[vn,U.lC,xn],pipes:[Et.Ov],styles:[""]}),d})();var ft=b(2011),St=b(1041),Gt=b(8445),Ut=b(4986),Rt=b(8306),Yt=b(9646),Nn=b(6451),jn=b(4004),nn=b(3099),wn=b(3900),Ot=b(5026),hn=b(1884),xt=b(1365),rn=b(4482),fn=b(5403),Sn=b(263),ur=(b(9568),b(3942)),Dr=b(4859),mn=b(5861),Tn=b(9681),De=b(2090),qn=b(1877);const rt="@firebase/database",Y="0.14.4";let J="";function Re(d){J=d}class Xe{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,c){null==c?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,De.Wl)(c))}get(a){const c=this.domStorage_.getItem(this.prefixedName_(a));return null==c?null:(0,De.cI)(c)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class yt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,c){null==c?delete this.cache_[a]:this.cache_[a]=c}get(a){return(0,De.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const Ft=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){const a=window[d];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new Xe(a)}}catch(a){}return new yt},Zt=Ft("localStorage"),zt=Ft("sessionStorage"),Mn=new qn.Yd("@firebase/database"),Kn=function(){let d=1;return function(){return d++}}(),Bn=function(d){const a=(0,De.dS)(d),c=new De.gQ;c.update(a);const p=c.digest();return De.US.encodeByteArray(p)},gr=function(...d){let a="";for(let c=0;c<d.length;c++){const p=d[c];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?a+=gr.apply(null,p):a+="object"==typeof p?(0,De.Wl)(p):p,a+=" "}return a};let lr=null,tr=!0;const pt=function(d,a){(0,De.hu)(!a||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(Mn.logLevel=qn.in.VERBOSE,lr=Mn.log.bind(Mn),a&&zt.set("logging_enabled",!0)):"function"==typeof d?lr=d:(lr=null,zt.remove("logging_enabled"))},dt=function(...d){if(!0===tr&&(tr=!1,null===lr&&!0===zt.get("logging_enabled")&&pt(!0)),lr){const a=gr.apply(null,d);lr(a)}},Ue=function(d){return function(...a){dt(d,...a)}},It=function(...d){const a="FIREBASE INTERNAL ERROR: "+gr(...d);Mn.error(a)},he=function(...d){const a=`FIREBASE FATAL ERROR: ${gr(...d)}`;throw Mn.error(a),new Error(a)},N=function(...d){const a="FIREBASE WARNING: "+gr(...d);Mn.warn(a)},q=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},Fe="[MIN_NAME]",ht="[MAX_NAME]",we=function(d,a){if(d===a)return 0;if(d===Fe||a===ht)return-1;if(a===Fe||d===ht)return 1;{const c=nr(d),p=nr(a);return null!==c?null!==p?c-p==0?d.length-a.length:c-p:-1:null!==p?1:d<a?-1:1}},xe=function(d,a){return d===a?0:d<a?-1:1},ue=function(d,a){if(a&&d in a)return a[d];throw new Error("Missing required key ("+d+") in object: "+(0,De.Wl)(a))},be=function(d){if("object"!=typeof d||null===d)return(0,De.Wl)(d);const a=[];for(const p in d)a.push(p);a.sort();let c="{";for(let p=0;p<a.length;p++)0!==p&&(c+=","),c+=(0,De.Wl)(a[p]),c+=":",c+=be(d[a[p]]);return c+="}",c},$=function(d,a){const c=d.length;if(c<=a)return[d];const p=[];for(let w=0;w<c;w+=a)p.push(d.substring(w,w+a>c?c:w+a));return p};function ae(d,a){for(const c in d)d.hasOwnProperty(c)&&a(c,d[c])}const _e=function(d){(0,De.hu)(!q(d),"Invalid JSON number");const p=1023;let w,P,K,pe,Le;0===d?(P=0,K=0,w=1/d==-1/0?1:0):(w=d<0,(d=Math.abs(d))>=Math.pow(2,1-p)?(pe=Math.min(Math.floor(Math.log(d)/Math.LN2),p),P=pe+p,K=Math.round(d*Math.pow(2,52-pe)-Math.pow(2,52))):(P=0,K=Math.round(d/Math.pow(2,-1074))));const tt=[];for(Le=52;Le;Le-=1)tt.push(K%2?1:0),K=Math.floor(K/2);for(Le=11;Le;Le-=1)tt.push(P%2?1:0),P=Math.floor(P/2);tt.push(w?1:0),tt.reverse();const en=tt.join("");let Xt="";for(Le=0;Le<64;Le+=8){let gn=parseInt(en.substr(Le,8),2).toString(16);1===gn.length&&(gn="0"+gn),Xt+=gn}return Xt.toLowerCase()},Dn=new RegExp("^-?(0*)\\d{1,10}$"),nr=function(d){if(Dn.test(d)){const a=Number(d);if(a>=-2147483648&&a<=2147483647)return a}return null},xr=function(d){try{d()}catch(a){setTimeout(()=>{throw N("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},Ur=function(d,a){const c=setTimeout(d,a);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class Hi{constructor(a,c){this.appName_=a,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(p=>this.appCheck=p)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((c,p)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(c,p):c(null)},0)})}addTokenChangeListener(a){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(p=>p.addTokenListener(a))}notifyForInvalidToken(){N(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ki{constructor(a,c,p){this.appName_=a,this.firebaseOptions_=c,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(w=>this.auth_=w)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(c=>c&&"auth/token-not-initialized"===c.code?(dt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,p)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(c,p):c(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(c=>c.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(c=>c.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',N(a)}}let In=(()=>{class d{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const Oi=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hr="websocket",ps="long_polling";class Wr{constructor(a,c,p,w,P=!1,K="",pe=!1,Le=!1){this.secure=c,this.namespace=p,this.webSocketOnly=w,this.nodeAdmin=P,this.persistenceKey=K,this.includeNamespaceInQueryParams=pe,this.isUsingEmulator=Le,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zt.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&Zt.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ns(d,a,c){let p;if((0,De.hu)("string"==typeof a,"typeof type must == string"),(0,De.hu)("object"==typeof c,"typeof params must == object"),a===hr)p=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(a!==ps)throw new Error("Unknown connection type: "+a);p=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function Yi(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(c.ns=d.namespace);const w=[];return ae(c,(P,K)=>{w.push(P+"="+K)}),p+w.join("&")}class di{constructor(){this.counters_={}}incrementCounter(a,c=1){(0,De.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=c}get(){return(0,De.p$)(this.counters_)}}const Gi={},Ke={};function Ht(d){const a=d.toString();return Gi[a]||(Gi[a]=new di),Gi[a]}class Bt{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,c){this.closeAfterResponse=a,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,c){for(this.pendingResponses[a]=c;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let w=0;w<p.length;++w)p[w]&&xr(()=>{this.onMessage_(p[w])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Yn{constructor(a,c,p,w,P,K,pe){this.connId=a,this.repoInfo=c,this.applicationId=p,this.appCheckToken=w,this.authToken=P,this.transportSessionId=K,this.lastSessionId=pe,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ue(a),this.stats_=Ht(c),this.urlFn=Le=>(this.appCheckToken&&(Le.ac=this.appCheckToken),ns(c,ps,Le))}open(a,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Bt(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,De.Yr)()||"complete"===document.readyState)d();else{let a=!1;const c=function(){document.body?a||(a=!0,d()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vr((...P)=>{const[K,pe,Le,tt,en]=P;if(this.incrementIncomingBytes_(P),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===K)this.id=pe,this.password=Le;else{if("close"!==K)throw new Error("Unrecognized command received: "+K);pe?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(pe,()=>{this.onClosed_()})):this.onClosed_()}},(...P)=>{const[K,pe]=P;this.incrementIncomingBytes_(P),this.myPacketOrderer.handleResponse(K,pe)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Oi.test(location.hostname)&&(p.r="f");const w=this.urlFn(p);this.log_("Connecting via long-poll to "+w),this.scriptTagHolder.addTag(w,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yn.forceAllow_=!0}static forceDisallow(){Yn.forceDisallow_=!0}static isAvailable(){return!((0,De.Yr)()||!Yn.forceAllow_&&(Yn.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const c=(0,De.Wl)(a);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const p=(0,De.h$)(c),w=$(p,1840);for(let P=0;P<w.length;P++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,w.length,w[P]),this.curSegmentNum++}addDisconnectPingFrame(a,c){if((0,De.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=a,p.pw=c,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const c=(0,De.Wl)(a).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class vr{constructor(a,c,p,w){if(this.onDisconnect=p,this.urlFn=w,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,De.Yr)())this.commandCB=a,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Kn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=vr.createIFrame_();let P="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(P='<script>document.domain="'+document.domain+'";<\/script>');const K="<html><body>"+P+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(K),this.myIFrame.doc.close()}catch(pe){dt("frame writing exception"),pe.stack&&dt(pe.stack),dt(pe)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||dt("No IE domain setting required")}catch(c){const p=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,c){for(this.myID=a,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let c=this.urlFn(a),p="",w=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const K=this.pendingSegs.shift();p=p+"&seg"+w+"="+K.seg+"&ts"+w+"="+K.ts+"&d"+w+"="+K.d,w++}return c+=p,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(a,c,p){this.pendingSegs.push({seg:a,ts:c,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(a,c){this.outstandingRequests.add(c);const p=()=>{this.outstandingRequests.delete(c),this.newRequest_()},w=setTimeout(p,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(w),p()})}addTag(a,c){(0,De.Yr)()?this.doNodeLongPoll(a,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=a,p.onload=p.onreadystatechange=function(){const w=p.readyState;(!w||"loaded"===w||"complete"===w)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),c())},p.onerror=()=>{dt("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let Ps=null;"undefined"!=typeof MozWebSocket?Ps=MozWebSocket:"undefined"!=typeof WebSocket&&(Ps=WebSocket);let ks=(()=>{class d{constructor(c,p,w,P,K,pe,Le){this.connId=c,this.applicationId=w,this.appCheckToken=P,this.authToken=K,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ue(this.connId),this.stats_=Ht(p),this.connURL=d.connectionURL_(p,pe,Le,P,w),this.nodeAdmin=p.nodeAdmin}static connectionURL_(c,p,w,P,K){const pe={v:"5"};return!(0,De.Yr)()&&"undefined"!=typeof location&&location.hostname&&Oi.test(location.hostname)&&(pe.r="f"),p&&(pe.s=p),w&&(pe.ls=w),P&&(pe.ac=P),K&&(pe.p=K),ns(c,hr,pe)}open(c,p){this.onDisconnect=p,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zt.set("previous_websocket_failure",!0);try{let w;if((0,De.Yr)()){w={headers:{"User-Agent":`Firebase/5/${J}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(w.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(w.headers["X-Firebase-AppCheck"]=this.appCheckToken);const K=process.env,pe=0===this.connURL.indexOf("wss://")?K.HTTPS_PROXY||K.https_proxy:K.HTTP_PROXY||K.http_proxy;pe&&(w.proxy={origin:pe})}this.mySock=new Ps(this.connURL,[],w)}catch(w){this.log_("Error instantiating WebSocket.");const P=w.message||w.data;return P&&this.log_(P),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=w=>{this.handleIncomingFrame(w)},this.mySock.onerror=w=>{this.log_("WebSocket error.  Closing connection.");const P=w.message||w.data;P&&this.log_(P),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const w=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);w&&w.length>1&&parseFloat(w[1])<4.4&&(c=!0)}return!c&&null!==Ps&&!d.forceDisallow_}static previouslyFailed(){return Zt.isInMemoryStorage||!0===Zt.get("previous_websocket_failure")}markConnectionHealthy(){Zt.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const w=(0,De.cI)(p);this.onMessage(w)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,De.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const p=Number(c);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const p=c.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const w=this.extractFrameCount_(p);null!==w&&this.appendFrame_(w)}}send(c){this.resetKeepAlive();const p=(0,De.Wl)(c);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const w=$(p,16384);w.length>1&&this.sendString_(String(w.length));for(let P=0;P<w.length;P++)this.sendString_(w[P])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})(),Zi=(()=>{class d{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[Yn,ks]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const p=ks&&ks.isAvailable();let w=p&&!ks.previouslyFailed();if(c.webSocketOnly&&(p||N("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),w=!0),w)this.transports_=[ks];else{const P=this.transports_=[];for(const K of d.ALL_TRANSPORTS)K&&K.isAvailable()&&P.push(K);d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return d.globalTransportInitialized_=!1,d})();class Xs{constructor(a,c,p,w,P,K,pe,Le,tt,en){this.id=a,this.repoInfo_=c,this.applicationId_=p,this.appCheckToken_=w,this.authToken_=P,this.onMessage_=K,this.onReady_=pe,this.onDisconnect_=Le,this.onKill_=tt,this.lastSessionId=en,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ue("c:"+this.id+":"),this.transportManager_=new Zi(c),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,p)},Math.floor(0));const w=a.healthyTimeout||0;w>0&&(this.healthyTimeout_=Ur(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(w)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return c=>{a===this.conn_?this.onConnectionLost_(c):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return c=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(c):a===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const c=a.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const c=ue("t",a),p=ue("d",a);if("c"===c)this.onSecondaryControl_(p);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const c=ue("t",a),p=ue("d",a);"c"===c?this.onControl_(p):"d"===c&&this.onDataMessage_(p)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const c=ue("t",a);if("d"in a){const p=a.d;if("h"===c){const w=Object.assign({},p);this.repoInfo_.isUsingEmulator&&(w.h=this.repoInfo_.host),this.onHandshake_(w)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let w=0;w<this.pendingDataMessages.length;++w)this.onDataMessage_(this.pendingDataMessages[w]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(p):"r"===c?this.onReset_(p):"e"===c?It("Server Error: "+p):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):It("Unknown control packet command: "+c)}}onHandshake_(a){const c=a.ts,p=a.v,w=a.h;this.sessionId=a.s,this.repoInfo_.host=w,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==p&&N("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,p),Ur(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,c){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ur(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Is{put(a,c,p,w){}merge(a,c,p,w){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,c,p){}onDisconnectMerge(a,c,p){}onDisconnectCancel(a,c){}reportStats(a){}}class oo{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,De.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...c){if(Array.isArray(this.listeners_[a])){const p=[...this.listeners_[a]];for(let w=0;w<p.length;w++)p[w].callback.apply(p[w].context,c)}}on(a,c,p){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:c,context:p});const w=this.getInitialEvent(a);w&&c.apply(p,w)}off(a,c,p){this.validateEventType_(a);const w=this.listeners_[a]||[];for(let P=0;P<w.length;P++)if(w[P].callback===c&&(!p||p===w[P].context))return void w.splice(P,1)}validateEventType_(a){(0,De.hu)(this.allowedEvents_.find(c=>c===a),"Unknown event: "+a)}}class Ci extends oo{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,De.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ci}getInitialEvent(a){return(0,De.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}class fr{constructor(a,c){if(void 0===c){this.pieces_=a.split("/");let p=0;for(let w=0;w<this.pieces_.length;w++)this.pieces_[w].length>0&&(this.pieces_[p]=this.pieces_[w],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=c}toString(){let a="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(a+="/"+this.pieces_[c]);return a||"/"}}function Br(){return new fr("")}function Sr(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function os(d){return d.pieces_.length-d.pieceNum_}function ci(d){let a=d.pieceNum_;return a<d.pieces_.length&&a++,new fr(d.pieces_,a)}function As(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function gi(d,a=0){return d.pieces_.slice(d.pieceNum_+a)}function H(d){if(d.pieceNum_>=d.pieces_.length)return null;const a=[];for(let c=d.pieceNum_;c<d.pieces_.length-1;c++)a.push(d.pieces_[c]);return new fr(a,0)}function fe(d,a){const c=[];for(let p=d.pieceNum_;p<d.pieces_.length;p++)c.push(d.pieces_[p]);if(a instanceof fr)for(let p=a.pieceNum_;p<a.pieces_.length;p++)c.push(a.pieces_[p]);else{const p=a.split("/");for(let w=0;w<p.length;w++)p[w].length>0&&c.push(p[w])}return new fr(c,0)}function V(d){return d.pieceNum_>=d.pieces_.length}function Ee(d,a){const c=Sr(d),p=Sr(a);if(null===c)return a;if(c===p)return Ee(ci(d),ci(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+d+")")}function ot(d,a){const c=gi(d,0),p=gi(a,0);for(let w=0;w<c.length&&w<p.length;w++){const P=we(c[w],p[w]);if(0!==P)return P}return c.length===p.length?0:c.length<p.length?-1:1}function Wt(d,a){if(os(d)!==os(a))return!1;for(let c=d.pieceNum_,p=a.pieceNum_;c<=d.pieces_.length;c++,p++)if(d.pieces_[c]!==a.pieces_[p])return!1;return!0}function Kt(d,a){let c=d.pieceNum_,p=a.pieceNum_;if(os(d)>os(a))return!1;for(;c<d.pieces_.length;){if(d.pieces_[c]!==a.pieces_[p])return!1;++c,++p}return!0}class zn{constructor(a,c){this.errorPrefix_=c,this.parts_=gi(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,De.ug)(this.parts_[p]);Lr(this)}}function Lr(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vr(d))}function Vr(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class Ti extends oo{constructor(){let a,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",a="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",a="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",a="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const p=!document[a];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new Ti}getInitialEvent(a){return(0,De.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const qr=1e3;let Do,$s=(()=>{class d extends Is{constructor(c,p,w,P,K,pe,Le,tt){if(super(),this.repoInfo_=c,this.applicationId_=p,this.onDataUpdate_=w,this.onConnectStatus_=P,this.onServerInfoUpdate_=K,this.authTokenProvider_=pe,this.appCheckTokenProvider_=Le,this.authOverride_=tt,this.id=d.nextPersistentConnectionId_++,this.log_=Ue("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qr,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,tt&&!(0,De.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ti.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Ci.getInstance().on("online",this.onOnline_,this)}sendRequest(c,p,w){const P=++this.requestNumber_,K={r:P,a:c,b:p};this.log_((0,De.Wl)(K)),(0,De.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(K),w&&(this.requestCBHash_[P]=w)}get(c){this.initConnection_();const p=new De.BH,w={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:w,onComplete:pe=>{const Le=pe.d;"ok"===pe.s?p.resolve(Le):p.reject(Le)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(c,p,w,P){this.initConnection_();const K=c._queryIdentifier,pe=c._path.toString();this.log_("Listen called for "+pe+" "+K),this.listens.has(pe)||this.listens.set(pe,new Map),(0,De.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,De.hu)(!this.listens.get(pe).has(K),"listen() called twice for same path/queryId.");const Le={onComplete:P,hashFn:p,query:c,tag:w};this.listens.get(pe).set(K,Le),this.connected_&&this.sendListen_(Le)}sendGet_(c){const p=this.outstandingGets_[c];this.sendRequest("g",p.request,w=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(w)})}sendListen_(c){const p=c.query,w=p._path.toString(),P=p._queryIdentifier;this.log_("Listen on "+w+" for "+P);const K={p:w};c.tag&&(K.q=p._queryObject,K.t=c.tag),K.h=c.hashFn(),this.sendRequest("q",K,Le=>{const tt=Le.d,en=Le.s;d.warnOnListenWarnings_(tt,p),(this.listens.get(w)&&this.listens.get(w).get(P))===c&&(this.log_("listen response",Le),"ok"!==en&&this.removeListen_(w,P),c.onComplete&&c.onComplete(en,tt))})}static warnOnListenWarnings_(c,p){if(c&&"object"==typeof c&&(0,De.r3)(c,"w")){const w=(0,De.DV)(c,"w");if(Array.isArray(w)&&~w.indexOf("no_index")){const P='".indexOn": "'+p._queryParams.getIndex().toString()+'"',K=p._path.toString();N(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${P} at ${K} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,De.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,p=(0,De.w9)(c)?"auth":"gauth",w={cred:c};null===this.authOverride_?w.noauth=!0:"object"==typeof this.authOverride_&&(w.authvar=this.authOverride_),this.sendRequest(p,w,P=>{const K=P.s,pe=P.d||"error";this.authToken_===c&&("ok"===K?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(K,pe))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const p=c.s,w=c.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,w)})}unlisten(c,p){const w=c._path.toString(),P=c._queryIdentifier;this.log_("Unlisten called for "+w+" "+P),(0,De.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(w,P)&&this.connected_&&this.sendUnlisten_(w,P,c._queryObject,p)}sendUnlisten_(c,p,w,P){this.log_("Unlisten on "+c+" for "+p);const K={p:c};P&&(K.q=w,K.t=P),this.sendRequest("n",K)}onDisconnectPut(c,p,w){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,p,w):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:p,onComplete:w})}onDisconnectMerge(c,p,w){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,p,w):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:p,onComplete:w})}onDisconnectCancel(c,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,p):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(c,p,w,P){const K={p,d:w};this.log_("onDisconnect "+c,K),this.sendRequest(c,K,pe=>{P&&setTimeout(()=>{P(pe.s,pe.d)},Math.floor(0))})}put(c,p,w,P){this.putInternal("p",c,p,w,P)}merge(c,p,w,P){this.putInternal("m",c,p,w,P)}putInternal(c,p,w,P,K){this.initConnection_();const pe={p,d:w};void 0!==K&&(pe.h=K),this.outstandingPuts_.push({action:c,request:pe,onComplete:P}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(c){const p=this.outstandingPuts_[c].action,w=this.outstandingPuts_[c].request,P=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(p,w,K=>{this.log_(p+" response",K),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),P&&P(K.s,K.d)})}reportStats(c){if(this.connected_){const p={c};this.log_("reportStats",p),this.sendRequest("s",p,w=>{"ok"!==w.s&&this.log_("reportStats","Error sending stats: "+w.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,De.Wl)(c));const p=c.r,w=this.requestCBHash_[p];w&&(delete this.requestCBHash_[p],w(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,p){this.log_("handleServerMessage",c,p),"d"===c?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===c?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===c?this.onListenRevoked_(p.p,p.q):"ac"===c?this.onAuthRevoked_(p.s,p.d):"apc"===c?this.onAppCheckRevoked_(p.s,p.d):"sd"===c?this.onSecurityDebugPacket_(p):It("Unrecognized action received from server: "+(0,De.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,De.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-c);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,mn.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const p=c.onDataMessage_.bind(c),w=c.onReady_.bind(c),P=c.onRealtimeDisconnect_.bind(c),K=c.id+":"+d.nextConnectionId_++,pe=c.lastSessionId;let Le=!1,tt=null;const en=function(){tt?tt.close():(Le=!0,P())};c.realtime_={close:en,sendRequest:function(sr){(0,De.hu)(tt,"sendRequest call when we're not connected not allowed."),tt.sendRequest(sr)}};const gn=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[sr,Tr]=yield Promise.all([c.authTokenProvider_.getToken(gn),c.appCheckTokenProvider_.getToken(gn)]);Le?dt("getToken() completed but was canceled"):(dt("getToken() completed. Creating connection."),c.authToken_=sr&&sr.accessToken,c.appCheckToken_=Tr&&Tr.token,tt=new Xs(K,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,p,w,P,Ui=>{N(Ui+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},pe))}catch(sr){c.log_("Failed to get token: "+sr),Le||(c.repoInfo_.nodeAdmin&&N(sr),en())}}})()}interrupt(c){dt("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){dt("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,De.xb)(this.interruptReasons_)&&(this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const p=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const p=this.outstandingPuts_[c];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,p){let w;w=p?p.map(K=>be(K)).join("$"):"default";const P=this.removeListen_(c,w);P&&P.onComplete&&P.onComplete("permission_denied")}removeListen_(c,p){const w=new fr(c).toString();let P;if(this.listens.has(w)){const K=this.listens.get(w);P=K.get(p),K.delete(p),0===K.size&&this.listens.delete(w)}else P=void 0;return P}onAuthRevoked_(c,p){dt("Auth token revoked: "+c+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,p){dt("App check token revoked: "+c+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const p of c.values())this.sendListen_(p);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let p="js";(0,De.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+p+"."+J.replace(/\./g,"-")]=1,(0,De.uI)()?c["framework.cordova"]=1:(0,De.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Ci.getInstance().currentlyOnline();return(0,De.xb)(this.interruptReasons_)&&c}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class Ar{constructor(a,c){this.name=a,this.node=c}static Wrap(a,c){return new Ar(a,c)}}class To{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,c){const p=new Ar(Fe,a),w=new Ar(Fe,c);return 0!==this.compare(p,w)}minPost(){return Ar.MIN}}class ao extends To{static get __EMPTY_NODE(){return Do}static set __EMPTY_NODE(a){Do=a}compare(a,c){return we(a.name,c.name)}isDefinedOn(a){throw(0,De.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,c){return!1}minPost(){return Ar.MIN}maxPost(){return new Ar(ht,Do)}makePost(a,c){return(0,De.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new Ar(a,Do)}toString(){return".key"}}const an=new ao;class G{constructor(a,c,p,w,P=null){this.isReverse_=w,this.resultGenerator_=P,this.nodeStack_=[];let K=1;for(;!a.isEmpty();)if(a=a,K=c?p(a.key,c):1,w&&(K*=-1),K<0)a=this.isReverse_?a.left:a.right;else{if(0===K){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,a=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let yn,z=(()=>{class d{constructor(c,p,w,P,K){this.key=c,this.value=p,this.color=null!=w?w:d.RED,this.left=null!=P?P:We.EMPTY_NODE,this.right=null!=K?K:We.EMPTY_NODE}copy(c,p,w,P,K){return new d(null!=c?c:this.key,null!=p?p:this.value,null!=w?w:this.color,null!=P?P:this.left,null!=K?K:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,p,w){let P=this;const K=w(c,P.key);return P=K<0?P.copy(null,null,null,P.left.insert(c,p,w),null):0===K?P.copy(null,p,null,null,null):P.copy(null,null,null,null,P.right.insert(c,p,w)),P.fixUp_()}removeMin_(){if(this.left.isEmpty())return We.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,p){let w,P;if(w=this,p(c,w.key)<0)!w.left.isEmpty()&&!w.left.isRed_()&&!w.left.left.isRed_()&&(w=w.moveRedLeft_()),w=w.copy(null,null,null,w.left.remove(c,p),null);else{if(w.left.isRed_()&&(w=w.rotateRight_()),!w.right.isEmpty()&&!w.right.isRed_()&&!w.right.left.isRed_()&&(w=w.moveRedRight_()),0===p(c,w.key)){if(w.right.isEmpty())return We.EMPTY_NODE;P=w.right.min_(),w=w.copy(P.key,P.value,null,null,w.right.removeMin_())}w=w.copy(null,null,null,null,w.right.remove(c,p))}return w.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,p)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class We{constructor(a,c=We.EMPTY_NODE){this.comparator_=a,this.root_=c}insert(a,c){return new We(this.comparator_,this.root_.insert(a,c,this.comparator_).copy(null,null,z.BLACK,null,null))}remove(a){return new We(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,z.BLACK,null,null))}get(a){let c,p=this.root_;for(;!p.isEmpty();){if(c=this.comparator_(a,p.key),0===c)return p.value;c<0?p=p.left:c>0&&(p=p.right)}return null}getPredecessorKey(a){let c,p=this.root_,w=null;for(;!p.isEmpty();){if(c=this.comparator_(a,p.key),0===c){if(p.left.isEmpty())return w?w.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}c<0?p=p.left:c>0&&(w=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new G(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,c){return new G(this.root_,a,this.comparator_,!1,c)}getReverseIteratorFrom(a,c){return new G(this.root_,a,this.comparator_,!0,c)}getReverseIterator(a){return new G(this.root_,null,this.comparator_,!0,a)}}function bt(d,a){return we(d.name,a.name)}function jt(d,a){return we(d,a)}We.EMPTY_NODE=new class Se{copy(a,c,p,w,P){return this}insert(a,c,p){return new z(a,c,null)}remove(a,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Qn=function(d){return"number"==typeof d?"number:"+_e(d):"string:"+d},Rr=function(d){if(d.isLeafNode()){const a=d.val();(0,De.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,De.r3)(a,".sv"),"Priority must be a string or number.")}else(0,De.hu)(d===yn||d.isEmpty(),"priority of unexpected type.");(0,De.hu)(d===yn||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let zr,jr,ii,hi=(()=>{class d{constructor(c,p=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=p,this.lazyHash_=null,(0,De.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Rr(this.priorityNode_)}static set __childrenNodeConstructor(c){zr=c}static get __childrenNodeConstructor(){return zr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new d(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return V(c)?this:".priority"===Sr(c)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,p){return null}updateImmediateChild(c,p){return".priority"===c?this.updatePriority(p):p.isEmpty()&&".priority"!==c?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,p).updatePriority(this.priorityNode_)}updateChild(c,p){const w=Sr(c);return null===w?p:p.isEmpty()&&".priority"!==w?this:((0,De.hu)(".priority"!==w||1===os(c),".priority must be the last token in a path"),this.updateImmediateChild(w,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(ci(c),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,p){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Qn(this.priorityNode_.val())+":");const p=typeof this.value_;c+=p+":",c+="number"===p?_e(this.value_):this.value_,this.lazyHash_=Bn(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===d.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof d.__childrenNodeConstructor?-1:((0,De.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const p=typeof c.value_,w=typeof this.value_,P=d.VALUE_TYPE_ORDER.indexOf(p),K=d.VALUE_TYPE_ORDER.indexOf(w);return(0,De.hu)(P>=0,"Unknown leaf type: "+p),(0,De.hu)(K>=0,"Unknown leaf type: "+w),P===K?"object"===w?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:K-P}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const p=c;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const C=new class E extends To{compare(a,c){const p=a.node.getPriority(),w=c.node.getPriority(),P=p.compareTo(w);return 0===P?we(a.name,c.name):P}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,c){return!a.getPriority().equals(c.getPriority())}minPost(){return Ar.MIN}maxPost(){return new Ar(ht,new hi("[PRIORITY-POST]",ii))}makePost(a,c){const p=jr(a);return new Ar(c,new hi("[PRIORITY-POST]",p))}toString(){return".priority"}},B=Math.log(2);class le{constructor(a){this.count=parseInt(Math.log(a+1)/B,10),this.current_=this.count-1;const w=(P=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&w}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const Oe=function(d,a,c,p){d.sort(a);const w=function(Le,tt){const en=tt-Le;let Xt,gn;if(0===en)return null;if(1===en)return Xt=d[Le],gn=c?c(Xt):Xt,new z(gn,Xt.node,z.BLACK,null,null);{const sr=parseInt(en/2,10)+Le,Tr=w(Le,sr),Ui=w(sr+1,tt);return Xt=d[sr],gn=c?c(Xt):Xt,new z(gn,Xt.node,z.BLACK,Tr,Ui)}},pe=function(Le){let tt=null,en=null,Xt=d.length;const gn=function(Tr,Ui){const po=Xt-Tr,ul=Xt;Xt-=Tr;const ec=w(po+1,ul),go=d[po],Up=c?c(go):go;sr(new z(Up,go.node,Ui,null,ec))},sr=function(Tr){tt?(tt.left=Tr,tt=Tr):(en=Tr,tt=Tr)};for(let Tr=0;Tr<Le.count;++Tr){const Ui=Le.nextBitIsOne(),po=Math.pow(2,Le.count-(Tr+1));Ui?gn(po,z.BLACK):(gn(po,z.BLACK),gn(po,z.RED))}return en}(new le(d.length));return new We(p||a,pe)};let Ye;const nt={};class Dt{constructor(a,c){this.indexes_=a,this.indexSet_=c}static get Default(){return(0,De.hu)(nt&&C,"ChildrenNode.ts has not been loaded"),Ye=Ye||new Dt({".priority":nt},{".priority":C}),Ye}get(a){const c=(0,De.DV)(this.indexes_,a);if(!c)throw new Error("No index defined for "+a);return c instanceof We?c:null}hasIndex(a){return(0,De.r3)(this.indexSet_,a.toString())}addIndex(a,c){(0,De.hu)(a!==an,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let w=!1;const P=c.getIterator(Ar.Wrap);let pe,K=P.getNext();for(;K;)w=w||a.isDefinedOn(K.node),p.push(K),K=P.getNext();pe=w?Oe(p,a.getCompare()):nt;const Le=a.toString(),tt=Object.assign({},this.indexSet_);tt[Le]=a;const en=Object.assign({},this.indexes_);return en[Le]=pe,new Dt(en,tt)}addToIndexes(a,c){const p=(0,De.UI)(this.indexes_,(w,P)=>{const K=(0,De.DV)(this.indexSet_,P);if((0,De.hu)(K,"Missing index implementation for "+P),w===nt){if(K.isDefinedOn(a.node)){const pe=[],Le=c.getIterator(Ar.Wrap);let tt=Le.getNext();for(;tt;)tt.name!==a.name&&pe.push(tt),tt=Le.getNext();return pe.push(a),Oe(pe,K.getCompare())}return nt}{const pe=c.get(a.name);let Le=w;return pe&&(Le=Le.remove(new Ar(a.name,pe))),Le.insert(a,a.node)}});return new Dt(p,this.indexSet_)}removeFromIndexes(a,c){const p=(0,De.UI)(this.indexes_,w=>{if(w===nt)return w;{const P=c.get(a.name);return P?w.remove(new Ar(a.name,P)):w}});return new Dt(p,this.indexSet_)}}let Qt,cn=(()=>{class d{constructor(c,p,w){this.children_=c,this.priorityNode_=p,this.indexMap_=w,this.lazyHash_=null,this.priorityNode_&&Rr(this.priorityNode_),this.children_.isEmpty()&&(0,De.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Qt||(Qt=new d(new We(jt),null,Dt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qt}updatePriority(c){return this.children_.isEmpty()?this:new d(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const p=this.children_.get(c);return null===p?Qt:p}}getChild(c){const p=Sr(c);return null===p?this:this.getImmediateChild(p).getChild(ci(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,p){if((0,De.hu)(p,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(p);{const w=new Ar(c,p);let P,K;p.isEmpty()?(P=this.children_.remove(c),K=this.indexMap_.removeFromIndexes(w,this.children_)):(P=this.children_.insert(c,p),K=this.indexMap_.addToIndexes(w,this.children_));const pe=P.isEmpty()?Qt:this.priorityNode_;return new d(P,pe,K)}}updateChild(c,p){const w=Sr(c);if(null===w)return p;{(0,De.hu)(".priority"!==Sr(c)||1===os(c),".priority must be the last token in a path");const P=this.getImmediateChild(w).updateChild(ci(c),p);return this.updateImmediateChild(w,P)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const p={};let w=0,P=0,K=!0;if(this.forEachChild(C,(pe,Le)=>{p[pe]=Le.val(c),w++,K&&d.INTEGER_REGEXP_.test(pe)?P=Math.max(P,Number(pe)):K=!1}),!c&&K&&P<2*w){const pe=[];for(const Le in p)pe[Le]=p[Le];return pe}return c&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Qn(this.getPriority().val())+":"),this.forEachChild(C,(p,w)=>{const P=w.hash();""!==P&&(c+=":"+p+":"+P)}),this.lazyHash_=""===c?"":Bn(c)}return this.lazyHash_}getPredecessorChildName(c,p,w){const P=this.resolveIndex_(w);if(P){const K=P.getPredecessorKey(new Ar(c,p));return K?K.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const p=this.resolveIndex_(c);if(p){const w=p.minKey();return w&&w.name}return this.children_.minKey()}getFirstChild(c){const p=this.getFirstChildName(c);return p?new Ar(p,this.children_.get(p)):null}getLastChildName(c){const p=this.resolveIndex_(c);if(p){const w=p.maxKey();return w&&w.name}return this.children_.maxKey()}getLastChild(c){const p=this.getLastChildName(c);return p?new Ar(p,this.children_.get(p)):null}forEachChild(c,p){const w=this.resolveIndex_(c);return w?w.inorderTraversal(P=>p(P.name,P.node)):this.children_.inorderTraversal(p)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,p){const w=this.resolveIndex_(p);if(w)return w.getIteratorFrom(c,P=>P);{const P=this.children_.getIteratorFrom(c.name,Ar.Wrap);let K=P.peek();for(;null!=K&&p.compare(K,c)<0;)P.getNext(),K=P.peek();return P}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,p){const w=this.resolveIndex_(p);if(w)return w.getReverseIteratorFrom(c,P=>P);{const P=this.children_.getReverseIteratorFrom(c.name,Ar.Wrap);let K=P.peek();for(;null!=K&&p.compare(K,c)>0;)P.getNext(),K=P.peek();return P}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===or?-1:0}withIndex(c){if(c===an||this.indexMap_.hasIndex(c))return this;{const p=this.indexMap_.addIndex(c,this.children_);return new d(this.children_,this.priorityNode_,p)}}isIndexed(c){return c===an||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const p=c;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const w=this.getIterator(C),P=p.getIterator(C);let K=w.getNext(),pe=P.getNext();for(;K&&pe;){if(K.name!==pe.name||!K.node.equals(pe.node))return!1;K=w.getNext(),pe=P.getNext()}return null===K&&null===pe}return!1}return!1}}resolveIndex_(c){return c===an?null:this.indexMap_.get(c.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const or=new class ir extends cn{constructor(){super(new We(jt),cn.EMPTY_NODE,Dt.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return cn.EMPTY_NODE}isEmpty(){return!1}};function Hn(d,a=null){if(null===d)return cn.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(a=d[".priority"]),(0,De.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new hi(d,Hn(a));if(d instanceof Array){let c=cn.EMPTY_NODE;return ae(d,(p,w)=>{if((0,De.r3)(d,p)&&"."!==p.substring(0,1)){const P=Hn(w);(P.isLeafNode()||!P.isEmpty())&&(c=c.updateImmediateChild(p,P))}}),c.updatePriority(Hn(a))}{const c=[];let p=!1;if(ae(d,(K,pe)=>{if("."!==K.substring(0,1)){const Le=Hn(pe);Le.isEmpty()||(p=p||!Le.getPriority().isEmpty(),c.push(new Ar(K,Le)))}}),0===c.length)return cn.EMPTY_NODE;const P=Oe(c,bt,K=>K.name,jt);if(p){const K=Oe(c,C.getCompare());return new cn(P,Hn(a),new Dt({".priority":K},{".priority":C}))}return new cn(P,Hn(a),Dt.Default)}}Object.defineProperties(Ar,{MIN:{value:new Ar(Fe,cn.EMPTY_NODE)},MAX:{value:new Ar(ht,or)}}),ao.__EMPTY_NODE=cn.EMPTY_NODE,hi.__childrenNodeConstructor=cn,function rr(d){yn=d}(or),function ne(d){ii=d}(or),function Li(d){jr=d}(Hn);class Mr extends To{constructor(a){super(),this.indexPath_=a,(0,De.hu)(!V(a)&&".priority"!==Sr(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,c){const p=this.extractChild(a.node),w=this.extractChild(c.node),P=p.compareTo(w);return 0===P?we(a.name,c.name):P}makePost(a,c){const p=Hn(a),w=cn.EMPTY_NODE.updateChild(this.indexPath_,p);return new Ar(c,w)}maxPost(){const a=cn.EMPTY_NODE.updateChild(this.indexPath_,or);return new Ar(ht,a)}toString(){return gi(this.indexPath_,0).join("/")}}const Bi=new class Di extends To{compare(a,c){const p=a.node.compareTo(c.node);return 0===p?we(a.name,c.name):p}isDefinedOn(a){return!0}indexedValueChanged(a,c){return!a.equals(c)}minPost(){return Ar.MIN}maxPost(){return Ar.MAX}makePost(a,c){const p=Hn(a);return new Ar(c,p)}toString(){return".value"}};function qi(d){return{type:"value",snapshotNode:d}}function as(d,a){return{type:"child_added",snapshotNode:a,childName:d}}function si(d,a){return{type:"child_removed",snapshotNode:a,childName:d}}function gs(d,a,c){return{type:"child_changed",snapshotNode:a,childName:d,oldSnap:c}}class ls{constructor(a){this.index_=a}updateChild(a,c,p,w,P,K){(0,De.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const pe=a.getImmediateChild(c);return pe.getChild(w).equals(p.getChild(w))&&pe.isEmpty()===p.isEmpty()||(null!=K&&(p.isEmpty()?a.hasChild(c)?K.trackChildChange(si(c,pe)):(0,De.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):pe.isEmpty()?K.trackChildChange(as(c,p)):K.trackChildChange(gs(c,p,pe))),a.isLeafNode()&&p.isEmpty())?a:a.updateImmediateChild(c,p).withIndex(this.index_)}updateFullNode(a,c,p){return null!=p&&(a.isLeafNode()||a.forEachChild(C,(w,P)=>{c.hasChild(w)||p.trackChildChange(si(w,P))}),c.isLeafNode()||c.forEachChild(C,(w,P)=>{if(a.hasChild(w)){const K=a.getImmediateChild(w);K.equals(P)||p.trackChildChange(gs(w,P,K))}else p.trackChildChange(as(w,P))})),c.withIndex(this.index_)}updatePriority(a,c){return a.isEmpty()?cn.EMPTY_NODE:a.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ki{constructor(a){this.indexedFilter_=new ls(a.getIndex()),this.index_=a.getIndex(),this.startPost_=ki.getStartPost_(a),this.endPost_=ki.getEndPost_(a),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),a)<=0:this.index_.compare(this.getStartPost(),a)<0,p=this.endIsInclusive_?this.index_.compare(a,this.getEndPost())<=0:this.index_.compare(a,this.getEndPost())<0;return c&&p}updateChild(a,c,p,w,P,K){return this.matches(new Ar(c,p))||(p=cn.EMPTY_NODE),this.indexedFilter_.updateChild(a,c,p,w,P,K)}updateFullNode(a,c,p){c.isLeafNode()&&(c=cn.EMPTY_NODE);let w=c.withIndex(this.index_);w=w.updatePriority(cn.EMPTY_NODE);const P=this;return c.forEachChild(C,(K,pe)=>{P.matches(new Ar(K,pe))||(w=w.updateImmediateChild(K,cn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,w,p)}updatePriority(a,c){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const c=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),c)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const c=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),c)}return a.getIndex().maxPost()}}class Oo{constructor(a){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const p=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?p<=0:p<0},this.withinEndPost=c=>{const p=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?p<=0:p<0},this.rangedFilter_=new ki(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft(),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}updateChild(a,c,p,w,P,K){return this.rangedFilter_.matches(new Ar(c,p))||(p=cn.EMPTY_NODE),a.getImmediateChild(c).equals(p)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,c,p,w,P,K):this.fullLimitUpdateChild_(a,c,p,P,K)}updateFullNode(a,c,p){let w;if(c.isLeafNode()||c.isEmpty())w=cn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let P;w=cn.EMPTY_NODE.withIndex(this.index_),P=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let K=0;for(;P.hasNext()&&K<this.limit_;){const pe=P.getNext();if(this.withinDirectionalStart(pe)){if(!this.withinDirectionalEnd(pe))break;w=w.updateImmediateChild(pe.name,pe.node),K++}}}else{let P;w=c.withIndex(this.index_),w=w.updatePriority(cn.EMPTY_NODE),P=this.reverse_?w.getReverseIterator(this.index_):w.getIterator(this.index_);let K=0;for(;P.hasNext();){const pe=P.getNext();K<this.limit_&&this.withinDirectionalStart(pe)&&this.withinDirectionalEnd(pe)?K++:w=w.updateImmediateChild(pe.name,cn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,w,p)}updatePriority(a,c){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,c,p,w,P){let K;if(this.reverse_){const Xt=this.index_.getCompare();K=(gn,sr)=>Xt(sr,gn)}else K=this.index_.getCompare();const pe=a;(0,De.hu)(pe.numChildren()===this.limit_,"");const Le=new Ar(c,p),tt=this.reverse_?pe.getFirstChild(this.index_):pe.getLastChild(this.index_),en=this.rangedFilter_.matches(Le);if(pe.hasChild(c)){const Xt=pe.getImmediateChild(c);let gn=w.getChildAfterChild(this.index_,tt,this.reverse_);for(;null!=gn&&(gn.name===c||pe.hasChild(gn.name));)gn=w.getChildAfterChild(this.index_,gn,this.reverse_);const sr=null==gn?1:K(gn,Le);if(en&&!p.isEmpty()&&sr>=0)return null!=P&&P.trackChildChange(gs(c,p,Xt)),pe.updateImmediateChild(c,p);{null!=P&&P.trackChildChange(si(c,Xt));const Ui=pe.updateImmediateChild(c,cn.EMPTY_NODE);return null!=gn&&this.rangedFilter_.matches(gn)?(null!=P&&P.trackChildChange(as(gn.name,gn.node)),Ui.updateImmediateChild(gn.name,gn.node)):Ui}}return p.isEmpty()?a:en&&K(tt,Le)>=0?(null!=P&&(P.trackChildChange(si(tt.name,tt.node)),P.trackChildChange(as(c,p))),pe.updateImmediateChild(c,p).updateImmediateChild(tt.name,cn.EMPTY_NODE)):a}}class xi{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=C}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,De.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,De.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fe}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,De.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,De.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ht}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,De.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===C}copy(){const a=new xi;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.startAfterSet_=this.startAfterSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.endBeforeSet_=this.endBeforeSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function Ws(d,a,c){const p=d.copy();return p.startSet_=!0,void 0===a&&(a=null),p.indexStartValue_=a,null!=c?(p.startNameSet_=!0,p.indexStartName_=c):(p.startNameSet_=!1,p.indexStartName_=""),p}function Un(d,a,c){const p=d.copy();return p.endSet_=!0,void 0===a&&(a=null),p.indexEndValue_=a,void 0!==c?(p.endNameSet_=!0,p.indexEndName_=c):(p.endNameSet_=!1,p.indexEndName_=""),p}function br(d,a){const c=d.copy();return c.index_=a,c}function En(d){const a={};if(d.isDefault())return a;let c;if(d.index_===C?c="$priority":d.index_===Bi?c="$value":d.index_===an?c="$key":((0,De.hu)(d.index_ instanceof Mr,"Unrecognized index type!"),c=d.index_.toString()),a.orderBy=(0,De.Wl)(c),d.startSet_){const p=d.startAfterSet_?"startAfter":"startAt";a[p]=(0,De.Wl)(d.indexStartValue_),d.startNameSet_&&(a[p]+=","+(0,De.Wl)(d.indexStartName_))}if(d.endSet_){const p=d.endBeforeSet_?"endBefore":"endAt";a[p]=(0,De.Wl)(d.indexEndValue_),d.endNameSet_&&(a[p]+=","+(0,De.Wl)(d.indexEndName_))}return d.limitSet_&&(d.isViewFromLeft()?a.limitToFirst=d.limit_:a.limitToLast=d.limit_),a}function Vn(d){const a={};if(d.startSet_&&(a.sp=d.indexStartValue_,d.startNameSet_&&(a.sn=d.indexStartName_),a.sin=!d.startAfterSet_),d.endSet_&&(a.ep=d.indexEndValue_,d.endNameSet_&&(a.en=d.indexEndName_),a.ein=!d.endBeforeSet_),d.limitSet_){a.l=d.limit_;let c=d.viewFrom_;""===c&&(c=d.isViewFromLeft()?"l":"r"),a.vf=c}return d.index_!==C&&(a.i=d.index_.toString()),a}class zs extends Is{constructor(a,c,p,w){super(),this.repoInfo_=a,this.onDataUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=w,this.log_=Ue("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,c){return void 0!==c?"tag$"+c:((0,De.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,c,p,w){const P=a._path.toString();this.log_("Listen called for "+P+" "+a._queryIdentifier);const K=zs.getListenId_(a,p),pe={};this.listens_[K]=pe;const Le=En(a._queryParams);this.restRequest_(P+".json",Le,(tt,en)=>{let Xt=en;if(404===tt&&(Xt=null,tt=null),null===tt&&this.onDataUpdate_(P,Xt,!1,p),(0,De.DV)(this.listens_,K)===pe){let gn;gn=tt?401===tt?"permission_denied":"rest_error:"+tt:"ok",w(gn,null)}})}unlisten(a,c){const p=zs.getListenId_(a,c);delete this.listens_[p]}get(a){const c=En(a._queryParams),p=a._path.toString(),w=new De.BH;return this.restRequest_(p+".json",c,(P,K)=>{let pe=K;404===P&&(pe=null,P=null),null===P?(this.onDataUpdate_(p,pe,!1,null),w.resolve(pe)):w.reject(new Error(pe))}),w.promise}refreshAuthToken(a){}restRequest_(a,c={},p){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([w,P])=>{w&&w.accessToken&&(c.auth=w.accessToken),P&&P.token&&(c.ac=P.token);const K=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,De.xO)(c);this.log_("Sending REST request for "+K);const pe=new XMLHttpRequest;pe.onreadystatechange=()=>{if(p&&4===pe.readyState){this.log_("REST Response for "+K+" received. status:",pe.status,"response:",pe.responseText);let Le=null;if(pe.status>=200&&pe.status<300){try{Le=(0,De.cI)(pe.responseText)}catch(tt){N("Failed to parse JSON response for "+K+": "+pe.responseText)}p(null,Le)}else 401!==pe.status&&404!==pe.status&&N("Got unsuccessful REST response for "+K+" Status: "+pe.status),p(pe.status);p=null}},pe.open("GET",K,!0),pe.send()})}}class On{constructor(){this.rootNode_=cn.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,c){this.rootNode_=this.rootNode_.updateChild(a,c)}}function Lt(){return{value:null,children:new Map}}function Jt(d,a,c){if(V(a))d.value=c,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(a,c);else{const p=Sr(a);d.children.has(p)||d.children.set(p,Lt()),Jt(d.children.get(p),a=ci(a),c)}}function Xi(d,a){if(V(a))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const c=d.value;return d.value=null,c.forEachChild(C,(p,w)=>{Jt(d,new fr(p),w)}),Xi(d,a)}}if(d.children.size>0){const c=Sr(a);return a=ci(a),d.children.has(c)&&Xi(d.children.get(c),a)&&d.children.delete(c),0===d.children.size}return!0}function Sa(d,a,c){null!==d.value?c(a,d.value):function Ks(d,a){d.children.forEach((c,p)=>{a(p,c)})}(d,(p,w)=>{Sa(w,new fr(a.toString()+"/"+p),c)})}class _a{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),c=Object.assign({},a);return this.last_&&ae(this.last_,(p,w)=>{c[p]=c[p]-w}),this.last_=a,c}}class Ga{constructor(a,c){this.server_=c,this.statsToReport_={},this.statsListener_=new _a(a);const p=1e4+2e4*Math.random();Ur(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const a=this.statsListener_.get(),c={};let p=!1;ae(a,(w,P)=>{P>0&&(0,De.r3)(this.statsToReport_,w)&&(c[w]=P,p=!0)}),p&&this.server_.reportStats(c),Ur(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var co=(()=>{return(d=co||(co={}))[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",co;var d})();function Ji(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class Or{constructor(a,c,p){this.path=a,this.affectedTree=c,this.revert=p,this.type=co.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(V(this.path)){if(null!=this.affectedTree.value)return(0,De.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new fr(a));return new Or(Br(),c,this.revert)}}return(0,De.hu)(Sr(this.path)===a,"operationForChild called for unrelated child."),new Or(ci(this.path),this.affectedTree,this.revert)}}class Zs{constructor(a,c){this.source=a,this.path=c,this.type=co.LISTEN_COMPLETE}operationForChild(a){return V(this.path)?new Zs(this.source,Br()):new Zs(this.source,ci(this.path))}}class xo{constructor(a,c,p){this.source=a,this.path=c,this.snap=p,this.type=co.OVERWRITE}operationForChild(a){return V(this.path)?new xo(this.source,Br(),this.snap.getImmediateChild(a)):new xo(this.source,ci(this.path),this.snap)}}class x{constructor(a,c,p){this.source=a,this.path=c,this.children=p,this.type=co.MERGE}operationForChild(a){if(V(this.path)){const c=this.children.subtree(new fr(a));return c.isEmpty()?null:c.value?new xo(this.source,Br(),c.value):new x(this.source,Br(),c)}return(0,De.hu)(Sr(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new x(this.source,ci(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class D{constructor(a,c,p){this.node_=a,this.fullyInitialized_=c,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(V(a))return this.isFullyInitialized()&&!this.filtered_;const c=Sr(a);return this.isCompleteForChild(c)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class T{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function Q(d,a,c,p,w,P){const K=p.filter(pe=>pe.type===c);K.sort((pe,Le)=>function Ae(d,a,c){if(null==a.childName||null==c.childName)throw(0,De.g5)("Should only compare child_ events.");const p=new Ar(a.childName,a.snapshotNode),w=new Ar(c.childName,c.snapshotNode);return d.index_.compare(p,w)}(d,pe,Le)),K.forEach(pe=>{const Le=function ve(d,a,c){return"value"===a.type||"child_removed"===a.type||(a.prevName=c.getPredecessorChildName(a.childName,a.snapshotNode,d.index_)),a}(d,pe,P);w.forEach(tt=>{tt.respondsTo(pe.type)&&a.push(tt.createEvent(Le,d.query_))})})}function st(d,a){return{eventCache:d,serverCache:a}}function qt(d,a,c,p){return st(new D(a,c,p),d.serverCache)}function Wn(d,a,c,p){return st(d.eventCache,new D(a,c,p))}function Yr(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function ar(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let _i;class ni{constructor(a,c=(()=>(_i||(_i=new We(xe)),_i))()){this.value=a,this.children=c}static fromObject(a){let c=new ni(null);return ae(a,(p,w)=>{c=c.set(new fr(p),w)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,c){if(null!=this.value&&c(this.value))return{path:Br(),value:this.value};if(V(a))return null;{const p=Sr(a),w=this.children.get(p);if(null!==w){const P=w.findRootMostMatchingPathAndValue(ci(a),c);return null!=P?{path:fe(new fr(p),P.path),value:P.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(V(a))return this;{const c=Sr(a),p=this.children.get(c);return null!==p?p.subtree(ci(a)):new ni(null)}}set(a,c){if(V(a))return new ni(c,this.children);{const p=Sr(a),P=(this.children.get(p)||new ni(null)).set(ci(a),c),K=this.children.insert(p,P);return new ni(this.value,K)}}remove(a){if(V(a))return this.children.isEmpty()?new ni(null):new ni(null,this.children);{const c=Sr(a),p=this.children.get(c);if(p){const w=p.remove(ci(a));let P;return P=w.isEmpty()?this.children.remove(c):this.children.insert(c,w),null===this.value&&P.isEmpty()?new ni(null):new ni(this.value,P)}return this}}get(a){if(V(a))return this.value;{const c=Sr(a),p=this.children.get(c);return p?p.get(ci(a)):null}}setTree(a,c){if(V(a))return c;{const p=Sr(a),P=(this.children.get(p)||new ni(null)).setTree(ci(a),c);let K;return K=P.isEmpty()?this.children.remove(p):this.children.insert(p,P),new ni(this.value,K)}}fold(a){return this.fold_(Br(),a)}fold_(a,c){const p={};return this.children.inorderTraversal((w,P)=>{p[w]=P.fold_(fe(a,w),c)}),c(a,this.value,p)}findOnPath(a,c){return this.findOnPath_(a,Br(),c)}findOnPath_(a,c,p){const w=!!this.value&&p(c,this.value);if(w)return w;if(V(a))return null;{const P=Sr(a),K=this.children.get(P);return K?K.findOnPath_(ci(a),fe(c,P),p):null}}foreachOnPath(a,c){return this.foreachOnPath_(a,Br(),c)}foreachOnPath_(a,c,p){if(V(a))return this;{this.value&&p(c,this.value);const w=Sr(a),P=this.children.get(w);return P?P.foreachOnPath_(ci(a),fe(c,w),p):new ni(null)}}foreach(a){this.foreach_(Br(),a)}foreach_(a,c){this.children.inorderTraversal((p,w)=>{w.foreach_(fe(a,p),c)}),this.value&&c(a,this.value)}foreachChild(a){this.children.inorderTraversal((c,p)=>{p.value&&a(c,p.value)})}}class ds{constructor(a){this.writeTree_=a}static empty(){return new ds(new ni(null))}}function ms(d,a,c){if(V(a))return new ds(new ni(c));{const p=d.writeTree_.findRootMostValueAndPath(a);if(null!=p){const w=p.path;let P=p.value;const K=Ee(w,a);return P=P.updateChild(K,c),new ds(d.writeTree_.set(w,P))}{const w=new ni(c),P=d.writeTree_.setTree(a,w);return new ds(P)}}}function Uo(d,a,c){let p=d;return ae(c,(w,P)=>{p=ms(p,fe(a,w),P)}),p}function Bo(d,a){if(V(a))return ds.empty();{const c=d.writeTree_.setTree(a,new ni(null));return new ds(c)}}function ya(d,a){return null!=_o(d,a)}function _o(d,a){const c=d.writeTree_.findRootMostValueAndPath(a);return null!=c?d.writeTree_.get(c.path).getChild(Ee(c.path,a)):null}function Wa(d){const a=[],c=d.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(C,(p,w)=>{a.push(new Ar(p,w))}):d.writeTree_.children.inorderTraversal((p,w)=>{null!=w.value&&a.push(new Ar(p,w.value))}),a}function Vt(d,a){if(V(a))return d;{const c=_o(d,a);return new ds(null!=c?new ni(c):d.writeTree_.subtree(a))}}function to(d){return d.writeTree_.isEmpty()}function Ls(d,a){return gl(Br(),d.writeTree_,a)}function gl(d,a,c){if(null!=a.value)return c.updateChild(d,a.value);{let p=null;return a.children.inorderTraversal((w,P)=>{".priority"===w?((0,De.hu)(null!==P.value,"Priority writes must always be leaf nodes"),p=P.value):c=gl(fe(d,w),P,c)}),!c.getChild(d).isEmpty()&&null!==p&&(c=c.updateChild(fe(d,".priority"),p)),c}}function no(d,a){return yo(a,d)}function Ka(d,a){if(d.snap)return Kt(d.path,a);for(const c in d.children)if(d.children.hasOwnProperty(c)&&Kt(fe(d.path,c),a))return!0;return!1}function Sc(d){return d.visible}function Mi(d,a,c){let p=ds.empty();for(let w=0;w<d.length;++w){const P=d[w];if(a(P)){const K=P.path;let pe;if(P.snap)Kt(c,K)?(pe=Ee(c,K),p=ms(p,pe,P.snap)):Kt(K,c)&&(pe=Ee(K,c),p=ms(p,Br(),P.snap.getChild(pe)));else{if(!P.children)throw(0,De.g5)("WriteRecord should have .snap or .children");if(Kt(c,K))pe=Ee(c,K),p=Uo(p,pe,P.children);else if(Kt(K,c))if(pe=Ee(K,c),V(pe))p=Uo(p,Br(),P.children);else{const Le=(0,De.DV)(P.children,Sr(pe));if(Le){const tt=Le.getChild(ci(pe));p=ms(p,Br(),tt)}}}}}return p}function nu(d,a,c,p,w){if(p||w){const P=Vt(d.visibleWrites,a);return!w&&to(P)?c:w||null!=c||ya(P,Br())?Ls(Mi(d.allWrites,function(tt){return(tt.visible||w)&&(!p||!~p.indexOf(tt.writeId))&&(Kt(tt.path,a)||Kt(a,tt.path))},a),c||cn.EMPTY_NODE):null}{const P=_o(d.visibleWrites,a);if(null!=P)return P;{const K=Vt(d.visibleWrites,a);return to(K)?c:null!=c||ya(K,Br())?Ls(K,c||cn.EMPTY_NODE):null}}}function Aa(d,a,c,p){return nu(d.writeTree,d.treePath,a,c,p)}function Ra(d,a){return function ru(d,a,c){let p=cn.EMPTY_NODE;const w=_o(d.visibleWrites,a);if(w)return w.isLeafNode()||w.forEachChild(C,(P,K)=>{p=p.updateImmediateChild(P,K)}),p;if(c){const P=Vt(d.visibleWrites,a);return c.forEachChild(C,(K,pe)=>{const Le=Ls(Vt(P,new fr(K)),pe);p=p.updateImmediateChild(K,Le)}),Wa(P).forEach(K=>{p=p.updateImmediateChild(K.name,K.node)}),p}return Wa(Vt(d.visibleWrites,a)).forEach(K=>{p=p.updateImmediateChild(K.name,K.node)}),p}(d.writeTree,d.treePath,a)}function hs(d,a,c,p){return function iu(d,a,c,p,w){(0,De.hu)(p||w,"Either existingEventSnap or existingServerSnap must exist");const P=fe(a,c);if(ya(d.visibleWrites,P))return null;{const K=Vt(d.visibleWrites,P);return to(K)?w.getChild(c):Ls(K,w.getChild(c))}}(d.writeTree,d.treePath,a,c,p)}function la(d,a){return function Za(d,a){return _o(d.visibleWrites,a)}(d.writeTree,fe(d.treePath,a))}function ac(d,a,c){return function sh(d,a,c,p){const w=fe(a,c),P=_o(d.visibleWrites,w);return null!=P?P:p.isCompleteForChild(c)?Ls(Vt(d.visibleWrites,w),p.getNode().getImmediateChild(c)):null}(d.writeTree,d.treePath,a,c)}function Rs(d,a){return yo(fe(d.treePath,a),d.writeTree)}function yo(d,a){return{treePath:d,writeTree:a}}class Ms{constructor(){this.changeMap=new Map}trackChildChange(a){const c=a.type,p=a.childName;(0,De.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,De.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const w=this.changeMap.get(p);if(w){const P=w.type;if("child_added"===c&&"child_removed"===P)this.changeMap.set(p,gs(p,a.snapshotNode,w.snapshotNode));else if("child_removed"===c&&"child_added"===P)this.changeMap.delete(p);else if("child_removed"===c&&"child_changed"===P)this.changeMap.set(p,si(p,w.oldSnap));else if("child_changed"===c&&"child_added"===P)this.changeMap.set(p,as(p,a.snapshotNode));else{if("child_changed"!==c||"child_changed"!==P)throw(0,De.g5)("Illegal combination of changes: "+a+" occurred after "+w);this.changeMap.set(p,gs(p,a.snapshotNode,w.oldSnap))}}else this.changeMap.set(p,a)}getChanges(){return Array.from(this.changeMap.values())}}const Ko=new class es{getCompleteChild(a){return null}getChildAfterChild(a,c,p){return null}};class Zo{constructor(a,c,p=null){this.writes_=a,this.viewCache_=c,this.optCompleteServerCache_=p}getCompleteChild(a){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(a))return c.getNode().getImmediateChild(a);{const p=null!=this.optCompleteServerCache_?new D(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ac(this.writes_,a,p)}}getChildAfterChild(a,c,p){const w=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ar(this.viewCache_),P=function _l(d,a,c,p,w,P){return function md(d,a,c,p,w,P,K){let pe;const Le=Vt(d.visibleWrites,a),tt=_o(Le,Br());if(null!=tt)pe=tt;else{if(null==c)return[];pe=Ls(Le,c)}if(pe=pe.withIndex(K),pe.isEmpty()||pe.isLeafNode())return[];{const en=[],Xt=K.getCompare(),gn=P?pe.getReverseIteratorFrom(p,K):pe.getIteratorFrom(p,K);let sr=gn.getNext();for(;sr&&en.length<w;)0!==Xt(sr,p)&&en.push(sr),sr=gn.getNext();return en}}(d.writeTree,d.treePath,a,c,p,w,P)}(this.writes_,w,c,1,p,a);return 0===P.length?null:P[0]}}function va(d,a,c,p,w,P){const K=a.eventCache;if(null!=la(p,c))return a;{let pe,Le;if(V(c))if((0,De.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const tt=ar(a),Xt=Ra(p,tt instanceof cn?tt:cn.EMPTY_NODE);pe=d.filter.updateFullNode(a.eventCache.getNode(),Xt,P)}else{const tt=Aa(p,ar(a));pe=d.filter.updateFullNode(a.eventCache.getNode(),tt,P)}else{const tt=Sr(c);if(".priority"===tt){(0,De.hu)(1===os(c),"Can't have a priority with additional path components");const en=K.getNode();Le=a.serverCache.getNode();const Xt=hs(p,c,en,Le);pe=null!=Xt?d.filter.updatePriority(en,Xt):K.getNode()}else{const en=ci(c);let Xt;if(K.isCompleteForChild(tt)){Le=a.serverCache.getNode();const gn=hs(p,c,K.getNode(),Le);Xt=null!=gn?K.getNode().getImmediateChild(tt).updateChild(en,gn):K.getNode().getImmediateChild(tt)}else Xt=ac(p,tt,a.serverCache);pe=null!=Xt?d.filter.updateChild(K.getNode(),tt,Xt,en,w,P):K.getNode()}}return qt(a,pe,K.isFullyInitialized()||V(c),d.filter.filtersNodes())}}function uo(d,a,c,p,w,P,K,pe){const Le=a.serverCache;let tt;const en=K?d.filter:d.filter.getIndexedFilter();if(V(c))tt=en.updateFullNode(Le.getNode(),p,null);else if(en.filtersNodes()&&!Le.isFiltered()){const sr=Le.getNode().updateChild(c,p);tt=en.updateFullNode(Le.getNode(),sr,null)}else{const sr=Sr(c);if(!Le.isCompleteForPath(c)&&os(c)>1)return a;const Tr=ci(c),po=Le.getNode().getImmediateChild(sr).updateChild(Tr,p);tt=".priority"===sr?en.updatePriority(Le.getNode(),po):en.updateChild(Le.getNode(),sr,po,Tr,Ko,null)}const Xt=Wn(a,tt,Le.isFullyInitialized()||V(c),en.filtersNodes());return va(d,Xt,c,w,new Zo(w,Xt,P),pe)}function fs(d,a,c,p,w,P,K){const pe=a.eventCache;let Le,tt;const en=new Zo(w,a,P);if(V(c))tt=d.filter.updateFullNode(a.eventCache.getNode(),p,K),Le=qt(a,tt,!0,d.filter.filtersNodes());else{const Xt=Sr(c);if(".priority"===Xt)tt=d.filter.updatePriority(a.eventCache.getNode(),p),Le=qt(a,tt,pe.isFullyInitialized(),pe.isFiltered());else{const gn=ci(c),sr=pe.getNode().getImmediateChild(Xt);let Tr;if(V(gn))Tr=p;else{const Ui=en.getCompleteChild(Xt);Tr=null!=Ui?".priority"===As(gn)&&Ui.getChild(H(gn)).isEmpty()?Ui:Ui.updateChild(gn,p):cn.EMPTY_NODE}Le=sr.equals(Tr)?a:qt(a,d.filter.updateChild(pe.getNode(),Xt,Tr,gn,en,K),pe.isFullyInitialized(),d.filter.filtersNodes())}}return Le}function qo(d,a){return d.eventCache.isCompleteForChild(a)}function Vl(d,a,c){return c.foreach((p,w)=>{a=a.updateChild(p,w)}),a}function Ma(d,a,c,p,w,P,K,pe){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let tt,Le=a;tt=V(c)?p:new ni(null).setTree(c,p);const en=a.serverCache.getNode();return tt.children.inorderTraversal((Xt,gn)=>{if(en.hasChild(Xt)){const Tr=Vl(0,a.serverCache.getNode().getImmediateChild(Xt),gn);Le=uo(d,Le,new fr(Xt),Tr,w,P,K,pe)}}),tt.children.inorderTraversal((Xt,gn)=>{const sr=!a.serverCache.isCompleteForChild(Xt)&&null===gn.value;if(!en.hasChild(Xt)&&!sr){const Ui=Vl(0,a.serverCache.getNode().getImmediateChild(Xt),gn);Le=uo(d,Le,new fr(Xt),Ui,w,P,K,pe)}}),Le}class lc{constructor(a,c){this.query_=a,this.eventRegistrations_=[];const p=this.query_._queryParams,w=new ls(p.getIndex()),P=function lo(d){return d.loadsAllData()?new ls(d.getIndex()):d.hasLimit()?new Oo(d):new ki(d)}(p);this.processor_=function Ul(d){return{filter:d}}(P);const K=c.serverCache,pe=c.eventCache,Le=w.updateFullNode(cn.EMPTY_NODE,K.getNode(),null),tt=P.updateFullNode(cn.EMPTY_NODE,pe.getNode(),null),en=new D(Le,K.isFullyInitialized(),w.filtersNodes()),Xt=new D(tt,pe.isFullyInitialized(),P.filtersNodes());this.viewCache_=st(Xt,en),this.eventGenerator_=new T(this.query_)}get query(){return this.query_}}function Qo(d,a){const c=ar(d.viewCache_);return c&&(d.query._queryParams.loadsAllData()||!V(a)&&!c.getImmediateChild(Sr(a)).isEmpty())?c.getChild(a):null}function jo(d){return 0===d.eventRegistrations_.length}function Ya(d,a,c){const p=[];if(c){(0,De.hu)(null==a,"A cancel should cancel all event registrations.");const w=d.query._path;d.eventRegistrations_.forEach(P=>{const K=P.createCancelEvent(c,w);K&&p.push(K)})}if(a){let w=[];for(let P=0;P<d.eventRegistrations_.length;++P){const K=d.eventRegistrations_[P];if(K.matches(a)){if(a.hasAnyCallback()){w=w.concat(d.eventRegistrations_.slice(P+1));break}}else w.push(K)}d.eventRegistrations_=w}else d.eventRegistrations_=[];return p}function Oa(d,a,c,p){a.type===co.MERGE&&null!==a.source.queryId&&((0,De.hu)(ar(d.viewCache_),"We should always have a full cache before handling merges"),(0,De.hu)(Yr(d.viewCache_),"Missing event cache, even though we have a server cache"));const w=d.viewCache_,P=function Vo(d,a,c,p,w){const P=new Ms;let K,pe;if(c.type===co.OVERWRITE){const tt=c;tt.source.fromUser?K=fs(d,a,tt.path,tt.snap,p,w,P):((0,De.hu)(tt.source.fromServer,"Unknown source."),pe=tt.source.tagged||a.serverCache.isFiltered()&&!V(tt.path),K=uo(d,a,tt.path,tt.snap,p,w,pe,P))}else if(c.type===co.MERGE){const tt=c;tt.source.fromUser?K=function yl(d,a,c,p,w,P,K){let pe=a;return p.foreach((Le,tt)=>{const en=fe(c,Le);qo(a,Sr(en))&&(pe=fs(d,pe,en,tt,w,P,K))}),p.foreach((Le,tt)=>{const en=fe(c,Le);qo(a,Sr(en))||(pe=fs(d,pe,en,tt,w,P,K))}),pe}(d,a,tt.path,tt.children,p,w,P):((0,De.hu)(tt.source.fromServer,"Unknown source."),pe=tt.source.tagged||a.serverCache.isFiltered(),K=Ma(d,a,tt.path,tt.children,p,w,pe,P))}else if(c.type===co.ACK_USER_WRITE){const tt=c;K=tt.revert?function vl(d,a,c,p,w,P){let K;if(null!=la(p,c))return a;{const pe=new Zo(p,a,w),Le=a.eventCache.getNode();let tt;if(V(c)||".priority"===Sr(c)){let en;if(a.serverCache.isFullyInitialized())en=Aa(p,ar(a));else{const Xt=a.serverCache.getNode();(0,De.hu)(Xt instanceof cn,"serverChildren would be complete if leaf node"),en=Ra(p,Xt)}en=en,tt=d.filter.updateFullNode(Le,en,P)}else{const en=Sr(c);let Xt=ac(p,en,a.serverCache);null==Xt&&a.serverCache.isCompleteForChild(en)&&(Xt=Le.getImmediateChild(en)),tt=null!=Xt?d.filter.updateChild(Le,en,Xt,ci(c),pe,P):a.eventCache.getNode().hasChild(en)?d.filter.updateChild(Le,en,cn.EMPTY_NODE,ci(c),pe,P):Le,tt.isEmpty()&&a.serverCache.isFullyInitialized()&&(K=Aa(p,ar(a)),K.isLeafNode()&&(tt=d.filter.updateFullNode(tt,K,P)))}return K=a.serverCache.isFullyInitialized()||null!=la(p,Br()),qt(a,tt,K,d.filter.filtersNodes())}}(d,a,tt.path,p,w,P):function qa(d,a,c,p,w,P,K){if(null!=la(w,c))return a;const pe=a.serverCache.isFiltered(),Le=a.serverCache;if(null!=p.value){if(V(c)&&Le.isFullyInitialized()||Le.isCompleteForPath(c))return uo(d,a,c,Le.getNode().getChild(c),w,P,pe,K);if(V(c)){let tt=new ni(null);return Le.getNode().forEachChild(an,(en,Xt)=>{tt=tt.set(new fr(en),Xt)}),Ma(d,a,c,tt,w,P,pe,K)}return a}{let tt=new ni(null);return p.foreach((en,Xt)=>{const gn=fe(c,en);Le.isCompleteForPath(gn)&&(tt=tt.set(en,Le.getNode().getChild(gn)))}),Ma(d,a,c,tt,w,P,pe,K)}}(d,a,tt.path,tt.affectedTree,p,w,P)}else{if(c.type!==co.LISTEN_COMPLETE)throw(0,De.g5)("Unknown operation type: "+c.type);K=function ca(d,a,c,p,w){const P=a.serverCache;return va(d,Wn(a,P.getNode(),P.isFullyInitialized()||V(c),P.isFiltered()),c,p,Ko,w)}(d,a,c.path,p,P)}const Le=P.getChanges();return function Bl(d,a,c){const p=a.eventCache;if(p.isFullyInitialized()){const w=p.getNode().isLeafNode()||p.getNode().isEmpty(),P=Yr(d);(c.length>0||!d.eventCache.isFullyInitialized()||w&&!p.getNode().equals(P)||!p.getNode().getPriority().equals(P.getPriority()))&&c.push(qi(Yr(a)))}}(a,K,Le),{viewCache:K,changes:Le}}(d.processor_,w,a,c,p);return function Po(d,a){(0,De.hu)(a.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,De.hu)(a.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,P.viewCache),(0,De.hu)(P.viewCache.serverCache.isFullyInitialized()||!w.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=P.viewCache,Ea(d,P.changes,P.viewCache.eventCache.getNode(),null)}function Ea(d,a,c,p){return function j(d,a,c,p){const w=[],P=[];return a.forEach(K=>{"child_changed"===K.type&&d.index_.indexedValueChanged(K.oldSnap,K.snapshotNode)&&P.push(function Si(d,a){return{type:"child_moved",snapshotNode:a,childName:d}}(K.childName,K.snapshotNode))}),Q(d,w,"child_removed",a,p,c),Q(d,w,"child_added",a,p,c),Q(d,w,"child_moved",P,p,c),Q(d,w,"child_changed",a,p,c),Q(d,w,"value",a,p,c),w}(d.eventGenerator_,a,c,p?[p]:d.eventRegistrations_)}let jl,Ho;class F{constructor(){this.views=new Map}}function Ct(d,a,c,p){const w=a.source.queryId;if(null!==w){const P=d.views.get(w);return(0,De.hu)(null!=P,"SyncTree gave us an op for an invalid query."),Oa(P,a,c,p)}{let P=[];for(const K of d.views.values())P=P.concat(Oa(K,a,c,p));return P}}function $t(d,a,c,p,w){const K=d.views.get(a._queryIdentifier);if(!K){let pe=Aa(c,w?p:null),Le=!1;pe?Le=!0:p instanceof cn?(pe=Ra(c,p),Le=!1):(pe=cn.EMPTY_NODE,Le=!1);const tt=st(new D(pe,Le,!1),new D(p,w,!1));return new lc(a,tt)}return K}function Er(d){const a=[];for(const c of d.views.values())c.query._queryParams.loadsAllData()||a.push(c);return a}function pr(d,a){let c=null;for(const p of d.views.values())c=c||Qo(p,a);return c}function ei(d,a){return a._queryParams.loadsAllData()?_s(d):d.views.get(a._queryIdentifier)}function $r(d,a){return null!=ei(d,a)}function Cs(d){return null!=_s(d)}function _s(d){for(const a of d.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let ho=1;class ua{constructor(a){this.listenProvider_=a,this.syncPointTree_=new ni(null),this.pendingWriteTree_=function Ll(){return{visibleWrites:ds.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function El(d,a,c,p,w){return function So(d,a,c,p,w){(0,De.hu)(p>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===w&&(w=!0),d.allWrites.push({path:a,snap:c,writeId:p,visible:w}),w&&(d.visibleWrites=ms(d.visibleWrites,a,c)),d.lastWriteId=p}(d.pendingWriteTree_,a,c,p,w),w?tl(d,new xo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,c)):[]}function Ia(d,a,c=!1){const p=function Us(d,a){for(let c=0;c<d.allWrites.length;c++){const p=d.allWrites[c];if(p.writeId===a)return p}return null}(d.pendingWriteTree_,a);if(function ml(d,a){const c=d.allWrites.findIndex(pe=>pe.writeId===a);(0,De.hu)(c>=0,"removeWrite called with nonexistent writeId.");const p=d.allWrites[c];d.allWrites.splice(c,1);let w=p.visible,P=!1,K=d.allWrites.length-1;for(;w&&K>=0;){const pe=d.allWrites[K];pe.visible&&(K>=c&&Ka(pe,p.path)?w=!1:Kt(p.path,pe.path)&&(P=!0)),K--}return!!w&&(P?(function gd(d){d.visibleWrites=Mi(d.allWrites,Sc,Br()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(p.snap?d.visibleWrites=Bo(d.visibleWrites,p.path):ae(p.children,Le=>{d.visibleWrites=Bo(d.visibleWrites,fe(p.path,Le))}),!0))}(d.pendingWriteTree_,a)){let P=new ni(null);return null!=p.snap?P=P.set(Br(),!0):ae(p.children,K=>{P=P.set(new fr(K),!0)}),tl(d,new Or(p.path,P,c))}return[]}function ts(d,a,c){return tl(d,new xo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,c))}function Ja(d,a,c,p,w=!1){const P=a._path,K=d.syncPointTree_.get(P);let pe=[];if(K&&("default"===a._queryIdentifier||$r(K,a))){const Le=function cr(d,a,c,p){const w=a._queryIdentifier,P=[];let K=[];const pe=Cs(d);if("default"===w)for(const[Le,tt]of d.views.entries())K=K.concat(Ya(tt,c,p)),jo(tt)&&(d.views.delete(Le),tt.query._queryParams.loadsAllData()||P.push(tt.query));else{const Le=d.views.get(w);Le&&(K=K.concat(Ya(Le,c,p)),jo(Le)&&(d.views.delete(w),Le.query._queryParams.loadsAllData()||P.push(Le.query)))}return pe&&!Cs(d)&&P.push(new(function me(){return(0,De.hu)(jl,"Reference.ts has not been loaded"),jl}())(a._repo,a._path)),{removed:P,events:K}}(K,a,c,p);(function je(d){return 0===d.views.size})(K)&&(d.syncPointTree_=d.syncPointTree_.remove(P));const tt=Le.removed;if(pe=Le.events,!w){const en=-1!==tt.findIndex(gn=>gn._queryParams.loadsAllData()),Xt=d.syncPointTree_.findOnPath(P,(gn,sr)=>Cs(sr));if(en&&!Xt){const gn=d.syncPointTree_.subtree(P);if(!gn.isEmpty()){const sr=function Hl(d){return d.fold((a,c,p)=>{if(c&&Cs(c))return[_s(c)];{let w=[];return c&&(w=Er(c)),ae(p,(P,K)=>{w=w.concat(K)}),w}})}(gn);for(let Tr=0;Tr<sr.length;++Tr){const Ui=sr[Tr],po=Ui.query,ul=nl(d,Ui);d.listenProvider_.startListening(ha(po),xa(d,po),ul.hashFn,ul.onComplete)}}}!Xt&&tt.length>0&&!p&&(en?d.listenProvider_.stopListening(ha(a),null):tt.forEach(gn=>{const sr=d.queryToTagMap.get(da(gn));d.listenProvider_.stopListening(ha(gn),sr)}))}!function zu(d,a){for(let c=0;c<a.length;++c){const p=a[c];if(!p._queryParams.loadsAllData()){const w=da(p),P=d.queryToTagMap.get(w);d.queryToTagMap.delete(w),d.tagToQueryMap.delete(P)}}}(d,tt)}return pe}function el(d,a,c,p){const w=ou(d,p);if(null!=w){const P=au(w),K=P.path,pe=P.queryId,Le=Ee(K,a);return Pa(d,K,new xo(Ji(pe),Le,c))}return[]}function Bs(d,a,c,p=!1){const w=a._path;let P=null,K=!1;d.syncPointTree_.foreachOnPath(w,(gn,sr)=>{const Tr=Ee(gn,w);P=P||pr(sr,Tr),K=K||Cs(sr)});let Le,pe=d.syncPointTree_.get(w);pe?(K=K||Cs(pe),P=P||pr(pe,Br())):(pe=new F,d.syncPointTree_=d.syncPointTree_.set(w,pe)),null!=P?Le=!0:(Le=!1,P=cn.EMPTY_NODE,d.syncPointTree_.subtree(w).foreachChild((sr,Tr)=>{const Ui=pr(Tr,Br());Ui&&(P=P.updateImmediateChild(sr,Ui))}));const tt=$r(pe,a);if(!tt&&!a._queryParams.loadsAllData()){const gn=da(a);(0,De.hu)(!d.queryToTagMap.has(gn),"View does not exist, but we have a tag");const sr=function lu(){return ho++}();d.queryToTagMap.set(gn,sr),d.tagToQueryMap.set(sr,gn)}let Xt=function dn(d,a,c,p,w,P){const K=$t(d,a,p,w,P);return d.views.has(a._queryIdentifier)||d.views.set(a._queryIdentifier,K),function _d(d,a){d.eventRegistrations_.push(a)}(K,c),function Qa(d,a){const c=d.viewCache_.eventCache,p=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(C,(P,K)=>{p.push(as(P,K))}),c.isFullyInitialized()&&p.push(qi(c.getNode())),Ea(d,p,c.getNode(),a)}(K,c)}(pe,a,c,no(d.pendingWriteTree_,w),P,Le);if(!tt&&!K&&!p){const gn=ei(pe,a);Xt=Xt.concat(function Ac(d,a,c){const p=a._path,w=xa(d,a),P=nl(d,c),K=d.listenProvider_.startListening(ha(a),w,P.hashFn,P.onComplete),pe=d.syncPointTree_.subtree(p);if(w)(0,De.hu)(!Cs(pe.value),"If we're adding a query, it shouldn't be shadowed");else{const Le=pe.fold((tt,en,Xt)=>{if(!V(tt)&&en&&Cs(en))return[_s(en).query];{let gn=[];return en&&(gn=gn.concat(Er(en).map(sr=>sr.query))),ae(Xt,(sr,Tr)=>{gn=gn.concat(Tr)}),gn}});for(let tt=0;tt<Le.length;++tt){const en=Le[tt];d.listenProvider_.stopListening(ha(en),xa(d,en))}}return K}(d,a,gn))}return Xt}function dc(d,a,c){const w=d.pendingWriteTree_,P=d.syncPointTree_.findOnPath(a,(K,pe)=>{const tt=pr(pe,Ee(K,a));if(tt)return tt});return nu(w,a,P,c,!0)}function tl(d,a){return su(a,d.syncPointTree_,null,no(d.pendingWriteTree_,Br()))}function su(d,a,c,p){if(V(d.path))return bl(d,a,c,p);{const w=a.get(Br());null==c&&null!=w&&(c=pr(w,Br()));let P=[];const K=Sr(d.path),pe=d.operationForChild(K),Le=a.children.get(K);if(Le&&pe){const tt=c?c.getImmediateChild(K):null,en=Rs(p,K);P=P.concat(su(pe,Le,tt,en))}return w&&(P=P.concat(Ct(w,d,p,c))),P}}function bl(d,a,c,p){const w=a.get(Br());null==c&&null!=w&&(c=pr(w,Br()));let P=[];return a.children.inorderTraversal((K,pe)=>{const Le=c?c.getImmediateChild(K):null,tt=Rs(p,K),en=d.operationForChild(K);en&&(P=P.concat(bl(en,pe,Le,tt)))}),w&&(P=P.concat(Ct(w,d,p,c))),P}function nl(d,a){const c=a.query,p=xa(d,c);return{hashFn:()=>(function cc(d){return d.viewCache_.serverCache.getNode()}(a)||cn.EMPTY_NODE).hash(),onComplete:w=>{if("ok"===w)return p?function Ni(d,a,c){const p=ou(d,c);if(p){const w=au(p),P=w.path,K=w.queryId,pe=Ee(P,a);return Pa(d,P,new Zs(Ji(K),pe))}return[]}(d,c._path,p):function vo(d,a){return tl(d,new Zs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(d,c._path);{const P=function un(d,a){let c="Unknown Error";"too_big"===d?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?c="Client doesn't have permission to access the desired data.":"unavailable"===d&&(c="The service is unavailable");const p=new Error(d+" at "+a._path.toString()+": "+c);return p.code=d.toUpperCase(),p}(w,c);return Ja(d,c,null,P)}}}}function xa(d,a){const c=da(a);return d.queryToTagMap.get(c)}function da(d){return d._path.toString()+"$"+d._queryIdentifier}function ou(d,a){return d.tagToQueryMap.get(a)}function au(d){const a=d.indexOf("$");return(0,De.hu)(-1!==a&&a<d.length-1,"Bad queryKey."),{queryId:d.substr(a+1),path:new fr(d.substr(0,a))}}function Pa(d,a,c){const p=d.syncPointTree_.get(a);return(0,De.hu)(p,"Missing sync point for query tag that we're tracking"),Ct(p,c,no(d.pendingWriteTree_,a),null)}function ha(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new(function wa(){return(0,De.hu)(Ho,"Reference.ts has not been loaded"),Ho}())(d._repo,d._path):d}class Ca{constructor(a){this.node_=a}getImmediateChild(a){const c=this.node_.getImmediateChild(a);return new Ca(c)}node(){return this.node_}}class ka{constructor(a,c){this.syncTree_=a,this.path_=c}getImmediateChild(a){const c=fe(this.path_,a);return new ka(this.syncTree_,c)}node(){return dc(this.syncTree_,this.path_)}}const cu=function(d,a,c){return d&&"object"==typeof d?((0,De.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?uu(d[".sv"],a,c):"object"==typeof d[".sv"]?Rc(d[".sv"],a):void(0,De.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},uu=function(d,a,c){if("timestamp"===d)return c.timestamp;(0,De.hu)(!1,"Unexpected server value: "+d)},Rc=function(d,a,c){d.hasOwnProperty("increment")||(0,De.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const p=d.increment;"number"!=typeof p&&(0,De.hu)(!1,"Unexpected increment value: "+p);const w=a.node();if((0,De.hu)(null!=w,"Expected ChildrenNode.EMPTY_NODE for nulls"),!w.isLeafNode())return p;const K=w.getValue();return"number"!=typeof K?p:K+p},Jo=function(d,a,c,p){return Fa(a,new ka(c,d),p)},Na=function(d,a,c){return Fa(d,new Ca(a),c)};function Fa(d,a,c){const p=d.getPriority().val(),w=cu(p,a.getImmediateChild(".priority"),c);let P;if(d.isLeafNode()){const K=d,pe=cu(K.getValue(),a,c);return pe!==K.getValue()||w!==K.getPriority().val()?new hi(pe,Hn(w)):d}{const K=d;return P=K,w!==K.getPriority().val()&&(P=P.updatePriority(new hi(w))),K.forEachChild(C,(pe,Le)=>{const tt=Fa(Le,a.getImmediateChild(pe),c);tt!==Le&&(P=P.updateImmediateChild(pe,tt))}),P}}class du{constructor(a="",c=null,p={children:{},childCount:0}){this.name=a,this.parent=c,this.node=p}}function hc(d,a){let c=a instanceof fr?a:new fr(a),p=d,w=Sr(c);for(;null!==w;){const P=(0,De.DV)(p.node.children,w)||{children:{},childCount:0};p=new du(w,p,P),c=ci(c),w=Sr(c)}return p}function $l(d){return d.node.value}function fc(d,a){d.node.value=a,Gl(d)}function Ku(d){return d.node.childCount>0}function wl(d,a){ae(d.node.children,(c,p)=>{a(new du(c,d,p))})}function yd(d,a,c,p){c&&!p&&a(d),wl(d,w=>{yd(w,a,!0,p)}),c&&p&&a(d)}function pc(d){return new fr(null===d.parent?d.name:pc(d.parent)+"/"+d.name)}function Gl(d){null!==d.parent&&function Wl(d,a,c){const p=function hu(d){return void 0===$l(d)&&!Ku(d)}(c),w=(0,De.r3)(d.node.children,a);p&&w?(delete d.node.children[a],d.node.childCount--,Gl(d)):!p&&!w&&(d.node.children[a]=c.node,d.node.childCount++,Gl(d))}(d.parent,d.name,d)}const zl=/[\[\].#$\/\u0000-\u001F\u007F]/,Il=/[\[\].#$\u0000-\u001F\u007F]/,ea=10485760,A=function(d){return"string"==typeof d&&0!==d.length&&!zl.test(d)},_=function(d){return"string"==typeof d&&0!==d.length&&!Il.test(d)},M=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!q(d)||d&&"object"==typeof d&&(0,De.r3)(d,".sv")},ge=function(d,a,c,p){p&&void 0===a||Pe((0,De.gK)(d,"value"),a,c)},Pe=function(d,a,c){const p=c instanceof fr?new zn(c,d):c;if(void 0===a)throw new Error(d+"contains undefined "+Vr(p));if("function"==typeof a)throw new Error(d+"contains a function "+Vr(p)+" with contents = "+a.toString());if(q(a))throw new Error(d+"contains "+a.toString()+" "+Vr(p));if("string"==typeof a&&a.length>ea/3&&(0,De.ug)(a)>ea)throw new Error(d+"contains a string greater than "+ea+" utf8 bytes "+Vr(p)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let w=!1,P=!1;if(ae(a,(K,pe)=>{if(".value"===K)w=!0;else if(".priority"!==K&&".sv"!==K&&(P=!0,!A(K)))throw new Error(d+" contains an invalid key ("+K+") "+Vr(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Pr(d,a){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(a),d.byteLength_+=(0,De.ug)(a),Lr(d)})(p,K),Pe(d,pe,p),function ri(d){const a=d.parts_.pop();d.byteLength_-=(0,De.ug)(a),d.parts_.length>0&&(d.byteLength_-=1)}(p)}),w&&P)throw new Error(d+' contains ".value" child '+Vr(p)+" in addition to actual children.")}},bn=function(d,a,c,p){if(p&&void 0===a)return;const w=(0,De.gK)(d,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(w+" must be an object containing the children to replace.");const P=[];ae(a,(K,pe)=>{const Le=new fr(K);if(Pe(w,pe,fe(c,Le)),".priority"===As(Le)&&!M(pe))throw new Error(w+"contains an invalid value for '"+Le.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");P.push(Le)}),function(d,a){let c,p;for(c=0;c<a.length;c++){p=a[c];const P=gi(p);for(let K=0;K<P.length;K++)if((".priority"!==P[K]||K!==P.length-1)&&!A(P[K]))throw new Error(d+"contains an invalid key ("+P[K]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(ot);let w=null;for(c=0;c<a.length;c++){if(p=a[c],null!==w&&Kt(w,p))throw new Error(d+"contains a path "+w.toString()+" that is ancestor of another path "+p.toString());w=p}}(w,P)},Xn=function(d,a,c){if(!c||void 0!==a){if(q(a))throw new Error((0,De.gK)(d,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!M(a))throw new Error((0,De.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yr=function(d,a,c,p){if(!(p&&void 0===c||A(c)))throw new Error((0,De.gK)(d,a)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},oi=function(d,a,c,p){if(!(p&&void 0===c||_(c)))throw new Error((0,De.gK)(d,a)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Os=function(d,a){if(".info"===Sr(a))throw new Error(d+" failed = Can't modify data under /.info/")},La=function(d,a){const c=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!A(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==c.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),_(d)}(c))throw new Error((0,De.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rl{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ta(d,a){let c=null;for(let p=0;p<a.length;p++){const w=a[p],P=w.getPath();null!==c&&!Wt(P,c.path)&&(d.eventLists_.push(c),c=null),null===c&&(c={events:[],path:P}),c.events.push(w)}c&&d.eventLists_.push(c)}function Mc(d,a,c){ta(d,c),Kl(d,p=>Wt(p,a))}function Ao(d,a,c){ta(d,c),Kl(d,p=>Kt(p,a)||Kt(a,p))}function Kl(d,a){d.recursionDepth_++;let c=!0;for(let p=0;p<d.eventLists_.length;p++){const w=d.eventLists_[p];w&&(a(w.path)?(il(d.eventLists_[p]),d.eventLists_[p]=null):c=!1)}c&&(d.eventLists_=[]),d.recursionDepth_--}function il(d){for(let a=0;a<d.events.length;a++){const c=d.events[a];if(null!==c){d.events[a]=null;const p=c.getEventRunner();lr&&dt("event: "+c.toString()),xr(p)}}}const Zl="repo_interrupt";class ui{constructor(a,c,p,w){this.repoInfo_=a,this.forceRestClient_=c,this.authTokenProvider_=p,this.appCheckProvider_=w,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lt(),this.transactionQueueTree_=new du,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Zu(d){const c=d.infoData_.getNode(new fr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function Ua(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:Zu(d)})}function Ba(d,a,c,p,w){d.dataUpdateCount++;const P=new fr(a);c=d.interceptServerDataCallback_?d.interceptServerDataCallback_(a,c):c;let K=[];if(w)if(p){const Le=(0,De.UI)(c,tt=>Hn(tt));K=function Xo(d,a,c,p){const w=ou(d,p);if(w){const P=au(w),K=P.path,pe=P.queryId,Le=Ee(K,a),tt=ni.fromObject(c);return Pa(d,K,new x(Ji(pe),Le,tt))}return[]}(d.serverSyncTree_,P,Le,w)}else{const Le=Hn(c);K=el(d.serverSyncTree_,P,Le,w)}else if(p){const Le=(0,De.UI)(c,tt=>Hn(tt));K=function uc(d,a,c){const p=ni.fromObject(c);return tl(d,new x({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,p))}(d.serverSyncTree_,P,Le)}else{const Le=Hn(c);K=ts(d.serverSyncTree_,P,Le)}let pe=P;K.length>0&&(pe=fu(d,P)),Ao(d.eventQueue_,pe,K)}function rf(d,a){Ed(d,"connected",a),!1===a&&function ql(d){Oc(d,"onDisconnectEvents");const a=Ua(d),c=Lt();Sa(d.onDisconnect_,Br(),(w,P)=>{const K=Jo(w,P,d.serverSyncTree_,a);Jt(c,w,K)});let p=[];Sa(c,Br(),(w,P)=>{p=p.concat(ts(d.serverSyncTree_,w,P));const K=lh(d,w);fu(d,K)}),d.onDisconnect_=Lt(),Ao(d.eventQueue_,Br(),p)}(d)}function Ed(d,a,c){const p=new fr("/.info/"+a),w=Hn(c);d.infoData_.updateSnapshot(p,w);const P=ts(d.infoSyncTree_,p,w);Ao(d.eventQueue_,p,P)}function gc(d){return d.nextWriteId_++}function sl(d,a,c,p,w){Oc(d,"set",{path:a.toString(),value:c,priority:p});const P=Ua(d),K=Hn(c,p),pe=dc(d.serverSyncTree_,a),Le=Na(K,pe,P),tt=gc(d),en=El(d.serverSyncTree_,a,Le,tt,!0);ta(d.eventQueue_,en),d.server_.put(a.toString(),K.val(!0),(gn,sr)=>{const Tr="ok"===gn;Tr||N("set at "+a+" failed: "+gn);const Ui=Ia(d.serverSyncTree_,tt,!Tr);Ao(d.eventQueue_,a,Ui),Cl(0,w,gn,sr)});const Xt=lh(d,a);fu(d,Xt),Ao(d.eventQueue_,Xt,[])}function na(d,a,c){d.server_.onDisconnectCancel(a.toString(),(p,w)=>{"ok"===p&&Xi(d.onDisconnect_,a),Cl(0,c,p,w)})}function bd(d,a,c,p){const w=Hn(c);d.server_.onDisconnectPut(a.toString(),w.val(!0),(P,K)=>{"ok"===P&&Jt(d.onDisconnect_,a,w),Cl(0,p,P,K)})}function ol(d,a,c){let p;p=".info"===Sr(a._path)?Ja(d.infoSyncTree_,a,c):Ja(d.serverSyncTree_,a,c),Mc(d.eventQueue_,a._path,p)}function mc(d){d.persistentConnection_&&d.persistentConnection_.interrupt(Zl)}function Oc(d,...a){let c="";d.persistentConnection_&&(c=d.persistentConnection_.id+":"),dt(c,...a)}function Cl(d,a,c,p){a&&xr(()=>{if("ok"===c)a(null);else{const w=(c||"error").toUpperCase();let P=w;p&&(P+=": "+p);const K=new Error(P);K.code=w,a(K)}})}function Id(d,a,c){return dc(d.serverSyncTree_,a,c)||cn.EMPTY_NODE}function qu(d,a=d.transactionQueueTree_){if(a||Pc(d,a),$l(a)){const c=cf(d,a);(0,De.hu)(c.length>0,"Sending zero length transaction queue"),c.every(w=>0===w.status)&&function ah(d,a,c){const p=c.map(tt=>tt.currentWriteId),w=Id(d,a,p);let P=w;const K=w.hash();for(let tt=0;tt<c.length;tt++){const en=c[tt];(0,De.hu)(0===en.status,"tryToSendTransactionQueue_: items in queue should all be run."),en.status=1,en.retryCount++;const Xt=Ee(a,en.path);P=P.updateChild(Xt,en.currentOutputSnapshotRaw)}const pe=P.val(!0),Le=a;d.server_.put(Le.toString(),pe,tt=>{Oc(d,"transaction put response",{path:Le.toString(),status:tt});let en=[];if("ok"===tt){const Xt=[];for(let gn=0;gn<c.length;gn++)c[gn].status=2,en=en.concat(Ia(d.serverSyncTree_,c[gn].currentWriteId)),c[gn].onComplete&&Xt.push(()=>c[gn].onComplete(null,!0,c[gn].currentOutputSnapshotResolved)),c[gn].unwatcher();Pc(d,hc(d.transactionQueueTree_,a)),qu(d,d.transactionQueueTree_),Ao(d.eventQueue_,a,en);for(let gn=0;gn<Xt.length;gn++)xr(Xt[gn])}else{if("datastale"===tt)for(let Xt=0;Xt<c.length;Xt++)c[Xt].status=3===c[Xt].status?4:0;else{N("transaction at "+Le.toString()+" failed: "+tt);for(let Xt=0;Xt<c.length;Xt++)c[Xt].status=4,c[Xt].abortReason=tt}fu(d,a)}},K)}(d,pc(a),c)}else Ku(a)&&wl(a,c=>{qu(d,c)})}function fu(d,a){const c=Cd(d,a),p=pc(c);return function yp(d,a,c){if(0===a.length)return;const p=[];let w=[];const K=a.filter(pe=>0===pe.status).map(pe=>pe.currentWriteId);for(let pe=0;pe<a.length;pe++){const Le=a[pe],tt=Ee(c,Le.path);let Xt,en=!1;if((0,De.hu)(null!==tt,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Le.status)en=!0,Xt=Le.abortReason,w=w.concat(Ia(d.serverSyncTree_,Le.currentWriteId,!0));else if(0===Le.status)if(Le.retryCount>=25)en=!0,Xt="maxretry",w=w.concat(Ia(d.serverSyncTree_,Le.currentWriteId,!0));else{const gn=Id(d,Le.path,K);Le.currentInputSnapshot=gn;const sr=a[pe].update(gn.val());if(void 0!==sr){Pe("transaction failed: Data returned ",sr,Le.path);let Tr=Hn(sr);"object"==typeof sr&&null!=sr&&(0,De.r3)(sr,".priority")||(Tr=Tr.updatePriority(gn.getPriority()));const po=Le.currentWriteId,ul=Ua(d),ec=Na(Tr,gn,ul);Le.currentOutputSnapshotRaw=Tr,Le.currentOutputSnapshotResolved=ec,Le.currentWriteId=gc(d),K.splice(K.indexOf(po),1),w=w.concat(El(d.serverSyncTree_,Le.path,ec,Le.currentWriteId,Le.applyLocally)),w=w.concat(Ia(d.serverSyncTree_,po,!0))}else en=!0,Xt="nodata",w=w.concat(Ia(d.serverSyncTree_,Le.currentWriteId,!0))}Ao(d.eventQueue_,c,w),w=[],en&&(a[pe].status=2,setTimeout(a[pe].unwatcher,Math.floor(0)),a[pe].onComplete&&p.push("nodata"===Xt?()=>a[pe].onComplete(null,!1,a[pe].currentInputSnapshot):()=>a[pe].onComplete(new Error(Xt),!1,null)))}Pc(d,d.transactionQueueTree_);for(let pe=0;pe<p.length;pe++)xr(p[pe]);qu(d,d.transactionQueueTree_)}(d,cf(d,c),p),p}function Cd(d,a){let c,p=d.transactionQueueTree_;for(c=Sr(a);null!==c&&void 0===$l(p);)p=hc(p,c),c=Sr(a=ci(a));return p}function cf(d,a){const c=[];return xc(d,a,c),c.sort((p,w)=>p.order-w.order),c}function xc(d,a,c){const p=$l(a);if(p)for(let w=0;w<p.length;w++)c.push(p[w]);wl(a,w=>{xc(d,w,c)})}function Pc(d,a){const c=$l(a);if(c){let p=0;for(let w=0;w<c.length;w++)2!==c[w].status&&(c[p]=c[w],p++);c.length=p,fc(a,c.length>0?c:void 0)}wl(a,p=>{Pc(d,p)})}function lh(d,a){const c=pc(Cd(d,a)),p=hc(d.transactionQueueTree_,a);return function oh(d,a,c){let p=c?d:d.parent;for(;null!==p;){if(a(p))return!0;p=p.parent}}(p,w=>{Vs(d,w)}),Vs(d,p),yd(p,w=>{Vs(d,w)}),c}function Vs(d,a){const c=$l(a);if(c){const p=[];let w=[],P=-1;for(let K=0;K<c.length;K++)3===c[K].status||(1===c[K].status?((0,De.hu)(P===K-1,"All SENT items should be at beginning of queue."),P=K,c[K].status=3,c[K].abortReason="set"):((0,De.hu)(0===c[K].status,"Unexpected transaction status in abort"),c[K].unwatcher(),w=w.concat(Ia(d.serverSyncTree_,c[K].currentWriteId,!0)),c[K].onComplete&&p.push(c[K].onComplete.bind(null,new Error("set"),!1,null))));-1===P?fc(a,void 0):c.length=P+1,Ao(d.eventQueue_,pc(a),w);for(let K=0;K<p.length;K++)xr(p[K])}}const kc=function(d,a){const c=Tl(d),p=c.namespace;return"firebase.com"===c.domain&&he(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==c.domain&&he("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&N("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Wr(c.host,c.secure,p,"ws"===c.scheme||"wss"===c.scheme,a,"",p!==c.subdomain),path:new fr(c.pathString)}},Tl=function(d){let a="",c="",p="",w="",P="",K=!0,pe="https",Le=443;if("string"==typeof d){let tt=d.indexOf("//");tt>=0&&(pe=d.substring(0,tt-1),d=d.substring(tt+2));let en=d.indexOf("/");-1===en&&(en=d.length);let Xt=d.indexOf("?");-1===Xt&&(Xt=d.length),a=d.substring(0,Math.min(en,Xt)),en<Xt&&(w=function pu(d){let a="";const c=d.split("/");for(let p=0;p<c.length;p++)if(c[p].length>0){let w=c[p];try{w=decodeURIComponent(w.replace(/\+/g," "))}catch(P){}a+="/"+w}return a}(d.substring(en,Xt)));const gn=function uf(d){const a={};"?"===d.charAt(0)&&(d=d.substring(1));for(const c of d.split("&")){if(0===c.length)continue;const p=c.split("=");2===p.length?a[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):N(`Invalid query segment '${c}' in query '${d}'`)}return a}(d.substring(Math.min(d.length,Xt)));tt=a.indexOf(":"),tt>=0?(K="https"===pe||"wss"===pe,Le=parseInt(a.substring(tt+1),10)):tt=a.length;const sr=a.slice(0,tt);if("localhost"===sr.toLowerCase())c="localhost";else if(sr.split(".").length<=2)c=sr;else{const Tr=a.indexOf(".");p=a.substring(0,Tr).toLowerCase(),c=a.substring(Tr+1),P=p}"ns"in gn&&(P=gn.ns)}return{host:a,port:Le,domain:c,subdomain:p,secure:K,scheme:pe,pathString:w,namespace:P}},Td="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",df=function(){let d=0;const a=[];return function(c){const p=c===d;let w;d=c;const P=new Array(8);for(w=7;w>=0;w--)P[w]=Td.charAt(c%64),c=Math.floor(c/64);(0,De.hu)(0===c,"Cannot push at time == 0");let K=P.join("");if(p){for(w=11;w>=0&&63===a[w];w--)a[w]=0;a[w]++}else for(w=0;w<12;w++)a[w]=Math.floor(64*Math.random());for(w=0;w<12;w++)K+=Td.charAt(a[w]);return(0,De.hu)(20===K.length,"nextPushId: Length should be 20."),K}}();class Nc{constructor(a,c,p,w){this.eventType=a,this.eventRegistration=c,this.snapshot=p,this.prevName=w}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,De.Wl)(this.snapshot.exportVal())}}class ch{constructor(a,c,p){this.eventRegistration=a,this.error=c,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Dd{constructor(a,c){this.snapshotCallback=a,this.cancelCallback=c}onValue(a,c){this.snapshotCallback.call(null,a,c)}onCancel(a){return(0,De.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class uh{constructor(a,c){this._repo=a,this._path=c}cancel(){const a=new De.BH;return na(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){Os("OnDisconnect.remove",this._path);const a=new De.BH;return bd(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){Os("OnDisconnect.set",this._path),ge("OnDisconnect.set",a,this._path,!1);const c=new De.BH;return bd(this._repo,this._path,a,c.wrapCallback(()=>{})),c.promise}setWithPriority(a,c){Os("OnDisconnect.setWithPriority",this._path),ge("OnDisconnect.setWithPriority",a,this._path,!1),Xn("OnDisconnect.setWithPriority",c,!1);const p=new De.BH;return function fi(d,a,c,p,w){const P=Hn(c,p);d.server_.onDisconnectPut(a.toString(),P.val(!0),(K,pe)=>{"ok"===K&&Jt(d.onDisconnect_,a,P),Cl(0,w,K,pe)})}(this._repo,this._path,a,c,p.wrapCallback(()=>{})),p.promise}update(a){Os("OnDisconnect.update",this._path),bn("OnDisconnect.update",a,this._path,!1);const c=new De.BH;return function af(d,a,c,p){if((0,De.xb)(c))return dt("onDisconnect().update() called with empty data.  Don't do anything."),void Cl(0,p,"ok",void 0);d.server_.onDisconnectMerge(a.toString(),c,(w,P)=>{"ok"===w&&ae(c,(K,pe)=>{const Le=Hn(pe);Jt(d.onDisconnect_,fe(a,K),Le)}),Cl(0,p,w,P)})}(this._repo,this._path,a,c.wrapCallback(()=>{})),c.promise}}class pa{constructor(a,c,p,w){this._repo=a,this._path=c,this._queryParams=p,this._orderByCalled=w}get key(){return V(this._path)?null:As(this._path)}get ref(){return new ja(this._repo,this._path)}get _queryIdentifier(){const a=Vn(this._queryParams),c=be(a);return"{}"===c?"default":c}get _queryObject(){return Vn(this._queryParams)}isEqual(a){if(!((a=(0,De.m9)(a))instanceof pa))return!1;const c=this._repo===a._repo,p=Wt(this._path,a._path);return c&&p&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Mo(d){let a="";for(let c=d.pieceNum_;c<d.pieces_.length;c++)""!==d.pieces_[c]&&(a+="/"+encodeURIComponent(String(d.pieces_[c])));return a||"/"}(this._path)}}function Sd(d,a){if(!0===d._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function Va(d){let a=null,c=null;if(d.hasStart()&&(a=d.getIndexStartValue()),d.hasEnd()&&(c=d.getIndexEndValue()),d.getIndex()===an){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",w="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==Fe)throw new Error(p);if("string"!=typeof a)throw new Error(w)}if(d.hasEnd()){if(d.getIndexEndName()!==ht)throw new Error(p);if("string"!=typeof c)throw new Error(w)}}else if(d.getIndex()===C){if(null!=a&&!M(a)||null!=c&&!M(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,De.hu)(d.getIndex()instanceof Mr||d.getIndex()===Bi,"unknown index type."),null!=a&&"object"==typeof a||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function gu(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ja extends pa{constructor(a,c){super(a,c,new xi,!1)}get parent(){const a=H(this._path);return null===a?null:new ja(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class Ta{constructor(a,c,p){this._node=a,this.ref=c,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const c=new fr(a),p=mu(this.ref,a);return new Ta(this._node.getChild(c),p,C)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,w)=>a(new Ta(w,mu(this.ref,p),C)))}hasChild(a){const c=new fr(a);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Da(d,a){return(d=(0,De.m9)(d))._checkNotDeleted("ref"),void 0!==a?mu(d._root,a):d._root}function hf(d,a){(d=(0,De.m9)(d))._checkNotDeleted("refFromURL");const c=kc(a,d._repo.repoInfo_.nodeAdmin);La("refFromURL",c);const p=c.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&p.host!==d._repo.repoInfo_.host&&he("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+d._repo.repoInfo_.host+")"),Da(d,c.path.toString())}function mu(d,a){return null===Sr((d=(0,De.m9)(d))._path)?(c=a,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),oi("child","path",c,!1)):oi("child","path",a,!1),new ja(d._repo,fe(d._path,a));var c}function Yu(d,a){d=(0,De.m9)(d),Os("set",d._path),ge("set",a,d._path,!1);const c=new De.BH;return sl(d._repo,d._path,a,null,c.wrapCallback(()=>{})),c.promise}function dh(d,a){bn("update",a,d._path,!1);const c=new De.BH;return function _p(d,a,c,p){Oc(d,"update",{path:a.toString(),value:c});let w=!0;const P=Ua(d),K={};if(ae(c,(pe,Le)=>{w=!1,K[pe]=Jo(fe(a,pe),Hn(Le),d.serverSyncTree_,P)}),w)dt("update() called with empty data.  Don't do anything."),Cl(0,p,"ok",void 0);else{const pe=gc(d),Le=function Xa(d,a,c,p){!function za(d,a,c,p){(0,De.hu)(p>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:a,children:c,writeId:p,visible:!0}),d.visibleWrites=Uo(d.visibleWrites,a,c),d.lastWriteId=p}(d.pendingWriteTree_,a,c,p);const w=ni.fromObject(c);return tl(d,new x({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,w))}(d.serverSyncTree_,a,K,pe);ta(d.eventQueue_,Le),d.server_.merge(a.toString(),c,(tt,en)=>{const Xt="ok"===tt;Xt||N("update at "+a+" failed: "+tt);const gn=Ia(d.serverSyncTree_,pe,!Xt),sr=gn.length>0?fu(d,a):a;Ao(d.eventQueue_,sr,gn),Cl(0,p,tt,en)}),ae(c,tt=>{const en=lh(d,fe(a,tt));fu(d,en)}),Ao(d.eventQueue_,a,[])}}(d._repo,d._path,a,c.wrapCallback(()=>{})),c.promise}function Qu(d){d=(0,De.m9)(d);const a=new Dd(()=>{}),c=new Fc(a);return function sf(d,a,c){const p=function ys(d,a){const c=a._path;let p=null;d.syncPointTree_.foreachOnPath(c,(tt,en)=>{const Xt=Ee(tt,c);p=p||pr(en,Xt)});let w=d.syncPointTree_.get(c);w?p=p||pr(w,Br()):(w=new F,d.syncPointTree_=d.syncPointTree_.set(c,w));const P=null!=p,K=P?new D(p,!0,!1):null;return function Yo(d){return Yr(d.viewCache_)}($t(w,a,no(d.pendingWriteTree_,a._path),P?K.getNode():cn.EMPTY_NODE,P))}(d.serverSyncTree_,a);return null!=p?Promise.resolve(p):d.server_.get(a).then(w=>{const P=Hn(w).withIndex(a._queryParams.getIndex());let K;if(Bs(d.serverSyncTree_,a,c,!0),a._queryParams.loadsAllData())K=ts(d.serverSyncTree_,a._path,P);else{const pe=xa(d.serverSyncTree_,a);K=el(d.serverSyncTree_,a._path,P,pe)}return Ao(d.eventQueue_,a._path,K),Ja(d.serverSyncTree_,a,c,null,!0),P},w=>(Oc(d,"get for query "+(0,De.Wl)(a)+" failed: "+w),Promise.reject(new Error(w))))}(d._repo,d,c).then(p=>new Ta(p,new ja(d._repo,d._path),d._queryParams.getIndex()))}class Fc{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,c){const p=c._queryParams.getIndex();return new Nc("value",this,new Ta(a.snapshotNode,new ja(c._repo,c._path),p))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,c){return this.callbackContext.hasCancelCallback?new ch(this,a,c):null}matches(a){return a instanceof Fc&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class bo{constructor(a,c){this.eventType=a,this.callbackContext=c}respondsTo(a){let c="children_added"===a?"child_added":a;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(a,c){return this.callbackContext.hasCancelCallback?new ch(this,a,c):null}createEvent(a,c){(0,De.hu)(null!=a.childName,"Child events should have a childName.");const p=mu(new ja(c._repo,c._path),a.childName),w=c._queryParams.getIndex();return new Nc(a.type,this,new Ta(a.snapshotNode,p,w),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof bo&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Lc(d,a,c,p,w){let P;if("object"==typeof p&&(P=void 0,w=p),"function"==typeof p&&(P=p),w&&w.onlyOnce){const Le=c,tt=(en,Xt)=>{ol(d._repo,d,pe),Le(en,Xt)};tt.userCallback=c.userCallback,tt.context=c.context,c=tt}const K=new Dd(c,P||void 0),pe="value"===a?new Fc(K):new bo(a,K);return function Eo(d,a,c){let p;p=".info"===Sr(a._path)?Bs(d.infoSyncTree_,a,c):Bs(d.serverSyncTree_,a,c),Mc(d.eventQueue_,a._path,p)}(d._repo,d,pe),()=>ol(d._repo,d,pe)}function yu(d,a,c,p){return Lc(d,"value",a,c,p)}function Ha(d,a,c,p){return Lc(d,"child_added",a,c,p)}function pf(d,a,c,p){return Lc(d,"child_changed",a,c,p)}function Al(d,a,c,p){return Lc(d,"child_moved",a,c,p)}function Xu(d,a,c,p){return Lc(d,"child_removed",a,c,p)}function hh(d,a,c){let p=null;const w=c?new Dd(c):null;"value"===a?p=new Fc(w):a&&(p=new bo(a,w)),ol(d._repo,d,p)}class al{}class Ad extends al{constructor(a,c){super(),this._value=a,this._key=c}_apply(a){ge("endAt",this._value,a._path,!0);const c=Un(a._queryParams,this._value,this._key);if(gu(c),Va(c),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pa(a._repo,a._path,c,a._orderByCalled)}}class Ep extends al{constructor(a,c){super(),this._value=a,this._key=c}_apply(a){ge("endBefore",this._value,a._path,!1);const c=function Gn(d,a,c){let p;return p=Un(d,a,d.index_===an||c?c:Fe),p.endBeforeSet_=!0,p}(a._queryParams,this._value,this._key);if(gu(c),Va(c),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pa(a._repo,a._path,c,a._orderByCalled)}}class gf extends al{constructor(a,c){super(),this._value=a,this._key=c}_apply(a){ge("startAt",this._value,a._path,!0);const c=Ws(a._queryParams,this._value,this._key);if(gu(c),Va(c),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new pa(a._repo,a._path,c,a._orderByCalled)}}class Ip extends al{constructor(a,c){super(),this._value=a,this._key=c}_apply(a){ge("startAfter",this._value,a._path,!1);const c=function Cn(d,a,c){let p;return p=Ws(d,a,d.index_===an||c?c:ht),p.startAfterSet_=!0,p}(a._queryParams,this._value,this._key);if(gu(c),Va(c),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new pa(a._repo,a._path,c,a._orderByCalled)}}class fh extends al{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new pa(a._repo,a._path,function Gs(d,a){const c=d.copy();return c.limitSet_=!0,c.limit_=a,c.viewFrom_="l",c}(a._queryParams,this._limit),a._orderByCalled)}}class ph extends al{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new pa(a._repo,a._path,function us(d,a){const c=d.copy();return c.limitSet_=!0,c.limit_=a,c.viewFrom_="r",c}(a._queryParams,this._limit),a._orderByCalled)}}class Tp extends al{constructor(a){super(),this._path=a}_apply(a){Sd(a,"orderByChild");const c=new fr(this._path);if(V(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Mr(c),w=br(a._queryParams,p);return Va(w),new pa(a._repo,a._path,w,!0)}}class yf extends al{_apply(a){Sd(a,"orderByKey");const c=br(a._queryParams,an);return Va(c),new pa(a._repo,a._path,c,!0)}}class mh extends al{_apply(a){Sd(a,"orderByPriority");const c=br(a._queryParams,C);return Va(c),new pa(a._repo,a._path,c,!0)}}class _h extends al{_apply(a){Sd(a,"orderByValue");const c=br(a._queryParams,Bi);return Va(c),new pa(a._repo,a._path,c,!0)}}class yh extends al{constructor(a,c){super(),this._value=a,this._key=c}_apply(a){if(ge("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ad(this._value,this._key)._apply(new gf(this._value,this._key)._apply(a))}}function ga(d,...a){let c=(0,De.m9)(d);for(const p of a)c=p._apply(c);return c}(function Z(d){(0,De.hu)(!jl,"__referenceConstructor has already been defined"),jl=d})(ja),function ba(d){(0,De.hu)(!Ho,"__referenceConstructor has already been defined"),Ho=d}(ja);const vu={};function yc(d,a,c,p,w){let P=p||d.options.databaseURL;void 0===P&&(d.options.projectId||he("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dt("Using default host for project ",d.options.projectId),P=`${d.options.projectId}-default-rtdb.firebaseio.com`);let Le,tt,K=kc(P,w),pe=K.repoInfo;"undefined"!=typeof process&&process.env&&(tt=process.env.FIREBASE_DATABASE_EMULATOR_HOST),tt?(Le=!0,P=`http://${tt}?ns=${pe.namespace}`,K=kc(P,w),pe=K.repoInfo):Le=!K.repoInfo.secure;const en=w&&Le?new In(In.OWNER):new Ki(d.name,d.options,a);La("Invalid Firebase Database URL",K),V(K.path)||he("Database URL must point to the root of a Firebase Database (not including a child path).");const Xt=function Ql(d,a,c,p){let w=vu[a.name];w||(w={},vu[a.name]=w);let P=w[d.toURLString()];return P&&he("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),P=new ui(d,false,c,p),w[d.toURLString()]=P,P}(pe,d,en,new Hi(d.name,c));return new Uc(Xt,d)}class Uc{constructor(a,c){this._repoInternal=a,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ai(d,a,c){if(d.stats_=Ht(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new zs(d.repoInfo_,(p,w,P,K)=>{Ba(d,p,w,P,K)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>rf(d,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,De.Wl)(c)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}d.persistentConnection_=new $s(d.repoInfo_,a,(p,w,P,K)=>{Ba(d,p,w,P,K)},p=>{rf(d,p)},p=>{!function fa(d,a){ae(a,(c,p)=>{Ed(d,c,p)})}(d,p)},d.authTokenProvider_,d.appCheckProvider_,c),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(p=>{d.server_.refreshAuthToken(p)}),d.appCheckProvider_.addTokenChangeListener(p=>{d.server_.refreshAppCheckToken(p.token)}),d.statsReporter_=function ct(d,a){const c=d.toString();return Ke[c]||(Ke[c]=a()),Ke[c]}(d.repoInfo_,()=>new Ga(d.stats_,d.server_)),d.infoData_=new On,d.infoSyncTree_=new ua({startListening:(p,w,P,K)=>{let pe=[];const Le=d.infoData_.getNode(p._path);return Le.isEmpty()||(pe=ts(d.infoSyncTree_,p._path,Le),setTimeout(()=>{K("ok")},0)),pe},stopListening:()=>{}}),Ed(d,"connected",!1),d.serverSyncTree_=new ua({startListening:(p,w,P,K)=>(d.server_.listen(p,P,w,(pe,Le)=>{const tt=K(pe,Le);Ao(d.eventQueue_,p._path,tt)}),[]),stopListening:(p,w)=>{d.server_.unlisten(p,w)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ja(this._repo,Br())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function vc(d,a){const c=vu[a];(!c||c[d.key]!==d)&&he(`Database ${a}(${d.repoInfo_}) has already been deleted.`),mc(d),delete c[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&he("Cannot call "+a+" on a deleted database.")}}function Bc(){Zi.IS_TRANSPORT_INITIALIZED&&N("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Eh(){Bc(),Yn.forceDisallow()}function Md(){Bc(),ks.forceDisallow(),Yn.forceAllow()}function wh(d,a){pt(d,a)}const Eu={".sv":"timestamp"};class wf{constructor(a,c){this.committed=a,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}$s.prototype.simpleListen=function(d,a){this.sendRequest("q",{p:d},a)},$s.prototype.echo=function(d,a){this.sendRequest("echo",{d},a)},function Ih(d){Re(Tn.SDK_VERSION),(0,Tn._registerComponent)(new Dr.wA("database",(a,{instanceIdentifier:c})=>yc(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,Tn.registerVersion)(rt,Y,d),(0,Tn.registerVersion)(rt,Y,"esm2017")}();const bc=new qn.Yd("@firebase/database-compat"),Ch=function(d){bc.warn("FIREBASE WARNING: "+d)};class Rp{constructor(a){this._delegate=a}cancel(a){(0,De.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,De.Wj)("OnDisconnect.cancel","onComplete",a,!0);const c=this._delegate.cancel();return a&&c.then(()=>a(null),p=>a(p)),c}remove(a){(0,De.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,De.Wj)("OnDisconnect.remove","onComplete",a,!0);const c=this._delegate.remove();return a&&c.then(()=>a(null),p=>a(p)),c}set(a,c){(0,De.Dv)("OnDisconnect.set",1,2,arguments.length),(0,De.Wj)("OnDisconnect.set","onComplete",c,!0);const p=this._delegate.set(a);return c&&p.then(()=>c(null),w=>c(w)),p}setWithPriority(a,c,p){(0,De.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,De.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const w=this._delegate.setWithPriority(a,c);return p&&w.then(()=>p(null),P=>p(P)),w}update(a,c){if((0,De.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const w={};for(let P=0;P<a.length;++P)w[""+P]=a[P];a=w,Ch("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,De.Wj)("OnDisconnect.update","onComplete",c,!0);const p=this._delegate.update(a);return c&&p.then(()=>c(null),w=>c(w)),p}}class Dh{constructor(a,c){this.committed=a,this.snapshot=c}toJSON(){return(0,De.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ml{constructor(a,c){this._database=a,this._delegate=c}val(){return(0,De.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,De.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,De.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,De.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,De.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),oi("DataSnapshot.child","path",a,!1),new Ml(this._database,this._delegate.child(a))}hasChild(a){return(0,De.Dv)("DataSnapshot.hasChild",1,1,arguments.length),oi("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,De.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,De.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,De.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(c=>a(new Ml(this._database,c)))}hasChildren(){return(0,De.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,De.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,De.Dv)("DataSnapshot.ref",0,0,arguments.length),new $o(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Cr{constructor(a,c){this.database=a,this._delegate=c}on(a,c,p,w){var P;(0,De.Dv)("Query.on",2,4,arguments.length),(0,De.Wj)("Query.on","callback",c,!1);const K=Cr.getCancelAndContextArgs_("Query.on",p,w),pe=(tt,en)=>{c.call(K.context,new Ml(this.database,tt),en)};pe.userCallback=c,pe.context=K.context;const Le=null===(P=K.cancel)||void 0===P?void 0:P.bind(K.context);switch(a){case"value":return yu(this._delegate,pe,Le),c;case"child_added":return Ha(this._delegate,pe,Le),c;case"child_removed":return Xu(this._delegate,pe,Le),c;case"child_changed":return pf(this._delegate,pe,Le),c;case"child_moved":return Al(this._delegate,pe,Le),c;default:throw new Error((0,De.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,c,p){if((0,De.Dv)("Query.off",0,3,arguments.length),function(d,a,c){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,De.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,De.Wj)("Query.off","callback",c,!0),(0,De.lb)("Query.off","context",p,!0),c){const w=()=>{};w.userCallback=c,w.context=p,hh(this._delegate,a,w)}else hh(this._delegate,a)}get(){return Qu(this._delegate).then(a=>new Ml(this.database,a))}once(a,c,p,w){(0,De.Dv)("Query.once",1,4,arguments.length),(0,De.Wj)("Query.once","callback",c,!0);const P=Cr.getCancelAndContextArgs_("Query.once",p,w),K=new De.BH,pe=(tt,en)=>{const Xt=new Ml(this.database,tt);c&&c.call(P.context,Xt,en),K.resolve(Xt)};pe.userCallback=c,pe.context=P.context;const Le=tt=>{P.cancel&&P.cancel.call(P.context,tt),K.reject(tt)};switch(a){case"value":yu(this._delegate,pe,Le,{onlyOnce:!0});break;case"child_added":Ha(this._delegate,pe,Le,{onlyOnce:!0});break;case"child_removed":Xu(this._delegate,pe,Le,{onlyOnce:!0});break;case"child_changed":pf(this._delegate,pe,Le,{onlyOnce:!0});break;case"child_moved":Al(this._delegate,pe,Le,{onlyOnce:!0});break;default:throw new Error((0,De.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return K.promise}limitToFirst(a){return(0,De.Dv)("Query.limitToFirst",1,1,arguments.length),new Cr(this.database,ga(this._delegate,function _f(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fh(d)}(a)))}limitToLast(a){return(0,De.Dv)("Query.limitToLast",1,1,arguments.length),new Cr(this.database,ga(this._delegate,function Cp(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ph(d)}(a)))}orderByChild(a){return(0,De.Dv)("Query.orderByChild",1,1,arguments.length),new Cr(this.database,ga(this._delegate,function gh(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return oi("orderByChild","path",d,!1),new Tp(d)}(a)))}orderByKey(){return(0,De.Dv)("Query.orderByKey",0,0,arguments.length),new Cr(this.database,ga(this._delegate,function _c(){return new yf}()))}orderByPriority(){return(0,De.Dv)("Query.orderByPriority",0,0,arguments.length),new Cr(this.database,ga(this._delegate,function vf(){return new mh}()))}orderByValue(){return(0,De.Dv)("Query.orderByValue",0,0,arguments.length),new Cr(this.database,ga(this._delegate,function ro(){return new _h}()))}startAt(a=null,c){return(0,De.Dv)("Query.startAt",0,2,arguments.length),new Cr(this.database,ga(this._delegate,function wp(d=null,a){return yr("startAt","key",a,!0),new gf(d,a)}(a,c)))}startAfter(a=null,c){return(0,De.Dv)("Query.startAfter",0,2,arguments.length),new Cr(this.database,ga(this._delegate,function mf(d,a){return yr("startAfter","key",a,!0),new Ip(d,a)}(a,c)))}endAt(a=null,c){return(0,De.Dv)("Query.endAt",0,2,arguments.length),new Cr(this.database,ga(this._delegate,function vp(d,a){return yr("endAt","key",a,!0),new Ad(d,a)}(a,c)))}endBefore(a=null,c){return(0,De.Dv)("Query.endBefore",0,2,arguments.length),new Cr(this.database,ga(this._delegate,function bp(d,a){return yr("endBefore","key",a,!0),new Ep(d,a)}(a,c)))}equalTo(a,c){return(0,De.Dv)("Query.equalTo",1,2,arguments.length),new Cr(this.database,ga(this._delegate,function Rd(d,a){return yr("equalTo","key",a,!0),new yh(d,a)}(a,c)))}toString(){return(0,De.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,De.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,De.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof Cr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,c,p){const w={cancel:void 0,context:void 0};if(c&&p)w.cancel=c,(0,De.Wj)(a,"cancel",w.cancel,!0),w.context=p,(0,De.lb)(a,"context",w.context,!0);else if(c)if("object"==typeof c&&null!==c)w.context=c;else{if("function"!=typeof c)throw new Error((0,De.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");w.cancel=c}return w}get ref(){return new $o(this.database,new ja(this._delegate._repo,this._delegate._path))}}class $o extends Cr{constructor(a,c){super(a,new pa(c._repo,c._path,new xi,!1)),this.database=a,this._delegate=c}getKey(){return(0,De.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,De.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new $o(this.database,mu(this._delegate,a))}getParent(){(0,De.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new $o(this.database,a):null}getRoot(){return(0,De.Dv)("Reference.root",0,0,arguments.length),new $o(this.database,this._delegate.root)}set(a,c){(0,De.Dv)("Reference.set",1,2,arguments.length),(0,De.Wj)("Reference.set","onComplete",c,!0);const p=Yu(this._delegate,a);return c&&p.then(()=>c(null),w=>c(w)),p}update(a,c){if((0,De.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const w={};for(let P=0;P<a.length;++P)w[""+P]=a[P];a=w,Ch("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Os("Reference.update",this._delegate._path),(0,De.Wj)("Reference.update","onComplete",c,!0);const p=dh(this._delegate,a);return c&&p.then(()=>c(null),w=>c(w)),p}setWithPriority(a,c,p){(0,De.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,De.Wj)("Reference.setWithPriority","onComplete",p,!0);const w=function _u(d,a,c){if(Os("setWithPriority",d._path),ge("setWithPriority",a,d._path,!1),Xn("setWithPriority",c,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const p=new De.BH;return sl(d._repo,d._path,a,c,p.wrapCallback(()=>{})),p.promise}(this._delegate,a,c);return p&&w.then(()=>p(null),P=>p(P)),w}remove(a){(0,De.Dv)("Reference.remove",0,1,arguments.length),(0,De.Wj)("Reference.remove","onComplete",a,!0);const c=function Dl(d){return Os("remove",d._path),Yu(d,null)}(this._delegate);return a&&c.then(()=>a(null),p=>a(p)),c}transaction(a,c,p){(0,De.Dv)("Reference.transaction",1,3,arguments.length),(0,De.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,De.Wj)("Reference.transaction","onComplete",c,!0),function(d,a,c,p){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,De.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const w=function Sp(d,a,c){var p;if(d=(0,De.m9)(d),Os("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const w=null===(p=null==c?void 0:c.applyLocally)||void 0===p||p,P=new De.BH,pe=yu(d,()=>{});return function lf(d,a,c,p,w,P){Oc(d,"transaction on "+a);const K={path:a,update:c,onComplete:p,status:null,order:Kn(),applyLocally:P,retryCount:0,unwatcher:w,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},pe=Id(d,a,void 0);K.currentInputSnapshot=pe;const Le=K.update(pe.val());if(void 0===Le)K.unwatcher(),K.currentOutputSnapshotRaw=null,K.currentOutputSnapshotResolved=null,K.onComplete&&K.onComplete(null,!1,K.currentInputSnapshot);else{Pe("transaction failed: Data returned ",Le,K.path),K.status=0;const tt=hc(d.transactionQueueTree_,a),en=$l(tt)||[];let Xt;en.push(K),fc(tt,en),"object"==typeof Le&&null!==Le&&(0,De.r3)(Le,".priority")?(Xt=(0,De.DV)(Le,".priority"),(0,De.hu)(M(Xt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Xt=(dc(d.serverSyncTree_,a)||cn.EMPTY_NODE).getPriority().val();const gn=Ua(d),sr=Hn(Le,Xt),Tr=Na(sr,pe,gn);K.currentOutputSnapshotRaw=sr,K.currentOutputSnapshotResolved=Tr,K.currentWriteId=gc(d);const Ui=El(d.serverSyncTree_,a,Tr,K.currentWriteId,K.applyLocally);Ao(d.eventQueue_,a,Ui),qu(d,d.transactionQueueTree_)}}(d._repo,d._path,a,(Le,tt,en)=>{let Xt=null;Le?P.reject(Le):(Xt=new Ta(en,new ja(d._repo,d._path),C),P.resolve(new wf(tt,Xt)))},pe,w),P.promise}(this._delegate,a,{applyLocally:p}).then(P=>new Dh(P.committed,new Ml(this.database,P.snapshot)));return c&&w.then(P=>c(null,P.committed,P.snapshot),P=>c(P,!1,null)),w}setPriority(a,c){(0,De.Dv)("Reference.setPriority",1,2,arguments.length),(0,De.Wj)("Reference.setPriority","onComplete",c,!0);const p=function Sl(d,a){d=(0,De.m9)(d),Os("setPriority",d._path),Xn("setPriority",a,!1);const c=new De.BH;return sl(d._repo,fe(d._path,".priority"),a,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,a);return c&&p.then(()=>c(null),w=>c(w)),p}push(a,c){(0,De.Dv)("Reference.push",0,2,arguments.length),(0,De.Wj)("Reference.push","onComplete",c,!0);const p=function Xg(d,a){d=(0,De.m9)(d),Os("push",d._path),ge("push",a,d._path,!0);const c=Zu(d._repo),p=df(c),w=mu(d,p),P=mu(d,p);let K;return K=null!=a?Yu(P,a).then(()=>P):Promise.resolve(P),w.then=K.then.bind(K),w.catch=K.then.bind(K,void 0),w}(this._delegate,a),w=p.then(K=>new $o(this.database,K));c&&w.then(()=>c(null),K=>c(K));const P=new $o(this.database,p);return P.then=w.then.bind(w),P.catch=w.catch.bind(w,void 0),P}onDisconnect(){return Os("Reference.onDisconnect",this._delegate._path),new Rp(new uh(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class wc{constructor(a,c){this._delegate=a,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Eh,forceLongPolling:Md}}useEmulator(a,c,p={}){!function bh(d,a,c,p={}){(d=(0,De.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&he("Cannot call useEmulator() after instance has already been initialized.");const w=d._repoInternal;let P;if(w.repoInfo_.nodeAdmin)p.mockUserToken&&he('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),P=new In(In.OWNER);else if(p.mockUserToken){const K="string"==typeof p.mockUserToken?p.mockUserToken:(0,De.Sg)(p.mockUserToken,d.app.options.projectId);P=new In(K)}!function Ju(d,a,c,p){d.repoInfo_=new Wr(`${a}:${c}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams,!0),p&&(d.authTokenProvider_=p)}(w,a,c,P)}(this._delegate,a,c,p)}ref(a){if((0,De.Dv)("database.ref",0,1,arguments.length),a instanceof $o){const c=hf(this._delegate,a.toString());return new $o(this,c)}{const c=Da(this._delegate,a);return new $o(this,c)}}refFromURL(a){(0,De.Dv)("database.refFromURL",1,1,arguments.length);const p=hf(this._delegate,a);return new $o(this,p)}goOffline(){return(0,De.Dv)("database.goOffline",0,0,arguments.length),function Ef(d){(d=(0,De.m9)(d))._checkNotDeleted("goOffline"),mc(d._repo)}(this._delegate)}goOnline(){return(0,De.Dv)("database.goOnline",0,0,arguments.length),function Od(d){(d=(0,De.m9)(d))._checkNotDeleted("goOnline"),function wd(d){d.persistentConnection_&&d.persistentConnection_.resume(Zl)}(d._repo)}(this._delegate)}}wc.ServerValue={TIMESTAMP:function Vc(){return Eu}(),increment:d=>function bf(d){return{".sv":{increment:d}}}(d)};var Hc=Object.freeze({__proto__:null,initStandalone:function Sh({app:d,url:a,version:c,customAuthImpl:p,namespace:w,nodeAdmin:P=!1}){Re(c);const K=new Dr.zt("auth-internal",new Dr.H0("database-standalone"));return K.setComponent(new Dr.wA("auth-internal",()=>p,"PRIVATE")),{instance:new wc(yc(d,K,void 0,a,P),d),namespace:w}}});const ll=wc.ServerValue;!function xd(d){d.INTERNAL.registerComponent(new Dr.wA("database-compat",(a,{instanceIdentifier:c})=>{const p=a.getProvider("app-compat").getImmediate(),w=a.getProvider("database").getImmediate({identifier:c});return new wc(w,p)},"PUBLIC").setServiceProps({Reference:$o,Query:Cr,Database:wc,DataSnapshot:Ml,enableLogging:wh,INTERNAL:Hc,ServerValue:ll}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.3.4")}(ur.Z);var Pd=b(6217),Ah=b(9260);function wu(d){return null==d}function Ic(d){return"function"==typeof d.set}function If(d,a){return Ic(a)?a:d.ref(a)}function kd(d,a){if(function Ol(d){return"string"==typeof d}(d))return a.stringCase();if(Ic(d))return a.firebaseCase();if(function $c(d){return"function"==typeof d.exportVal}(d))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function No(d,a,c="on",p=Ut.z){return new Rt.y(w=>{let P=null;return P=d[c](a,(K,pe)=>{p.schedule(()=>{w.next({snapshot:K,prevKey:pe})}),"once"===c&&p.schedule(()=>w.complete())},K=>{p.schedule(()=>w.error(K))}),"on"===c?{unsubscribe(){null!=P&&d.off(a,P)}}:{unsubscribe(){}}}).pipe((0,jn.U)(w=>{const{snapshot:P,prevKey:K}=w;let pe=null;return P.exists()&&(pe=P.key),{type:a,payload:P,prevKey:K,key:pe}}),(0,nn.B)())}function Cc(d,a){const c=d.length;for(let p=0;p<c;p++)if(d[p].payload.key===a)return p;return-1}function Nd(d,a){const{payload:c,prevKey:p,key:w}=a,P=Cc(d,w),K=function Iu(d,a){if(wu(a))return 0;{const c=Cc(d,a);return-1===c?d.length:c+1}}(d,p);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let pe=null;a.payload.forEach(Le=>{const tt={payload:Le,type:"value",prevKey:pe,key:Le.key};return pe=Le.key,d=[...d,tt],!1})}return d;case"child_added":if(P>-1){const pe=d[P-1];(pe&&pe.key||null)!==p&&(d=d.filter(Le=>Le.payload.key!==c.key)).splice(K,0,a)}else{if(null==p)return[a,...d];(d=d.slice()).splice(K,0,a)}return d;case"child_removed":return d.filter(pe=>pe.payload.key!==c.key);case"child_changed":return d.map(pe=>pe.payload.key===w?a:pe);case"child_moved":if(P>-1){const pe=d.splice(P,1)[0];return(d=d.slice()).splice(K,0,pe),d}return d;default:return d}}function cl(d){return(wu(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function Cu(d,a,c){return function ed(d,a,c){return No(d,"value","once",c).pipe((0,wn.w)(p=>{const w=[(0,Yt.of)(p)];return a.forEach(P=>w.push(No(d,P,"on",c))),(0,Nn.T)(...w).pipe((0,Ot.R)(Nd,[]))}),(0,hn.x)())}(d,a=cl(a),c)}function Rh(d,a,c){const p=(a=cl(a)).map(w=>No(d,w,"on",c));return(0,Nn.T)(...p)}function Fd(d,a){return function(p,w){return kd(p,{stringCase:()=>d.child(p)[a](w),firebaseCase:()=>p[a](w),snapshotCase:()=>p.ref[a](w)})}}function Wc(d){return function(c){return c?kd(c,{stringCase:()=>d.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):d.remove()}}function Op(d,a){return function(){return No(d,"value","on",a)}}const Df=new S.OlP("angularfire2.realtimeDatabaseURL"),xp=new S.OlP("angularfire2.database.use-emulator");let Du=(()=>{class d{constructor(c,p,w,P,K,pe,Le,tt,en,Xt,gn,sr,Tr,Ui,po){this.schedulers=pe;const ul=Le,ec=(0,ft.on)(c,K,p);tt&&(0,St.nw)(ec,K,en,gn,sr,Tr,Xt,Ui),this.database=(0,ft.cc)(`${ec.name}.database.${w}`,"AngularFireDatabase",ec.name,()=>{const go=K.runOutsideAngular(()=>ec.database(w||void 0));return ul&&go.useEmulator(...ul),go},[ul])}list(c,p){const w=this.schedulers.ngZone.runOutsideAngular(()=>If(this.database,c));let P=w;return p&&(P=p(w)),function Cf(d,a){const c=a.schedulers.outsideAngular,p=a.schedulers.ngZone.run(()=>d.ref);return{query:d,update:Fd(p,"update"),set:Fd(p,"set"),push:w=>p.push(w),remove:Wc(p),snapshotChanges:w=>Cu(d,w,c).pipe(Sn.iC),stateChanges:w=>Rh(d,w,c).pipe(Sn.iC),auditTrail:w=>function Gc(d,a,c){return function Tu(d,a,c){return function Mp(d,a){return No(d,"value","on",a).pipe((0,jn.U)(c=>{let p;return c.payload.forEach(w=>(p=w.key,!1)),{data:c,lastKeyToLoad:p}}))}(d,c).pipe((0,xt.M)(a),(0,jn.U)(([w,P])=>{const K=w.lastKeyToLoad,pe=P.map(Le=>Le.key);return{actions:P,lastKeyToLoad:K,loadedKeys:pe}}),function Fn(d){return(0,rn.e)((a,c)=>{let p=!1,w=0;a.subscribe((0,fn.x)(c,P=>(p||(p=!d(P,w++)))&&c.next(P)))})}(w=>-1===w.loadedKeys.indexOf(w.lastKeyToLoad)),(0,jn.U)(w=>w.actions))}(d,Rh(d,a).pipe((0,Ot.R)((w,P)=>[...w,P],[])),c)}(d,w,c).pipe(Sn.iC),valueChanges:(w,P)=>Cu(d,w,c).pipe((0,jn.U)(pe=>pe.map(Le=>P&&P.idField?Object.assign(Object.assign({},Le.payload.val()),{[P.idField]:Le.key}):Le.payload.val())),Sn.iC)}}(P,this)}object(c){return function Tf(d,a){return{query:d,snapshotChanges:()=>Op(d,a.schedulers.outsideAngular)().pipe(Sn.iC),update:c=>d.ref.update(c),set:c=>d.ref.set(c),remove:()=>d.ref.remove(),valueChanges:()=>Op(d,a.schedulers.outsideAngular)().pipe(Sn.iC,(0,jn.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>If(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(c){return new(c||d)(S.LFG(ft.Dh),S.LFG(ft.xv,8),S.LFG(Df,8),S.LFG(S.Lbi),S.LFG(S.R0b),S.LFG(Sn.HU),S.LFG(xp,8),S.LFG(St.zQ,8),S.LFG(St.Qv,8),S.LFG(St.L6,8),S.LFG(St._Q,8),S.LFG(St.rT,8),S.LFG(St.lh,8),S.LFG(St.f7,8),S.LFG(Pd.nm,8))},d.\u0275prov=S.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),Pp=(()=>{class d{constructor(){Ah.Z.registerVersion("angularfire",Sn.q4.full,"rtdb-compat")}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=S.oAB({type:d}),d.\u0275inj=S.cJS({providers:[Du]}),d})();var em=b(6360),Mh=b(508);const kp=(0,Ie.Lq)({entities:null,loading:null,error:null},(0,Ie.on)(oe,d=>Object.assign(Object.assign({},d),{loading:!0,error:null})),(0,Ie.on)(ce,(d,{dictinaries:a})=>Object.assign(Object.assign({},d),{entities:a,loading:!1,error:null})),(0,Ie.on)(te,d=>Object.assign(Object.assign({},d),{loading:!1,error:null})));var Su=b(655),fo=b(6642),Np=b(7188),zc=b(262);const nm=JSON.parse('[{"name":"Afghanistan","code":"AF"},{"name":"Albania","code":"AL"},{"name":"Algeria","code":"DZ"},{"name":"American Samoa","code":"AS"},{"name":"Andorra","code":"AD"},{"name":"Angola","code":"AO"},{"name":"Anguilla","code":"AI"},{"name":"Antigua and Barbuda","code":"AG"},{"name":"Argentina","code":"AR"},{"name":"Armenia","code":"AM"},{"name":"Aruba","code":"AW"},{"name":"Australia","code":"AU"},{"name":"Austria","code":"AT"},{"name":"Azerbaijan","code":"AZ"},{"name":"Bahamas","code":"BS"},{"name":"Bahrain","code":"BH"},{"name":"Bangladesh","code":"BD"},{"name":"Barbados","code":"BB"},{"name":"Belarus","code":"BY"},{"name":"Belgium","code":"BE"},{"name":"Belize","code":"BZ"},{"name":"Benin","code":"BJ"},{"name":"Bermuda","code":"BM"},{"name":"Bhutan","code":"BT"},{"name":"Bolivia","code":"BO"},{"name":"Bosnia and Herzegovina","code":"BA"},{"name":"Botswana","code":"BW"},{"name":"Brazil","code":"BR"},{"name":"Brunei Darussalam","code":"BN"},{"name":"Bulgaria","code":"BG"},{"name":"Burkina Faso","code":"BF"},{"name":"Burundi","code":"BI"},{"name":"Cambodia","code":"KH"},{"name":"Cameroon","code":"CM"},{"name":"Canada","code":"CA"},{"name":"Cape Verde","code":"CV"},{"name":"Cayman Islands","code":"KY"},{"name":"Central African Republic","code":"CF"},{"name":"Chad","code":"TD"},{"name":"Chile","code":"CL"},{"name":"China","code":"CN"},{"name":"Christmas Island","code":"CX"},{"name":"Cocos (Keeling) Islands","code":"CC"},{"name":"Colombia","code":"CO"},{"name":"Comoros","code":"KM"},{"name":"Congo","code":"CG"},{"name":"Congo, The Democratic Republic of the","code":"CD"},{"name":"Cook Islands","code":"CK"},{"name":"Costa Rica","code":"CR"},{"name":"Cote D\'Ivoire","code":"CI"},{"name":"Croatia","code":"HR"},{"name":"Cuba","code":"CU"},{"name":"Cyprus","code":"CY"},{"name":"Czech Republic","code":"CZ"},{"name":"Denmark","code":"DK"},{"name":"Djibouti","code":"DJ"},{"name":"Dominica","code":"DM"},{"name":"Dominican Republic","code":"DO"},{"name":"Ecuador","code":"EC"},{"name":"Egypt","code":"EG"},{"name":"El Salvador","code":"SV"},{"name":"Equatorial Guinea","code":"GQ"},{"name":"Eritrea","code":"ER"},{"name":"Estonia","code":"EE"},{"name":"Ethiopia","code":"ET"},{"name":"Falkland Islands (Malvinas)","code":"FK"},{"name":"Faroe Islands","code":"FO"},{"name":"Fiji","code":"FJ"},{"name":"Finland","code":"FI"},{"name":"France","code":"FR"},{"name":"French Guiana","code":"GF"},{"name":"French Polynesia","code":"PF"},{"name":"Gabon","code":"GA"},{"name":"Gambia","code":"GM"},{"name":"Georgia","code":"GE"},{"name":"Germany","code":"DE"},{"name":"Ghana","code":"GH"},{"name":"Gibraltar","code":"GI"},{"name":"Greece","code":"GR"},{"name":"Greenland","code":"GL"},{"name":"Grenada","code":"GD"},{"name":"Guadeloupe","code":"GP"},{"name":"Guam","code":"GU"},{"name":"Guatemala","code":"GT"},{"name":"Guinea","code":"GN"},{"name":"Guinea-Bissau","code":"GW"},{"name":"Guyana","code":"GY"},{"name":"Haiti","code":"HT"},{"name":"Vatican City","code":"VA"},{"name":"Honduras","code":"HN"},{"name":"Hong Kong","code":"HK"},{"name":"Hungary","code":"HU"},{"name":"Iceland","code":"IS"},{"name":"India","code":"IN"},{"name":"Indonesia","code":"ID"},{"name":"Iran, Islamic Republic Of","code":"IR"},{"name":"Iraq","code":"IQ"},{"name":"Ireland","code":"IE"},{"name":"Isle of Man","code":"IM"},{"name":"Israel","code":"IL"},{"name":"Italy","code":"IT"},{"name":"Jamaica","code":"JM"},{"name":"Japan","code":"JP"},{"name":"Jersey","code":"JE"},{"name":"Jordan","code":"JO"},{"name":"Kazakhstan","code":"KZ"},{"name":"Kenya","code":"KE"},{"name":"Kiribati","code":"KI"},{"name":"Korea, Democratic People\'s Republic of","code":"KP"},{"name":"Korea, Republic of","code":"KR"},{"name":"Kuwait","code":"KW"},{"name":"Kyrgyzstan","code":"KG"},{"name":"Lao People\'s Democratic Republic","code":"LA"},{"name":"Latvia","code":"LV"},{"name":"Lebanon","code":"LB"},{"name":"Lesotho","code":"LS"},{"name":"Liberia","code":"LR"},{"name":"Libyan Arab Jamahiriya","code":"LY"},{"name":"Liechtenstein","code":"LI"},{"name":"Lithuania","code":"LT"},{"name":"Luxembourg","code":"LU"},{"name":"Macao","code":"MO"},{"name":"North Macedonia","code":"MK"},{"name":"Madagascar","code":"MG"},{"name":"Malawi","code":"MW"},{"name":"Malaysia","code":"MY"},{"name":"Maldives","code":"MV"},{"name":"Mali","code":"ML"},{"name":"Malta","code":"MT"},{"name":"Marshall Islands","code":"MH"},{"name":"Martinique","code":"MQ"},{"name":"Mauritania","code":"MR"},{"name":"Mauritius","code":"MU"},{"name":"Mayotte","code":"YT"},{"name":"Mexico","code":"MX"},{"name":"Micronesia, Federated States of","code":"FM"},{"name":"Moldova, Republic of","code":"MD"},{"name":"Monaco","code":"MC"},{"name":"Mongolia","code":"MN"},{"name":"Montenegro","code":"ME"},{"name":"Montserrat","code":"MS"},{"name":"Morocco","code":"MA"},{"name":"Mozambique","code":"MZ"},{"name":"Myanmar","code":"MM"},{"name":"Namibia","code":"NA"},{"name":"Nauru","code":"NR"},{"name":"Nepal","code":"NP"},{"name":"Netherlands","code":"NL"},{"name":"New Caledonia","code":"NC"},{"name":"New Zealand","code":"NZ"},{"name":"Nicaragua","code":"NI"},{"name":"Niger","code":"NE"},{"name":"Nigeria","code":"NG"},{"name":"Niue","code":"NU"},{"name":"Norfolk Island","code":"NF"},{"name":"Northern Mariana Islands","code":"MP"},{"name":"Norway","code":"NO"},{"name":"Oman","code":"OM"},{"name":"Pakistan","code":"PK"},{"name":"Palau","code":"PW"},{"name":"Palestina","code":"PS"},{"name":"Panama","code":"PA"},{"name":"Papua New Guinea","code":"PG"},{"name":"Paraguay","code":"PY"},{"name":"Peru","code":"PE"},{"name":"Philippines","code":"PH"},{"name":"Poland","code":"PL"},{"name":"Portugal","code":"PT"},{"name":"Puerto Rico","code":"PR"},{"name":"Qatar","code":"QA"},{"name":"Reunion","code":"RE"},{"name":"Romania","code":"RO"},{"name":"Russian Federation","code":"RU"},{"name":"Rwanda","code":"RW"},{"name":"Saint Helena","code":"SH"},{"name":"Saint Kitts and Nevis","code":"KN"},{"name":"Saint Lucia","code":"LC"},{"name":"Saint Pierre and Miquelon","code":"PM"},{"name":"Saint Vincent and the Grenadines","code":"VC"},{"name":"Samoa","code":"WS"},{"name":"San Marino","code":"SM"},{"name":"Sao Tome and Principe","code":"ST"},{"name":"Saudi Arabia","code":"SA"},{"name":"Senegal","code":"SN"},{"name":"Serbia","code":"RS"},{"name":"Seychelles","code":"SC"},{"name":"Sierra Leone","code":"SL"},{"name":"Singapore","code":"SG"},{"name":"Slovakia","code":"SK"},{"name":"Slovenia","code":"SI"},{"name":"Solomon Islands","code":"SB"},{"name":"Somalia","code":"SO"},{"name":"South Africa","code":"ZA"},{"name":"Spain","code":"ES"},{"name":"Sri Lanka","code":"LK"},{"name":"Sudan","code":"SD"},{"name":"Suriname","code":"SR"},{"name":"Swaziland","code":"SZ"},{"name":"Sweden","code":"SE"},{"name":"Switzerland","code":"CH"},{"name":"Syrian Arab Republic","code":"SY"},{"name":"Taiwan, Province of China","code":"TW"},{"name":"Tajikistan","code":"TJ"},{"name":"Tanzania, United Republic of","code":"TZ"},{"name":"Thailand","code":"TH"},{"name":"Timor-Leste","code":"TL"},{"name":"Togo","code":"TG"},{"name":"Tokelau","code":"TK"},{"name":"Tonga","code":"TO"},{"name":"Trinidad and Tobago","code":"TT"},{"name":"Tunisia","code":"TN"},{"name":"Turkey","code":"TR"},{"name":"Turkmenistan","code":"TM"},{"name":"Turks and Caicos Islands","code":"TC"},{"name":"Tuvalu","code":"TV"},{"name":"Uganda","code":"UG"},{"name":"Ukraine","code":"UA"},{"name":"United Arab Emirates","code":"AE"},{"name":"United Kingdom","code":"GB"},{"name":"United States","code":"US"},{"name":"Uruguay","code":"UY"},{"name":"Uzbekistan","code":"UZ"},{"name":"Vanuatu","code":"VU"},{"name":"Venezuela","code":"VE"},{"name":"Viet Nam","code":"VN"},{"name":"Virgin Islands, British","code":"VG"},{"name":"Virgin Islands, U.S.","code":"VI"},{"name":"Wallis and Futuna","code":"WF"},{"name":"Western Sahara","code":"EH"},{"name":"Yemen","code":"YE"},{"name":"Zambia","code":"ZM"},{"name":"Zimbabwe","code":"ZW"}]'),$a=d=>{const a=d.payload.doc.data();return Object.assign({id:d.payload.doc.id},a)},td=d=>({items:d,controlItems:[...d].map(a=>(d=>({value:d.value||d.id,label:d.name,icon:d.icon}))(a))});class xl{constructor(a,c){this.actions=a,this.afs=c,this.read=this.actions.pipe((0,fo.l4)(oe),(0,wn.w)(()=>(0,Np.$)(this.afs.collection("roles").snapshotChanges().pipe((0,qe.q)(1),(0,jn.U)(p=>p.map(w=>$a(w)))),this.afs.collection("specifications").snapshotChanges().pipe((0,qe.q)(1),(0,jn.U)(p=>p.map(w=>$a(w)))),this.afs.collection("qualifications").snapshotChanges().pipe((0,qe.q)(1),(0,jn.U)(p=>p.map(w=>$a(w)))),this.afs.collection("skills").snapshotChanges().pipe((0,qe.q)(1),(0,jn.U)(p=>p.map(w=>$a(w)))),(0,Yt.of)(nm.map(p=>({id:p.code.toUpperCase(),name:p.name,icon:{src:null,cssClass:"fflag fflag-"+p.code.toUpperCase()}})))).pipe((0,jn.U)(([p,w,P,K,pe])=>{const Le={roles:td(p),specializations:td(w),qualifications:td(P),skills:td(K),countries:td(pe)};return ce({dictinaries:Le})}),(0,zc.K)(p=>(0,Yt.of)(te(p.message))))))}}xl.\u0275fac=function(a){return new(a||xl)(S.LFG(fo.eX),S.LFG(ut.ST))},xl.\u0275prov=S.Yz7({token:xl,factory:xl.\u0275fac}),(0,Su.gn)([(0,fo.Qm)()],xl.prototype,"read",void 0);const qs={entity:null,uid:null,loading:null,error:null},Sf=(0,Ie.Lq)(qs,(0,Ie.on)(se.jd,d=>Object.assign(Object.assign({},d),{loading:!0})),(0,Ie.on)(se.MW,(d,{user:a,uId:c})=>Object.assign(Object.assign({},d),{entity:a,uid:c,loading:!1})),(0,Ie.on)(se.wh,d=>Object.assign(Object.assign({},d),{loading:!1})),(0,Ie.on)(se.Sf,(d,{error:a})=>Object.assign(Object.assign({},d),{loading:!1,error:a})),(0,Ie.on)(se.Mo,d=>Object.assign(Object.assign({},d),{loading:!0})),(0,Ie.on)(se.CG,(d,{uId:a})=>Object.assign(Object.assign({},d),{loading:!1,uid:a})),(0,Ie.on)(se.pg,(d,{error:a})=>Object.assign(Object.assign({},d),{loading:!1,error:a})),(0,Ie.on)(se.cL,d=>Object.assign(Object.assign({},d),{loading:!0})),(0,Ie.on)(se.AP,(d,{user:a,uId:c})=>Object.assign(Object.assign({},d),{uid:c,loading:!1,entity:a,error:null})),(0,Ie.on)(se.wK,(d,{error:a})=>Object.assign(Object.assign({},d),{error:a,loading:!1})),(0,Ie.on)(se.lv,d=>Object.assign(Object.assign({},d),{loading:!0})),(0,Ie.on)(se.co,d=>Object.assign({},qs)),(0,Ie.on)(se.V1,(d,{error:a})=>Object.assign(Object.assign({},qs),{error:a})),(0,Ie.on)(se.r4,d=>Object.assign(Object.assign({},d),{loading:!0})),(0,Ie.on)(se.MU,(d,{user:a})=>Object.assign(Object.assign({},d),{entity:a,loading:!1})),(0,Ie.on)(se.wU,(d,{error:a})=>Object.assign(Object.assign({},d),{error:a})),(0,Ie.on)(se.Nq,d=>Object.assign(Object.assign({},d),{loading:!0})),(0,Ie.on)(se.qB,(d,{user:a})=>Object.assign(Object.assign({},d),{entity:a,loading:!1})),(0,Ie.on)(se.Pv,(d,{error:a})=>Object.assign(Object.assign({},d),{error:a})));var Kc=b(8996),Zc=b(8505),Tc=b(5114),Fp=(b(8179),b(4848));const Lp={dictionaries:kp,users:Sf},xh=[xl,(()=>{class d{constructor(c,p,w,P,K){this.actions$=c,this.afAuth=p,this.afs=w,this.router=P,this.notificationService=K,this.init$=(0,fo.GW)(()=>this.actions$.pipe((0,fo.l4)(se.jd),(0,wn.w)(()=>this.afAuth.authState.pipe((0,qe.q)(1))),(0,wn.w)(pe=>pe?this.afs.doc(`users/${pe.uid}`).valueChanges().pipe((0,qe.q)(1),(0,jn.U)(Le=>({type:se.Yk.INIT_AUTHORIZED,user:Le,uId:pe.uid})),(0,zc.K)(Le=>(0,Yt.of)({type:se.Yk.INIT_ERROR,error:Le.message}))):(0,Yt.of)({type:se.Yk.INIT_UNAUTHORIZED})))),this.signIn$=(0,fo.GW)(()=>this.actions$.pipe((0,fo.l4)(se.cL),(0,jn.U)(pe=>pe.credential),(0,wn.w)(pe=>(0,Kc.D)(this.afAuth.signInWithEmailAndPassword(pe.email,pe.password)).pipe((0,Zc.b)(Le=>console.log("After login ",Le)),(0,wn.w)(Le=>{var tt;return this.afs.doc(`users/${null===(tt=null==Le?void 0:Le.user)||void 0===tt?void 0:tt.uid}`).valueChanges().pipe((0,qe.q)(1),(0,Zc.b)(()=>{this.router.navigate(["/"])}),(0,jn.U)(en=>{var Xt;return{type:se.Yk.SIGN_IN_EMAIL_SUCCESS,user:en,uId:null===(Xt=null==Le?void 0:Le.user)||void 0===Xt?void 0:Xt.uid}}))}),(0,zc.K)(Le=>(this.notificationService.error("Enter Valid Email and Password , If You new user please sign up"),(0,Yt.of)({type:se.Yk.SIGN_IN_EMAIL_ERROR,error:Le}))))))),this.signUp$=(0,fo.GW)(()=>this.actions$.pipe((0,fo.l4)(se.Mo),(0,jn.U)(pe=>pe.credential),(0,wn.w)(pe=>(0,Kc.D)(this.afAuth.createUserWithEmailAndPassword(pe.email,pe.password)).pipe((0,Zc.b)(()=>{this.router.navigate(["/"])}))),(0,jn.U)(pe=>({type:se.Yk.SIGN_UP_EMAIL_SUCCESS,uId:pe.user.uid}),(0,zc.K)(pe=>(0,Yt.of)({type:se.Yk.SIGN_UP_EMAIL_ERROR,error:pe}))))),this.signOut$=(0,fo.GW)(()=>this.actions$.pipe((0,fo.l4)(se.lv),(0,wn.w)(()=>(0,Kc.D)(this.afAuth.signOut()).pipe((0,Zc.b)(()=>this.router.navigate(["/auth/login"])),(0,jn.U)(()=>({type:se.Yk.SIGN_OUT_SUCCESS})),(0,zc.K)(pe=>(0,Yt.of)({type:se.Yk.SIGN_OUT_ERROR,error:pe})))))),this.createUser$=(0,fo.GW)(()=>this.actions$.pipe((0,fo.l4)(se.r4),(0,jn.U)(pe=>pe.newUserData),(0,Zc.b)(pe=>{const Le=(0,Tc.n)();this.authUserData=Le.currentUser,console.log("current user "+pe+":",this.authUserData)}),(0,jn.U)(pe=>{var Le,tt;return Object.assign(Object.assign({},pe),{uid:(null===(Le=this.authUserData)||void 0===Le?void 0:Le.uid)||"",email:(null===(tt=this.authUserData)||void 0===tt?void 0:tt.email)||"",created:(new Date).toUTCString()})}),(0,wn.w)(pe=>(0,Kc.D)(this.afs.collection("users").doc(pe.uid).set(pe)).pipe((0,Zc.b)(()=>this.router.navigate([`/myProfile/${pe.uid}`])),(0,jn.U)(()=>({type:se.Yk.CREATE_USER_SUCCESS,user:pe})),(0,zc.K)(Le=>(0,Yt.of)({type:se.Yk.CREATE_USER_ERROR,error:Le})))))),this.updateUser$=(0,fo.GW)(()=>this.actions$.pipe((0,fo.l4)(se.Nq),(0,jn.U)(pe=>pe.user),(0,wn.w)(pe=>(0,Kc.D)(this.afs.collection("users").doc(pe.uid).set(pe)).pipe((0,Zc.b)(()=>this.router.navigate([`/myProfile/${pe.uid}`])),(0,jn.U)(()=>({type:se.Yk.UPDATE_USER_SUCCESS,user:pe})),(0,zc.K)(Le=>(0,Yt.of)({type:se.Yk.UPDATE_USER_ERROR,error:Le}))))))}}return d.\u0275fac=function(c){return new(c||d)(S.LFG(fo.eX),S.LFG(St.zQ),S.LFG(ut.ST),S.LFG(U.F0),S.LFG(Fp.l))},d.\u0275prov=S.Yz7({token:d,factory:d.\u0275fac}),d})()];var Ph=b(9565);var Xl=b(1449);const Jl={parse:{dateInput:{day:"numeric",month:"numeric",year:"numeric"}},display:{dateInput:{day:"numeric",month:"short",year:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let nd=(()=>{class d{}return d.\u0275fac=function(c){return new(c||d)},d.\u0275mod=S.oAB({type:d,bootstrap:[Ze]}),d.\u0275inj=S.cJS({providers:[{provide:Mh.Ad,useValue:"en-GB"},{provide:Mh.sG,useValue:Jl}],imports:[[g.b2,de,Xl.P.forRoot(),em.PW,ft.hO.initializeApp({apiKey:"AIzaSyAnNFw1Kkvg0edhMfBs_2Me_cbYqtoK_a0",authDomain:"my-profile-app-f98bf.firebaseapp.com",projectId:"my-profile-app-f98bf",storageBucket:"my-profile-app-f98bf.appspot.com",messagingSenderId:"919145805120",appId:"1:919145805120:web:92876ab82b116dd252f6a5",measurementId:"G-NY1NM3RVKG"}),St.ww,ut.yb,Gt.TE,Pp,Mh.XK,Ie.Aw.forRoot(Lp,{runtimeChecks:{strictStateImmutability:!0,strictActionImmutability:!0}}),fo.sQ.forRoot(xh),Ph.FT.instrument({maxAge:25,logOnly:true,autoPause:!0})]]}),d})();(0,S.G48)(),g.q6().bootstrapModule(nd).catch(d=>console.error(d))},1135:(Je,Te,b)=>{b.d(Te,{X:()=>S});var g=b(7579);class S extends g.x{constructor(re){super(),this._value=re}get value(){return this.getValue()}_subscribe(re){const de=super._subscribe(re);return!de.closed&&re.next(this._value),de}getValue(){const{hasError:re,thrownError:de,_value:Ie}=this;if(re)throw de;return this._throwIfClosed(),Ie}next(re){super.next(this._value=re)}}},8306:(Je,Te,b)=>{b.d(Te,{y:()=>te});var g=b(930),S=b(727),U=b(8822),re=b(4671);var Ce=b(2416),oe=b(576),ce=b(2806);let te=(()=>{class it{constructor(Et){Et&&(this._subscribe=Et)}lift(Et){const et=new it;return et.source=this,et.operator=Et,et}subscribe(Et,et,at){const He=function qe(it){return it&&it instanceof g.Lv||function ke(it){return it&&(0,oe.m)(it.next)&&(0,oe.m)(it.error)&&(0,oe.m)(it.complete)}(it)&&(0,S.Nn)(it)}(Et)?Et:new g.Hp(Et,et,at);return(0,ce.x)(()=>{const{operator:Mt,source:ze}=this;He.add(Mt?Mt.call(He,ze):ze?this._subscribe(He):this._trySubscribe(He))}),He}_trySubscribe(Et){try{return this._subscribe(Et)}catch(et){Et.error(et)}}forEach(Et,et){return new(et=se(et))((at,He)=>{const Mt=new g.Hp({next:ze=>{try{Et(ze)}catch(Be){He(Be),Mt.unsubscribe()}},error:He,complete:at});this.subscribe(Mt)})}_subscribe(Et){var et;return null===(et=this.source)||void 0===et?void 0:et.subscribe(Et)}[U.L](){return this}pipe(...Et){return function Ie(it){return 0===it.length?re.y:1===it.length?it[0]:function(Et){return it.reduce((et,at)=>at(et),Et)}}(Et)(this)}toPromise(Et){return new(Et=se(Et))((et,at)=>{let He;this.subscribe(Mt=>He=Mt,Mt=>at(Mt),()=>et(He))})}}return it.create=ut=>new it(ut),it})();function se(it){var ut;return null!==(ut=null!=it?it:Ce.v.Promise)&&void 0!==ut?ut:Promise}},4707:(Je,Te,b)=>{b.d(Te,{t:()=>U});var g=b(7579),S=b(6063);class U extends g.x{constructor(de=1/0,Ie=1/0,Ce=S.l){super(),this._bufferSize=de,this._windowTime=Ie,this._timestampProvider=Ce,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ie===1/0,this._bufferSize=Math.max(1,de),this._windowTime=Math.max(1,Ie)}next(de){const{isStopped:Ie,_buffer:Ce,_infiniteTimeWindow:oe,_timestampProvider:ce,_windowTime:te}=this;Ie||(Ce.push(de),!oe&&Ce.push(ce.now()+te)),this._trimBuffer(),super.next(de)}_subscribe(de){this._throwIfClosed(),this._trimBuffer();const Ie=this._innerSubscribe(de),{_infiniteTimeWindow:Ce,_buffer:oe}=this,ce=oe.slice();for(let te=0;te<ce.length&&!de.closed;te+=Ce?1:2)de.next(ce[te]);return this._checkFinalizedStatuses(de),Ie}_trimBuffer(){const{_bufferSize:de,_timestampProvider:Ie,_buffer:Ce,_infiniteTimeWindow:oe}=this,ce=(oe?1:2)*de;if(de<1/0&&ce<Ce.length&&Ce.splice(0,Ce.length-ce),!oe){const te=Ie.now();let se=0;for(let ke=1;ke<Ce.length&&Ce[ke]<=te;ke+=2)se=ke;se&&Ce.splice(0,se+1)}}}},7579:(Je,Te,b)=>{b.d(Te,{x:()=>Ce});var g=b(8306),S=b(727);const re=(0,b(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=b(8737),Ie=b(2806);let Ce=(()=>{class ce extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(se){const ke=new oe(this,this);return ke.operator=se,ke}_throwIfClosed(){if(this.closed)throw new re}next(se){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ke of this.currentObservers)ke.next(se)}})}error(se){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=se;const{observers:ke}=this;for(;ke.length;)ke.shift().error(se)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:se}=this;for(;se.length;)se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var se;return(null===(se=this.observers)||void 0===se?void 0:se.length)>0}_trySubscribe(se){return this._throwIfClosed(),super._trySubscribe(se)}_subscribe(se){return this._throwIfClosed(),this._checkFinalizedStatuses(se),this._innerSubscribe(se)}_innerSubscribe(se){const{hasError:ke,isStopped:qe,observers:it}=this;return ke||qe?S.Lc:(this.currentObservers=null,it.push(se),new S.w0(()=>{this.currentObservers=null,(0,de.P)(it,se)}))}_checkFinalizedStatuses(se){const{hasError:ke,thrownError:qe,isStopped:it}=this;ke?se.error(qe):it&&se.complete()}asObservable(){const se=new g.y;return se.source=this,se}}return ce.create=(te,se)=>new oe(te,se),ce})();class oe extends Ce{constructor(te,se){super(),this.destination=te,this.source=se}next(te){var se,ke;null===(ke=null===(se=this.destination)||void 0===se?void 0:se.next)||void 0===ke||ke.call(se,te)}error(te){var se,ke;null===(ke=null===(se=this.destination)||void 0===se?void 0:se.error)||void 0===ke||ke.call(se,te)}complete(){var te,se;null===(se=null===(te=this.destination)||void 0===te?void 0:te.complete)||void 0===se||se.call(te)}_subscribe(te){var se,ke;return null!==(ke=null===(se=this.source)||void 0===se?void 0:se.subscribe(te))&&void 0!==ke?ke:S.Lc}}},930:(Je,Te,b)=>{b.d(Te,{Hp:()=>Et,Lv:()=>ke});var g=b(576),S=b(727),U=b(2416),re=b(7849),de=b(5032);const Ie=ce("C",void 0,void 0);function ce(ze,Be,Ge){return{kind:ze,value:Be,error:Ge}}var te=b(3410),se=b(2806);class ke extends S.w0{constructor(Be){super(),this.isStopped=!1,Be?(this.destination=Be,(0,S.Nn)(Be)&&Be.add(this)):this.destination=Mt}static create(Be,Ge,Qe){return new Et(Be,Ge,Qe)}next(Be){this.isStopped?He(function oe(ze){return ce("N",ze,void 0)}(Be),this):this._next(Be)}error(Be){this.isStopped?He(function Ce(ze){return ce("E",void 0,ze)}(Be),this):(this.isStopped=!0,this._error(Be))}complete(){this.isStopped?He(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Be){this.destination.next(Be)}_error(Be){try{this.destination.error(Be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function it(ze,Be){return qe.call(ze,Be)}class ut{constructor(Be){this.partialObserver=Be}next(Be){const{partialObserver:Ge}=this;if(Ge.next)try{Ge.next(Be)}catch(Qe){et(Qe)}}error(Be){const{partialObserver:Ge}=this;if(Ge.error)try{Ge.error(Be)}catch(Qe){et(Qe)}else et(Be)}complete(){const{partialObserver:Be}=this;if(Be.complete)try{Be.complete()}catch(Ge){et(Ge)}}}class Et extends ke{constructor(Be,Ge,Qe){let Ne;if(super(),(0,g.m)(Be)||!Be)Ne={next:null!=Be?Be:void 0,error:null!=Ge?Ge:void 0,complete:null!=Qe?Qe:void 0};else{let gt;this&&U.v.useDeprecatedNextContext?(gt=Object.create(Be),gt.unsubscribe=()=>this.unsubscribe(),Ne={next:Be.next&&it(Be.next,gt),error:Be.error&&it(Be.error,gt),complete:Be.complete&&it(Be.complete,gt)}):Ne=Be}this.destination=new ut(Ne)}}function et(ze){U.v.useDeprecatedSynchronousErrorHandling?(0,se.O)(ze):(0,re.h)(ze)}function He(ze,Be){const{onStoppedNotification:Ge}=U.v;Ge&&te.z.setTimeout(()=>Ge(ze,Be))}const Mt={closed:!0,next:de.Z,error:function at(ze){throw ze},complete:de.Z}},727:(Je,Te,b)=>{b.d(Te,{Lc:()=>Ie,w0:()=>de,Nn:()=>Ce});var g=b(576);const U=(0,b(3888).d)(ce=>function(se){ce(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((ke,qe)=>`${qe+1}) ${ke.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se});var re=b(8737);class de{constructor(te){this.initialTeardown=te,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let te;if(!this.closed){this.closed=!0;const{_parentage:se}=this;if(se)if(this._parentage=null,Array.isArray(se))for(const it of se)it.remove(this);else se.remove(this);const{initialTeardown:ke}=this;if((0,g.m)(ke))try{ke()}catch(it){te=it instanceof U?it.errors:[it]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const it of qe)try{oe(it)}catch(ut){te=null!=te?te:[],ut instanceof U?te=[...te,...ut.errors]:te.push(ut)}}if(te)throw new U(te)}}add(te){var se;if(te&&te!==this)if(this.closed)oe(te);else{if(te instanceof de){if(te.closed||te._hasParent(this))return;te._addParent(this)}(this._finalizers=null!==(se=this._finalizers)&&void 0!==se?se:[]).push(te)}}_hasParent(te){const{_parentage:se}=this;return se===te||Array.isArray(se)&&se.includes(te)}_addParent(te){const{_parentage:se}=this;this._parentage=Array.isArray(se)?(se.push(te),se):se?[se,te]:te}_removeParent(te){const{_parentage:se}=this;se===te?this._parentage=null:Array.isArray(se)&&(0,re.P)(se,te)}remove(te){const{_finalizers:se}=this;se&&(0,re.P)(se,te),te instanceof de&&te._removeParent(this)}}de.EMPTY=(()=>{const ce=new de;return ce.closed=!0,ce})();const Ie=de.EMPTY;function Ce(ce){return ce instanceof de||ce&&"closed"in ce&&(0,g.m)(ce.remove)&&(0,g.m)(ce.add)&&(0,g.m)(ce.unsubscribe)}function oe(ce){(0,g.m)(ce)?ce():ce.unsubscribe()}},2416:(Je,Te,b)=>{b.d(Te,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Je,Te,b)=>{b.d(Te,{a:()=>te});var g=b(8306),S=b(4742),U=b(8996),re=b(4671),de=b(3268),Ie=b(3269),Ce=b(1810),oe=b(5403),ce=b(9672);function te(...qe){const it=(0,Ie.yG)(qe),ut=(0,Ie.jO)(qe),{args:Et,keys:et}=(0,S.D)(qe);if(0===Et.length)return(0,U.D)([],it);const at=new g.y(function se(qe,it,ut=re.y){return Et=>{ke(it,()=>{const{length:et}=qe,at=new Array(et);let He=et,Mt=et;for(let ze=0;ze<et;ze++)ke(it,()=>{const Be=(0,U.D)(qe[ze],it);let Ge=!1;Be.subscribe((0,oe.x)(Et,Qe=>{at[ze]=Qe,Ge||(Ge=!0,Mt--),Mt||Et.next(ut(at.slice()))},()=>{--He||Et.complete()}))},Et)},Et)}}(Et,it,et?He=>(0,Ce.n)(et,He):re.y));return ut?at.pipe((0,de.Z)(ut)):at}function ke(qe,it,ut){qe?(0,ce.f)(ut,qe,it):it()}},7272:(Je,Te,b)=>{b.d(Te,{z:()=>de});var g=b(8189),U=b(3269),re=b(8996);function de(...Ie){return function S(){return(0,g.J)(1)}()((0,re.D)(Ie,(0,U.yG)(Ie)))}},9770:(Je,Te,b)=>{b.d(Te,{P:()=>U});var g=b(8306),S=b(8421);function U(re){return new g.y(de=>{(0,S.Xf)(re()).subscribe(de)})}},515:(Je,Te,b)=>{b.d(Te,{E:()=>S});const S=new(b(8306).y)(de=>de.complete())},8996:(Je,Te,b)=>{b.d(Te,{D:()=>Be});var g=b(8421),S=b(5363),U=b(9468),Ie=b(8306),oe=b(2202),ce=b(576),te=b(9672);function ke(Ge,Qe){if(!Ge)throw new Error("Iterable cannot be null");return new Ie.y(Ne=>{(0,te.f)(Ne,Qe,()=>{const gt=Ge[Symbol.asyncIterator]();(0,te.f)(Ne,Qe,()=>{gt.next().then(vt=>{vt.done?Ne.complete():Ne.next(vt.value)})},0,!0)})})}var qe=b(3670),it=b(8239),ut=b(1144),Et=b(6495),et=b(2206),at=b(4532),He=b(3260);function Be(Ge,Qe){return Qe?function ze(Ge,Qe){if(null!=Ge){if((0,qe.c)(Ge))return function re(Ge,Qe){return(0,g.Xf)(Ge).pipe((0,U.R)(Qe),(0,S.Q)(Qe))}(Ge,Qe);if((0,ut.z)(Ge))return function Ce(Ge,Qe){return new Ie.y(Ne=>{let gt=0;return Qe.schedule(function(){gt===Ge.length?Ne.complete():(Ne.next(Ge[gt++]),Ne.closed||this.schedule())})})}(Ge,Qe);if((0,it.t)(Ge))return function de(Ge,Qe){return(0,g.Xf)(Ge).pipe((0,U.R)(Qe),(0,S.Q)(Qe))}(Ge,Qe);if((0,et.D)(Ge))return ke(Ge,Qe);if((0,Et.T)(Ge))return function se(Ge,Qe){return new Ie.y(Ne=>{let gt;return(0,te.f)(Ne,Qe,()=>{gt=Ge[oe.h](),(0,te.f)(Ne,Qe,()=>{let vt,sn;try{({value:vt,done:sn}=gt.next())}catch(tn){return void Ne.error(tn)}sn?Ne.complete():Ne.next(vt)},0,!0)}),()=>(0,ce.m)(null==gt?void 0:gt.return)&&gt.return()})}(Ge,Qe);if((0,He.L)(Ge))return function Mt(Ge,Qe){return ke((0,He.Q)(Ge),Qe)}(Ge,Qe)}throw(0,at.z)(Ge)}(Ge,Qe):(0,g.Xf)(Ge)}},4968:(Je,Te,b)=>{b.d(Te,{R:()=>te});var g=b(8421),S=b(8306),U=b(5577),re=b(1144),de=b(576),Ie=b(3268);const Ce=["addListener","removeListener"],oe=["addEventListener","removeEventListener"],ce=["on","off"];function te(ut,Et,et,at){if((0,de.m)(et)&&(at=et,et=void 0),at)return te(ut,Et,et).pipe((0,Ie.Z)(at));const[He,Mt]=function it(ut){return(0,de.m)(ut.addEventListener)&&(0,de.m)(ut.removeEventListener)}(ut)?oe.map(ze=>Be=>ut[ze](Et,Be,et)):function ke(ut){return(0,de.m)(ut.addListener)&&(0,de.m)(ut.removeListener)}(ut)?Ce.map(se(ut,Et)):function qe(ut){return(0,de.m)(ut.on)&&(0,de.m)(ut.off)}(ut)?ce.map(se(ut,Et)):[];if(!He&&(0,re.z)(ut))return(0,U.z)(ze=>te(ze,Et,et))((0,g.Xf)(ut));if(!He)throw new TypeError("Invalid event target");return new S.y(ze=>{const Be=(...Ge)=>ze.next(1<Ge.length?Ge:Ge[0]);return He(Be),()=>Mt(Be)})}function se(ut,Et){return et=>at=>ut[et](Et,at)}},8421:(Je,Te,b)=>{b.d(Te,{Xf:()=>qe});var g=b(655),S=b(1144),U=b(8239),re=b(8306),de=b(3670),Ie=b(2206),Ce=b(4532),oe=b(6495),ce=b(3260),te=b(576),se=b(7849),ke=b(8822);function qe(ze){if(ze instanceof re.y)return ze;if(null!=ze){if((0,de.c)(ze))return function it(ze){return new re.y(Be=>{const Ge=ze[ke.L]();if((0,te.m)(Ge.subscribe))return Ge.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ze);if((0,S.z)(ze))return function ut(ze){return new re.y(Be=>{for(let Ge=0;Ge<ze.length&&!Be.closed;Ge++)Be.next(ze[Ge]);Be.complete()})}(ze);if((0,U.t)(ze))return function Et(ze){return new re.y(Be=>{ze.then(Ge=>{Be.closed||(Be.next(Ge),Be.complete())},Ge=>Be.error(Ge)).then(null,se.h)})}(ze);if((0,Ie.D)(ze))return at(ze);if((0,oe.T)(ze))return function et(ze){return new re.y(Be=>{for(const Ge of ze)if(Be.next(Ge),Be.closed)return;Be.complete()})}(ze);if((0,ce.L)(ze))return function He(ze){return at((0,ce.Q)(ze))}(ze)}throw(0,Ce.z)(ze)}function at(ze){return new re.y(Be=>{(function Mt(ze,Be){var Ge,Qe,Ne,gt;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ge=(0,g.KL)(ze);!(Qe=yield Ge.next()).done;)if(Be.next(Qe.value),Be.closed)return}catch(vt){Ne={error:vt}}finally{try{Qe&&!Qe.done&&(gt=Ge.return)&&(yield gt.call(Ge))}finally{if(Ne)throw Ne.error}}Be.complete()})})(ze,Be).catch(Ge=>Be.error(Ge))})}},6451:(Je,Te,b)=>{b.d(Te,{T:()=>Ie});var g=b(8189),S=b(8421),U=b(515),re=b(3269),de=b(8996);function Ie(...Ce){const oe=(0,re.yG)(Ce),ce=(0,re._6)(Ce,1/0),te=Ce;return te.length?1===te.length?(0,S.Xf)(te[0]):(0,g.J)(ce)((0,de.D)(te,oe)):U.E}},9646:(Je,Te,b)=>{b.d(Te,{of:()=>U});var g=b(3269),S=b(8996);function U(...re){const de=(0,g.yG)(re);return(0,S.D)(re,de)}},2843:(Je,Te,b)=>{b.d(Te,{_:()=>U});var g=b(8306),S=b(576);function U(re,de){const Ie=(0,S.m)(re)?re:()=>re,Ce=oe=>oe.error(Ie());return new g.y(de?oe=>de.schedule(Ce,0,oe):Ce)}},2805:(Je,Te,b)=>{b.d(Te,{H:()=>de});var g=b(8306),S=b(4986),U=b(3532),re=b(1165);function de(Ie=0,Ce,oe=S.P){let ce=-1;return null!=Ce&&((0,U.K)(Ce)?oe=Ce:ce=Ce),new g.y(te=>{let se=(0,re.q)(Ie)?+Ie-oe.now():Ie;se<0&&(se=0);let ke=0;return oe.schedule(function(){te.closed||(te.next(ke++),0<=ce?this.schedule(void 0,ce):te.complete())},se)})}},7188:(Je,Te,b)=>{b.d(Te,{$:()=>oe});var g=b(8306),S=b(8421);const{isArray:U}=Array;var de=b(515),Ie=b(5403),Ce=b(3269);function oe(...ce){const te=(0,Ce.jO)(ce),se=function re(ce){return 1===ce.length&&U(ce[0])?ce[0]:ce}(ce);return se.length?new g.y(ke=>{let qe=se.map(()=>[]),it=se.map(()=>!1);ke.add(()=>{qe=it=null});for(let ut=0;!ke.closed&&ut<se.length;ut++)(0,S.Xf)(se[ut]).subscribe((0,Ie.x)(ke,Et=>{if(qe[ut].push(Et),qe.every(et=>et.length)){const et=qe.map(at=>at.shift());ke.next(te?te(...et):et),qe.some((at,He)=>!at.length&&it[He])&&ke.complete()}},()=>{it[ut]=!0,!qe[ut].length&&ke.complete()}));return()=>{qe=it=null}}):de.E}},5403:(Je,Te,b)=>{b.d(Te,{x:()=>S,Q:()=>U});var g=b(930);function S(re,de,Ie,Ce,oe){return new U(re,de,Ie,Ce,oe)}class U extends g.Lv{constructor(de,Ie,Ce,oe,ce,te){super(de),this.onFinalize=ce,this.shouldUnsubscribe=te,this._next=Ie?function(se){try{Ie(se)}catch(ke){de.error(ke)}}:super._next,this._error=oe?function(se){try{oe(se)}catch(ke){de.error(ke)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(se){de.error(se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},262:(Je,Te,b)=>{b.d(Te,{K:()=>re});var g=b(8421),S=b(5403),U=b(4482);function re(de){return(0,U.e)((Ie,Ce)=>{let te,oe=null,ce=!1;oe=Ie.subscribe((0,S.x)(Ce,void 0,void 0,se=>{te=(0,g.Xf)(de(se,re(de)(Ie))),oe?(oe.unsubscribe(),oe=null,te.subscribe(Ce)):ce=!0})),ce&&(oe.unsubscribe(),oe=null,te.subscribe(Ce))})}},4351:(Je,Te,b)=>{b.d(Te,{b:()=>U});var g=b(5577),S=b(576);function U(re,de){return(0,S.m)(de)?(0,g.z)(re,de,1):(0,g.z)(re,1)}},8372:(Je,Te,b)=>{b.d(Te,{b:()=>re});var g=b(4986),S=b(4482),U=b(5403);function re(de,Ie=g.z){return(0,S.e)((Ce,oe)=>{let ce=null,te=null,se=null;const ke=()=>{if(ce){ce.unsubscribe(),ce=null;const it=te;te=null,oe.next(it)}};function qe(){const it=se+de,ut=Ie.now();if(ut<it)return ce=this.schedule(void 0,it-ut),void oe.add(ce);ke()}Ce.subscribe((0,U.x)(oe,it=>{te=it,se=Ie.now(),ce||(ce=Ie.schedule(qe,de),oe.add(ce))},()=>{ke(),oe.complete()},void 0,()=>{te=ce=null}))})}},6590:(Je,Te,b)=>{b.d(Te,{d:()=>U});var g=b(4482),S=b(5403);function U(re){return(0,g.e)((de,Ie)=>{let Ce=!1;de.subscribe((0,S.x)(Ie,oe=>{Ce=!0,Ie.next(oe)},()=>{Ce||Ie.next(re),Ie.complete()}))})}},1884:(Je,Te,b)=>{b.d(Te,{x:()=>re});var g=b(4671),S=b(4482),U=b(5403);function re(Ie,Ce=g.y){return Ie=null!=Ie?Ie:de,(0,S.e)((oe,ce)=>{let te,se=!0;oe.subscribe((0,U.x)(ce,ke=>{const qe=Ce(ke);(se||!Ie(te,qe))&&(se=!1,te=qe,ce.next(ke))}))})}function de(Ie,Ce){return Ie===Ce}},9300:(Je,Te,b)=>{b.d(Te,{h:()=>U});var g=b(4482),S=b(5403);function U(re,de){return(0,g.e)((Ie,Ce)=>{let oe=0;Ie.subscribe((0,S.x)(Ce,ce=>re.call(de,ce,oe++)&&Ce.next(ce)))})}},8746:(Je,Te,b)=>{b.d(Te,{x:()=>S});var g=b(4482);function S(U){return(0,g.e)((re,de)=>{try{re.subscribe(de)}finally{de.add(U)}})}},590:(Je,Te,b)=>{b.d(Te,{P:()=>Ce});var g=b(6805),S=b(9300),U=b(5698),re=b(6590),de=b(8068),Ie=b(4671);function Ce(oe,ce){const te=arguments.length>=2;return se=>se.pipe(oe?(0,S.h)((ke,qe)=>oe(ke,qe,se)):Ie.y,(0,U.q)(1),te?(0,re.d)(ce):(0,de.T)(()=>new g.K))}},8502:(Je,Te,b)=>{b.d(Te,{l:()=>re});var g=b(4482),S=b(5403),U=b(5032);function re(){return(0,g.e)((de,Ie)=>{de.subscribe((0,S.x)(Ie,U.Z))})}},4004:(Je,Te,b)=>{b.d(Te,{U:()=>U});var g=b(4482),S=b(5403);function U(re,de){return(0,g.e)((Ie,Ce)=>{let oe=0;Ie.subscribe((0,S.x)(Ce,ce=>{Ce.next(re.call(de,ce,oe++))}))})}},8189:(Je,Te,b)=>{b.d(Te,{J:()=>U});var g=b(5577),S=b(4671);function U(re=1/0){return(0,g.z)(S.y,re)}},5577:(Je,Te,b)=>{b.d(Te,{z:()=>oe});var g=b(4004),S=b(8421),U=b(4482),re=b(9672),de=b(5403),Ce=b(576);function oe(ce,te,se=1/0){return(0,Ce.m)(te)?oe((ke,qe)=>(0,g.U)((it,ut)=>te(ke,it,qe,ut))((0,S.Xf)(ce(ke,qe))),se):("number"==typeof te&&(se=te),(0,U.e)((ke,qe)=>function Ie(ce,te,se,ke,qe,it,ut,Et){const et=[];let at=0,He=0,Mt=!1;const ze=()=>{Mt&&!et.length&&!at&&te.complete()},Be=Qe=>at<ke?Ge(Qe):et.push(Qe),Ge=Qe=>{it&&te.next(Qe),at++;let Ne=!1;(0,S.Xf)(se(Qe,He++)).subscribe((0,de.x)(te,gt=>{null==qe||qe(gt),it?Be(gt):te.next(gt)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(at--;et.length&&at<ke;){const gt=et.shift();ut?(0,re.f)(te,ut,()=>Ge(gt)):Ge(gt)}ze()}catch(gt){te.error(gt)}}))};return ce.subscribe((0,de.x)(te,Be,()=>{Mt=!0,ze()})),()=>{null==Et||Et()}}(ke,qe,ce,se)))}},5363:(Je,Te,b)=>{b.d(Te,{Q:()=>re});var g=b(9672),S=b(4482),U=b(5403);function re(de,Ie=0){return(0,S.e)((Ce,oe)=>{Ce.subscribe((0,U.x)(oe,ce=>(0,g.f)(oe,de,()=>oe.next(ce),Ie),()=>(0,g.f)(oe,de,()=>oe.complete(),Ie),ce=>(0,g.f)(oe,de,()=>oe.error(ce),Ie)))})}},5026:(Je,Te,b)=>{b.d(Te,{R:()=>re});var g=b(4482),S=b(5403);function U(de,Ie,Ce,oe,ce){return(te,se)=>{let ke=Ce,qe=Ie,it=0;te.subscribe((0,S.x)(se,ut=>{const Et=it++;qe=ke?de(qe,ut,Et):(ke=!0,ut),oe&&se.next(qe)},ce&&(()=>{ke&&se.next(qe),se.complete()})))}}function re(de,Ie){return(0,g.e)(U(de,Ie,arguments.length>=2,!0))}},3099:(Je,Te,b)=>{b.d(Te,{B:()=>de});var g=b(8421),S=b(7579),U=b(930),re=b(4482);function de(Ce={}){const{connector:oe=(()=>new S.x),resetOnError:ce=!0,resetOnComplete:te=!0,resetOnRefCountZero:se=!0}=Ce;return ke=>{let qe,it,ut,Et=0,et=!1,at=!1;const He=()=>{null==it||it.unsubscribe(),it=void 0},Mt=()=>{He(),qe=ut=void 0,et=at=!1},ze=()=>{const Be=qe;Mt(),null==Be||Be.unsubscribe()};return(0,re.e)((Be,Ge)=>{Et++,!at&&!et&&He();const Qe=ut=null!=ut?ut:oe();Ge.add(()=>{Et--,0===Et&&!at&&!et&&(it=Ie(ze,se))}),Qe.subscribe(Ge),!qe&&Et>0&&(qe=new U.Hp({next:Ne=>Qe.next(Ne),error:Ne=>{at=!0,He(),it=Ie(Mt,ce,Ne),Qe.error(Ne)},complete:()=>{et=!0,He(),it=Ie(Mt,te),Qe.complete()}}),(0,g.Xf)(Be).subscribe(qe))})(ke)}}function Ie(Ce,oe,...ce){if(!0===oe)return void Ce();if(!1===oe)return;const te=new U.Hp({next:()=>{te.unsubscribe(),Ce()}});return oe(...ce).subscribe(te)}},5684:(Je,Te,b)=>{b.d(Te,{T:()=>S});var g=b(9300);function S(U){return(0,g.h)((re,de)=>U<=de)}},8675:(Je,Te,b)=>{b.d(Te,{O:()=>re});var g=b(7272),S=b(3269),U=b(4482);function re(...de){const Ie=(0,S.yG)(de);return(0,U.e)((Ce,oe)=>{(Ie?(0,g.z)(de,Ce,Ie):(0,g.z)(de,Ce)).subscribe(oe)})}},9468:(Je,Te,b)=>{b.d(Te,{R:()=>S});var g=b(4482);function S(U,re=0){return(0,g.e)((de,Ie)=>{Ie.add(U.schedule(()=>de.subscribe(Ie),re))})}},3900:(Je,Te,b)=>{b.d(Te,{w:()=>re});var g=b(8421),S=b(4482),U=b(5403);function re(de,Ie){return(0,S.e)((Ce,oe)=>{let ce=null,te=0,se=!1;const ke=()=>se&&!ce&&oe.complete();Ce.subscribe((0,U.x)(oe,qe=>{null==ce||ce.unsubscribe();let it=0;const ut=te++;(0,g.Xf)(de(qe,ut)).subscribe(ce=(0,U.x)(oe,Et=>oe.next(Ie?Ie(qe,Et,ut,it++):Et),()=>{ce=null,ke()}))},()=>{se=!0,ke()}))})}},5698:(Je,Te,b)=>{b.d(Te,{q:()=>re});var g=b(515),S=b(4482),U=b(5403);function re(de){return de<=0?()=>g.E:(0,S.e)((Ie,Ce)=>{let oe=0;Ie.subscribe((0,U.x)(Ce,ce=>{++oe<=de&&(Ce.next(ce),de<=oe&&Ce.complete())}))})}},2722:(Je,Te,b)=>{b.d(Te,{R:()=>de});var g=b(4482),S=b(5403),U=b(8421),re=b(5032);function de(Ie){return(0,g.e)((Ce,oe)=>{(0,U.Xf)(Ie).subscribe((0,S.x)(oe,()=>oe.complete(),re.Z)),!oe.closed&&Ce.subscribe(oe)})}},8505:(Je,Te,b)=>{b.d(Te,{b:()=>de});var g=b(576),S=b(4482),U=b(5403),re=b(4671);function de(Ie,Ce,oe){const ce=(0,g.m)(Ie)||Ce||oe?{next:Ie,error:Ce,complete:oe}:Ie;return ce?(0,S.e)((te,se)=>{var ke;null===(ke=ce.subscribe)||void 0===ke||ke.call(ce);let qe=!0;te.subscribe((0,U.x)(se,it=>{var ut;null===(ut=ce.next)||void 0===ut||ut.call(ce,it),se.next(it)},()=>{var it;qe=!1,null===(it=ce.complete)||void 0===it||it.call(ce),se.complete()},it=>{var ut;qe=!1,null===(ut=ce.error)||void 0===ut||ut.call(ce,it),se.error(it)},()=>{var it,ut;qe&&(null===(it=ce.unsubscribe)||void 0===it||it.call(ce)),null===(ut=ce.finalize)||void 0===ut||ut.call(ce)}))}):re.y}},8068:(Je,Te,b)=>{b.d(Te,{T:()=>re});var g=b(6805),S=b(4482),U=b(5403);function re(Ie=de){return(0,S.e)((Ce,oe)=>{let ce=!1;Ce.subscribe((0,U.x)(oe,te=>{ce=!0,oe.next(te)},()=>ce?oe.complete():oe.error(Ie())))})}function de(){return new g.K}},7414:(Je,Te,b)=>{b.d(Te,{V:()=>ce});var g=b(4986),S=b(1165),U=b(4482),re=b(8421),de=b(3888),Ie=b(5403),Ce=b(9672);const oe=(0,de.d)(se=>function(qe=null){se(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=qe});function ce(se,ke){const{first:qe,each:it,with:ut=te,scheduler:Et=(null!=ke?ke:g.z),meta:et=null}=(0,S.q)(se)?{first:se}:"number"==typeof se?{each:se}:se;if(null==qe&&null==it)throw new TypeError("No timeout provided.");return(0,U.e)((at,He)=>{let Mt,ze,Be=null,Ge=0;const Qe=Ne=>{ze=(0,Ce.f)(He,Et,()=>{try{Mt.unsubscribe(),(0,re.Xf)(ut({meta:et,lastValue:Be,seen:Ge})).subscribe(He)}catch(gt){He.error(gt)}},Ne)};Mt=at.subscribe((0,Ie.x)(He,Ne=>{null==ze||ze.unsubscribe(),Ge++,He.next(Be=Ne),it>0&&Qe(it)},void 0,void 0,()=>{(null==ze?void 0:ze.closed)||null==ze||ze.unsubscribe(),Be=null})),!Ge&&Qe(null!=qe?"number"==typeof qe?qe:+qe-Et.now():it)})}function te(se){throw new oe(se)}},1365:(Je,Te,b)=>{b.d(Te,{M:()=>Ce});var g=b(4482),S=b(5403),U=b(8421),re=b(4671),de=b(5032),Ie=b(3269);function Ce(...oe){const ce=(0,Ie.jO)(oe);return(0,g.e)((te,se)=>{const ke=oe.length,qe=new Array(ke);let it=oe.map(()=>!1),ut=!1;for(let Et=0;Et<ke;Et++)(0,U.Xf)(oe[Et]).subscribe((0,S.x)(se,et=>{qe[Et]=et,!ut&&!it[Et]&&(it[Et]=!0,(ut=it.every(re.y))&&(it=null))},de.Z));te.subscribe((0,S.x)(se,Et=>{if(ut){const et=[Et,...qe];se.next(ce?ce(...et):et)}}))})}},4408:(Je,Te,b)=>{b.d(Te,{o:()=>de});var g=b(727);class S extends g.w0{constructor(Ce,oe){super()}schedule(Ce,oe=0){return this}}const U={setInterval(Ie,Ce,...oe){const{delegate:ce}=U;return(null==ce?void 0:ce.setInterval)?ce.setInterval(Ie,Ce,...oe):setInterval(Ie,Ce,...oe)},clearInterval(Ie){const{delegate:Ce}=U;return((null==Ce?void 0:Ce.clearInterval)||clearInterval)(Ie)},delegate:void 0};var re=b(8737);class de extends S{constructor(Ce,oe){super(Ce,oe),this.scheduler=Ce,this.work=oe,this.pending=!1}schedule(Ce,oe=0){var ce;if(this.closed)return this;this.state=Ce;const te=this.id,se=this.scheduler;return null!=te&&(this.id=this.recycleAsyncId(se,te,oe)),this.pending=!0,this.delay=oe,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId(se,this.id,oe),this}requestAsyncId(Ce,oe,ce=0){return U.setInterval(Ce.flush.bind(Ce,this),ce)}recycleAsyncId(Ce,oe,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return oe;null!=oe&&U.clearInterval(oe)}execute(Ce,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(Ce,oe);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,oe){let te,ce=!1;try{this.work(Ce)}catch(se){ce=!0,te=se||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),te}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:oe}=this,{actions:ce}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(ce,this),null!=Ce&&(this.id=this.recycleAsyncId(oe,Ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,Te,b)=>{b.d(Te,{v:()=>U});var g=b(6063);class S{constructor(de,Ie=S.now){this.schedulerActionCtor=de,this.now=Ie}schedule(de,Ie=0,Ce){return new this.schedulerActionCtor(this,de).schedule(Ce,Ie)}}S.now=g.l.now;class U extends S{constructor(de,Ie=S.now){super(de,Ie),this.actions=[],this._active=!1}flush(de){const{actions:Ie}=this;if(this._active)return void Ie.push(de);let Ce;this._active=!0;do{if(Ce=de.execute(de.state,de.delay))break}while(de=Ie.shift());if(this._active=!1,Ce){for(;de=Ie.shift();)de.unsubscribe();throw Ce}}}},4986:(Je,Te,b)=>{b.d(Te,{z:()=>U,P:()=>re});var g=b(4408);const U=new(b(7565).v)(g.o),re=U},6063:(Je,Te,b)=>{b.d(Te,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},233:(Je,Te,b)=>{b.d(Te,{N:()=>de});var g=b(4408),U=b(7565);const de=new class re extends U.v{}(class S extends g.o{constructor(oe,ce){super(oe,ce),this.scheduler=oe,this.work=ce}schedule(oe,ce=0){return ce>0?super.schedule(oe,ce):(this.delay=ce,this.state=oe,this.scheduler.flush(this),this)}execute(oe,ce){return ce>0||this.closed?super.execute(oe,ce):this._execute(oe,ce)}requestAsyncId(oe,ce,te=0){return null!=te&&te>0||null==te&&this.delay>0?super.requestAsyncId(oe,ce,te):(oe.flush(this),0)}})},3410:(Je,Te,b)=>{b.d(Te,{z:()=>g});const g={setTimeout(S,U,...re){const{delegate:de}=g;return(null==de?void 0:de.setTimeout)?de.setTimeout(S,U,...re):setTimeout(S,U,...re)},clearTimeout(S){const{delegate:U}=g;return((null==U?void 0:U.clearTimeout)||clearTimeout)(S)},delegate:void 0}},2202:(Je,Te,b)=>{b.d(Te,{h:()=>S});const S=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,Te,b)=>{b.d(Te,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Je,Te,b)=>{b.d(Te,{K:()=>S});const S=(0,b(3888).d)(U=>function(){U(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Je,Te,b)=>{b.d(Te,{jO:()=>re,yG:()=>de,_6:()=>Ie});var g=b(576),S=b(3532);function U(Ce){return Ce[Ce.length-1]}function re(Ce){return(0,g.m)(U(Ce))?Ce.pop():void 0}function de(Ce){return(0,S.K)(U(Ce))?Ce.pop():void 0}function Ie(Ce,oe){return"number"==typeof U(Ce)?Ce.pop():oe}},4742:(Je,Te,b)=>{b.d(Te,{D:()=>de});const{isArray:g}=Array,{getPrototypeOf:S,prototype:U,keys:re}=Object;function de(Ce){if(1===Ce.length){const oe=Ce[0];if(g(oe))return{args:oe,keys:null};if(function Ie(Ce){return Ce&&"object"==typeof Ce&&S(Ce)===U}(oe)){const ce=re(oe);return{args:ce.map(te=>oe[te]),keys:ce}}}return{args:Ce,keys:null}}},8737:(Je,Te,b)=>{function g(S,U){if(S){const re=S.indexOf(U);0<=re&&S.splice(re,1)}}b.d(Te,{P:()=>g})},3888:(Je,Te,b)=>{function g(S){const re=S(de=>{Error.call(de),de.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}b.d(Te,{d:()=>g})},1810:(Je,Te,b)=>{function g(S,U){return S.reduce((re,de,Ie)=>(re[de]=U[Ie],re),{})}b.d(Te,{n:()=>g})},2806:(Je,Te,b)=>{b.d(Te,{x:()=>U,O:()=>re});var g=b(2416);let S=null;function U(de){if(g.v.useDeprecatedSynchronousErrorHandling){const Ie=!S;if(Ie&&(S={errorThrown:!1,error:null}),de(),Ie){const{errorThrown:Ce,error:oe}=S;if(S=null,Ce)throw oe}}else de()}function re(de){g.v.useDeprecatedSynchronousErrorHandling&&S&&(S.errorThrown=!0,S.error=de)}},9672:(Je,Te,b)=>{function g(S,U,re,de=0,Ie=!1){const Ce=U.schedule(function(){re(),Ie?S.add(this.schedule(null,de)):this.unsubscribe()},de);if(S.add(Ce),!Ie)return Ce}b.d(Te,{f:()=>g})},4671:(Je,Te,b)=>{function g(S){return S}b.d(Te,{y:()=>g})},1144:(Je,Te,b)=>{b.d(Te,{z:()=>g});const g=S=>S&&"number"==typeof S.length&&"function"!=typeof S},2206:(Je,Te,b)=>{b.d(Te,{D:()=>S});var g=b(576);function S(U){return Symbol.asyncIterator&&(0,g.m)(null==U?void 0:U[Symbol.asyncIterator])}},1165:(Je,Te,b)=>{function g(S){return S instanceof Date&&!isNaN(S)}b.d(Te,{q:()=>g})},576:(Je,Te,b)=>{function g(S){return"function"==typeof S}b.d(Te,{m:()=>g})},3670:(Je,Te,b)=>{b.d(Te,{c:()=>U});var g=b(8822),S=b(576);function U(re){return(0,S.m)(re[g.L])}},6495:(Je,Te,b)=>{b.d(Te,{T:()=>U});var g=b(2202),S=b(576);function U(re){return(0,S.m)(null==re?void 0:re[g.h])}},8239:(Je,Te,b)=>{b.d(Te,{t:()=>S});var g=b(576);function S(U){return(0,g.m)(null==U?void 0:U.then)}},3260:(Je,Te,b)=>{b.d(Te,{Q:()=>U,L:()=>re});var g=b(655),S=b(576);function U(de){return(0,g.FC)(this,arguments,function*(){const Ce=de.getReader();try{for(;;){const{value:oe,done:ce}=yield(0,g.qq)(Ce.read());if(ce)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(oe)}}finally{Ce.releaseLock()}})}function re(de){return(0,S.m)(null==de?void 0:de.getReader)}},3532:(Je,Te,b)=>{b.d(Te,{K:()=>S});var g=b(576);function S(U){return U&&(0,g.m)(U.schedule)}},4482:(Je,Te,b)=>{b.d(Te,{A:()=>S,e:()=>U});var g=b(576);function S(re){return(0,g.m)(null==re?void 0:re.lift)}function U(re){return de=>{if(S(de))return de.lift(function(Ie){try{return re(Ie,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Je,Te,b)=>{b.d(Te,{Z:()=>re});var g=b(4004);const{isArray:S}=Array;function re(de){return(0,g.U)(Ie=>function U(de,Ie){return S(Ie)?de(...Ie):de(Ie)}(de,Ie))}},5032:(Je,Te,b)=>{function g(){}b.d(Te,{Z:()=>g})},7849:(Je,Te,b)=>{b.d(Te,{h:()=>U});var g=b(2416),S=b(3410);function U(re){S.z.setTimeout(()=>{const{onUnhandledError:de}=g.v;if(!de)throw re;de(re)})}},4532:(Je,Te,b)=>{function g(S){return new TypeError(`You provided ${null!==S&&"object"==typeof S?"an invalid object":`'${S}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}b.d(Te,{z:()=>g})},655:(Je,Te,b)=>{function re(Ze,ft){var St={};for(var Gt in Ze)Object.prototype.hasOwnProperty.call(Ze,Gt)&&ft.indexOf(Gt)<0&&(St[Gt]=Ze[Gt]);if(null!=Ze&&"function"==typeof Object.getOwnPropertySymbols){var Ut=0;for(Gt=Object.getOwnPropertySymbols(Ze);Ut<Gt.length;Ut++)ft.indexOf(Gt[Ut])<0&&Object.prototype.propertyIsEnumerable.call(Ze,Gt[Ut])&&(St[Gt[Ut]]=Ze[Gt[Ut]])}return St}function de(Ze,ft,St,Gt){var Yt,Ut=arguments.length,Rt=Ut<3?ft:null===Gt?Gt=Object.getOwnPropertyDescriptor(ft,St):Gt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Rt=Reflect.decorate(Ze,ft,St,Gt);else for(var Nn=Ze.length-1;Nn>=0;Nn--)(Yt=Ze[Nn])&&(Rt=(Ut<3?Yt(Rt):Ut>3?Yt(ft,St,Rt):Yt(ft,St))||Rt);return Ut>3&&Rt&&Object.defineProperty(ft,St,Rt),Rt}function Ie(Ze,ft){return function(St,Gt){ft(St,Gt,Ze)}}function se(Ze,ft){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(Ze,ft)}function ke(Ze,ft,St,Gt){return new(St||(St=Promise))(function(Rt,Yt){function Nn(wn){try{nn(Gt.next(wn))}catch(Ot){Yt(Ot)}}function jn(wn){try{nn(Gt.throw(wn))}catch(Ot){Yt(Ot)}}function nn(wn){wn.done?Rt(wn.value):function Ut(Rt){return Rt instanceof St?Rt:new St(function(Yt){Yt(Rt)})}(wn.value).then(Nn,jn)}nn((Gt=Gt.apply(Ze,ft||[])).next())})}function ze(Ze){return this instanceof ze?(this.v=Ze,this):new ze(Ze)}function Be(Ze,ft,St){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ut,Gt=St.apply(Ze,ft||[]),Rt=[];return Ut={},Yt("next"),Yt("throw"),Yt("return"),Ut[Symbol.asyncIterator]=function(){return this},Ut;function Yt(hn){Gt[hn]&&(Ut[hn]=function(xt){return new Promise(function(rn,fn){Rt.push([hn,xt,rn,fn])>1||Nn(hn,xt)})})}function Nn(hn,xt){try{!function jn(hn){hn.value instanceof ze?Promise.resolve(hn.value.v).then(nn,wn):Ot(Rt[0][2],hn)}(Gt[hn](xt))}catch(rn){Ot(Rt[0][3],rn)}}function nn(hn){Nn("next",hn)}function wn(hn){Nn("throw",hn)}function Ot(hn,xt){hn(xt),Rt.shift(),Rt.length&&Nn(Rt[0][0],Rt[0][1])}}function Qe(Ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var St,ft=Ze[Symbol.asyncIterator];return ft?ft.call(Ze):(Ze=function Et(Ze){var ft="function"==typeof Symbol&&Symbol.iterator,St=ft&&Ze[ft],Gt=0;if(St)return St.call(Ze);if(Ze&&"number"==typeof Ze.length)return{next:function(){return Ze&&Gt>=Ze.length&&(Ze=void 0),{value:Ze&&Ze[Gt++],done:!Ze}}};throw new TypeError(ft?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ze),St={},Gt("next"),Gt("throw"),Gt("return"),St[Symbol.asyncIterator]=function(){return this},St);function Gt(Rt){St[Rt]=Ze[Rt]&&function(Yt){return new Promise(function(Nn,jn){!function Ut(Rt,Yt,Nn,jn){Promise.resolve(jn).then(function(nn){Rt({value:nn,done:Nn})},Yt)}(Nn,jn,(Yt=Ze[Rt](Yt)).done,Yt.value)})}}}b.d(Te,{_T:()=>re,gn:()=>de,fM:()=>Ie,w6:()=>se,mG:()=>ke,qq:()=>ze,FC:()=>Be,KL:()=>Qe})},1777:(Je,Te,b)=>{b.d(Te,{l3:()=>U,_j:()=>g,LC:()=>S,ZN:()=>at,jt:()=>de,pV:()=>qe,F4:()=>te,IO:()=>ut,vP:()=>Ce,SB:()=>ce,oB:()=>oe,eR:()=>se,X$:()=>re,ZE:()=>He,k1:()=>Mt});class g{}class S{}const U="*";function re(ze,Be){return{type:7,name:ze,definitions:Be,options:{}}}function de(ze,Be=null){return{type:4,styles:Be,timings:ze}}function Ce(ze,Be=null){return{type:2,steps:ze,options:Be}}function oe(ze){return{type:6,styles:ze,offset:null}}function ce(ze,Be,Ge){return{type:0,name:ze,styles:Be,options:Ge}}function te(ze){return{type:5,steps:ze}}function se(ze,Be,Ge=null){return{type:1,expr:ze,animation:Be,options:Ge}}function qe(ze=null){return{type:9,options:ze}}function ut(ze,Be,Ge=null){return{type:11,selector:ze,animation:Be,options:Ge}}function et(ze){Promise.resolve(null).then(ze)}class at{constructor(Be=0,Ge=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Be+Ge}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Be=>Be()),this._onDoneFns=[])}onStart(Be){this._onStartFns.push(Be)}onDone(Be){this._onDoneFns.push(Be)}onDestroy(Be){this._onDestroyFns.push(Be)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){et(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Be=>Be()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Be=>Be()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Be){this._position=this.totalTime?Be*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Be){const Ge="start"==Be?this._onStartFns:this._onDoneFns;Ge.forEach(Qe=>Qe()),Ge.length=0}}class He{constructor(Be){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Be;let Ge=0,Qe=0,Ne=0;const gt=this.players.length;0==gt?et(()=>this._onFinish()):this.players.forEach(vt=>{vt.onDone(()=>{++Ge==gt&&this._onFinish()}),vt.onDestroy(()=>{++Qe==gt&&this._onDestroy()}),vt.onStart(()=>{++Ne==gt&&this._onStart()})}),this.totalTime=this.players.reduce((vt,sn)=>Math.max(vt,sn.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Be=>Be()),this._onDoneFns=[])}init(){this.players.forEach(Be=>Be.init())}onStart(Be){this._onStartFns.push(Be)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Be=>Be()),this._onStartFns=[])}onDone(Be){this._onDoneFns.push(Be)}onDestroy(Be){this._onDestroyFns.push(Be)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Be=>Be.play())}pause(){this.players.forEach(Be=>Be.pause())}restart(){this.players.forEach(Be=>Be.restart())}finish(){this._onFinish(),this.players.forEach(Be=>Be.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Be=>Be.destroy()),this._onDestroyFns.forEach(Be=>Be()),this._onDestroyFns=[])}reset(){this.players.forEach(Be=>Be.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Be){const Ge=Be*this.totalTime;this.players.forEach(Qe=>{const Ne=Qe.totalTime?Math.min(1,Ge/Qe.totalTime):1;Qe.setPosition(Ne)})}getPosition(){const Be=this.players.reduce((Ge,Qe)=>null===Ge||Qe.totalTime>Ge.totalTime?Qe:Ge,null);return null!=Be?Be.getPosition():0}beforeDestroy(){this.players.forEach(Be=>{Be.beforeDestroy&&Be.beforeDestroy()})}triggerCallback(Be){const Ge="start"==Be?this._onStartFns:this._onDoneFns;Ge.forEach(Qe=>Qe()),Ge.length=0}}const Mt="!"},5664:(Je,Te,b)=>{b.d(Te,{rt:()=>N,s1:()=>ft,Qr:()=>Bn,kH:()=>pt,mK:()=>ur,tE:()=>tr,qV:()=>Zn,qm:()=>he,ic:()=>Ut,Kd:()=>Kn,X6:()=>rt,yG:()=>Y});var g=b(9808),S=b(5e3),U=b(7579),re=b(727),de=b(1135),Ie=b(9646),Ce=b(1159),oe=b(8505),ce=b(8372),te=b(9300),se=b(4004),ke=b(5698),qe=b(5684),it=b(1884),ut=b(2722),Et=b(3191),et=b(925),at=b(7144);class ft extends class Ze{constructor(q){this._items=q,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new U.x,this._typeaheadSubscription=re.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=X=>X.disabled,this._pressedLetters=[],this.tabOut=new U.x,this.change=new U.x,q instanceof S.n_E&&q.changes.subscribe(X=>{if(this._activeItem){const ht=X.toArray().indexOf(this._activeItem);ht>-1&&ht!==this._activeItemIndex&&(this._activeItemIndex=ht)}})}skipPredicate(q){return this._skipPredicateFn=q,this}withWrap(q=!0){return this._wrap=q,this}withVerticalOrientation(q=!0){return this._vertical=q,this}withHorizontalOrientation(q){return this._horizontal=q,this}withAllowedModifierKeys(q){return this._allowedModifierKeys=q,this}withTypeAhead(q=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,oe.b)(X=>this._pressedLetters.push(X)),(0,ce.b)(q),(0,te.h)(()=>this._pressedLetters.length>0),(0,se.U)(()=>this._pressedLetters.join(""))).subscribe(X=>{const Fe=this._getItemsArray();for(let ht=1;ht<Fe.length+1;ht++){const we=(this._activeItemIndex+ht)%Fe.length,xe=Fe[we];if(!this._skipPredicateFn(xe)&&0===xe.getLabel().toUpperCase().trim().indexOf(X)){this.setActiveItem(we);break}}this._pressedLetters=[]}),this}withHomeAndEnd(q=!0){return this._homeAndEnd=q,this}setActiveItem(q){const X=this._activeItem;this.updateActiveItem(q),this._activeItem!==X&&this.change.next(this._activeItemIndex)}onKeydown(q){const X=q.keyCode,ht=["altKey","ctrlKey","metaKey","shiftKey"].every(we=>!q[we]||this._allowedModifierKeys.indexOf(we)>-1);switch(X){case Ce.Mf:return void this.tabOut.next();case Ce.JH:if(this._vertical&&ht){this.setNextItemActive();break}return;case Ce.LH:if(this._vertical&&ht){this.setPreviousItemActive();break}return;case Ce.SV:if(this._horizontal&&ht){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Ce.oh:if(this._horizontal&&ht){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Ce.Sd:if(this._homeAndEnd&&ht){this.setFirstItemActive();break}return;case Ce.uR:if(this._homeAndEnd&&ht){this.setLastItemActive();break}return;default:return void((ht||(0,Ce.Vb)(q,"shiftKey"))&&(q.key&&1===q.key.length?this._letterKeyStream.next(q.key.toLocaleUpperCase()):(X>=Ce.A&&X<=Ce.Z||X>=Ce.xE&&X<=Ce.aO)&&this._letterKeyStream.next(String.fromCharCode(X))))}this._pressedLetters=[],q.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(q){const X=this._getItemsArray(),Fe="number"==typeof q?q:X.indexOf(q),ht=X[Fe];this._activeItem=null==ht?null:ht,this._activeItemIndex=Fe}_setActiveItemByDelta(q){this._wrap?this._setActiveInWrapMode(q):this._setActiveInDefaultMode(q)}_setActiveInWrapMode(q){const X=this._getItemsArray();for(let Fe=1;Fe<=X.length;Fe++){const ht=(this._activeItemIndex+q*Fe+X.length)%X.length;if(!this._skipPredicateFn(X[ht]))return void this.setActiveItem(ht)}}_setActiveInDefaultMode(q){this._setActiveItemByIndex(this._activeItemIndex+q,q)}_setActiveItemByIndex(q,X){const Fe=this._getItemsArray();if(Fe[q]){for(;this._skipPredicateFn(Fe[q]);)if(!Fe[q+=X])return;this.setActiveItem(q)}}_getItemsArray(){return this._items instanceof S.n_E?this._items.toArray():this._items}}{setActiveItem(q){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(q),this.activeItem&&this.activeItem.setActiveStyles()}}let Ut=(()=>{class L{constructor(X){this._platform=X}isDisabled(X){return X.hasAttribute("disabled")}isVisible(X){return function Yt(L){return!!(L.offsetWidth||L.offsetHeight||"function"==typeof L.getClientRects&&L.getClientRects().length)}(X)&&"visible"===getComputedStyle(X).visibility}isTabbable(X){if(!this._platform.isBrowser)return!1;const Fe=function Rt(L){try{return L.frameElement}catch(q){return null}}(function Fn(L){return L.ownerDocument&&L.ownerDocument.defaultView||window}(X));if(Fe&&(-1===xt(Fe)||!this.isVisible(Fe)))return!1;let ht=X.nodeName.toLowerCase(),we=xt(X);return X.hasAttribute("contenteditable")?-1!==we:!("iframe"===ht||"object"===ht||this._platform.WEBKIT&&this._platform.IOS&&!function rn(L){let q=L.nodeName.toLowerCase(),X="input"===q&&L.type;return"text"===X||"password"===X||"select"===q||"textarea"===q}(X))&&("audio"===ht?!!X.hasAttribute("controls")&&-1!==we:"video"===ht?-1!==we&&(null!==we||this._platform.FIREFOX||X.hasAttribute("controls")):X.tabIndex>=0)}isFocusable(X,Fe){return function fn(L){return!function jn(L){return function wn(L){return"input"==L.nodeName.toLowerCase()}(L)&&"hidden"==L.type}(L)&&(function Nn(L){let q=L.nodeName.toLowerCase();return"input"===q||"select"===q||"button"===q||"textarea"===q}(L)||function nn(L){return function Ot(L){return"a"==L.nodeName.toLowerCase()}(L)&&L.hasAttribute("href")}(L)||L.hasAttribute("contenteditable")||hn(L))}(X)&&!this.isDisabled(X)&&((null==Fe?void 0:Fe.ignoreVisibility)||this.isVisible(X))}}return L.\u0275fac=function(X){return new(X||L)(S.LFG(et.t4))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();function hn(L){if(!L.hasAttribute("tabindex")||void 0===L.tabIndex)return!1;let q=L.getAttribute("tabindex");return!(!q||isNaN(parseInt(q,10)))}function xt(L){if(!hn(L))return null;const q=parseInt(L.getAttribute("tabindex")||"",10);return isNaN(q)?-1:q}class Sn{constructor(q,X,Fe,ht,we=!1){this._element=q,this._checker=X,this._ngZone=Fe,this._document=ht,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,we||this.attachAnchors()}get enabled(){return this._enabled}set enabled(q){this._enabled=q,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(q,this._startAnchor),this._toggleAnchorTabIndex(q,this._endAnchor))}destroy(){const q=this._startAnchor,X=this._endAnchor;q&&(q.removeEventListener("focus",this.startAnchorListener),q.remove()),X&&(X.removeEventListener("focus",this.endAnchorListener),X.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(q){return new Promise(X=>{this._executeOnStable(()=>X(this.focusInitialElement(q)))})}focusFirstTabbableElementWhenReady(q){return new Promise(X=>{this._executeOnStable(()=>X(this.focusFirstTabbableElement(q)))})}focusLastTabbableElementWhenReady(q){return new Promise(X=>{this._executeOnStable(()=>X(this.focusLastTabbableElement(q)))})}_getRegionBoundary(q){let X=this._element.querySelectorAll(`[cdk-focus-region-${q}], [cdkFocusRegion${q}], [cdk-focus-${q}]`);for(let Fe=0;Fe<X.length;Fe++)X[Fe].hasAttribute(`cdk-focus-${q}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${q}', use 'cdkFocusRegion${q}' instead. The deprecated attribute will be removed in 8.0.0.`,X[Fe]):X[Fe].hasAttribute(`cdk-focus-region-${q}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${q}', use 'cdkFocusRegion${q}' instead. The deprecated attribute will be removed in 8.0.0.`,X[Fe]);return"start"==q?X.length?X[0]:this._getFirstTabbableElement(this._element):X.length?X[X.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(q){const X=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(X){if(X.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",X),!this._checker.isFocusable(X)){const Fe=this._getFirstTabbableElement(X);return null==Fe||Fe.focus(q),!!Fe}return X.focus(q),!0}return this.focusFirstTabbableElement(q)}focusFirstTabbableElement(q){const X=this._getRegionBoundary("start");return X&&X.focus(q),!!X}focusLastTabbableElement(q){const X=this._getRegionBoundary("end");return X&&X.focus(q),!!X}hasAttached(){return this._hasAttached}_getFirstTabbableElement(q){if(this._checker.isFocusable(q)&&this._checker.isTabbable(q))return q;const X=q.children;for(let Fe=0;Fe<X.length;Fe++){const ht=X[Fe].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(X[Fe]):null;if(ht)return ht}return null}_getLastTabbableElement(q){if(this._checker.isFocusable(q)&&this._checker.isTabbable(q))return q;const X=q.children;for(let Fe=X.length-1;Fe>=0;Fe--){const ht=X[Fe].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(X[Fe]):null;if(ht)return ht}return null}_createAnchor(){const q=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,q),q.classList.add("cdk-visually-hidden"),q.classList.add("cdk-focus-trap-anchor"),q.setAttribute("aria-hidden","true"),q}_toggleAnchorTabIndex(q,X){q?X.setAttribute("tabindex","0"):X.removeAttribute("tabindex")}toggleAnchors(q){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(q,this._startAnchor),this._toggleAnchorTabIndex(q,this._endAnchor))}_executeOnStable(q){this._ngZone.isStable?q():this._ngZone.onStable.pipe((0,ke.q)(1)).subscribe(q)}}let Zn=(()=>{class L{constructor(X,Fe,ht){this._checker=X,this._ngZone=Fe,this._document=ht}create(X,Fe=!1){return new Sn(X,this._checker,this._ngZone,this._document,Fe)}}return L.\u0275fac=function(X){return new(X||L)(S.LFG(Ut),S.LFG(S.R0b),S.LFG(g.K0))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),ur=(()=>{class L{constructor(X,Fe,ht){this._elementRef=X,this._focusTrapFactory=Fe,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(X){this.focusTrap.enabled=(0,Et.Ig)(X)}get autoCapture(){return this._autoCapture}set autoCapture(X){this._autoCapture=(0,Et.Ig)(X)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(X){const Fe=X.autoCapture;Fe&&!Fe.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=(0,et.ht)(),this.focusTrap.focusInitialElementWhenReady()}}return L.\u0275fac=function(X){return new(X||L)(S.Y36(S.SBq),S.Y36(Zn),S.Y36(g.K0))},L.\u0275dir=S.lG2({type:L,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[S.TTD]}),L})();function rt(L){return 0===L.offsetX&&0===L.offsetY}function Y(L){const q=L.touches&&L.touches[0]||L.changedTouches&&L.changedTouches[0];return!(!q||-1!==q.identifier||null!=q.radiusX&&1!==q.radiusX||null!=q.radiusY&&1!==q.radiusY)}const J=new S.OlP("cdk-input-modality-detector-options"),Re={ignoreKeys:[Ce.zL,Ce.jx,Ce.b2,Ce.MW,Ce.JU]},yt=(0,et.i$)({passive:!0,capture:!0});let Ft=(()=>{class L{constructor(X,Fe,ht,we){this._platform=X,this._mostRecentTarget=null,this._modality=new de.X(null),this._lastTouchMs=0,this._onKeydown=xe=>{var ue,be;(null===(be=null===(ue=this._options)||void 0===ue?void 0:ue.ignoreKeys)||void 0===be?void 0:be.some($=>$===xe.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,et.sA)(xe))},this._onMousedown=xe=>{Date.now()-this._lastTouchMs<650||(this._modality.next(rt(xe)?"keyboard":"mouse"),this._mostRecentTarget=(0,et.sA)(xe))},this._onTouchstart=xe=>{Y(xe)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,et.sA)(xe))},this._options=Object.assign(Object.assign({},Re),we),this.modalityDetected=this._modality.pipe((0,qe.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,it.x)()),X.isBrowser&&Fe.runOutsideAngular(()=>{ht.addEventListener("keydown",this._onKeydown,yt),ht.addEventListener("mousedown",this._onMousedown,yt),ht.addEventListener("touchstart",this._onTouchstart,yt)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,yt),document.removeEventListener("mousedown",this._onMousedown,yt),document.removeEventListener("touchstart",this._onTouchstart,yt))}}return L.\u0275fac=function(X){return new(X||L)(S.LFG(et.t4),S.LFG(S.R0b),S.LFG(g.K0),S.LFG(J,8))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();const Zt=new S.OlP("liveAnnouncerElement",{providedIn:"root",factory:function zt(){return null}}),Mn=new S.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Kn=(()=>{class L{constructor(X,Fe,ht,we){this._ngZone=Fe,this._defaultOptions=we,this._document=ht,this._liveElement=X||this._createLiveElement()}announce(X,...Fe){const ht=this._defaultOptions;let we,xe;return 1===Fe.length&&"number"==typeof Fe[0]?xe=Fe[0]:[we,xe]=Fe,this.clear(),clearTimeout(this._previousTimeout),we||(we=ht&&ht.politeness?ht.politeness:"polite"),null==xe&&ht&&(xe=ht.duration),this._liveElement.setAttribute("aria-live",we),this._ngZone.runOutsideAngular(()=>new Promise(ue=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=X,ue(),"number"==typeof xe&&(this._previousTimeout=setTimeout(()=>this.clear(),xe))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var X;clearTimeout(this._previousTimeout),null===(X=this._liveElement)||void 0===X||X.remove(),this._liveElement=null}_createLiveElement(){const X="cdk-live-announcer-element",Fe=this._document.getElementsByClassName(X),ht=this._document.createElement("div");for(let we=0;we<Fe.length;we++)Fe[we].remove();return ht.classList.add(X),ht.classList.add("cdk-visually-hidden"),ht.setAttribute("aria-atomic","true"),ht.setAttribute("aria-live","polite"),this._document.body.appendChild(ht),ht}}return L.\u0275fac=function(X){return new(X||L)(S.LFG(Zt,8),S.LFG(S.R0b),S.LFG(g.K0),S.LFG(Mn,8))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),Bn=(()=>{class L{constructor(X,Fe,ht,we){this._elementRef=X,this._liveAnnouncer=Fe,this._contentObserver=ht,this._ngZone=we,this._politeness="polite"}get politeness(){return this._politeness}set politeness(X){this._politeness="off"===X||"assertive"===X?X:"polite","off"===this._politeness?this._subscription&&(this._subscription.unsubscribe(),this._subscription=null):this._subscription||(this._subscription=this._ngZone.runOutsideAngular(()=>this._contentObserver.observe(this._elementRef).subscribe(()=>{const Fe=this._elementRef.nativeElement.textContent;Fe!==this._previousAnnouncedText&&(this._liveAnnouncer.announce(Fe,this._politeness),this._previousAnnouncedText=Fe)})))}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return L.\u0275fac=function(X){return new(X||L)(S.Y36(S.SBq),S.Y36(Kn),S.Y36(at.yq),S.Y36(S.R0b))},L.\u0275dir=S.lG2({type:L,selectors:[["","cdkAriaLive",""]],inputs:{politeness:["cdkAriaLive","politeness"]},exportAs:["cdkAriaLive"]}),L})();const gr=new S.OlP("cdk-focus-monitor-default-options"),lr=(0,et.i$)({passive:!0,capture:!0});let tr=(()=>{class L{constructor(X,Fe,ht,we,xe){this._ngZone=X,this._platform=Fe,this._inputModalityDetector=ht,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new U.x,this._rootNodeFocusAndBlurListener=ue=>{const be=(0,et.sA)(ue),$="focus"===ue.type?this._onFocus:this._onBlur;for(let ae=be;ae;ae=ae.parentElement)$.call(this,ue,ae)},this._document=we,this._detectionMode=(null==xe?void 0:xe.detectionMode)||0}monitor(X,Fe=!1){const ht=(0,Et.fI)(X);if(!this._platform.isBrowser||1!==ht.nodeType)return(0,Ie.of)(null);const we=(0,et.kV)(ht)||this._getDocument(),xe=this._elementInfo.get(ht);if(xe)return Fe&&(xe.checkChildren=!0),xe.subject;const ue={checkChildren:Fe,subject:new U.x,rootNode:we};return this._elementInfo.set(ht,ue),this._registerGlobalListeners(ue),ue.subject}stopMonitoring(X){const Fe=(0,Et.fI)(X),ht=this._elementInfo.get(Fe);ht&&(ht.subject.complete(),this._setClasses(Fe),this._elementInfo.delete(Fe),this._removeGlobalListeners(ht))}focusVia(X,Fe,ht){const we=(0,Et.fI)(X);we===this._getDocument().activeElement?this._getClosestElementsInfo(we).forEach(([ue,be])=>this._originChanged(ue,Fe,be)):(this._setOrigin(Fe),"function"==typeof we.focus&&we.focus(ht))}ngOnDestroy(){this._elementInfo.forEach((X,Fe)=>this.stopMonitoring(Fe))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(X){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(X)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(X){return 1===this._detectionMode||!!(null==X?void 0:X.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(X,Fe){X.classList.toggle("cdk-focused",!!Fe),X.classList.toggle("cdk-touch-focused","touch"===Fe),X.classList.toggle("cdk-keyboard-focused","keyboard"===Fe),X.classList.toggle("cdk-mouse-focused","mouse"===Fe),X.classList.toggle("cdk-program-focused","program"===Fe)}_setOrigin(X,Fe=!1){this._ngZone.runOutsideAngular(()=>{this._origin=X,this._originFromTouchInteraction="touch"===X&&Fe,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(X,Fe){const ht=this._elementInfo.get(Fe),we=(0,et.sA)(X);!ht||!ht.checkChildren&&Fe!==we||this._originChanged(Fe,this._getFocusOrigin(we),ht)}_onBlur(X,Fe){const ht=this._elementInfo.get(Fe);!ht||ht.checkChildren&&X.relatedTarget instanceof Node&&Fe.contains(X.relatedTarget)||(this._setClasses(Fe),this._emitOrigin(ht.subject,null))}_emitOrigin(X,Fe){this._ngZone.run(()=>X.next(Fe))}_registerGlobalListeners(X){if(!this._platform.isBrowser)return;const Fe=X.rootNode,ht=this._rootNodeFocusListenerCount.get(Fe)||0;ht||this._ngZone.runOutsideAngular(()=>{Fe.addEventListener("focus",this._rootNodeFocusAndBlurListener,lr),Fe.addEventListener("blur",this._rootNodeFocusAndBlurListener,lr)}),this._rootNodeFocusListenerCount.set(Fe,ht+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,ut.R)(this._stopInputModalityDetector)).subscribe(we=>{this._setOrigin(we,!0)}))}_removeGlobalListeners(X){const Fe=X.rootNode;if(this._rootNodeFocusListenerCount.has(Fe)){const ht=this._rootNodeFocusListenerCount.get(Fe);ht>1?this._rootNodeFocusListenerCount.set(Fe,ht-1):(Fe.removeEventListener("focus",this._rootNodeFocusAndBlurListener,lr),Fe.removeEventListener("blur",this._rootNodeFocusAndBlurListener,lr),this._rootNodeFocusListenerCount.delete(Fe))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(X,Fe,ht){this._setClasses(X,Fe),this._emitOrigin(ht.subject,Fe),this._lastFocusOrigin=Fe}_getClosestElementsInfo(X){const Fe=[];return this._elementInfo.forEach((ht,we)=>{(we===X||ht.checkChildren&&we.contains(X))&&Fe.push([we,ht])}),Fe}}return L.\u0275fac=function(X){return new(X||L)(S.LFG(S.R0b),S.LFG(et.t4),S.LFG(Ft),S.LFG(g.K0,8),S.LFG(gr,8))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),pt=(()=>{class L{constructor(X,Fe){this._elementRef=X,this._focusMonitor=Fe,this.cdkFocusChange=new S.vpe}ngAfterViewInit(){const X=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(X,1===X.nodeType&&X.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(Fe=>this.cdkFocusChange.emit(Fe))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return L.\u0275fac=function(X){return new(X||L)(S.Y36(S.SBq),S.Y36(tr))},L.\u0275dir=S.lG2({type:L,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),L})();const dt="cdk-high-contrast-black-on-white",Ue="cdk-high-contrast-white-on-black",It="cdk-high-contrast-active";let he=(()=>{class L{constructor(X,Fe){this._platform=X,this._document=Fe}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const X=this._document.createElement("div");X.style.backgroundColor="rgb(1,2,3)",X.style.position="absolute",this._document.body.appendChild(X);const Fe=this._document.defaultView||window,ht=Fe&&Fe.getComputedStyle?Fe.getComputedStyle(X):null,we=(ht&&ht.backgroundColor||"").replace(/ /g,"");switch(X.remove(),we){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const X=this._document.body.classList;X.remove(It),X.remove(dt),X.remove(Ue),this._hasCheckedHighContrastMode=!0;const Fe=this.getHighContrastMode();1===Fe?(X.add(It),X.add(dt)):2===Fe&&(X.add(It),X.add(Ue))}}}return L.\u0275fac=function(X){return new(X||L)(S.LFG(et.t4),S.LFG(g.K0))},L.\u0275prov=S.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),N=(()=>{class L{constructor(X){X._applyBodyHighContrastModeCssClasses()}}return L.\u0275fac=function(X){return new(X||L)(S.LFG(he))},L.\u0275mod=S.oAB({type:L}),L.\u0275inj=S.cJS({imports:[[et.ud,at.Q8]]}),L})()},226:(Je,Te,b)=>{b.d(Te,{vT:()=>Ce,Is:()=>de});var g=b(5e3),S=b(9808);const U=new g.OlP("cdk-dir-doc",{providedIn:"root",factory:function re(){return(0,g.f3M)(S.K0)}});let de=(()=>{class oe{constructor(te){if(this.value="ltr",this.change=new g.vpe,te){const ke=te.documentElement?te.documentElement.dir:null,qe=(te.body?te.body.dir:null)||ke;this.value="ltr"===qe||"rtl"===qe?qe:"ltr"}}ngOnDestroy(){this.change.complete()}}return oe.\u0275fac=function(te){return new(te||oe)(g.LFG(U,8))},oe.\u0275prov=g.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})(),Ce=(()=>{class oe{}return oe.\u0275fac=function(te){return new(te||oe)},oe.\u0275mod=g.oAB({type:oe}),oe.\u0275inj=g.cJS({}),oe})()},3191:(Je,Te,b)=>{b.d(Te,{Eq:()=>de,Ig:()=>S,HM:()=>Ie,fI:()=>Ce,su:()=>U,du:()=>oe});var g=b(5e3);function S(ce){return null!=ce&&"false"!=`${ce}`}function U(ce,te=0){return function re(ce){return!isNaN(parseFloat(ce))&&!isNaN(Number(ce))}(ce)?Number(ce):te}function de(ce){return Array.isArray(ce)?ce:[ce]}function Ie(ce){return null==ce?"":"string"==typeof ce?ce:`${ce}px`}function Ce(ce){return ce instanceof g.SBq?ce.nativeElement:ce}function oe(ce,te=/\s+/){const se=[];if(null!=ce){const ke=Array.isArray(ce)?ce:`${ce}`.split(te);for(const qe of ke){const it=`${qe}`.trim();it&&se.push(it)}}return se}},1159:(Je,Te,b)=>{b.d(Te,{A:()=>Nn,zL:()=>oe,jx:()=>Ce,JH:()=>Mt,uR:()=>ut,K5:()=>de,hY:()=>se,Sd:()=>Et,oh:()=>et,b2:()=>Ke,MW:()=>zt,aO:()=>St,VM:()=>it,Ku:()=>qe,SV:()=>He,JU:()=>Ie,L_:()=>ke,Mf:()=>U,LH:()=>at,Z:()=>Zt,xE:()=>Ne,Vb:()=>Ht});const U=9,de=13,Ie=16,Ce=17,oe=18,se=27,ke=32,qe=33,it=34,ut=35,Et=36,et=37,at=38,He=39,Mt=40,Ne=48,St=57,Nn=65,Zt=90,zt=91,Ke=224;function Ht(ct,...Bt){return Bt.length?Bt.some(An=>ct[An]):ct.altKey||ct.shiftKey||ct.ctrlKey||ct.metaKey}},7144:(Je,Te,b)=>{b.d(Te,{yq:()=>Ie,Q8:()=>oe});var g=b(3191),S=b(5e3),U=b(8306),re=b(7579);let de=(()=>{class ce{create(se){return"undefined"==typeof MutationObserver?null:new MutationObserver(se)}}return ce.\u0275fac=function(se){return new(se||ce)},ce.\u0275prov=S.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"}),ce})(),Ie=(()=>{class ce{constructor(se){this._mutationObserverFactory=se,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((se,ke)=>this._cleanupObserver(ke))}observe(se){const ke=(0,g.fI)(se);return new U.y(qe=>{const ut=this._observeElement(ke).subscribe(qe);return()=>{ut.unsubscribe(),this._unobserveElement(ke)}})}_observeElement(se){if(this._observedElements.has(se))this._observedElements.get(se).count++;else{const ke=new re.x,qe=this._mutationObserverFactory.create(it=>ke.next(it));qe&&qe.observe(se,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(se,{observer:qe,stream:ke,count:1})}return this._observedElements.get(se).stream}_unobserveElement(se){this._observedElements.has(se)&&(this._observedElements.get(se).count--,this._observedElements.get(se).count||this._cleanupObserver(se))}_cleanupObserver(se){if(this._observedElements.has(se)){const{observer:ke,stream:qe}=this._observedElements.get(se);ke&&ke.disconnect(),qe.complete(),this._observedElements.delete(se)}}}return ce.\u0275fac=function(se){return new(se||ce)(S.LFG(de))},ce.\u0275prov=S.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"}),ce})(),oe=(()=>{class ce{}return ce.\u0275fac=function(se){return new(se||ce)},ce.\u0275mod=S.oAB({type:ce}),ce.\u0275inj=S.cJS({providers:[de]}),ce})()},9776:(Je,Te,b)=>{b.d(Te,{pI:()=>Dr,xu:()=>ur,_G:()=>Rt,aV:()=>Fn,X_:()=>vt,Xj:()=>St,U8:()=>De});var g=b(8962),S=b(9808),U=b(5e3),re=b(3191),de=b(925),Ie=b(655),Ce=b(226),oe=b(7429),ce=b(7579),te=b(727),se=b(6451),ke=b(4482),qe=b(5403),ut=b(5698),Et=b(2722),et=b(1159);const at=(0,de.Mq)();class He{constructor(Y,J){this._viewportRuler=Y,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=J}attach(){}enable(){if(this._canBeEnabled()){const Y=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=Y.style.left||"",this._previousHTMLStyles.top=Y.style.top||"",Y.style.left=(0,re.HM)(-this._previousScrollPosition.left),Y.style.top=(0,re.HM)(-this._previousScrollPosition.top),Y.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const Y=this._document.documentElement,Re=Y.style,Xe=this._document.body.style,yt=Re.scrollBehavior||"",Ft=Xe.scrollBehavior||"";this._isEnabled=!1,Re.left=this._previousHTMLStyles.left,Re.top=this._previousHTMLStyles.top,Y.classList.remove("cdk-global-scrollblock"),at&&(Re.scrollBehavior=Xe.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),at&&(Re.scrollBehavior=yt,Xe.scrollBehavior=Ft)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const J=this._document.body,Re=this._viewportRuler.getViewportSize();return J.scrollHeight>Re.height||J.scrollWidth>Re.width}}class ze{constructor(Y,J,Re,Xe){this._scrollDispatcher=Y,this._ngZone=J,this._viewportRuler=Re,this._config=Xe,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(Y){this._overlayRef=Y}enable(){if(this._scrollSubscription)return;const Y=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=Y.subscribe(()=>{const J=this._viewportRuler.getViewportScrollPosition().top;Math.abs(J-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=Y.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Be{enable(){}disable(){}attach(){}}function Ge(rt,Y){return Y.some(J=>rt.bottom<J.top||rt.top>J.bottom||rt.right<J.left||rt.left>J.right)}function Qe(rt,Y){return Y.some(J=>rt.top<J.top||rt.bottom>J.bottom||rt.left<J.left||rt.right>J.right)}class Ne{constructor(Y,J,Re,Xe){this._scrollDispatcher=Y,this._viewportRuler=J,this._ngZone=Re,this._config=Xe,this._scrollSubscription=null}attach(Y){this._overlayRef=Y}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const J=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Re,height:Xe}=this._viewportRuler.getViewportSize();Ge(J,[{width:Re,height:Xe,bottom:Xe,right:Re,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let gt=(()=>{class rt{constructor(J,Re,Xe,yt){this._scrollDispatcher=J,this._viewportRuler=Re,this._ngZone=Xe,this.noop=()=>new Be,this.close=Ft=>new ze(this._scrollDispatcher,this._ngZone,this._viewportRuler,Ft),this.block=()=>new He(this._viewportRuler,this._document),this.reposition=Ft=>new Ne(this._scrollDispatcher,this._viewportRuler,this._ngZone,Ft),this._document=yt}}return rt.\u0275fac=function(J){return new(J||rt)(U.LFG(g.mF),U.LFG(g.rL),U.LFG(U.R0b),U.LFG(S.K0))},rt.\u0275prov=U.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt})();class vt{constructor(Y){if(this.scrollStrategy=new Be,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,Y){const J=Object.keys(Y);for(const Re of J)void 0!==Y[Re]&&(this[Re]=Y[Re])}}}class sn{constructor(Y,J,Re,Xe,yt){this.offsetX=Re,this.offsetY=Xe,this.panelClass=yt,this.originX=Y.originX,this.originY=Y.originY,this.overlayX=J.overlayX,this.overlayY=J.overlayY}}class tn{}let vn=(()=>{let rt=class{constructor(J,Re){this.connectionPair=J,this.scrollableViewProperties=Re}};return rt=(0,Ie.gn)([(0,Ie.fM)(1,(0,U.FiY)()),(0,Ie.w6)("design:paramtypes",[sn,tn])],rt),rt})();class ft{constructor(Y,J,Re,Xe,yt,Ft,Zt,zt,Mn){this._portalOutlet=Y,this._host=J,this._pane=Re,this._config=Xe,this._ngZone=yt,this._keyboardDispatcher=Ft,this._document=Zt,this._location=zt,this._outsideClickDispatcher=Mn,this._backdropElement=null,this._backdropClick=new ce.x,this._attachments=new ce.x,this._detachments=new ce.x,this._locationChanges=te.w0.EMPTY,this._backdropClickHandler=Kn=>this._backdropClick.next(Kn),this._keydownEvents=new ce.x,this._outsidePointerEvents=new ce.x,Xe.scrollStrategy&&(this._scrollStrategy=Xe.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Xe.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(Y){let J=this._portalOutlet.attach(Y);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ut.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),J}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const Y=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),Y}dispose(){var Y;const J=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(Y=this._host)||void 0===Y||Y.remove(),this._previousHostParent=this._pane=this._host=null,J&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(Y){Y!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=Y,this.hasAttached()&&(Y.attach(this),this.updatePosition()))}updateSize(Y){this._config=Object.assign(Object.assign({},this._config),Y),this._updateElementSize()}setDirection(Y){this._config=Object.assign(Object.assign({},this._config),{direction:Y}),this._updateElementDirection()}addPanelClass(Y){this._pane&&this._toggleClasses(this._pane,Y,!0)}removePanelClass(Y){this._pane&&this._toggleClasses(this._pane,Y,!1)}getDirection(){const Y=this._config.direction;return Y?"string"==typeof Y?Y:Y.value:"ltr"}updateScrollStrategy(Y){Y!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=Y,this.hasAttached()&&(Y.attach(this),Y.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const Y=this._pane.style;Y.width=(0,re.HM)(this._config.width),Y.height=(0,re.HM)(this._config.height),Y.minWidth=(0,re.HM)(this._config.minWidth),Y.minHeight=(0,re.HM)(this._config.minHeight),Y.maxWidth=(0,re.HM)(this._config.maxWidth),Y.maxHeight=(0,re.HM)(this._config.maxHeight)}_togglePointerEvents(Y){this._pane.style.pointerEvents=Y?"":"none"}_attachBackdrop(){const Y="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(Y)})}):this._backdropElement.classList.add(Y)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const Y=this._backdropElement;if(!Y)return;let J;const Re=()=>{Y&&(Y.removeEventListener("click",this._backdropClickHandler),Y.removeEventListener("transitionend",Re),this._disposeBackdrop(Y)),this._config.backdropClass&&this._toggleClasses(Y,this._config.backdropClass,!1),clearTimeout(J)};Y.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{Y.addEventListener("transitionend",Re)}),Y.style.pointerEvents="none",J=this._ngZone.runOutsideAngular(()=>setTimeout(Re,500))}_toggleClasses(Y,J,Re){const Xe=(0,re.Eq)(J||[]).filter(yt=>!!yt);Xe.length&&(Re?Y.classList.add(...Xe):Y.classList.remove(...Xe))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const Y=this._ngZone.onStable.pipe((0,Et.R)((0,se.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),Y.unsubscribe())})})}_disposeScrollStrategy(){const Y=this._scrollStrategy;Y&&(Y.disable(),Y.detach&&Y.detach())}_disposeBackdrop(Y){Y&&(Y.remove(),this._backdropElement===Y&&(this._backdropElement=null))}}let St=(()=>{class rt{constructor(J,Re){this._platform=Re,this._document=J}ngOnDestroy(){var J;null===(J=this._containerElement)||void 0===J||J.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const J="cdk-overlay-container";if(this._platform.isBrowser||(0,de.Oy)()){const Xe=this._document.querySelectorAll(`.${J}[platform="server"], .${J}[platform="test"]`);for(let yt=0;yt<Xe.length;yt++)Xe[yt].remove()}const Re=this._document.createElement("div");Re.classList.add(J),(0,de.Oy)()?Re.setAttribute("platform","test"):this._platform.isBrowser||Re.setAttribute("platform","server"),this._document.body.appendChild(Re),this._containerElement=Re}}return rt.\u0275fac=function(J){return new(J||rt)(U.LFG(S.K0),U.LFG(de.t4))},rt.\u0275prov=U.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt})();const Gt="cdk-overlay-connected-position-bounding-box",Ut=/([A-Za-z%]+)$/;class Rt{constructor(Y,J,Re,Xe,yt){this._viewportRuler=J,this._document=Re,this._platform=Xe,this._overlayContainer=yt,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ce.x,this._resizeSubscription=te.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(Y)}get positions(){return this._preferredPositions}attach(Y){this._validatePositions(),Y.hostElement.classList.add(Gt),this._overlayRef=Y,this._boundingBox=Y.hostElement,this._pane=Y.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const Y=this._originRect,J=this._overlayRect,Re=this._viewportRect,Xe=[];let yt;for(let Ft of this._preferredPositions){let Zt=this._getOriginPoint(Y,Ft),zt=this._getOverlayPoint(Zt,J,Ft),Mn=this._getOverlayFit(zt,J,Re,Ft);if(Mn.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Ft,Zt);this._canFitWithFlexibleDimensions(Mn,zt,Re)?Xe.push({position:Ft,origin:Zt,overlayRect:J,boundingBoxRect:this._calculateBoundingBoxRect(Zt,Ft)}):(!yt||yt.overlayFit.visibleArea<Mn.visibleArea)&&(yt={overlayFit:Mn,overlayPoint:zt,originPoint:Zt,position:Ft,overlayRect:J})}if(Xe.length){let Ft=null,Zt=-1;for(const zt of Xe){const Mn=zt.boundingBoxRect.width*zt.boundingBoxRect.height*(zt.position.weight||1);Mn>Zt&&(Zt=Mn,Ft=zt)}return this._isPushed=!1,void this._applyPosition(Ft.position,Ft.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(yt.position,yt.originPoint);this._applyPosition(yt.position,yt.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Yt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Gt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const Y=this._lastPosition||this._preferredPositions[0],J=this._getOriginPoint(this._originRect,Y);this._applyPosition(Y,J)}}withScrollableContainers(Y){return this._scrollables=Y,this}withPositions(Y){return this._preferredPositions=Y,-1===Y.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(Y){return this._viewportMargin=Y,this}withFlexibleDimensions(Y=!0){return this._hasFlexibleDimensions=Y,this}withGrowAfterOpen(Y=!0){return this._growAfterOpen=Y,this}withPush(Y=!0){return this._canPush=Y,this}withLockedPosition(Y=!0){return this._positionLocked=Y,this}setOrigin(Y){return this._origin=Y,this}withDefaultOffsetX(Y){return this._offsetX=Y,this}withDefaultOffsetY(Y){return this._offsetY=Y,this}withTransformOriginOn(Y){return this._transformOriginSelector=Y,this}_getOriginPoint(Y,J){let Re,Xe;if("center"==J.originX)Re=Y.left+Y.width/2;else{const yt=this._isRtl()?Y.right:Y.left,Ft=this._isRtl()?Y.left:Y.right;Re="start"==J.originX?yt:Ft}return Xe="center"==J.originY?Y.top+Y.height/2:"top"==J.originY?Y.top:Y.bottom,{x:Re,y:Xe}}_getOverlayPoint(Y,J,Re){let Xe,yt;return Xe="center"==Re.overlayX?-J.width/2:"start"===Re.overlayX?this._isRtl()?-J.width:0:this._isRtl()?0:-J.width,yt="center"==Re.overlayY?-J.height/2:"top"==Re.overlayY?0:-J.height,{x:Y.x+Xe,y:Y.y+yt}}_getOverlayFit(Y,J,Re,Xe){const yt=jn(J);let{x:Ft,y:Zt}=Y,zt=this._getOffset(Xe,"x"),Mn=this._getOffset(Xe,"y");zt&&(Ft+=zt),Mn&&(Zt+=Mn);let gr=0-Zt,lr=Zt+yt.height-Re.height,tr=this._subtractOverflows(yt.width,0-Ft,Ft+yt.width-Re.width),pt=this._subtractOverflows(yt.height,gr,lr),dt=tr*pt;return{visibleArea:dt,isCompletelyWithinViewport:yt.width*yt.height===dt,fitsInViewportVertically:pt===yt.height,fitsInViewportHorizontally:tr==yt.width}}_canFitWithFlexibleDimensions(Y,J,Re){if(this._hasFlexibleDimensions){const Xe=Re.bottom-J.y,yt=Re.right-J.x,Ft=Nn(this._overlayRef.getConfig().minHeight),Zt=Nn(this._overlayRef.getConfig().minWidth),Mn=Y.fitsInViewportHorizontally||null!=Zt&&Zt<=yt;return(Y.fitsInViewportVertically||null!=Ft&&Ft<=Xe)&&Mn}return!1}_pushOverlayOnScreen(Y,J,Re){if(this._previousPushAmount&&this._positionLocked)return{x:Y.x+this._previousPushAmount.x,y:Y.y+this._previousPushAmount.y};const Xe=jn(J),yt=this._viewportRect,Ft=Math.max(Y.x+Xe.width-yt.width,0),Zt=Math.max(Y.y+Xe.height-yt.height,0),zt=Math.max(yt.top-Re.top-Y.y,0),Mn=Math.max(yt.left-Re.left-Y.x,0);let Kn=0,Bn=0;return Kn=Xe.width<=yt.width?Mn||-Ft:Y.x<this._viewportMargin?yt.left-Re.left-Y.x:0,Bn=Xe.height<=yt.height?zt||-Zt:Y.y<this._viewportMargin?yt.top-Re.top-Y.y:0,this._previousPushAmount={x:Kn,y:Bn},{x:Y.x+Kn,y:Y.y+Bn}}_applyPosition(Y,J){if(this._setTransformOrigin(Y),this._setOverlayElementStyles(J,Y),this._setBoundingBoxStyles(J,Y),Y.panelClass&&this._addPanelClasses(Y.panelClass),this._lastPosition=Y,this._positionChanges.observers.length){const Re=this._getScrollVisibility(),Xe=new vn(Y,Re);this._positionChanges.next(Xe)}this._isInitialRender=!1}_setTransformOrigin(Y){if(!this._transformOriginSelector)return;const J=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Re,Xe=Y.overlayY;Re="center"===Y.overlayX?"center":this._isRtl()?"start"===Y.overlayX?"right":"left":"start"===Y.overlayX?"left":"right";for(let yt=0;yt<J.length;yt++)J[yt].style.transformOrigin=`${Re} ${Xe}`}_calculateBoundingBoxRect(Y,J){const Re=this._viewportRect,Xe=this._isRtl();let yt,Ft,Zt,Kn,Bn,gr;if("top"===J.overlayY)Ft=Y.y,yt=Re.height-Ft+this._viewportMargin;else if("bottom"===J.overlayY)Zt=Re.height-Y.y+2*this._viewportMargin,yt=Re.height-Zt+this._viewportMargin;else{const lr=Math.min(Re.bottom-Y.y+Re.top,Y.y),tr=this._lastBoundingBoxSize.height;yt=2*lr,Ft=Y.y-lr,yt>tr&&!this._isInitialRender&&!this._growAfterOpen&&(Ft=Y.y-tr/2)}if("end"===J.overlayX&&!Xe||"start"===J.overlayX&&Xe)gr=Re.width-Y.x+this._viewportMargin,Kn=Y.x-this._viewportMargin;else if("start"===J.overlayX&&!Xe||"end"===J.overlayX&&Xe)Bn=Y.x,Kn=Re.right-Y.x;else{const lr=Math.min(Re.right-Y.x+Re.left,Y.x),tr=this._lastBoundingBoxSize.width;Kn=2*lr,Bn=Y.x-lr,Kn>tr&&!this._isInitialRender&&!this._growAfterOpen&&(Bn=Y.x-tr/2)}return{top:Ft,left:Bn,bottom:Zt,right:gr,width:Kn,height:yt}}_setBoundingBoxStyles(Y,J){const Re=this._calculateBoundingBoxRect(Y,J);!this._isInitialRender&&!this._growAfterOpen&&(Re.height=Math.min(Re.height,this._lastBoundingBoxSize.height),Re.width=Math.min(Re.width,this._lastBoundingBoxSize.width));const Xe={};if(this._hasExactPosition())Xe.top=Xe.left="0",Xe.bottom=Xe.right=Xe.maxHeight=Xe.maxWidth="",Xe.width=Xe.height="100%";else{const yt=this._overlayRef.getConfig().maxHeight,Ft=this._overlayRef.getConfig().maxWidth;Xe.height=(0,re.HM)(Re.height),Xe.top=(0,re.HM)(Re.top),Xe.bottom=(0,re.HM)(Re.bottom),Xe.width=(0,re.HM)(Re.width),Xe.left=(0,re.HM)(Re.left),Xe.right=(0,re.HM)(Re.right),Xe.alignItems="center"===J.overlayX?"center":"end"===J.overlayX?"flex-end":"flex-start",Xe.justifyContent="center"===J.overlayY?"center":"bottom"===J.overlayY?"flex-end":"flex-start",yt&&(Xe.maxHeight=(0,re.HM)(yt)),Ft&&(Xe.maxWidth=(0,re.HM)(Ft))}this._lastBoundingBoxSize=Re,Yt(this._boundingBox.style,Xe)}_resetBoundingBoxStyles(){Yt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Yt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(Y,J){const Re={},Xe=this._hasExactPosition(),yt=this._hasFlexibleDimensions,Ft=this._overlayRef.getConfig();if(Xe){const Kn=this._viewportRuler.getViewportScrollPosition();Yt(Re,this._getExactOverlayY(J,Y,Kn)),Yt(Re,this._getExactOverlayX(J,Y,Kn))}else Re.position="static";let Zt="",zt=this._getOffset(J,"x"),Mn=this._getOffset(J,"y");zt&&(Zt+=`translateX(${zt}px) `),Mn&&(Zt+=`translateY(${Mn}px)`),Re.transform=Zt.trim(),Ft.maxHeight&&(Xe?Re.maxHeight=(0,re.HM)(Ft.maxHeight):yt&&(Re.maxHeight="")),Ft.maxWidth&&(Xe?Re.maxWidth=(0,re.HM)(Ft.maxWidth):yt&&(Re.maxWidth="")),Yt(this._pane.style,Re)}_getExactOverlayY(Y,J,Re){let Xe={top:"",bottom:""},yt=this._getOverlayPoint(J,this._overlayRect,Y);this._isPushed&&(yt=this._pushOverlayOnScreen(yt,this._overlayRect,Re));let Ft=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return yt.y-=Ft,"bottom"===Y.overlayY?Xe.bottom=this._document.documentElement.clientHeight-(yt.y+this._overlayRect.height)+"px":Xe.top=(0,re.HM)(yt.y),Xe}_getExactOverlayX(Y,J,Re){let Ft,Xe={left:"",right:""},yt=this._getOverlayPoint(J,this._overlayRect,Y);return this._isPushed&&(yt=this._pushOverlayOnScreen(yt,this._overlayRect,Re)),Ft=this._isRtl()?"end"===Y.overlayX?"left":"right":"end"===Y.overlayX?"right":"left","right"===Ft?Xe.right=this._document.documentElement.clientWidth-(yt.x+this._overlayRect.width)+"px":Xe.left=(0,re.HM)(yt.x),Xe}_getScrollVisibility(){const Y=this._getOriginRect(),J=this._pane.getBoundingClientRect(),Re=this._scrollables.map(Xe=>Xe.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Qe(Y,Re),isOriginOutsideView:Ge(Y,Re),isOverlayClipped:Qe(J,Re),isOverlayOutsideView:Ge(J,Re)}}_subtractOverflows(Y,...J){return J.reduce((Re,Xe)=>Re-Math.max(Xe,0),Y)}_getNarrowedViewportRect(){const Y=this._document.documentElement.clientWidth,J=this._document.documentElement.clientHeight,Re=this._viewportRuler.getViewportScrollPosition();return{top:Re.top+this._viewportMargin,left:Re.left+this._viewportMargin,right:Re.left+Y-this._viewportMargin,bottom:Re.top+J-this._viewportMargin,width:Y-2*this._viewportMargin,height:J-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(Y,J){return"x"===J?null==Y.offsetX?this._offsetX:Y.offsetX:null==Y.offsetY?this._offsetY:Y.offsetY}_validatePositions(){}_addPanelClasses(Y){this._pane&&(0,re.Eq)(Y).forEach(J=>{""!==J&&-1===this._appliedPanelClasses.indexOf(J)&&(this._appliedPanelClasses.push(J),this._pane.classList.add(J))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(Y=>{this._pane.classList.remove(Y)}),this._appliedPanelClasses=[])}_getOriginRect(){const Y=this._origin;if(Y instanceof U.SBq)return Y.nativeElement.getBoundingClientRect();if(Y instanceof Element)return Y.getBoundingClientRect();const J=Y.width||0,Re=Y.height||0;return{top:Y.y,bottom:Y.y+Re,left:Y.x,right:Y.x+J,height:Re,width:J}}}function Yt(rt,Y){for(let J in Y)Y.hasOwnProperty(J)&&(rt[J]=Y[J]);return rt}function Nn(rt){if("number"!=typeof rt&&null!=rt){const[Y,J]=rt.split(Ut);return J&&"px"!==J?null:parseFloat(Y)}return rt||null}function jn(rt){return{top:Math.floor(rt.top),right:Math.floor(rt.right),bottom:Math.floor(rt.bottom),left:Math.floor(rt.left),width:Math.floor(rt.width),height:Math.floor(rt.height)}}const nn="cdk-global-overlay-wrapper";class wn{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(Y){const J=Y.getConfig();this._overlayRef=Y,this._width&&!J.width&&Y.updateSize({width:this._width}),this._height&&!J.height&&Y.updateSize({height:this._height}),Y.hostElement.classList.add(nn),this._isDisposed=!1}top(Y=""){return this._bottomOffset="",this._topOffset=Y,this._alignItems="flex-start",this}left(Y=""){return this._rightOffset="",this._leftOffset=Y,this._justifyContent="flex-start",this}bottom(Y=""){return this._topOffset="",this._bottomOffset=Y,this._alignItems="flex-end",this}right(Y=""){return this._leftOffset="",this._rightOffset=Y,this._justifyContent="flex-end",this}width(Y=""){return this._overlayRef?this._overlayRef.updateSize({width:Y}):this._width=Y,this}height(Y=""){return this._overlayRef?this._overlayRef.updateSize({height:Y}):this._height=Y,this}centerHorizontally(Y=""){return this.left(Y),this._justifyContent="center",this}centerVertically(Y=""){return this.top(Y),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const Y=this._overlayRef.overlayElement.style,J=this._overlayRef.hostElement.style,Re=this._overlayRef.getConfig(),{width:Xe,height:yt,maxWidth:Ft,maxHeight:Zt}=Re,zt=!("100%"!==Xe&&"100vw"!==Xe||Ft&&"100%"!==Ft&&"100vw"!==Ft),Mn=!("100%"!==yt&&"100vh"!==yt||Zt&&"100%"!==Zt&&"100vh"!==Zt);Y.position=this._cssPosition,Y.marginLeft=zt?"0":this._leftOffset,Y.marginTop=Mn?"0":this._topOffset,Y.marginBottom=this._bottomOffset,Y.marginRight=this._rightOffset,zt?J.justifyContent="flex-start":"center"===this._justifyContent?J.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?J.justifyContent="flex-end":"flex-end"===this._justifyContent&&(J.justifyContent="flex-start"):J.justifyContent=this._justifyContent,J.alignItems=Mn?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const Y=this._overlayRef.overlayElement.style,J=this._overlayRef.hostElement,Re=J.style;J.classList.remove(nn),Re.justifyContent=Re.alignItems=Y.marginTop=Y.marginBottom=Y.marginLeft=Y.marginRight=Y.position="",this._overlayRef=null,this._isDisposed=!0}}let Ot=(()=>{class rt{constructor(J,Re,Xe,yt){this._viewportRuler=J,this._document=Re,this._platform=Xe,this._overlayContainer=yt}global(){return new wn}flexibleConnectedTo(J){return new Rt(J,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return rt.\u0275fac=function(J){return new(J||rt)(U.LFG(g.rL),U.LFG(S.K0),U.LFG(de.t4),U.LFG(St))},rt.\u0275prov=U.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt})(),hn=(()=>{class rt{constructor(J){this._attachedOverlays=[],this._document=J}ngOnDestroy(){this.detach()}add(J){this.remove(J),this._attachedOverlays.push(J)}remove(J){const Re=this._attachedOverlays.indexOf(J);Re>-1&&this._attachedOverlays.splice(Re,1),0===this._attachedOverlays.length&&this.detach()}}return rt.\u0275fac=function(J){return new(J||rt)(U.LFG(S.K0))},rt.\u0275prov=U.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt})(),xt=(()=>{class rt extends hn{constructor(J){super(J),this._keydownListener=Re=>{const Xe=this._attachedOverlays;for(let yt=Xe.length-1;yt>-1;yt--)if(Xe[yt]._keydownEvents.observers.length>0){Xe[yt]._keydownEvents.next(Re);break}}}add(J){super.add(J),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return rt.\u0275fac=function(J){return new(J||rt)(U.LFG(S.K0))},rt.\u0275prov=U.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt})(),rn=(()=>{class rt extends hn{constructor(J,Re){super(J),this._platform=Re,this._cursorStyleIsSet=!1,this._pointerDownListener=Xe=>{this._pointerDownEventTarget=(0,de.sA)(Xe)},this._clickListener=Xe=>{const yt=(0,de.sA)(Xe),Ft="click"===Xe.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:yt;this._pointerDownEventTarget=null;const Zt=this._attachedOverlays.slice();for(let zt=Zt.length-1;zt>-1;zt--){const Mn=Zt[zt];if(!(Mn._outsidePointerEvents.observers.length<1)&&Mn.hasAttached()){if(Mn.overlayElement.contains(yt)||Mn.overlayElement.contains(Ft))break;Mn._outsidePointerEvents.next(Xe)}}}}add(J){if(super.add(J),!this._isAttached){const Re=this._document.body;Re.addEventListener("pointerdown",this._pointerDownListener,!0),Re.addEventListener("click",this._clickListener,!0),Re.addEventListener("auxclick",this._clickListener,!0),Re.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Re.style.cursor,Re.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const J=this._document.body;J.removeEventListener("pointerdown",this._pointerDownListener,!0),J.removeEventListener("click",this._clickListener,!0),J.removeEventListener("auxclick",this._clickListener,!0),J.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(J.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return rt.\u0275fac=function(J){return new(J||rt)(U.LFG(S.K0),U.LFG(de.t4))},rt.\u0275prov=U.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt})(),fn=0,Fn=(()=>{class rt{constructor(J,Re,Xe,yt,Ft,Zt,zt,Mn,Kn,Bn,gr){this.scrollStrategies=J,this._overlayContainer=Re,this._componentFactoryResolver=Xe,this._positionBuilder=yt,this._keyboardDispatcher=Ft,this._injector=Zt,this._ngZone=zt,this._document=Mn,this._directionality=Kn,this._location=Bn,this._outsideClickDispatcher=gr}create(J){const Re=this._createHostElement(),Xe=this._createPaneElement(Re),yt=this._createPortalOutlet(Xe),Ft=new vt(J);return Ft.direction=Ft.direction||this._directionality.value,new ft(yt,Re,Xe,Ft,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(J){const Re=this._document.createElement("div");return Re.id="cdk-overlay-"+fn++,Re.classList.add("cdk-overlay-pane"),J.appendChild(Re),Re}_createHostElement(){const J=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(J),J}_createPortalOutlet(J){return this._appRef||(this._appRef=this._injector.get(U.z2F)),new oe.u0(J,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return rt.\u0275fac=function(J){return new(J||rt)(U.LFG(gt),U.LFG(St),U.LFG(U._Vd),U.LFG(Ot),U.LFG(xt),U.LFG(U.zs3),U.LFG(U.R0b),U.LFG(S.K0),U.LFG(Ce.Is),U.LFG(S.Ye),U.LFG(rn))},rt.\u0275prov=U.Yz7({token:rt,factory:rt.\u0275fac}),rt})();const Sn=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Zn=new U.OlP("cdk-connected-overlay-scroll-strategy");let ur=(()=>{class rt{constructor(J){this.elementRef=J}}return rt.\u0275fac=function(J){return new(J||rt)(U.Y36(U.SBq))},rt.\u0275dir=U.lG2({type:rt,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),rt})(),Dr=(()=>{class rt{constructor(J,Re,Xe,yt,Ft){this._overlay=J,this._dir=Ft,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=te.w0.EMPTY,this._attachSubscription=te.w0.EMPTY,this._detachSubscription=te.w0.EMPTY,this._positionSubscription=te.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new U.vpe,this.positionChange=new U.vpe,this.attach=new U.vpe,this.detach=new U.vpe,this.overlayKeydown=new U.vpe,this.overlayOutsideClick=new U.vpe,this._templatePortal=new oe.UE(Re,Xe),this._scrollStrategyFactory=yt,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(J){this._offsetX=J,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(J){this._offsetY=J,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(J){this._hasBackdrop=(0,re.Ig)(J)}get lockPosition(){return this._lockPosition}set lockPosition(J){this._lockPosition=(0,re.Ig)(J)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(J){this._flexibleDimensions=(0,re.Ig)(J)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(J){this._growAfterOpen=(0,re.Ig)(J)}get push(){return this._push}set push(J){this._push=(0,re.Ig)(J)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(J){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),J.origin&&this.open&&this._position.apply()),J.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Sn);const J=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=J.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=J.detachments().subscribe(()=>this.detach.emit()),J.keydownEvents().subscribe(Re=>{this.overlayKeydown.next(Re),Re.keyCode===et.hY&&!this.disableClose&&!(0,et.Vb)(Re)&&(Re.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(Re=>{this.overlayOutsideClick.next(Re)})}_buildConfig(){const J=this._position=this.positionStrategy||this._createPositionStrategy(),Re=new vt({direction:this._dir,positionStrategy:J,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(Re.width=this.width),(this.height||0===this.height)&&(Re.height=this.height),(this.minWidth||0===this.minWidth)&&(Re.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(Re.minHeight=this.minHeight),this.backdropClass&&(Re.backdropClass=this.backdropClass),this.panelClass&&(Re.panelClass=this.panelClass),Re}_updatePositionStrategy(J){const Re=this.positions.map(Xe=>({originX:Xe.originX,originY:Xe.originY,overlayX:Xe.overlayX,overlayY:Xe.overlayY,offsetX:Xe.offsetX||this.offsetX,offsetY:Xe.offsetY||this.offsetY,panelClass:Xe.panelClass||void 0}));return J.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(Re).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const J=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(J),J}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof ur?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(J=>{this.backdropClick.emit(J)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function it(rt,Y=!1){return(0,ke.e)((J,Re)=>{let Xe=0;J.subscribe((0,qe.x)(Re,yt=>{const Ft=rt(yt,Xe++);(Ft||Y)&&Re.next(yt),!Ft&&Re.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(J=>{this.positionChange.emit(J),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return rt.\u0275fac=function(J){return new(J||rt)(U.Y36(Fn),U.Y36(U.Rgc),U.Y36(U.s_b),U.Y36(Zn),U.Y36(Ce.Is,8))},rt.\u0275dir=U.lG2({type:rt,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[U.TTD]}),rt})();const Tn={provide:Zn,deps:[Fn],useFactory:function mn(rt){return()=>rt.scrollStrategies.reposition()}};let De=(()=>{class rt{}return rt.\u0275fac=function(J){return new(J||rt)},rt.\u0275mod=U.oAB({type:rt}),rt.\u0275inj=U.cJS({providers:[Fn,Tn],imports:[[Ce.vT,oe.eL,g.Cl],g.Cl]}),rt})()},925:(Je,Te,b)=>{b.d(Te,{t4:()=>re,ud:()=>de,sA:()=>Mt,ht:()=>He,kV:()=>at,Oy:()=>Be,i$:()=>se,Mq:()=>it});var g=b(5e3),S=b(9808);let U;try{U="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Ge){U=!1}let ce,qe,Et,ze,re=(()=>{class Ge{constructor(Ne){this._platformId=Ne,this.isBrowser=this._platformId?(0,S.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!U)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Ge.\u0275fac=function(Ne){return new(Ne||Ge)(g.LFG(g.Lbi))},Ge.\u0275prov=g.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})(),de=(()=>{class Ge{}return Ge.\u0275fac=function(Ne){return new(Ne||Ge)},Ge.\u0275mod=g.oAB({type:Ge}),Ge.\u0275inj=g.cJS({}),Ge})();function se(Ge){return function te(){if(null==ce&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ce=!0}))}finally{ce=ce||!1}return ce}()?Ge:!!Ge.capture}function it(){if(null==qe){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return qe=!1,qe;if("scrollBehavior"in document.documentElement.style)qe=!0;else{const Ge=Element.prototype.scrollTo;qe=!!Ge&&!/\{\s*\[native code\]\s*\}/.test(Ge.toString())}}return qe}function at(Ge){if(function et(){if(null==Et){const Ge="undefined"!=typeof document?document.head:null;Et=!(!Ge||!Ge.createShadowRoot&&!Ge.attachShadow)}return Et}()){const Qe=Ge.getRootNode?Ge.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&Qe instanceof ShadowRoot)return Qe}return null}function He(){let Ge="undefined"!=typeof document&&document?document.activeElement:null;for(;Ge&&Ge.shadowRoot;){const Qe=Ge.shadowRoot.activeElement;if(Qe===Ge)break;Ge=Qe}return Ge}function Mt(Ge){return Ge.composedPath?Ge.composedPath()[0]:Ge.target}function Be(){return void 0!==ze.__karma__&&!!ze.__karma__||void 0!==ze.jasmine&&!!ze.jasmine||void 0!==ze.jest&&!!ze.jest||void 0!==ze.Mocha&&!!ze.Mocha}ze="undefined"!=typeof global?global:"undefined"!=typeof window?window:{}},7429:(Je,Te,b)=>{b.d(Te,{en:()=>qe,Pl:()=>He,C5:()=>te,u0:()=>ut,eL:()=>ze,UE:()=>se});var g=b(5e3),S=b(9808);class ce{attach(Qe){return this._attachedHost=Qe,Qe.attach(this)}detach(){let Qe=this._attachedHost;null!=Qe&&(this._attachedHost=null,Qe.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(Qe){this._attachedHost=Qe}}class te extends ce{constructor(Qe,Ne,gt,vt){super(),this.component=Qe,this.viewContainerRef=Ne,this.injector=gt,this.componentFactoryResolver=vt}}class se extends ce{constructor(Qe,Ne,gt){super(),this.templateRef=Qe,this.viewContainerRef=Ne,this.context=gt}get origin(){return this.templateRef.elementRef}attach(Qe,Ne=this.context){return this.context=Ne,super.attach(Qe)}detach(){return this.context=void 0,super.detach()}}class ke extends ce{constructor(Qe){super(),this.element=Qe instanceof g.SBq?Qe.nativeElement:Qe}}class qe{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(Qe){return Qe instanceof te?(this._attachedPortal=Qe,this.attachComponentPortal(Qe)):Qe instanceof se?(this._attachedPortal=Qe,this.attachTemplatePortal(Qe)):this.attachDomPortal&&Qe instanceof ke?(this._attachedPortal=Qe,this.attachDomPortal(Qe)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(Qe){this._disposeFn=Qe}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ut extends qe{constructor(Qe,Ne,gt,vt,sn){super(),this.outletElement=Qe,this._componentFactoryResolver=Ne,this._appRef=gt,this._defaultInjector=vt,this.attachDomPortal=tn=>{const vn=tn.element,xn=this._document.createComment("dom-portal");vn.parentNode.insertBefore(xn,vn),this.outletElement.appendChild(vn),this._attachedPortal=tn,super.setDisposeFn(()=>{xn.parentNode&&xn.parentNode.replaceChild(vn,xn)})},this._document=sn}attachComponentPortal(Qe){const gt=(Qe.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Qe.component);let vt;return Qe.viewContainerRef?(vt=Qe.viewContainerRef.createComponent(gt,Qe.viewContainerRef.length,Qe.injector||Qe.viewContainerRef.injector),this.setDisposeFn(()=>vt.destroy())):(vt=gt.create(Qe.injector||this._defaultInjector),this._appRef.attachView(vt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(vt.hostView),vt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(vt)),this._attachedPortal=Qe,vt}attachTemplatePortal(Qe){let Ne=Qe.viewContainerRef,gt=Ne.createEmbeddedView(Qe.templateRef,Qe.context);return gt.rootNodes.forEach(vt=>this.outletElement.appendChild(vt)),gt.detectChanges(),this.setDisposeFn(()=>{let vt=Ne.indexOf(gt);-1!==vt&&Ne.remove(vt)}),this._attachedPortal=Qe,gt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(Qe){return Qe.hostView.rootNodes[0]}}let He=(()=>{class Ge extends qe{constructor(Ne,gt,vt){super(),this._componentFactoryResolver=Ne,this._viewContainerRef=gt,this._isInitialized=!1,this.attached=new g.vpe,this.attachDomPortal=sn=>{const tn=sn.element,vn=this._document.createComment("dom-portal");sn.setAttachedHost(this),tn.parentNode.insertBefore(vn,tn),this._getRootNode().appendChild(tn),this._attachedPortal=sn,super.setDisposeFn(()=>{vn.parentNode&&vn.parentNode.replaceChild(tn,vn)})},this._document=vt}get portal(){return this._attachedPortal}set portal(Ne){this.hasAttached()&&!Ne&&!this._isInitialized||(this.hasAttached()&&super.detach(),Ne&&super.attach(Ne),this._attachedPortal=Ne)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(Ne){Ne.setAttachedHost(this);const gt=null!=Ne.viewContainerRef?Ne.viewContainerRef:this._viewContainerRef,sn=(Ne.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Ne.component),tn=gt.createComponent(sn,gt.length,Ne.injector||gt.injector);return gt!==this._viewContainerRef&&this._getRootNode().appendChild(tn.hostView.rootNodes[0]),super.setDisposeFn(()=>tn.destroy()),this._attachedPortal=Ne,this._attachedRef=tn,this.attached.emit(tn),tn}attachTemplatePortal(Ne){Ne.setAttachedHost(this);const gt=this._viewContainerRef.createEmbeddedView(Ne.templateRef,Ne.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=Ne,this._attachedRef=gt,this.attached.emit(gt),gt}_getRootNode(){const Ne=this._viewContainerRef.element.nativeElement;return Ne.nodeType===Ne.ELEMENT_NODE?Ne:Ne.parentNode}}return Ge.\u0275fac=function(Ne){return new(Ne||Ge)(g.Y36(g._Vd),g.Y36(g.s_b),g.Y36(S.K0))},Ge.\u0275dir=g.lG2({type:Ge,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[g.qOj]}),Ge})(),ze=(()=>{class Ge{}return Ge.\u0275fac=function(Ne){return new(Ne||Ge)},Ge.\u0275mod=g.oAB({type:Ge}),Ge.\u0275inj=g.cJS({}),Ge})()},8962:(Je,Te,b)=>{b.d(Te,{ZD:()=>De,mF:()=>rn,Cl:()=>qn,rL:()=>Sn});var g=b(3191),S=b(5e3),U=b(4408),re=b(727);const de={schedule(rt){let Y=requestAnimationFrame,J=cancelAnimationFrame;const{delegate:Re}=de;Re&&(Y=Re.requestAnimationFrame,J=Re.cancelAnimationFrame);const Xe=Y(yt=>{J=void 0,rt(yt)});return new re.w0(()=>null==J?void 0:J(Xe))},requestAnimationFrame(...rt){const{delegate:Y}=de;return((null==Y?void 0:Y.requestAnimationFrame)||requestAnimationFrame)(...rt)},cancelAnimationFrame(...rt){const{delegate:Y}=de;return((null==Y?void 0:Y.cancelAnimationFrame)||cancelAnimationFrame)(...rt)},delegate:void 0};var Ce=b(7565);new class oe extends Ce.v{flush(Y){this._active=!0;const J=this._scheduled;this._scheduled=void 0;const{actions:Re}=this;let Xe;Y=Y||Re.shift();do{if(Xe=Y.execute(Y.state,Y.delay))break}while((Y=Re[0])&&Y.id===J&&Re.shift());if(this._active=!1,Xe){for(;(Y=Re[0])&&Y.id===J&&Re.shift();)Y.unsubscribe();throw Xe}}}(class Ie extends U.o{constructor(Y,J){super(Y,J),this.scheduler=Y,this.work=J}requestAsyncId(Y,J,Re=0){return null!==Re&&Re>0?super.requestAsyncId(Y,J,Re):(Y.actions.push(this),Y._scheduled||(Y._scheduled=de.requestAnimationFrame(()=>Y.flush(void 0))))}recycleAsyncId(Y,J,Re=0){var Xe;if(null!=Re?Re>0:this.delay>0)return super.recycleAsyncId(Y,J,Re);const{actions:yt}=Y;null!=J&&(null===(Xe=yt[yt.length-1])||void 0===Xe?void 0:Xe.id)!==J&&(de.cancelAnimationFrame(J),Y._scheduled=void 0)}});let ke,se=1;const qe={};function it(rt){return rt in qe&&(delete qe[rt],!0)}const ut={setImmediate(rt){const Y=se++;return qe[Y]=!0,ke||(ke=Promise.resolve()),ke.then(()=>it(Y)&&rt()),Y},clearImmediate(rt){it(rt)}},{setImmediate:et,clearImmediate:at}=ut,He={setImmediate(...rt){const{delegate:Y}=He;return((null==Y?void 0:Y.setImmediate)||et)(...rt)},clearImmediate(rt){const{delegate:Y}=He;return((null==Y?void 0:Y.clearImmediate)||at)(rt)},delegate:void 0};new class ze extends Ce.v{flush(Y){this._active=!0;const J=this._scheduled;this._scheduled=void 0;const{actions:Re}=this;let Xe;Y=Y||Re.shift();do{if(Xe=Y.execute(Y.state,Y.delay))break}while((Y=Re[0])&&Y.id===J&&Re.shift());if(this._active=!1,Xe){for(;(Y=Re[0])&&Y.id===J&&Re.shift();)Y.unsubscribe();throw Xe}}}(class Mt extends U.o{constructor(Y,J){super(Y,J),this.scheduler=Y,this.work=J}requestAsyncId(Y,J,Re=0){return null!==Re&&Re>0?super.requestAsyncId(Y,J,Re):(Y.actions.push(this),Y._scheduled||(Y._scheduled=He.setImmediate(Y.flush.bind(Y,void 0))))}recycleAsyncId(Y,J,Re=0){var Xe;if(null!=Re?Re>0:this.delay>0)return super.recycleAsyncId(Y,J,Re);const{actions:yt}=Y;null!=J&&(null===(Xe=yt[yt.length-1])||void 0===Xe?void 0:Xe.id)!==J&&(He.clearImmediate(J),Y._scheduled=void 0)}});var Qe=b(7579),Ne=b(9646),gt=b(8306),vt=b(4968),sn=b(4986),tn=b(4482),vn=b(8421),xn=b(5403),ft=b(2805);function St(rt,Y=sn.z){return function Ze(rt){return(0,tn.e)((Y,J)=>{let Re=!1,Xe=null,yt=null,Ft=!1;const Zt=()=>{if(null==yt||yt.unsubscribe(),yt=null,Re){Re=!1;const Mn=Xe;Xe=null,J.next(Mn)}Ft&&J.complete()},zt=()=>{yt=null,Ft&&J.complete()};Y.subscribe((0,xn.x)(J,Mn=>{Re=!0,Xe=Mn,yt||(0,vn.Xf)(rt(Mn)).subscribe(yt=(0,xn.x)(J,Zt,zt))},()=>{Ft=!0,(!Re||!yt||yt.closed)&&J.complete()}))})}(()=>(0,ft.H)(rt,Y))}var Gt=b(9300),Ut=b(9808),Rt=b(925),Yt=b(226);let rn=(()=>{class rt{constructor(J,Re,Xe){this._ngZone=J,this._platform=Re,this._scrolled=new Qe.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Xe}register(J){this.scrollContainers.has(J)||this.scrollContainers.set(J,J.elementScrolled().subscribe(()=>this._scrolled.next(J)))}deregister(J){const Re=this.scrollContainers.get(J);Re&&(Re.unsubscribe(),this.scrollContainers.delete(J))}scrolled(J=20){return this._platform.isBrowser?new gt.y(Re=>{this._globalSubscription||this._addGlobalListener();const Xe=J>0?this._scrolled.pipe(St(J)).subscribe(Re):this._scrolled.subscribe(Re);return this._scrolledCount++,()=>{Xe.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Ne.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((J,Re)=>this.deregister(Re)),this._scrolled.complete()}ancestorScrolled(J,Re){const Xe=this.getAncestorScrollContainers(J);return this.scrolled(Re).pipe((0,Gt.h)(yt=>!yt||Xe.indexOf(yt)>-1))}getAncestorScrollContainers(J){const Re=[];return this.scrollContainers.forEach((Xe,yt)=>{this._scrollableContainsElement(yt,J)&&Re.push(yt)}),Re}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(J,Re){let Xe=(0,g.fI)(Re),yt=J.getElementRef().nativeElement;do{if(Xe==yt)return!0}while(Xe=Xe.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const J=this._getWindow();return(0,vt.R)(J.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return rt.\u0275fac=function(J){return new(J||rt)(S.LFG(S.R0b),S.LFG(Rt.t4),S.LFG(Ut.K0,8))},rt.\u0275prov=S.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt})(),Sn=(()=>{class rt{constructor(J,Re,Xe){this._platform=J,this._change=new Qe.x,this._changeListener=yt=>{this._change.next(yt)},this._document=Xe,Re.runOutsideAngular(()=>{if(J.isBrowser){const yt=this._getWindow();yt.addEventListener("resize",this._changeListener),yt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const J=this._getWindow();J.removeEventListener("resize",this._changeListener),J.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const J={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),J}getViewportRect(){const J=this.getViewportScrollPosition(),{width:Re,height:Xe}=this.getViewportSize();return{top:J.top,left:J.left,bottom:J.top+Xe,right:J.left+Re,height:Xe,width:Re}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const J=this._document,Re=this._getWindow(),Xe=J.documentElement,yt=Xe.getBoundingClientRect();return{top:-yt.top||J.body.scrollTop||Re.scrollY||Xe.scrollTop||0,left:-yt.left||J.body.scrollLeft||Re.scrollX||Xe.scrollLeft||0}}change(J=20){return J>0?this._change.pipe(St(J)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const J=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:J.innerWidth,height:J.innerHeight}:{width:0,height:0}}}return rt.\u0275fac=function(J){return new(J||rt)(S.LFG(Rt.t4),S.LFG(S.R0b),S.LFG(Ut.K0,8))},rt.\u0275prov=S.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"}),rt})(),De=(()=>{class rt{}return rt.\u0275fac=function(J){return new(J||rt)},rt.\u0275mod=S.oAB({type:rt}),rt.\u0275inj=S.cJS({}),rt})(),qn=(()=>{class rt{}return rt.\u0275fac=function(J){return new(J||rt)},rt.\u0275mod=S.oAB({type:rt}),rt.\u0275inj=S.cJS({imports:[[Yt.vT,Rt.ud,De],Yt.vT,De]}),rt})()},9808:(Je,Te,b)=>{b.d(Te,{mr:()=>He,Ov:()=>on,ez:()=>Fs,H9:()=>Ns,K0:()=>Ce,uU:()=>Ps,Do:()=>ze,V_:()=>te,Ye:()=>Be,S$:()=>et,mk:()=>Wr,sg:()=>di,O5:()=>Ht,RF:()=>_n,n9:()=>_r,ED:()=>Ei,b0:()=>Mt,lw:()=>oe,EM:()=>Sr,JF:()=>gi,NF:()=>Ci,PM:()=>is,w_:()=>Ie,bD:()=>Ro,q:()=>U,Mx:()=>ps,HT:()=>de});var g=b(5e3);let S=null;function U(){return S}function de(H){S||(S=H)}class Ie{}const Ce=new g.OlP("DocumentToken");let oe=(()=>{class H{historyGo(V){throw new Error("Not implemented")}}return H.\u0275fac=function(V){return new(V||H)},H.\u0275prov=g.Yz7({token:H,factory:function(){return function ce(){return(0,g.LFG)(se)}()},providedIn:"platform"}),H})();const te=new g.OlP("Location Initialized");let se=(()=>{class H extends oe{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(V){const Ee=U().getGlobalEventTarget(this._doc,"window");return Ee.addEventListener("popstate",V,!1),()=>Ee.removeEventListener("popstate",V)}onHashChange(V){const Ee=U().getGlobalEventTarget(this._doc,"window");return Ee.addEventListener("hashchange",V,!1),()=>Ee.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,Ee,ot){ke()?this._history.pushState(V,Ee,ot):this.location.hash=ot}replaceState(V,Ee,ot){ke()?this._history.replaceState(V,Ee,ot):this.location.hash=ot}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return H.\u0275fac=function(V){return new(V||H)(g.LFG(Ce))},H.\u0275prov=g.Yz7({token:H,factory:function(){return function qe(){return new se((0,g.LFG)(Ce))}()},providedIn:"platform"}),H})();function ke(){return!!window.history.pushState}function it(H,fe){if(0==H.length)return fe;if(0==fe.length)return H;let V=0;return H.endsWith("/")&&V++,fe.startsWith("/")&&V++,2==V?H+fe.substring(1):1==V?H+fe:H+"/"+fe}function ut(H){const fe=H.match(/#|\?|$/),V=fe&&fe.index||H.length;return H.slice(0,V-("/"===H[V-1]?1:0))+H.slice(V)}function Et(H){return H&&"?"!==H[0]?"?"+H:H}let et=(()=>{class H{historyGo(V){throw new Error("Not implemented")}}return H.\u0275fac=function(V){return new(V||H)},H.\u0275prov=g.Yz7({token:H,factory:function(){return function at(H){const fe=(0,g.LFG)(Ce).location;return new Mt((0,g.LFG)(oe),fe&&fe.origin||"")}()},providedIn:"root"}),H})();const He=new g.OlP("appBaseHref");let Mt=(()=>{class H extends et{constructor(V,Ee){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==Ee&&(Ee=this._platformLocation.getBaseHrefFromDOM()),null==Ee)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Ee}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return it(this._baseHref,V)}path(V=!1){const Ee=this._platformLocation.pathname+Et(this._platformLocation.search),ot=this._platformLocation.hash;return ot&&V?`${Ee}${ot}`:Ee}pushState(V,Ee,ot,Wt){const Kt=this.prepareExternalUrl(ot+Et(Wt));this._platformLocation.pushState(V,Ee,Kt)}replaceState(V,Ee,ot,Wt){const Kt=this.prepareExternalUrl(ot+Et(Wt));this._platformLocation.replaceState(V,Ee,Kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var Ee,ot;null===(ot=(Ee=this._platformLocation).historyGo)||void 0===ot||ot.call(Ee,V)}}return H.\u0275fac=function(V){return new(V||H)(g.LFG(oe),g.LFG(He,8))},H.\u0275prov=g.Yz7({token:H,factory:H.\u0275fac}),H})(),ze=(()=>{class H extends et{constructor(V,Ee){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=Ee&&(this._baseHref=Ee)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let Ee=this._platformLocation.hash;return null==Ee&&(Ee="#"),Ee.length>0?Ee.substring(1):Ee}prepareExternalUrl(V){const Ee=it(this._baseHref,V);return Ee.length>0?"#"+Ee:Ee}pushState(V,Ee,ot,Wt){let Kt=this.prepareExternalUrl(ot+Et(Wt));0==Kt.length&&(Kt=this._platformLocation.pathname),this._platformLocation.pushState(V,Ee,Kt)}replaceState(V,Ee,ot,Wt){let Kt=this.prepareExternalUrl(ot+Et(Wt));0==Kt.length&&(Kt=this._platformLocation.pathname),this._platformLocation.replaceState(V,Ee,Kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var Ee,ot;null===(ot=(Ee=this._platformLocation).historyGo)||void 0===ot||ot.call(Ee,V)}}return H.\u0275fac=function(V){return new(V||H)(g.LFG(oe),g.LFG(He,8))},H.\u0275prov=g.Yz7({token:H,factory:H.\u0275fac}),H})(),Be=(()=>{class H{constructor(V,Ee){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const ot=this._platformStrategy.getBaseHref();this._platformLocation=Ee,this._baseHref=ut(Ne(ot)),this._platformStrategy.onPopState(Wt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Wt.state,type:Wt.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,Ee=""){return this.path()==this.normalize(V+Et(Ee))}normalize(V){return H.stripTrailingSlash(function Qe(H,fe){return H&&fe.startsWith(H)?fe.substring(H.length):fe}(this._baseHref,Ne(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,Ee="",ot=null){this._platformStrategy.pushState(ot,"",V,Ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Et(Ee)),ot)}replaceState(V,Ee="",ot=null){this._platformStrategy.replaceState(ot,"",V,Ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Et(Ee)),ot)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var Ee,ot;null===(ot=(Ee=this._platformStrategy).historyGo)||void 0===ot||ot.call(Ee,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Ee=>{this._notifyUrlChangeListeners(Ee.url,Ee.state)}))}_notifyUrlChangeListeners(V="",Ee){this._urlChangeListeners.forEach(ot=>ot(V,Ee))}subscribe(V,Ee,ot){return this._subject.subscribe({next:V,error:Ee,complete:ot})}}return H.normalizeQueryParams=Et,H.joinWithSlash=it,H.stripTrailingSlash=ut,H.\u0275fac=function(V){return new(V||H)(g.LFG(et),g.LFG(oe))},H.\u0275prov=g.Yz7({token:H,factory:function(){return function Ge(){return new Be((0,g.LFG)(et),(0,g.LFG)(oe))}()},providedIn:"root"}),H})();function Ne(H){return H.replace(/\/index.html$/,"")}const gt={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var vt=(()=>((vt=vt||{})[vt.Decimal=0]="Decimal",vt[vt.Percent=1]="Percent",vt[vt.Currency=2]="Currency",vt[vt.Scientific=3]="Scientific",vt))(),tn=(()=>((tn=tn||{})[tn.Format=0]="Format",tn[tn.Standalone=1]="Standalone",tn))(),vn=(()=>((vn=vn||{})[vn.Narrow=0]="Narrow",vn[vn.Abbreviated=1]="Abbreviated",vn[vn.Wide=2]="Wide",vn[vn.Short=3]="Short",vn))(),xn=(()=>((xn=xn||{})[xn.Short=0]="Short",xn[xn.Medium=1]="Medium",xn[xn.Long=2]="Long",xn[xn.Full=3]="Full",xn))(),Ze=(()=>((Ze=Ze||{})[Ze.Decimal=0]="Decimal",Ze[Ze.Group=1]="Group",Ze[Ze.List=2]="List",Ze[Ze.PercentSign=3]="PercentSign",Ze[Ze.PlusSign=4]="PlusSign",Ze[Ze.MinusSign=5]="MinusSign",Ze[Ze.Exponential=6]="Exponential",Ze[Ze.SuperscriptingExponent=7]="SuperscriptingExponent",Ze[Ze.PerMille=8]="PerMille",Ze[Ze.Infinity=9]="Infinity",Ze[Ze.NaN=10]="NaN",Ze[Ze.TimeSeparator=11]="TimeSeparator",Ze[Ze.CurrencyDecimal=12]="CurrencyDecimal",Ze[Ze.CurrencyGroup=13]="CurrencyGroup",Ze))();function nn(H,fe){return De((0,g.cg1)(H)[g.wAp.DateFormat],fe)}function wn(H,fe){return De((0,g.cg1)(H)[g.wAp.TimeFormat],fe)}function Ot(H,fe){return De((0,g.cg1)(H)[g.wAp.DateTimeFormat],fe)}function hn(H,fe){const V=(0,g.cg1)(H),Ee=V[g.wAp.NumberSymbols][fe];if(void 0===Ee){if(fe===Ze.CurrencyDecimal)return V[g.wAp.NumberSymbols][Ze.Decimal];if(fe===Ze.CurrencyGroup)return V[g.wAp.NumberSymbols][Ze.Group]}return Ee}function ur(H){if(!H[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${H[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function De(H,fe){for(let V=fe;V>-1;V--)if(void 0!==H[V])return H[V];throw new Error("Locale data API: locale data undefined")}function qn(H){const[fe,V]=H.split(":");return{hours:+fe,minutes:+V}}const Re=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xe={},yt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ft=(()=>((Ft=Ft||{})[Ft.Short=0]="Short",Ft[Ft.ShortGMT=1]="ShortGMT",Ft[Ft.Long=2]="Long",Ft[Ft.Extended=3]="Extended",Ft))(),Zt=(()=>((Zt=Zt||{})[Zt.FullYear=0]="FullYear",Zt[Zt.Month=1]="Month",Zt[Zt.Date=2]="Date",Zt[Zt.Hours=3]="Hours",Zt[Zt.Minutes=4]="Minutes",Zt[Zt.Seconds=5]="Seconds",Zt[Zt.FractionalSeconds=6]="FractionalSeconds",Zt[Zt.Day=7]="Day",Zt))(),zt=(()=>((zt=zt||{})[zt.DayPeriods=0]="DayPeriods",zt[zt.Days=1]="Days",zt[zt.Months=2]="Months",zt[zt.Eras=3]="Eras",zt))();function Mn(H,fe,V,Ee){let ot=function ae(H){if(Ve(H))return H;if("number"==typeof H&&!isNaN(H))return new Date(H);if("string"==typeof H){if(H=H.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(H)){const[ot,Wt=1,Kt=1]=H.split("-").map(zn=>+zn);return Kn(ot,Wt-1,Kt)}const V=parseFloat(H);if(!isNaN(H-V))return new Date(V);let Ee;if(Ee=H.match(Re))return function _e(H){const fe=new Date(0);let V=0,Ee=0;const ot=H[8]?fe.setUTCFullYear:fe.setFullYear,Wt=H[8]?fe.setUTCHours:fe.setHours;H[9]&&(V=Number(H[9]+H[10]),Ee=Number(H[9]+H[11])),ot.call(fe,Number(H[1]),Number(H[2])-1,Number(H[3]));const Kt=Number(H[4]||0)-V,zn=Number(H[5]||0)-Ee,Pr=Number(H[6]||0),ri=Math.floor(1e3*parseFloat("0."+(H[7]||0)));return Wt.call(fe,Kt,zn,Pr,ri),fe}(Ee)}const fe=new Date(H);if(!Ve(fe))throw new Error(`Unable to convert "${H}" into a date`);return fe}(H);fe=Bn(V,fe)||fe;let zn,Kt=[];for(;fe;){if(zn=yt.exec(fe),!zn){Kt.push(fe);break}{Kt=Kt.concat(zn.slice(1));const Lr=Kt.pop();if(!Lr)break;fe=Lr}}let Pr=ot.getTimezoneOffset();Ee&&(Pr=ue(Ee,Pr),ot=function $(H,fe,V){const Ee=V?-1:1,ot=H.getTimezoneOffset();return function be(H,fe){return(H=new Date(H.getTime())).setMinutes(H.getMinutes()+fe),H}(H,Ee*(ue(fe,ot)-ot))}(ot,Ee,!0));let ri="";return Kt.forEach(Lr=>{const Vr=function xe(H){if(we[H])return we[H];let fe;switch(H){case"G":case"GG":case"GGG":fe=Ue(zt.Eras,vn.Abbreviated);break;case"GGGG":fe=Ue(zt.Eras,vn.Wide);break;case"GGGGG":fe=Ue(zt.Eras,vn.Narrow);break;case"y":fe=pt(Zt.FullYear,1,0,!1,!0);break;case"yy":fe=pt(Zt.FullYear,2,0,!0,!0);break;case"yyy":fe=pt(Zt.FullYear,3,0,!1,!0);break;case"yyyy":fe=pt(Zt.FullYear,4,0,!1,!0);break;case"Y":fe=ht(1);break;case"YY":fe=ht(2,!0);break;case"YYY":fe=ht(3);break;case"YYYY":fe=ht(4);break;case"M":case"L":fe=pt(Zt.Month,1,1);break;case"MM":case"LL":fe=pt(Zt.Month,2,1);break;case"MMM":fe=Ue(zt.Months,vn.Abbreviated);break;case"MMMM":fe=Ue(zt.Months,vn.Wide);break;case"MMMMM":fe=Ue(zt.Months,vn.Narrow);break;case"LLL":fe=Ue(zt.Months,vn.Abbreviated,tn.Standalone);break;case"LLLL":fe=Ue(zt.Months,vn.Wide,tn.Standalone);break;case"LLLLL":fe=Ue(zt.Months,vn.Narrow,tn.Standalone);break;case"w":fe=Fe(1);break;case"ww":fe=Fe(2);break;case"W":fe=Fe(1,!0);break;case"d":fe=pt(Zt.Date,1);break;case"dd":fe=pt(Zt.Date,2);break;case"c":case"cc":fe=pt(Zt.Day,1);break;case"ccc":fe=Ue(zt.Days,vn.Abbreviated,tn.Standalone);break;case"cccc":fe=Ue(zt.Days,vn.Wide,tn.Standalone);break;case"ccccc":fe=Ue(zt.Days,vn.Narrow,tn.Standalone);break;case"cccccc":fe=Ue(zt.Days,vn.Short,tn.Standalone);break;case"E":case"EE":case"EEE":fe=Ue(zt.Days,vn.Abbreviated);break;case"EEEE":fe=Ue(zt.Days,vn.Wide);break;case"EEEEE":fe=Ue(zt.Days,vn.Narrow);break;case"EEEEEE":fe=Ue(zt.Days,vn.Short);break;case"a":case"aa":case"aaa":fe=Ue(zt.DayPeriods,vn.Abbreviated);break;case"aaaa":fe=Ue(zt.DayPeriods,vn.Wide);break;case"aaaaa":fe=Ue(zt.DayPeriods,vn.Narrow);break;case"b":case"bb":case"bbb":fe=Ue(zt.DayPeriods,vn.Abbreviated,tn.Standalone,!0);break;case"bbbb":fe=Ue(zt.DayPeriods,vn.Wide,tn.Standalone,!0);break;case"bbbbb":fe=Ue(zt.DayPeriods,vn.Narrow,tn.Standalone,!0);break;case"B":case"BB":case"BBB":fe=Ue(zt.DayPeriods,vn.Abbreviated,tn.Format,!0);break;case"BBBB":fe=Ue(zt.DayPeriods,vn.Wide,tn.Format,!0);break;case"BBBBB":fe=Ue(zt.DayPeriods,vn.Narrow,tn.Format,!0);break;case"h":fe=pt(Zt.Hours,1,-12);break;case"hh":fe=pt(Zt.Hours,2,-12);break;case"H":fe=pt(Zt.Hours,1);break;case"HH":fe=pt(Zt.Hours,2);break;case"m":fe=pt(Zt.Minutes,1);break;case"mm":fe=pt(Zt.Minutes,2);break;case"s":fe=pt(Zt.Seconds,1);break;case"ss":fe=pt(Zt.Seconds,2);break;case"S":fe=pt(Zt.FractionalSeconds,1);break;case"SS":fe=pt(Zt.FractionalSeconds,2);break;case"SSS":fe=pt(Zt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":fe=he(Ft.Short);break;case"ZZZZZ":fe=he(Ft.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":fe=he(Ft.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":fe=he(Ft.Long);break;default:return null}return we[H]=fe,fe}(Lr);ri+=Vr?Vr(ot,V,Pr):"''"===Lr?"'":Lr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),ri}function Kn(H,fe,V){const Ee=new Date(0);return Ee.setFullYear(H,fe,V),Ee.setHours(0,0,0),Ee}function Bn(H,fe){const V=function St(H){return(0,g.cg1)(H)[g.wAp.LocaleId]}(H);if(Xe[V]=Xe[V]||{},Xe[V][fe])return Xe[V][fe];let Ee="";switch(fe){case"shortDate":Ee=nn(H,xn.Short);break;case"mediumDate":Ee=nn(H,xn.Medium);break;case"longDate":Ee=nn(H,xn.Long);break;case"fullDate":Ee=nn(H,xn.Full);break;case"shortTime":Ee=wn(H,xn.Short);break;case"mediumTime":Ee=wn(H,xn.Medium);break;case"longTime":Ee=wn(H,xn.Long);break;case"fullTime":Ee=wn(H,xn.Full);break;case"short":const ot=Bn(H,"shortTime"),Wt=Bn(H,"shortDate");Ee=gr(Ot(H,xn.Short),[ot,Wt]);break;case"medium":const Kt=Bn(H,"mediumTime"),zn=Bn(H,"mediumDate");Ee=gr(Ot(H,xn.Medium),[Kt,zn]);break;case"long":const Pr=Bn(H,"longTime"),ri=Bn(H,"longDate");Ee=gr(Ot(H,xn.Long),[Pr,ri]);break;case"full":const Lr=Bn(H,"fullTime"),Vr=Bn(H,"fullDate");Ee=gr(Ot(H,xn.Full),[Lr,Vr])}return Ee&&(Xe[V][fe]=Ee),Ee}function gr(H,fe){return fe&&(H=H.replace(/\{([^}]+)}/g,function(V,Ee){return null!=fe&&Ee in fe?fe[Ee]:V})),H}function lr(H,fe,V="-",Ee,ot){let Wt="";(H<0||ot&&H<=0)&&(ot?H=1-H:(H=-H,Wt=V));let Kt=String(H);for(;Kt.length<fe;)Kt="0"+Kt;return Ee&&(Kt=Kt.substr(Kt.length-fe)),Wt+Kt}function pt(H,fe,V=0,Ee=!1,ot=!1){return function(Wt,Kt){let zn=function dt(H,fe){switch(H){case Zt.FullYear:return fe.getFullYear();case Zt.Month:return fe.getMonth();case Zt.Date:return fe.getDate();case Zt.Hours:return fe.getHours();case Zt.Minutes:return fe.getMinutes();case Zt.Seconds:return fe.getSeconds();case Zt.FractionalSeconds:return fe.getMilliseconds();case Zt.Day:return fe.getDay();default:throw new Error(`Unknown DateType value "${H}".`)}}(H,Wt);if((V>0||zn>-V)&&(zn+=V),H===Zt.Hours)0===zn&&-12===V&&(zn=12);else if(H===Zt.FractionalSeconds)return function tr(H,fe){return lr(H,3).substr(0,fe)}(zn,fe);const Pr=hn(Kt,Ze.MinusSign);return lr(zn,fe,Pr,Ee,ot)}}function Ue(H,fe,V=tn.Format,Ee=!1){return function(ot,Wt){return function It(H,fe,V,Ee,ot,Wt){switch(V){case zt.Months:return function Rt(H,fe,V){const Ee=(0,g.cg1)(H),Wt=De([Ee[g.wAp.MonthsFormat],Ee[g.wAp.MonthsStandalone]],fe);return De(Wt,V)}(fe,ot,Ee)[H.getMonth()];case zt.Days:return function Ut(H,fe,V){const Ee=(0,g.cg1)(H),Wt=De([Ee[g.wAp.DaysFormat],Ee[g.wAp.DaysStandalone]],fe);return De(Wt,V)}(fe,ot,Ee)[H.getDay()];case zt.DayPeriods:const Kt=H.getHours(),zn=H.getMinutes();if(Wt){const ri=function Dr(H){const fe=(0,g.cg1)(H);return ur(fe),(fe[g.wAp.ExtraData][2]||[]).map(Ee=>"string"==typeof Ee?qn(Ee):[qn(Ee[0]),qn(Ee[1])])}(fe),Lr=function mn(H,fe,V){const Ee=(0,g.cg1)(H);ur(Ee);const Wt=De([Ee[g.wAp.ExtraData][0],Ee[g.wAp.ExtraData][1]],fe)||[];return De(Wt,V)||[]}(fe,ot,Ee),Vr=ri.findIndex(Ti=>{if(Array.isArray(Ti)){const[qr,mi]=Ti,Hs=Kt>=qr.hours&&zn>=qr.minutes,Hr=Kt<mi.hours||Kt===mi.hours&&zn<mi.minutes;if(qr.hours<mi.hours){if(Hs&&Hr)return!0}else if(Hs||Hr)return!0}else if(Ti.hours===Kt&&Ti.minutes===zn)return!0;return!1});if(-1!==Vr)return Lr[Vr]}return function Gt(H,fe,V){const Ee=(0,g.cg1)(H),Wt=De([Ee[g.wAp.DayPeriodsFormat],Ee[g.wAp.DayPeriodsStandalone]],fe);return De(Wt,V)}(fe,ot,Ee)[Kt<12?0:1];case zt.Eras:return function Yt(H,fe){return De((0,g.cg1)(H)[g.wAp.Eras],fe)}(fe,Ee)[H.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${V}`)}}(ot,Wt,H,fe,V,Ee)}}function he(H){return function(fe,V,Ee){const ot=-1*Ee,Wt=hn(V,Ze.MinusSign),Kt=ot>0?Math.floor(ot/60):Math.ceil(ot/60);switch(H){case Ft.Short:return(ot>=0?"+":"")+lr(Kt,2,Wt)+lr(Math.abs(ot%60),2,Wt);case Ft.ShortGMT:return"GMT"+(ot>=0?"+":"")+lr(Kt,1,Wt);case Ft.Long:return"GMT"+(ot>=0?"+":"")+lr(Kt,2,Wt)+":"+lr(Math.abs(ot%60),2,Wt);case Ft.Extended:return 0===Ee?"Z":(ot>=0?"+":"")+lr(Kt,2,Wt)+":"+lr(Math.abs(ot%60),2,Wt);default:throw new Error(`Unknown zone width "${H}"`)}}}function X(H){return Kn(H.getFullYear(),H.getMonth(),H.getDate()+(4-H.getDay()))}function Fe(H,fe=!1){return function(V,Ee){let ot;if(fe){const Wt=new Date(V.getFullYear(),V.getMonth(),1).getDay()-1,Kt=V.getDate();ot=1+Math.floor((Kt+Wt)/7)}else{const Wt=X(V),Kt=function q(H){const fe=Kn(H,0,1).getDay();return Kn(H,0,1+(fe<=4?4:11)-fe)}(Wt.getFullYear()),zn=Wt.getTime()-Kt.getTime();ot=1+Math.round(zn/6048e5)}return lr(ot,H,hn(Ee,Ze.MinusSign))}}function ht(H,fe=!1){return function(V,Ee){return lr(X(V).getFullYear(),H,hn(Ee,Ze.MinusSign),fe)}}const we={};function ue(H,fe){H=H.replace(/:/g,"");const V=Date.parse("Jan 01, 1970 00:00:00 "+H)/6e4;return isNaN(V)?fe:V}function Ve(H){return H instanceof Date&&!isNaN(H.valueOf())}const Tt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Ki(H,fe,V,Ee,ot){const Kt=function Kr(H,fe="-"){const V={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Ee=H.split(";"),ot=Ee[0],Wt=Ee[1],Kt=-1!==ot.indexOf(".")?ot.split("."):[ot.substring(0,ot.lastIndexOf("0")+1),ot.substring(ot.lastIndexOf("0")+1)],zn=Kt[0],Pr=Kt[1]||"";V.posPre=zn.substr(0,zn.indexOf("#"));for(let Lr=0;Lr<Pr.length;Lr++){const Vr=Pr.charAt(Lr);"0"===Vr?V.minFrac=V.maxFrac=Lr+1:"#"===Vr?V.maxFrac=Lr+1:V.posSuf+=Vr}const ri=zn.split(",");if(V.gSize=ri[1]?ri[1].length:0,V.lgSize=ri[2]||ri[1]?(ri[2]||ri[1]).length:0,Wt){const Lr=ot.length-V.posPre.length-V.posSuf.length,Vr=Wt.indexOf("#");V.negPre=Wt.substr(0,Vr).replace(/'/g,""),V.negSuf=Wt.substr(Vr+Lr).replace(/'/g,"")}else V.negPre=fe+V.posPre,V.negSuf=V.posSuf;return V}(function xt(H,fe){return(0,g.cg1)(H)[g.wAp.NumberFormats][fe]}(fe,vt.Currency),hn(fe,Ze.MinusSign));return Kt.minFrac=function J(H){let fe;const V=gt[H];return V&&(fe=V[2]),"number"==typeof fe?fe:2}(Ee),Kt.maxFrac=Kt.minFrac,function Hi(H,fe,V,Ee,ot,Wt,Kt=!1){let zn="",Pr=!1;if(isFinite(H)){let ri=function $i(H){let Ee,ot,Wt,Kt,zn,fe=Math.abs(H)+"",V=0;for((ot=fe.indexOf("."))>-1&&(fe=fe.replace(".","")),(Wt=fe.search(/e/i))>0?(ot<0&&(ot=Wt),ot+=+fe.slice(Wt+1),fe=fe.substring(0,Wt)):ot<0&&(ot=fe.length),Wt=0;"0"===fe.charAt(Wt);Wt++);if(Wt===(zn=fe.length))Ee=[0],ot=1;else{for(zn--;"0"===fe.charAt(zn);)zn--;for(ot-=Wt,Ee=[],Kt=0;Wt<=zn;Wt++,Kt++)Ee[Kt]=Number(fe.charAt(Wt))}return ot>22&&(Ee=Ee.splice(0,21),V=ot-1,ot=1),{digits:Ee,exponent:V,integerLen:ot}}(H);Kt&&(ri=function wi(H){if(0===H.digits[0])return H;const fe=H.digits.length-H.integerLen;return H.exponent?H.exponent+=2:(0===fe?H.digits.push(0,0):1===fe&&H.digits.push(0),H.integerLen+=2),H}(ri));let Lr=fe.minInt,Vr=fe.minFrac,Ti=fe.maxFrac;if(Wt){const Js=Wt.match(Tt);if(null===Js)throw new Error(`${Wt} is not a valid digit info`);const eo=Js[1],$s=Js[3],Ar=Js[5];null!=eo&&(Lr=Oi(eo)),null!=$s&&(Vr=Oi($s)),null!=Ar?Ti=Oi(Ar):null!=$s&&Vr>Ti&&(Ti=Vr)}!function pi(H,fe,V){if(fe>V)throw new Error(`The minimum number of digits after fraction (${fe}) is higher than the maximum (${V}).`);let Ee=H.digits,ot=Ee.length-H.integerLen;const Wt=Math.min(Math.max(fe,ot),V);let Kt=Wt+H.integerLen,zn=Ee[Kt];if(Kt>0){Ee.splice(Math.max(H.integerLen,Kt));for(let Vr=Kt;Vr<Ee.length;Vr++)Ee[Vr]=0}else{ot=Math.max(0,ot),H.integerLen=1,Ee.length=Math.max(1,Kt=Wt+1),Ee[0]=0;for(let Vr=1;Vr<Kt;Vr++)Ee[Vr]=0}if(zn>=5)if(Kt-1<0){for(let Vr=0;Vr>Kt;Vr--)Ee.unshift(0),H.integerLen++;Ee.unshift(1),H.integerLen++}else Ee[Kt-1]++;for(;ot<Math.max(0,Wt);ot++)Ee.push(0);let Pr=0!==Wt;const ri=fe+H.integerLen,Lr=Ee.reduceRight(function(Vr,Ti,qr,mi){return mi[qr]=(Ti+=Vr)<10?Ti:Ti-10,Pr&&(0===mi[qr]&&qr>=ri?mi.pop():Pr=!1),Ti>=10?1:0},0);Lr&&(Ee.unshift(Lr),H.integerLen++)}(ri,Vr,Ti);let qr=ri.digits,mi=ri.integerLen;const Hs=ri.exponent;let Hr=[];for(Pr=qr.every(Js=>!Js);mi<Lr;mi++)qr.unshift(0);for(;mi<0;mi++)qr.unshift(0);mi>0?Hr=qr.splice(mi,qr.length):(Hr=qr,qr=[0]);const dr=[];for(qr.length>=fe.lgSize&&dr.unshift(qr.splice(-fe.lgSize,qr.length).join(""));qr.length>fe.gSize;)dr.unshift(qr.splice(-fe.gSize,qr.length).join(""));qr.length&&dr.unshift(qr.join("")),zn=dr.join(hn(V,Ee)),Hr.length&&(zn+=hn(V,ot)+Hr.join("")),Hs&&(zn+=hn(V,Ze.Exponential)+"+"+Hs)}else zn=hn(V,Ze.Infinity);return zn=H<0&&!Pr?fe.negPre+zn+fe.negSuf:fe.posPre+zn+fe.posSuf,zn}(H,Kt,fe,Ze.CurrencyGroup,Ze.CurrencyDecimal,ot).replace("\xa4",V).replace("\xa4","").trim()}function Oi(H){const fe=parseInt(H);if(isNaN(fe))throw new Error("Invalid integer literal when parsing "+H);return fe}function ps(H,fe){fe=encodeURIComponent(fe);for(const V of H.split(";")){const Ee=V.indexOf("="),[ot,Wt]=-1==Ee?[V,""]:[V.slice(0,Ee),V.slice(Ee+1)];if(ot.trim()===fe)return decodeURIComponent(Wt)}return null}let Wr=(()=>{class H{constructor(V,Ee,ot,Wt){this._iterableDiffers=V,this._keyValueDiffers=Ee,this._ngEl=ot,this._renderer=Wt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(V){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof V?V.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(V){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof V?V.split(/\s+/):V,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const V=this._iterableDiffer.diff(this._rawClass);V&&this._applyIterableChanges(V)}else if(this._keyValueDiffer){const V=this._keyValueDiffer.diff(this._rawClass);V&&this._applyKeyValueChanges(V)}}_applyKeyValueChanges(V){V.forEachAddedItem(Ee=>this._toggleClass(Ee.key,Ee.currentValue)),V.forEachChangedItem(Ee=>this._toggleClass(Ee.key,Ee.currentValue)),V.forEachRemovedItem(Ee=>{Ee.previousValue&&this._toggleClass(Ee.key,!1)})}_applyIterableChanges(V){V.forEachAddedItem(Ee=>{if("string"!=typeof Ee.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(Ee.item)}`);this._toggleClass(Ee.item,!0)}),V.forEachRemovedItem(Ee=>this._toggleClass(Ee.item,!1))}_applyClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(Ee=>this._toggleClass(Ee,!0)):Object.keys(V).forEach(Ee=>this._toggleClass(Ee,!!V[Ee])))}_removeClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(Ee=>this._toggleClass(Ee,!1)):Object.keys(V).forEach(Ee=>this._toggleClass(Ee,!1)))}_toggleClass(V,Ee){(V=V.trim())&&V.split(/\s+/g).forEach(ot=>{Ee?this._renderer.addClass(this._ngEl.nativeElement,ot):this._renderer.removeClass(this._ngEl.nativeElement,ot)})}}return H.\u0275fac=function(V){return new(V||H)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),H})();class ns{constructor(fe,V,Ee,ot){this.$implicit=fe,this.ngForOf=V,this.index=Ee,this.count=ot}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let di=(()=>{class H{constructor(V,Ee,ot){this._viewContainer=V,this._template=Ee,this._differs=ot,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const Ee=this._viewContainer;V.forEachOperation((ot,Wt,Kt)=>{if(null==ot.previousIndex)Ee.createEmbeddedView(this._template,new ns(ot.item,this._ngForOf,-1,-1),null===Kt?void 0:Kt);else if(null==Kt)Ee.remove(null===Wt?void 0:Wt);else if(null!==Wt){const zn=Ee.get(Wt);Ee.move(zn,Kt),Gi(zn,ot)}});for(let ot=0,Wt=Ee.length;ot<Wt;ot++){const zn=Ee.get(ot).context;zn.index=ot,zn.count=Wt,zn.ngForOf=this._ngForOf}V.forEachIdentityChange(ot=>{Gi(Ee.get(ot.currentIndex),ot)})}static ngTemplateContextGuard(V,Ee){return!0}}return H.\u0275fac=function(V){return new(V||H)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),H})();function Gi(H,fe){H.context.$implicit=fe.item}let Ht=(()=>{class H{constructor(V,Ee){this._viewContainer=V,this._context=new ct,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Ee}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Bt("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Bt("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,Ee){return!0}}return H.\u0275fac=function(V){return new(V||H)(g.Y36(g.s_b),g.Y36(g.Rgc))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),H})();class ct{constructor(){this.$implicit=null,this.ngIf=null}}function Bt(H,fe){if(fe&&!fe.createEmbeddedView)throw new Error(`${H} must be a TemplateRef, but received '${(0,g.AaK)(fe)}'.`)}class An{constructor(fe,V){this._viewContainerRef=fe,this._templateRef=V,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(fe){fe&&!this._created?this.create():!fe&&this._created&&this.destroy()}}let _n=(()=>{class H{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(V){this._ngSwitch=V,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(V){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(V)}_matchCase(V){const Ee=V==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||Ee,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),Ee}_updateDefaultCases(V){if(this._defaultViews&&V!==this._defaultUsed){this._defaultUsed=V;for(let Ee=0;Ee<this._defaultViews.length;Ee++)this._defaultViews[Ee].enforceState(V)}}}return H.\u0275fac=function(V){return new(V||H)},H.\u0275dir=g.lG2({type:H,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),H})(),_r=(()=>{class H{constructor(V,Ee,ot){this.ngSwitch=ot,ot._addCase(),this._view=new An(V,Ee)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return H.\u0275fac=function(V){return new(V||H)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(_n,9))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),H})(),Ei=(()=>{class H{constructor(V,Ee,ot){ot._addDefault(new An(V,Ee))}}return H.\u0275fac=function(V){return new(V||H)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(_n,9))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngSwitchDefault",""]]}),H})();function Ii(H,fe){return new g.vHH(2100,"")}class Ts{createSubscription(fe,V){return fe.subscribe({next:V,error:Ee=>{throw Ee}})}dispose(fe){fe.unsubscribe()}onDestroy(fe){fe.unsubscribe()}}class wt{createSubscription(fe,V){return fe.then(V,Ee=>{throw Ee})}dispose(fe){}onDestroy(fe){}}const mt=new wt,Pt=new Ts;let on=(()=>{class H{constructor(V){this._ref=V,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,Ee=>this._updateLatestValue(V,Ee))}_selectStrategy(V){if((0,g.QGY)(V))return mt;if((0,g.F4k)(V))return Pt;throw Ii()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,Ee){V===this._obj&&(this._latestValue=Ee,this._ref.markForCheck())}}return H.\u0275fac=function(V){return new(V||H)(g.Y36(g.sBO,16))},H.\u0275pipe=g.Yjl({name:"async",type:H,pure:!1}),H})();const yi=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Ps=(()=>{class H{constructor(V,Ee){this.locale=V,this.defaultTimezone=Ee}transform(V,Ee="mediumDate",ot,Wt){var Kt;if(null==V||""===V||V!=V)return null;try{return Mn(V,Ee,Wt||this.locale,null!==(Kt=null!=ot?ot:this.defaultTimezone)&&void 0!==Kt?Kt:void 0)}catch(zn){throw Ii()}}}return H.\u0275fac=function(V){return new(V||H)(g.Y36(g.soG,16),g.Y36(yi,24))},H.\u0275pipe=g.Yjl({name:"date",type:H,pure:!0}),H})(),Ns=(()=>{class H{constructor(V,Ee="USD"){this._locale=V,this._defaultCurrencyCode=Ee}transform(V,Ee=this._defaultCurrencyCode,ot="symbol",Wt,Kt){if(!function Ss(H){return!(null==H||""===H||H!=H)}(V))return null;Kt=Kt||this._locale,"boolean"==typeof ot&&(ot=ot?"symbol":"code");let zn=Ee||this._defaultCurrencyCode;"code"!==ot&&(zn="symbol"===ot||"symbol-narrow"===ot?function rt(H,fe,V="en"){const Ee=function Sn(H){return(0,g.cg1)(H)[g.wAp.Currencies]}(V)[H]||gt[H]||[],ot=Ee[1];return"narrow"===fe&&"string"==typeof ot?ot:Ee[0]||H}(zn,"symbol"===ot?"wide":"narrow",Kt):ot);try{return Ki(function cs(H){if("string"==typeof H&&!isNaN(Number(H)-parseFloat(H)))return Number(H);if("number"!=typeof H)throw new Error(`${H} is not a number`);return H}(V),Kt,zn,Ee,Wt)}catch(Pr){throw Ii()}}}return H.\u0275fac=function(V){return new(V||H)(g.Y36(g.soG,16),g.Y36(g.EJc,16))},H.\u0275pipe=g.Yjl({name:"currency",type:H,pure:!0}),H})();let Fs=(()=>{class H{}return H.\u0275fac=function(V){return new(V||H)},H.\u0275mod=g.oAB({type:H}),H.\u0275inj=g.cJS({}),H})();const Ro="browser";function Ci(H){return H===Ro}function is(H){return"server"===H}let Sr=(()=>{class H{}return H.\u0275prov=(0,g.Yz7)({token:H,providedIn:"root",factory:()=>new os((0,g.LFG)(Ce),window)}),H})();class os{constructor(fe,V){this.document=fe,this.window=V,this.offset=()=>[0,0]}setOffset(fe){this.offset=Array.isArray(fe)?()=>fe:fe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(fe){this.supportsScrolling()&&this.window.scrollTo(fe[0],fe[1])}scrollToAnchor(fe){if(!this.supportsScrolling())return;const V=function As(H,fe){const V=H.getElementById(fe)||H.getElementsByName(fe)[0];if(V)return V;if("function"==typeof H.createTreeWalker&&H.body&&(H.body.createShadowRoot||H.body.attachShadow)){const Ee=H.createTreeWalker(H.body,NodeFilter.SHOW_ELEMENT);let ot=Ee.currentNode;for(;ot;){const Wt=ot.shadowRoot;if(Wt){const Kt=Wt.getElementById(fe)||Wt.querySelector(`[name="${fe}"]`);if(Kt)return Kt}ot=Ee.nextNode()}}return null}(this.document,fe);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(fe){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=fe)}}scrollToElement(fe){const V=fe.getBoundingClientRect(),Ee=V.left+this.window.pageXOffset,ot=V.top+this.window.pageYOffset,Wt=this.offset();this.window.scrollTo(Ee-Wt[0],ot-Wt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const fe=ci(this.window.history)||ci(Object.getPrototypeOf(this.window.history));return!(!fe||!fe.writable&&!fe.set)}catch(fe){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(fe){return!1}}}function ci(H){return Object.getOwnPropertyDescriptor(H,"scrollRestoration")}class gi{}},5e3:(Je,Te,b)=>{b.d(Te,{deG:()=>nu,tb:()=>YE,AFp:()=>zE,ip1:()=>WE,CZH:()=>Jy,hGG:()=>rI,z2F:()=>ov,sBO:()=>jw,Sil:()=>bw,_Vd:()=>m_,EJc:()=>vw,SBq:()=>zg,qLn:()=>pu,vpe:()=>Wu,tBr:()=>Ho,XFs:()=>mn,OlP:()=>Mi,zs3:()=>Pl,ZZ4:()=>hv,aQg:()=>fv,soG:()=>tv,YKP:()=>rE,h0i:()=>pp,PXZ:()=>Pw,R0b:()=>eu,FiY:()=>ba,Lbi:()=>qE,g9A:()=>ZE,n_E:()=>y_,Qsj:()=>_b,FYo:()=>Xv,JOm:()=>Dl,q3G:()=>ui,PiD:()=>wa,tp0:()=>ho,Rgc:()=>Yg,dDg:()=>e0,q4F:()=>eE,GfV:()=>Jv,s_b:()=>E_,ifc:()=>Ft,eFA:()=>r0,G48:()=>Vw,Gpc:()=>se,f3M:()=>Er,X6Q:()=>Bw,_c5:()=>nI,VLi:()=>Mw,c2e:()=>QE,zSh:()=>Zp,wAp:()=>Qr,vHH:()=>ut,EiD:()=>il,mCW:()=>zl,qzn:()=>Na,JVY:()=>du,pB0:()=>Ku,eBb:()=>$l,L6k:()=>hc,LAX:()=>fc,cg1:()=>Hg,kL8:()=>h_,yhl:()=>Fa,dqk:()=>Bn,sIi:()=>Dc,CqO:()=>Km,QGY:()=>io,F4k:()=>Tg,RDi:()=>ci,AaK:()=>oe,z3N:()=>Jo,qOj:()=>Hh,TTD:()=>Ss,_Bn:()=>qv,xp6:()=>$o,uIk:()=>dg,Gre:()=>Ey,ekj:()=>th,Suo:()=>IE,Xpm:()=>X,lG2:()=>ae,Yz7:()=>nn,cJS:()=>Ot,oAB:()=>ue,Yjl:()=>_e,Y36:()=>Io,_UZ:()=>Cg,BQk:()=>vs,ynx:()=>np,qZA:()=>Xd,TgZ:()=>tp,EpF:()=>oy,n5z:()=>to,Ikx:()=>Vg,LFG:()=>dn,$8M:()=>gl,$Z:()=>ic,NdJ:()=>Dg,CRH:()=>CE,kcU:()=>Oo,O4$:()=>ls,oxw:()=>ly,ALo:()=>fE,lcZ:()=>pE,xi3:()=>gE,Hsn:()=>Ag,F$t:()=>Ym,Q6J:()=>wg,s9C:()=>ad,DdM:()=>aE,iGM:()=>bE,MAs:()=>qf,CHM:()=>z,oJD:()=>Ai,LSH:()=>Ua,Udp:()=>eh,WFA:()=>rp,d8E:()=>jg,YNc:()=>fg,W1O:()=>AE,_uU:()=>i_,Oqu:()=>Ng,hij:()=>Xh,AsE:()=>cp,Gf:()=>wE});var g=b(7579),S=b(727),U=b(8306),re=b(6451),de=b(3099);function Ie(n){for(let r in n)if(n[r]===Ie)return r;throw Error("Could not find renamed property on target object.")}function Ce(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function oe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(oe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ce(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const te=Ie({__forward_ref__:Ie});function se(n){return n.__forward_ref__=se,n.toString=function(){return oe(this())},n}function ke(n){return qe(n)?n():n}function qe(n){return"function"==typeof n&&n.hasOwnProperty(te)&&n.__forward_ref__===se}class ut extends Error{constructor(r,s){super(function Et(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function et(n){return"string"==typeof n?n:null==n?"":String(n)}function at(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():et(n)}function Be(n,r){const s=r?` in ${r}`:"";throw new ut(-201,`No provider for ${at(n)} found${s}`)}function Ut(n,r){null==n&&function Rt(n,r,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${r} <=Actual]`))}(r,n,null,"!=")}function nn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function hn(n){return xt(n,Sn)||xt(n,ur)}function xt(n,r){return n.hasOwnProperty(r)?n[r]:null}function Fn(n){return n&&(n.hasOwnProperty(Zn)||n.hasOwnProperty(Dr))?n[Zn]:null}const Sn=Ie({\u0275prov:Ie}),Zn=Ie({\u0275inj:Ie}),ur=Ie({ngInjectableDef:Ie}),Dr=Ie({ngInjectorDef:Ie});var mn=(()=>((mn=mn||{})[mn.Default=0]="Default",mn[mn.Host=1]="Host",mn[mn.Self=2]="Self",mn[mn.SkipSelf=4]="SkipSelf",mn[mn.Optional=8]="Optional",mn))();let Tn;function qn(n){const r=Tn;return Tn=n,r}function rt(n,r,s){const l=hn(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&mn.Optional?null:void 0!==r?r:void Be(oe(n),"Injector")}function J(n){return{toString:n}.toString()}var Re=(()=>((Re=Re||{})[Re.OnPush=0]="OnPush",Re[Re.Default=1]="Default",Re))(),Ft=(()=>{return(n=Ft||(Ft={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ft;var n})();const Zt="undefined"!=typeof globalThis&&globalThis,zt="undefined"!=typeof window&&window,Mn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bn=Zt||"undefined"!=typeof global&&global||zt||Mn,tr={},pt=[],dt=Ie({\u0275cmp:Ie}),Ue=Ie({\u0275dir:Ie}),It=Ie({\u0275pipe:Ie}),he=Ie({\u0275mod:Ie}),N=Ie({\u0275fac:Ie}),L=Ie({__NG_ELEMENT_ID__:Ie});let q=0;function X(n){return J(()=>{const s={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Re.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||pt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ft.Emulated,id:"c",styles:n.styles||pt,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,m=n.features,I=n.pipes;return l.id+=q++,l.inputs=$(n.inputs,s),l.outputs=$(n.outputs),m&&m.forEach(R=>R(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(ht):null,l.pipeDefs=I?()=>("function"==typeof I?I():I).map(we):null,l})}function ht(n){return Ve(n)||function Tt(n){return n[Ue]||null}(n)}function we(n){return function un(n){return n[It]||null}(n)}const xe={};function ue(n){return J(()=>{const r={type:n.type,bootstrap:n.bootstrap||pt,declarations:n.declarations||pt,imports:n.imports||pt,exports:n.exports||pt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(xe[n.id]=n.type),r})}function $(n,r){if(null==n)return tr;const s={};for(const l in n)if(n.hasOwnProperty(l)){let h=n[l],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),s[h]=l,r&&(r[h]=m)}return s}const ae=X;function _e(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ve(n){return n[dt]||null}function Dn(n,r){const s=n[he]||null;if(!s&&!0===r)throw new Error(`Type ${oe(n)} does not have '\u0275mod' property.`);return s}function _n(n){return Array.isArray(n)&&"object"==typeof n[1]}function _r(n){return Array.isArray(n)&&!0===n[1]}function Ei(n){return 0!=(8&n.flags)}function ti(n){return 2==(2&n.flags)}function Zr(n){return 1==(1&n.flags)}function Fr(n){return null!==n.template}function Qi(n){return 0!=(512&n[2])}function Xr(n,r){return n.hasOwnProperty(N)?n[N]:null}class Ns{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ss(){return cs}function cs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Fo),mo}function mo(){const n=Ro(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===tr)n.previous=r;else for(let l in r)s[l]=r[l];n.current=null,this.ngOnChanges(r)}}function Fo(n,r,s,l){const h=Ro(n)||function Xs(n,r){return n[Fs]=r}(n,{previous:tr,current:null}),m=h.current||(h.current={}),I=h.previous,R=this.declaredInputs[s],k=I[R];m[R]=new Ns(k&&k.currentValue,r,I===tr),n[l]=r}Ss.ngInherit=!0;const Fs="__ngSimpleChanges__";function Ro(n){return n[Fs]||null}let os;function ci(n){os=n}function As(){return void 0!==os?os:"undefined"!=typeof document?document:void 0}function gi(n){return!!n.listen}const H={createRenderer:(n,r)=>As()};function V(n){for(;Array.isArray(n);)n=n[0];return n}function Wt(n,r){return V(r[n])}function Kt(n,r){return V(r[n.index])}function Pr(n,r){return n.data[r]}function ri(n,r){return n[r]}function Lr(n,r){const s=r[n];return _n(s)?s:s[0]}function Vr(n){return 4==(4&n[2])}function Ti(n){return 128==(128&n[2])}function mi(n,r){return null==r?null:n[r]}function Hs(n){n[18]=0}function Hr(n,r){n[5]+=r;let s=n,l=n[3];for(;null!==l&&(1===r&&1===s[5]||-1===r&&0===s[5]);)l[5]+=r,s=l,l=l[3]}const dr={lFrame:Hn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function To(){return dr.bindingsEnabled}function an(){return dr.lFrame.lView}function G(){return dr.lFrame.tView}function z(n){return dr.lFrame.contextLView=n,n[8]}function Se(){let n=We();for(;null!==n&&64===n.type;)n=n.parent;return n}function We(){return dr.lFrame.currentTNode}function jt(n,r){const s=dr.lFrame;s.currentTNode=n,s.isParent=r}function yn(){return dr.lFrame.isParent}function rr(){dr.lFrame.isParent=!1}function zr(){return dr.isInCheckNoChangesMode}function hi(n){dr.isInCheckNoChangesMode=n}function jr(){const n=dr.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function ne(){return dr.lFrame.bindingIndex++}function E(n){const r=dr.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function le(n,r){const s=dr.lFrame;s.bindingIndex=s.bindingRootIndex=n,Ye(r)}function Ye(n){dr.lFrame.currentDirectiveIndex=n}function nt(n){const r=dr.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function Dt(){return dr.lFrame.currentQueryIndex}function Qt(n){dr.lFrame.currentQueryIndex=n}function cn(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function ir(n,r,s){if(s&mn.SkipSelf){let h=r,m=n;for(;!(h=h.parent,null!==h||s&mn.Host||(h=cn(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;r=h,n=m}const l=dr.lFrame=Jr();return l.currentTNode=r,l.lView=n,!0}function or(n){const r=Jr(),s=n[1];dr.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Jr(){const n=dr.lFrame,r=null===n?null:n.child;return null===r?Hn(n):r}function Hn(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Mr(){const n=dr.lFrame;return dr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Di=Mr;function Bi(){const n=Mr();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function si(){return dr.lFrame.selectedIndex}function gs(n){dr.lFrame.selectedIndex=n}function Si(){const n=dr.lFrame;return Pr(n.tView,n.selectedIndex)}function ls(){dr.lFrame.currentNamespace="svg"}function Oo(){!function xi(){dr.lFrame.currentNamespace=null}()}function us(n,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const m=n.data[s].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:R,ngAfterViewInit:k,ngAfterViewChecked:ee,ngOnDestroy:ye}=m;I&&(n.contentHooks||(n.contentHooks=[])).push(-s,I),R&&((n.contentHooks||(n.contentHooks=[])).push(s,R),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,R)),k&&(n.viewHooks||(n.viewHooks=[])).push(-s,k),ee&&((n.viewHooks||(n.viewHooks=[])).push(s,ee),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,ee)),null!=ye&&(n.destroyHooks||(n.destroyHooks=[])).push(s,ye)}}function Ws(n,r,s){Gn(n,r,3,s)}function Cn(n,r,s,l){(3&n[2])===s&&Gn(n,r,s,l)}function Un(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Gn(n,r,s,l){const m=null!=l?l:-1,I=r.length-1;let R=0;for(let k=void 0!==l?65535&n[18]:0;k<I;k++)if("number"==typeof r[k+1]){if(R=r[k],null!=l&&R>=l)break}else r[k]<0&&(n[18]+=65536),(R<m||-1==m)&&(br(n,s,r,k),n[18]=(4294901760&n[18])+k+2),k++}function br(n,r,s,l){const h=s[l]<0,m=s[l+1],R=n[h?-s[l]:s[l]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{m.call(R)}finally{}}}else try{m.call(R)}finally{}}class Vn{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function Vi(n,r,s){const l=gi(n);let h=0;for(;h<s.length;){const m=s[h];if("number"==typeof m){if(0!==m)break;h++;const I=s[h++],R=s[h++],k=s[h++];l?n.setAttribute(r,R,k,I):r.setAttributeNS(I,R,k)}else{const I=m,R=s[++h];Wo(I)?l&&n.setProperty(r,I,R):l?n.setAttribute(r,I,R):r.setAttribute(I,R),h++}}return h}function Lo(n){return 3===n||4===n||6===n}function Wo(n){return 64===n.charCodeAt(0)}function Ga(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const h=r[l];"number"==typeof h?s=h:0===s||co(n,s,h,null,-1===s||2===s?r[++l]:null)}}return n}function co(n,r,s,l,h){let m=0,I=n.length;if(-1===r)I=-1;else for(;m<n.length;){const R=n[m++];if("number"==typeof R){if(R===r){I=-1;break}if(R>r){I=m-1;break}}}for(;m<n.length;){const R=n[m];if("number"==typeof R)break;if(R===s){if(null===l)return void(null!==h&&(n[m+1]=h));if(l===n[m+1])return void(n[m+2]=h)}m++,null!==l&&m++,null!==h&&m++}-1!==I&&(n.splice(I,0,r),m=I+1),n.splice(m++,0,s),null!==l&&n.splice(m++,0,l),null!==h&&n.splice(m++,0,h)}function zo(n){return-1!==n}function aa(n){return 32767&n}function Or(n,r){let s=function Ji(n){return n>>16}(n),l=r;for(;s>0;)l=l[15],s--;return l}let Zs=!0;function xo(n){const r=Zs;return Zs=n,r}let j=0;function ve(n,r){const s=st(n,r);if(-1!==s)return s;const l=r[1];l.firstCreatePass&&(n.injectorIndex=r.length,Ae(l.data,n),Ae(r,null),Ae(l.blueprint,null));const h=qt(n,r),m=n.injectorIndex;if(zo(h)){const I=aa(h),R=Or(h,r),k=R[1].data;for(let ee=0;ee<8;ee++)r[m+ee]=R[I+ee]|k[I+ee]}return r[m+8]=h,m}function Ae(n,r){n.push(0,0,0,0,0,0,0,0,r)}function st(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function qt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,h=r;for(;null!==h;){const m=h[1],I=m.type;if(l=2===I?m.declTNode:1===I?h[6]:null,null===l)return-1;if(s++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return-1}function Wn(n,r,s){!function Q(n,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(L)&&(l=s[L]),null==l&&(l=s[L]=j++);const h=255&l;r.data[n+(h>>5)]|=1<<h}(n,r,s)}function ar(n,r,s){if(s&mn.Optional)return n;Be(r,"NodeInjector")}function _i(n,r,s,l){if(s&mn.Optional&&void 0===l&&(l=null),0==(s&(mn.Self|mn.Host))){const h=n[9],m=qn(void 0);try{return h?h.get(r,l,s&mn.Optional):rt(r,l,s&mn.Optional)}finally{qn(m)}}return ar(l,r,s)}function vi(n,r,s,l=mn.Default,h){if(null!==n){const m=function ya(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(L)?n[L]:void 0;return"number"==typeof r?r>=0?255&r:ds:r}(s);if("function"==typeof m){if(!ir(r,n,l))return l&mn.Host?ar(h,s,l):_i(r,s,l,h);try{const I=m(l);if(null!=I||l&mn.Optional)return I;Be(s)}finally{Di()}}else if("number"==typeof m){let I=null,R=st(n,r),k=-1,ee=l&mn.Host?r[16][6]:null;for((-1===R||l&mn.SkipSelf)&&(k=-1===R?qt(n,r):r[R+8],-1!==k&&Wa(l,!1)?(I=r[1],R=aa(k),r=Or(k,r)):R=-1);-1!==R;){const ye=r[1];if(_o(m,R,ye.data)){const $e=ms(R,r,s,I,l,ee);if($e!==ni)return $e}k=r[R+8],-1!==k&&Wa(l,r[1].data[R+8]===ee)&&_o(m,R,r)?(I=ye,R=aa(k),r=Or(k,r)):R=-1}}}return _i(r,s,l,h)}const ni={};function ds(){return new Vt(Se(),an())}function ms(n,r,s,l,h,m){const I=r[1],R=I.data[n+8],ye=Uo(R,I,s,null==l?ti(R)&&Zs:l!=I&&0!=(3&R.type),h&mn.Host&&m===R);return null!==ye?Bo(r,I,ye,R):ni}function Uo(n,r,s,l,h){const m=n.providerIndexes,I=r.data,R=1048575&m,k=n.directiveStart,ye=m>>20,_t=h?R+ye:n.directiveEnd;for(let kt=l?R:R+ye;kt<_t;kt++){const pn=I[kt];if(kt<k&&s===pn||kt>=k&&pn.type===s)return kt}if(h){const kt=I[k];if(kt&&Fr(kt)&&kt.type===s)return k}return null}function Bo(n,r,s,l){let h=n[s];const m=r.data;if(function zs(n){return n instanceof Vn}(h)){const I=h;I.resolving&&function He(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ut(-200,`Circular dependency in DI detected for ${n}${s}`)}(at(m[s]));const R=xo(I.canSeeViewProviders);I.resolving=!0;const k=I.injectImpl?qn(I.injectImpl):null;ir(n,l,mn.Default);try{h=n[s]=I.factory(void 0,m,n,l),r.firstCreatePass&&s>=l.directiveStart&&function Gs(n,r,s){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:m}=r.type.prototype;if(l){const I=cs(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,I),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,I)}h&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,h),m&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,m),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,m))}(s,m[s],r)}finally{null!==k&&qn(k),xo(R),I.resolving=!1,Di()}}return h}function _o(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Wa(n,r){return!(n&mn.Self||n&mn.Host&&r)}class Vt{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return vi(this._tNode,this._lView,r,l,s)}}function to(n){return J(()=>{const r=n.prototype.constructor,s=r[N]||Ls(r),l=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==l;){const m=h[N]||Ls(h);if(m&&m!==s)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Ls(n){return qe(n)?()=>{const r=Ls(ke(n));return r&&r()}:Xr(n)}function gl(n){return function Yr(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const l=s.length;let h=0;for(;h<l;){const m=s[h];if(Lo(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<l&&"string"==typeof s[h];)h++;else{if(m===r)return s[h+1];h+=2}}}return null}(Se(),n)}const So="__parameters__";function Ka(n,r,s){return J(()=>{const l=function ml(n){return function(...s){if(n){const l=n(...s);for(const h in l)this[h]=l[h]}}}(r);function h(...m){if(this instanceof h)return l.apply(this,m),this;const I=new h(...m);return R.annotation=I,R;function R(k,ee,ye){const $e=k.hasOwnProperty(So)?k[So]:Object.defineProperty(k,So,{value:[]})[So];for(;$e.length<=ye;)$e.push(null);return($e[ye]=$e[ye]||[]).push(I),k}}return s&&(h.prototype=Object.create(s.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Mi{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=nn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nu=new Mi("AnalyzeForEntryComponents");function yo(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?(r===n&&(r=n.slice(0,s)),yo(l,r)):r!==n&&r.push(l)}return r}function Ms(n,r){n.forEach(s=>Array.isArray(s)?Ms(s,r):r(s))}function es(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ko(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Zo(n,r){const s=[];for(let l=0;l<n;l++)s.push(r);return s}function fs(n,r,s){let l=yl(n,r);return l>=0?n[1|l]=s:(l=~l,function Vo(n,r,s,l){let h=n.length;if(h==r)n.push(s,l);else if(1===h)n.push(l,n[0]),n[0]=s;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=s,n[r+1]=l}}(n,l,r,s)),l}function qo(n,r){const s=yl(n,r);if(s>=0)return n[1|s]}function yl(n,r){return function Ma(n,r,s){let l=0,h=n.length>>s;for(;h!==l;){const m=l+(h-l>>1),I=n[m<<s];if(r===I)return m<<s;I>r?h=m:l=m+1}return~(h<<s)}(n,r,1)}const Ya={},Oa="__NG_DI_FLAG__",Qa="ngTempTokenPath",jl=/\n/gm,Z="__source",me=Ie({provide:String,useValue:Ie});let je;function Ct(n){const r=je;return je=n,r}function $t(n,r=mn.Default){if(void 0===je)throw new ut(203,"");return null===je?rt(n,void 0,r):je.get(n,r&mn.Optional?null:void 0,r)}function dn(n,r=mn.Default){return(function De(){return Tn}()||$t)(ke(n),r)}const Er=dn;function pr(n){const r=[];for(let s=0;s<n.length;s++){const l=ke(n[s]);if(Array.isArray(l)){if(0===l.length)throw new ut(900,"");let h,m=mn.Default;for(let I=0;I<l.length;I++){const R=l[I],k=$r(R);"number"==typeof k?-1===k?h=R.token:m|=k:h=R}r.push(dn(h,m))}else r.push(dn(l))}return r}function ei(n,r){return n[Oa]=r,n.prototype[Oa]=r,n}function $r(n){return n[Oa]}const Ho=ei(Ka("Inject",n=>({token:n})),-1),ba=ei(Ka("Optional"),8),wa=ei(Ka("Self"),2),ho=ei(Ka("SkipSelf"),4);let nl,Hl;function da(n){var r;return(null===(r=function xa(){if(void 0===nl&&(nl=null,Bn.trustedTypes))try{nl=Bn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return nl}())||void 0===r?void 0:r.createHTML(n))||n}function zu(n){var r;return(null===(r=function ha(){if(void 0===Hl&&(Hl=null,Bn.trustedTypes))try{Hl=Bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Hl}())||void 0===r?void 0:r.createHTML(n))||n}class Ca{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ka extends Ca{getTypeName(){return"HTML"}}class ko extends Ca{getTypeName(){return"Style"}}class cu extends Ca{getTypeName(){return"Script"}}class uu extends Ca{getTypeName(){return"URL"}}class Rc extends Ca{getTypeName(){return"ResourceURL"}}function Jo(n){return n instanceof Ca?n.changingThisBreaksApplicationSecurity:n}function Na(n,r){const s=Fa(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function Fa(n){return n instanceof Ca&&n.getTypeName()||null}function du(n){return new ka(n)}function hc(n){return new ko(n)}function $l(n){return new cu(n)}function fc(n){return new uu(n)}function Ku(n){return new Rc(n)}class wl{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(da(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class yd{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const l=this.inertDocument.createElement("body");s.appendChild(l)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=da(r),s;const l=this.inertDocument.createElement("body");return l.innerHTML=da(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(r){const s=r.attributes;for(let h=s.length-1;0<h;h--){const I=s.item(h).name;("xmlns:ns1"===I||0===I.indexOf("ns1:"))&&r.removeAttribute(I)}let l=r.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const pc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function zl(n){return(n=String(n)).match(pc)||n.match(Wl)?n:"unsafe:"+n}function ea(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function A(...n){const r={};for(const s of n)for(const l in s)s.hasOwnProperty(l)&&(r[l]=!0);return r}const _=ea("area,br,col,hr,img,wbr"),y=ea("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),M=ea("rp,rt"),bn=A(_,A(y,ea("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),A(M,ea("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),A(M,y)),Xn=ea("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yr=ea("srcset"),Os=A(Xn,yr,ea("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ea("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),La=ea("script,style,template");class rl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,l=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?l=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,l&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let h=this.checkClobberedElement(s,s.nextSibling);if(h){s=h;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!bn.hasOwnProperty(s))return this.sanitizedSomething=!0,!La.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const l=r.attributes;for(let h=0;h<l.length;h++){const m=l.item(h),I=m.name,R=I.toLowerCase();if(!Os.hasOwnProperty(R)){this.sanitizedSomething=!0;continue}let k=m.value;Xn[R]&&(k=zl(k)),yr[R]&&(n=k,k=(n=String(n)).split(",").map(r=>zl(r.trim())).join(", ")),this.buf.push(" ",I,'="',Ao(k),'"')}var n;return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();bn.hasOwnProperty(s)&&!_.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Ao(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const ta=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mc=/([^\#-~ |!])/g;function Ao(n){return n.replace(/&/g,"&amp;").replace(ta,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Mc,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Kl;function il(n,r){let s=null;try{Kl=Kl||function hu(n){const r=new yd(n);return function oh(){try{return!!(new window.DOMParser).parseFromString(da(""),"text/html")}catch(n){return!1}}()?new wl(r):r}(n);let l=r?String(r):"";s=Kl.getInertBodyElement(l);let h=5,m=l;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,l=m,m=s.innerHTML,s=Kl.getInertBodyElement(l)}while(l!==m);return da((new rl).sanitizeChildren(Zl(s)||s))}finally{if(s){const l=Zl(s)||s;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Zl(n){return"content"in n&&function vd(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ui=(()=>((ui=ui||{})[ui.NONE=0]="NONE",ui[ui.HTML=1]="HTML",ui[ui.STYLE=2]="STYLE",ui[ui.SCRIPT=3]="SCRIPT",ui[ui.URL=4]="URL",ui[ui.RESOURCE_URL=5]="RESOURCE_URL",ui))();function Ai(n){const r=ql();return r?zu(r.sanitize(ui.HTML,n)||""):Na(n,"HTML")?zu(Jo(n)):il(As(),et(n))}function Ua(n){const r=ql();return r?r.sanitize(ui.URL,n)||"":Na(n,"URL")?Jo(n):zl(et(n))}function ql(){const n=an();return n&&n[12]}const af="__ngContext__";function Eo(n,r){n[af]=r}function mc(n){const r=function ol(n){return n[af]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Pc(n){return n.ngOriginalError}function Vs(n,...r){n.error(...r)}class pu{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),l=function lh(n){return n&&n.ngErrorLogger||Vs}(r);l(this._console,"ERROR",r),s&&l(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Pc(r);for(;s&&Pc(s);)s=Pc(s);return s||null}}const Sd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bn))();function Da(n){return n instanceof Function?n():n}var Dl=(()=>((Dl=Dl||{})[Dl.Important=1]="Important",Dl[Dl.DashCase=2]="DashCase",Dl))();function Sl(n,r){return undefined(n,r)}function Qu(n){const r=n[3];return _r(r)?r[3]:r}function Lc(n){return Ha(n[13])}function yu(n){return Ha(n[4])}function Ha(n){for(;null!==n&&!_r(n);)n=n[4];return n}function Al(n,r,s,l,h){if(null!=l){let m,I=!1;_r(l)?m=l:_n(l)&&(I=!0,l=l[0]);const R=V(l);0===n&&null!==s?null==h?mh(r,s,R):_c(r,s,R,h||null,!0):1===n&&null!==s?_c(r,s,R,h||null,!0):2===n?function Ec(n,r,s){const l=ro(n,r);l&&function _h(n,r,s,l){gi(n)?n.removeChild(r,s,l):r.removeChild(s)}(n,l,r,s)}(r,R,I):3===n&&r.destroyNode(R),null!=m&&function Dp(n,r,s,l,h){const m=s[7];m!==V(s)&&Al(r,n,l,m,h);for(let R=10;R<s.length;R++){const k=s[R];Bc(k[1],k,n,r,l,m)}}(r,n,m,s,h)}}function Ad(n,r,s){if(gi(n))return n.createElement(r,s);{const l=null!==s?function Sr(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===l?n.createElement(r):n.createElementNS(l,r)}}function mf(n,r){const s=n[9],l=s.indexOf(r),h=r[3];1024&r[2]&&(r[2]&=-1025,Hr(h,-1)),s.splice(l,1)}function fh(n,r){if(n.length<=10)return;const s=10+r,l=n[s];if(l){const h=l[17];null!==h&&h!==n&&mf(h,l),r>0&&(n[s-1][4]=l[4]);const m=Ko(n,10+r);!function vp(n,r){Bc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(l[1],l);const I=m[19];null!==I&&I.detachView(m[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function _f(n,r){if(!(256&r[2])){const s=r[11];gi(s)&&s.destroyNode&&Bc(n,r,s,3,null,null),function gf(n){let r=n[13];if(!r)return ph(n[1],n);for(;r;){let s=null;if(_n(r))s=r[13];else{const l=r[10];l&&(s=l)}if(!s){for(;r&&!r[4]&&r!==n;)_n(r)&&ph(r[1],r),r=r[3];null===r&&(r=n),_n(r)&&ph(r[1],r),s=r&&r[4]}r=s}}(r)}}function ph(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Tp(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const h=r[s[l]];if(!(h instanceof Vn)){const m=s[l+1];if(Array.isArray(m))for(let I=0;I<m.length;I+=2){const R=h[m[I]],k=m[I+1];try{k.call(R)}finally{}}else try{m.call(h)}finally{}}}}(n,r),function Cp(n,r){const s=n.cleanup,l=r[7];let h=-1;if(null!==s)for(let m=0;m<s.length-1;m+=2)if("string"==typeof s[m]){const I=s[m+1],R="function"==typeof I?I(r):V(r[I]),k=l[h=s[m+2]],ee=s[m+3];"boolean"==typeof ee?R.removeEventListener(s[m],k,ee):ee>=0?l[h=ee]():l[h=-ee].unsubscribe(),m+=2}else{const I=l[h=s[m+1]];s[m].call(I)}if(null!==l){for(let m=h+1;m<l.length;m++)l[m]();r[7]=null}}(n,r),1===r[1].type&&gi(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&_r(r[3])){s!==r[3]&&mf(s,r);const l=r[19];null!==l&&l.detachView(n)}}}function gh(n,r,s){return function yf(n,r,s){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return s[0];if(2&l.flags){const h=n.data[l.directiveStart].encapsulation;if(h===Ft.None||h===Ft.Emulated)return null}return Kt(l,s)}(n,r.parent,s)}function _c(n,r,s,l,h){gi(n)?n.insertBefore(r,s,l,h):r.insertBefore(s,l,h)}function mh(n,r,s){gi(n)?n.appendChild(r,s):r.appendChild(s)}function vf(n,r,s,l,h){null!==l?_c(n,r,s,l,h):mh(n,r,s)}function ro(n,r){return gi(n)?n.parentNode(r):r.parentNode}function Rd(n,r,s){return Yl(n,r,s)}let Yl=function ga(n,r,s){return 40&n.type?Kt(n,s):null};function Ju(n,r,s,l){const h=gh(n,l,r),m=r[11],R=Rd(l.parent||r[6],l,r);if(null!=h)if(Array.isArray(s))for(let k=0;k<s.length;k++)vf(m,h,s[k],R,!1);else vf(m,h,s,R,!1)}function yc(n,r){if(null!==r){const s=r.type;if(3&s)return Kt(r,n);if(4&s)return Ql(-1,n[r.index]);if(8&s){const l=r.child;if(null!==l)return yc(n,l);{const h=n[r.index];return _r(h)?Ql(-1,h):V(h)}}if(32&s)return Sl(r,n)()||V(n[r.index]);{const l=vc(n,r);return null!==l?Array.isArray(l)?l[0]:yc(Qu(n[16]),l):yc(n,r.next)}}return null}function vc(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Ql(n,r){const s=10+n+1;if(s<r.length){const l=r[s],h=l[1].firstChild;if(null!==h)return yc(l,h)}return r[7]}function Uc(n,r,s,l,h,m,I){for(;null!=s;){const R=l[s.index],k=s.type;if(I&&0===r&&(R&&Eo(V(R),l),s.flags|=4),64!=(64&s.flags))if(8&k)Uc(n,r,s.child,l,h,m,!1),Al(r,n,h,R,m);else if(32&k){const ee=Sl(s,l);let ye;for(;ye=ee();)Al(r,n,h,ye,m);Al(r,n,h,R,m)}else 16&k?Md(n,r,l,s,h,m):Al(r,n,h,R,m);s=I?s.projectionNext:s.next}}function Bc(n,r,s,l,h,m){Uc(s,l,n.firstChild,r,h,m,!1)}function Md(n,r,s,l,h,m){const I=s[16],k=I[6].projection[l.projection];if(Array.isArray(k))for(let ee=0;ee<k.length;ee++)Al(r,n,h,k[ee],m);else Uc(n,r,k,I[3],h,m,!0)}function Ef(n,r,s){gi(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Od(n,r,s){gi(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function wh(n,r,s){let l=n.length;for(;;){const h=n.indexOf(r,s);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const m=r.length;if(h+m===l||n.charCodeAt(h+m)<=32)return h}s=h+1}}const Eu="ng-template";function Vc(n,r,s){let l=0;for(;l<n.length;){let h=n[l++];if(s&&"class"===h){if(h=n[l],-1!==wh(h.toLowerCase(),r,0))return!0}else if(1===h){for(;l<n.length&&"string"==typeof(h=n[l++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function bf(n){return 4===n.type&&n.value!==Eu}function wf(n,r,s){return r===(4!==n.type||s?n.value:Eu)}function Sp(n,r,s){let l=4;const h=n.attrs||[],m=function bc(n){for(let r=0;r<n.length;r++)if(Lo(n[r]))return r;return n.length}(h);let I=!1;for(let R=0;R<r.length;R++){const k=r[R];if("number"!=typeof k){if(!I)if(4&l){if(l=2|1&l,""!==k&&!wf(n,k,s)||""===k&&1===r.length){if(Rl(l))return!1;I=!0}}else{const ee=8&l?k:r[++R];if(8&l&&null!==n.attrs){if(!Vc(n.attrs,ee,s)){if(Rl(l))return!1;I=!0}continue}const $e=Jg(8&l?"class":k,h,bf(n),s);if(-1===$e){if(Rl(l))return!1;I=!0;continue}if(""!==ee){let _t;_t=$e>m?"":h[$e+1].toLowerCase();const kt=8&l?_t:null;if(kt&&-1!==wh(kt,ee,0)||2&l&&ee!==_t){if(Rl(l))return!1;I=!0}}}}else{if(!I&&!Rl(l)&&!Rl(k))return!1;if(I&&Rl(k))continue;I=!1,l=k|1&l}}return Rl(l)||I}function Rl(n){return 0==(1&n)}function Jg(n,r,s,l){if(null===r)return-1;let h=0;if(l||!s){let m=!1;for(;h<r.length;){const I=r[h];if(I===n)return h;if(3===I||6===I)m=!0;else{if(1===I||2===I){let R=r[++h];for(;"string"==typeof R;)R=r[++h];continue}if(4===I)break;if(0===I){h+=4;continue}}h+=m?1:2}return-1}return function Ch(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,n)}function bu(n,r,s=!1){for(let l=0;l<r.length;l++)if(Sp(n,r[l],s))return!0;return!1}function Ap(n,r){e:for(let s=0;s<r.length;s++){const l=r[s];if(n.length===l.length){for(let h=0;h<n.length;h++)if(n[h]!==l[h])continue e;return!0}}return!1}function Th(n,r){return n?":not("+r.trim()+")":r}function Rp(n){let r=n[0],s=1,l=2,h="",m=!1;for(;s<n.length;){let I=n[s];if("string"==typeof I)if(2&l){const R=n[++s];h+="["+I+(R.length>0?'="'+R+'"':"")+"]"}else 8&l?h+="."+I:4&l&&(h+=" "+I);else""!==h&&!Rl(I)&&(r+=Th(m,h),h=""),l=I,m=m||!Rl(l);s++}return""!==h&&(r+=Th(m,h)),r}const Cr={};function $o(n){wc(G(),an(),si()+n,zr())}function wc(n,r,s,l){if(!l)if(3==(3&r[2])){const m=n.preOrderCheckHooks;null!==m&&Ws(r,m,s)}else{const m=n.preOrderHooks;null!==m&&Cn(r,m,0,s)}gs(s)}function Hc(n,r){return n<<17|r<<2}function ll(n){return n>>17&32767}function Ah(n){return 2|n}function Ol(n){return(131068&n)>>2}function $c(n,r){return-131069&n|r<<2}function Ic(n){return 1|n}function xh(n,r){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const h=s[l],m=s[l+1];if(-1!==m){const I=n.data[m];Qt(h),I.contentQueries(2,r[m],m)}}}function Xl(n,r,s,l,h,m,I,R,k,ee){const ye=r.blueprint.slice();return ye[0]=h,ye[2]=140|l,Hs(ye),ye[3]=ye[15]=n,ye[8]=s,ye[10]=I||n&&n[10],ye[11]=R||n&&n[11],ye[12]=k||n&&n[12]||null,ye[9]=ee||n&&n[9]||null,ye[6]=m,ye[16]=2==r.type?n[16]:ye,ye}function Jl(n,r,s,l,h){let m=n.data[r];if(null===m)m=function nd(n,r,s,l,h){const m=We(),I=yn(),k=n.data[r]=function Ui(n,r,s,l,h,m){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?m:m&&m.parent,s,r,l,h);return null===n.firstChild&&(n.firstChild=k),null!==m&&(I?null==m.child&&null!==k.parent&&(m.child=k):null===m.next&&(m.next=k)),k}(n,r,s,l,h),function C(){return dr.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=s,m.value=l,m.attrs=h;const I=function bt(){const n=dr.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();m.injectorIndex=null===I?-1:I.injectorIndex}return jt(m,!0),m}function d(n,r,s,l){if(0===s)return-1;const h=r.length;for(let m=0;m<s;m++)r.push(l),n.blueprint.push(l),n.data.push(null);return h}function a(n,r,s){or(r);try{const l=n.viewQuery;null!==l&&Vh(1,l,s);const h=n.template;null!==h&&w(n,r,h,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&xh(n,r),n.staticViewQueries&&Vh(2,n.viewQuery,s);const m=n.components;null!==m&&function Ld(n,r){for(let s=0;s<r.length;s++)k_(n,r[s])}(r,m)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[2]&=-5,Bi()}}function c(n,r,s,l){const h=r[2];if(256==(256&h))return;or(r);const m=zr();try{Hs(r),function Li(n){return dr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&w(n,r,s,2,l);const I=3==(3&h);if(!m)if(I){const ee=n.preOrderCheckHooks;null!==ee&&Ws(r,ee,null)}else{const ee=n.preOrderHooks;null!==ee&&Cn(r,ee,0,null),Un(r,0)}if(function x_(n){for(let r=Lc(n);null!==r;r=yu(r)){if(!r[2])continue;const s=r[9];for(let l=0;l<s.length;l++){const h=s[l],m=h[3];0==(1024&h[2])&&Hr(m,1),h[2]|=1024}}}(r),function O_(n){for(let r=Lc(n);null!==r;r=yu(r))for(let s=10;s<r.length;s++){const l=r[s],h=l[1];Ti(l)&&c(h,l,h.template,l[8])}}(r),null!==n.contentQueries&&xh(n,r),!m)if(I){const ee=n.contentCheckHooks;null!==ee&&Ws(r,ee)}else{const ee=n.contentHooks;null!==ee&&Cn(r,ee,1),Un(r,1)}!function Lp(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const h=s[l];if(h<0)gs(~h);else{const m=h,I=s[++l],R=s[++l];le(I,m),R(2,r[m])}}}finally{gs(-1)}}(n,r);const R=n.components;null!==R&&function Ph(n,r){for(let s=0;s<r.length;s++)P_(n,r[s])}(r,R);const k=n.viewQuery;if(null!==k&&Vh(2,k,l),!m)if(I){const ee=n.viewCheckHooks;null!==ee&&Ws(r,ee)}else{const ee=n.viewHooks;null!==ee&&Cn(r,ee,2),Un(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),m||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,Hr(r[3],-1))}finally{Bi()}}function p(n,r,s,l){const h=r[10],m=!zr(),I=Vr(r);try{m&&!I&&h.begin&&h.begin(),I&&a(n,r,l),c(n,r,s,l)}finally{m&&!I&&h.end&&h.end()}}function w(n,r,s,l,h){const m=si(),I=2&l;try{gs(-1),I&&r.length>20&&wc(n,r,20,zr()),s(l,h)}finally{gs(m)}}function P(n,r,s){if(Ei(r)){const h=r.directiveEnd;for(let m=r.directiveStart;m<h;m++){const I=n.data[m];I.contentQueries&&I.contentQueries(1,s[m],m)}}}function K(n,r,s){!To()||(function Hp(n,r,s,l){const h=s.directiveStart,m=s.directiveEnd;n.firstCreatePass||ve(s,r),Eo(l,r);const I=s.initialInputs;for(let R=h;R<m;R++){const k=n.data[R],ee=Fr(k);ee&&R_(r,s,k);const ye=Bo(r,n,R,s);Eo(ye,r),null!==I&&Fh(0,R-h,ye,k,0,I),ee&&(Lr(s.index,r)[8]=ye)}}(n,r,s,Kt(s,r)),128==(128&s.flags)&&function rm(n,r,s){const l=s.directiveStart,h=s.directiveEnd,I=s.index,R=function Oe(){return dr.lFrame.currentDirectiveIndex}();try{gs(I);for(let k=l;k<h;k++){const ee=n.data[k],ye=r[k];Ye(k),(null!==ee.hostBindings||0!==ee.hostVars||null!==ee.hostAttrs)&&im(ee,ye)}}finally{gs(-1),Ye(R)}}(n,r,s))}function pe(n,r,s=Kt){const l=r.localNames;if(null!==l){let h=r.index+1;for(let m=0;m<l.length;m+=2){const I=l[m+1],R=-1===I?s(r,n):n[I];n[h++]=R}}}function Le(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=tt(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function tt(n,r,s,l,h,m,I,R,k,ee){const ye=20+l,$e=ye+h,_t=function en(n,r){const s=[];for(let l=0;l<r;l++)s.push(l<n?null:Cr);return s}(ye,$e),kt="function"==typeof ee?ee():ee;return _t[1]={type:n,blueprint:_t,template:s,queries:null,viewQuery:R,declTNode:r,data:_t.slice().fill(null,ye),bindingStartIndex:ye,expandoStartIndex:$e,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:k,consts:kt,incompleteFirstPass:!1}}function Tr(n,r,s,l){const h=zp(r);null===s?h.push(l):(h.push(s),n.firstCreatePass&&um(n).push(l,h.length-1))}function po(n,r,s){for(let l in n)if(n.hasOwnProperty(l)){const h=n[l];(s=null===s?{}:s).hasOwnProperty(l)?s[l].push(r,h):s[l]=[r,h]}return s}function go(n,r,s,l,h,m,I,R){const k=Kt(r,s);let ye,ee=r.inputs;!R&&null!=ee&&(ye=ee[l])?(xf(n,s,ye,l,h),ti(r)&&function Up(n,r){const s=Lr(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(l=function ec(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),h=null!=I?I(h,r.value||"",l):h,gi(m)?m.setProperty(k,l,h):Wo(l)||(k.setProperty?k.setProperty(l,h):k[l]=h))}function Ud(n,r,s,l){let h=!1;if(To()){const m=function sm(n,r,s){const l=n.directiveRegistry;let h=null;if(l)for(let m=0;m<l.length;m++){const I=l[m];bu(s,I.selectors,!1)&&(h||(h=[]),Wn(ve(s,r),n,I.type),Fr(I)?(Nh(n,s),h.unshift(I)):h.push(I))}return h}(n,r,s),I=null===l?null:{"":-1};if(null!==m){h=!0,om(s,n.data.length,m.length);for(let ye=0;ye<m.length;ye++){const $e=m[ye];$e.providersResolver&&$e.providersResolver($e)}let R=!1,k=!1,ee=d(n,r,m.length,null);for(let ye=0;ye<m.length;ye++){const $e=m[ye];s.mergedAttrs=Ga(s.mergedAttrs,$e.hostAttrs),ra(n,s,r,ee,$e),A_(ee,$e,I),null!==$e.contentQueries&&(s.flags|=8),(null!==$e.hostBindings||null!==$e.hostAttrs||0!==$e.hostVars)&&(s.flags|=128);const _t=$e.type.prototype;!R&&(_t.ngOnChanges||_t.ngOnInit||_t.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),R=!0),!k&&(_t.ngOnChanges||_t.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),k=!0),ee++}!function ul(n,r){const l=r.directiveEnd,h=n.data,m=r.attrs,I=[];let R=null,k=null;for(let ee=r.directiveStart;ee<l;ee++){const ye=h[ee],$e=ye.inputs,_t=null===m||bf(r)?null:Gp($e,m);I.push(_t),R=po($e,ee,R),k=po(ye.outputs,ee,k)}null!==R&&(R.hasOwnProperty("class")&&(r.flags|=16),R.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=I,r.inputs=R,r.outputs=k}(n,s)}I&&function $p(n,r,s){if(r){const l=n.localNames=[];for(let h=0;h<r.length;h+=2){const m=s[r[h+1]];if(null==m)throw new ut(-301,!1);l.push(r[h],m)}}}(s,l,I)}return s.mergedAttrs=Ga(s.mergedAttrs,s.attrs),h}function Mf(n,r,s,l,h,m){const I=m.hostBindings;if(I){let R=n.hostBindingOpCodes;null===R&&(R=n.hostBindingOpCodes=[]);const k=~r.index;(function jp(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(R)!=k&&R.push(k),R.push(l,h,I)}}function im(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Nh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function A_(n,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=n;Fr(r)&&(s[""]=n)}}function om(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function ra(n,r,s,l,h){n.data[l]=h;const m=h.factory||(h.factory=Xr(h.type)),I=new Vn(m,Fr(h),null);n.blueprint[l]=I,s[l]=I,Mf(n,r,0,l,d(n,s,h.hostVars,Cr),h)}function R_(n,r,s){const l=Kt(r,n),h=Le(s),m=n[10],I=Ru(n,Xl(n,h,null,s.onPush?64:16,l,r,m,m.createRenderer(l,s),null,null));n[r.index]=I}function tc(n,r,s,l,h,m){const I=Kt(n,r);!function Bd(n,r,s,l,h,m,I){if(null==m)gi(n)?n.removeAttribute(r,h,s):r.removeAttribute(h);else{const R=null==I?et(m):I(m,l||"",h);gi(n)?n.setAttribute(r,h,R,s):s?r.setAttributeNS(s,h,R):r.setAttribute(h,R)}}(r[11],I,m,n.value,s,l,h)}function Fh(n,r,s,l,h,m){const I=m[r];if(null!==I){const R=l.setInput;for(let k=0;k<I.length;){const ee=I[k++],ye=I[k++],$e=I[k++];null!==R?l.setInput(s,$e,ee,ye):s[ye]=$e}}}function Gp(n,r){let s=null,l=0;for(;l<r.length;){const h=r[l];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===s&&(s=[]),s.push(h,n[h],r[l+1])),l+=2}else l+=2;else l+=4}return s}function am(n,r,s,l){return new Array(n,!0,!1,r,null,0,l,s,null,null)}function P_(n,r){const s=Lr(r,n);if(Ti(s)){const l=s[1];80&s[2]?c(l,s,l.template,s[8]):s[5]>0&&Lh(s)}}function Lh(n){for(let l=Lc(n);null!==l;l=yu(l))for(let h=10;h<l.length;h++){const m=l[h];if(1024&m[2]){const I=m[1];c(I,m,I.template,m[8])}else m[5]>0&&Lh(m)}const s=n[1].components;if(null!==s)for(let l=0;l<s.length;l++){const h=Lr(s[l],n);Ti(h)&&h[5]>0&&Lh(h)}}function k_(n,r){const s=Lr(r,n),l=s[1];(function N_(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(l,s),a(l,s,s[8])}function Ru(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Uh(n){for(;n;){n[2]|=64;const r=Qu(n);if(Qi(n)&&!r)return n;n=r}return null}function jd(n,r,s){const l=r[10];l.begin&&l.begin();try{c(n,r,n.template,s)}catch(h){throw dm(r,h),h}finally{l.end&&l.end()}}function Hd(n){!function Bh(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],l=mc(s),h=l[1];p(h,l,h.template,s)}}(n[8])}function Vh(n,r,s){Qt(0),r(n,s)}const qc=(()=>Promise.resolve(null))();function zp(n){return n[7]||(n[7]=[])}function um(n){return n.cleanup||(n.cleanup=[])}function Of(n,r,s){return(null===n||Fr(n))&&(s=function Ee(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(s[r.index])),s[11]}function dm(n,r){const s=n[9],l=s?s.get(pu,null):null;l&&l.handleError(r)}function xf(n,r,s,l,h){for(let m=0;m<s.length;){const I=s[m++],R=s[m++],k=r[I],ee=n.data[I];null!==ee.setInput?ee.setInput(k,h,l,R):k[R]=h}}function Yc(n,r,s){const l=Wt(r,n);!function hh(n,r,s){gi(n)?n.setValue(r,s):r.textContent=s}(n[11],l,s)}function $d(n,r,s){let l=s?n.styles:null,h=s?n.classes:null,m=0;if(null!==r)for(let I=0;I<r.length;I++){const R=r[I];"number"==typeof R?m=R:1==m?h=ce(h,R):2==m&&(l=ce(l,R+": "+r[++I]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=h:n.classesWithoutHost=h}const Mu=new Mi("INJECTOR",-1);class kf{get(r,s=Ya){if(s===Ya){const l=new Error(`NullInjectorError: No provider for ${oe(r)}!`);throw l.name="NullInjectorError",l}return s}}const Zp=new Mi("Set Injector scope."),jh={},hm={};let Nf;function fm(){return void 0===Nf&&(Nf=new kf),Nf}function Ff(n,r=null,s=null,l){const h=pm(n,r,s,l);return h._resolveInjectorDefTypes(),h}function pm(n,r=null,s=null,l){return new qp(n,s,r||fm(),l)}class qp{constructor(r,s,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];s&&Ms(s,R=>this.processProvider(R,r,s)),Ms([r],R=>this.processInjectorType(R,[],m)),this.records.set(Mu,rd(void 0,this));const I=this.records.get(Zp);this.scope=null!=I?I.value:null,this.source=h||("object"==typeof r?null:oe(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=Ya,l=mn.Default){this.assertNotDestroyed();const h=Ct(this),m=qn(void 0);try{if(!(l&mn.SkipSelf)){let R=this.records.get(r);if(void 0===R){const k=function Wd(n){return"function"==typeof n||"object"==typeof n&&n instanceof Mi}(r)&&hn(r);R=k&&this.injectableDefInScope(k)?rd(Yp(r),jh):null,this.records.set(r,R)}if(null!=R)return this.hydrate(r,R)}return(l&mn.Self?fm():this.parent).get(r,s=l&mn.Optional&&s===Ya?null:s)}catch(I){if("NullInjectorError"===I.name){if((I[Qa]=I[Qa]||[]).unshift(oe(r)),h)throw I;return function Cs(n,r,s,l){const h=n[Qa];throw r[Z]&&h.unshift(r[Z]),n.message=function _s(n,r,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=oe(r);if(Array.isArray(r))h=r.map(oe).join(" -> ");else if("object"==typeof r){let m=[];for(let I in r)if(r.hasOwnProperty(I)){let R=r[I];m.push(I+":"+("string"==typeof R?JSON.stringify(R):oe(R)))}h=`{${m.join(", ")}}`}return`${s}${l?"("+l+")":""}[${h}]: ${n.replace(jl,"\n  ")}`}("\n"+n.message,h,s,l),n.ngTokenPath=h,n[Qa]=null,n}(I,r,"R3InjectorError",this.source)}throw I}finally{qn(m),Ct(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((l,h)=>r.push(oe(h))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ut(205,!1)}processInjectorType(r,s,l){if(!(r=ke(r)))return!1;let h=Fn(r);const m=null==h&&r.ngModule||void 0,I=void 0===m?r:m,R=-1!==l.indexOf(I);if(void 0!==m&&(h=Fn(m)),null==h)return!1;if(null!=h.imports&&!R){let ye;l.push(I);try{Ms(h.imports,$e=>{this.processInjectorType($e,s,l)&&(void 0===ye&&(ye=[]),ye.push($e))})}finally{}if(void 0!==ye)for(let $e=0;$e<ye.length;$e++){const{ngModule:_t,providers:kt}=ye[$e];Ms(kt,pn=>this.processProvider(pn,_t,kt||pt))}}this.injectorDefTypes.add(I);const k=Xr(I)||(()=>new I);this.records.set(I,rd(k,jh));const ee=h.providers;if(null!=ee&&!R){const ye=r;Ms(ee,$e=>this.processProvider($e,ye,ee))}return void 0!==m&&void 0!==r.providers}processProvider(r,s,l){let h=nc(r=ke(r))?r:ke(r&&r.provide);const m=function L_(n,r,s){return Uf(n)?rd(void 0,n.useValue):rd(Lf(n),jh)}(r);if(nc(r)||!0!==r.multi)this.records.get(h);else{let I=this.records.get(h);I||(I=rd(void 0,jh,!0),I.factory=()=>pr(I.multi),this.records.set(h,I)),h=r,I.multi.push(r)}this.records.set(h,m)}hydrate(r,s){return s.value===jh&&(s.value=hm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Gd(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ke(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Yp(n){const r=hn(n),s=null!==r?r.factory:Xr(n);if(null!==s)return s;if(n instanceof Mi)throw new ut(204,!1);if(n instanceof Function)return function Qp(n){const r=n.length;if(r>0)throw Zo(r,"?"),new ut(204,!1);const s=function rn(n){const r=n&&(n[Sn]||n[ur]);if(r){const s=function fn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new ut(204,!1)}function Lf(n,r,s){let l;if(nc(n)){const h=ke(n);return Xr(h)||Yp(h)}if(Uf(n))l=()=>ke(n.useValue);else if(function Jp(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...pr(n.deps||[]));else if(function Xp(n){return!(!n||!n.useExisting)}(n))l=()=>dn(ke(n.useExisting));else{const h=ke(n&&(n.useClass||n.provide));if(!function eg(n){return!!n.deps}(n))return Xr(h)||Yp(h);l=()=>new h(...pr(n.deps))}return l}function rd(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Uf(n){return null!==n&&"object"==typeof n&&me in n}function nc(n){return"function"==typeof n}let Pl=(()=>{class n{static create(s,l){var h;if(Array.isArray(s))return Ff({name:""},l,s,"");{const m=null!==(h=s.name)&&void 0!==h?h:"";return Ff({name:m},s.parent,s.providers,m)}}}return n.THROW_IF_NOT_FOUND=Ya,n.NULL=new kf,n.\u0275prov=nn({token:n,providedIn:"any",factory:()=>dn(Mu)}),n.__NG_ELEMENT_ID__=-1,n})();function $_(n,r){us(mc(n)[1],Se())}function Hh(n){let r=function rg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;r;){let h;if(Fr(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ut(903,"");h=r.\u0275dir}if(h){if(s){l.push(h);const I=n;I.inputs=ig(n.inputs),I.declaredInputs=ig(n.declaredInputs),I.outputs=ig(n.outputs);const R=h.hostBindings;R&&og(n,R);const k=h.viewQuery,ee=h.contentQueries;if(k&&sg(n,k),ee&&G_(n,ee),Ce(n.inputs,h.inputs),Ce(n.declaredInputs,h.declaredInputs),Ce(n.outputs,h.outputs),Fr(h)&&h.data.animation){const ye=n.data;ye.animation=(ye.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let I=0;I<m.length;I++){const R=m[I];R&&R.ngInherit&&R(n),R===Hh&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Sm(n){let r=0,s=null;for(let l=n.length-1;l>=0;l--){const h=n[l];h.hostVars=r+=h.hostVars,h.hostAttrs=Ga(h.hostAttrs,s=Ga(s,h.hostAttrs))}}(l)}function ig(n){return n===tr?{}:n===pt?[]:n}function sg(n,r){const s=n.viewQuery;n.viewQuery=s?(l,h)=>{r(l,h),s(l,h)}:r}function G_(n,r){const s=n.contentQueries;n.contentQueries=s?(l,h,m)=>{r(l,h,m),s(l,h,m)}:r}function og(n,r){const s=n.hostBindings;n.hostBindings=s?(l,h)=>{r(l,h),s(l,h)}:r}let zd=null;function Pu(){if(!zd){const n=Bn.Symbol;if(n&&n.iterator)zd=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const l=r[s];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(zd=l)}}}return zd}function Dc(n){return!!ug(n)&&(Array.isArray(n)||!(n instanceof Map)&&Pu()in n)}function ug(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function kl(n,r,s){return n[r]=s}function Go(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function id(n,r,s,l){const h=Go(n,r,s);return Go(n,r+1,l)||h}function dg(n,r,s,l){const h=an();return Go(h,ne(),r)&&(G(),tc(Si(),h,n,r,s,l)),dg}function Zd(n,r,s,l){return Go(n,ne(),s)?r+et(s)+l:Cr}function Nu(n,r,s,l,h,m){const R=id(n,function ii(){return dr.lFrame.bindingIndex}(),s,h);return E(2),R?r+et(s)+l+et(h)+m:Cr}function fg(n,r,s,l,h,m,I,R){const k=an(),ee=G(),ye=n+20,$e=ee.firstCreatePass?function Pm(n,r,s,l,h,m,I,R,k){const ee=r.consts,ye=Jl(r,n,4,I||null,mi(ee,R));Ud(r,s,ye,mi(ee,k)),us(r,ye);const $e=ye.tViews=tt(2,ye,l,h,m,r.directiveRegistry,r.pipeRegistry,null,r.schemas,ee);return null!==r.queries&&(r.queries.template(r,ye),$e.queries=r.queries.embeddedTView(ye)),ye}(ye,ee,k,r,s,l,h,m,I):ee.data[ye];jt($e,!1);const _t=k[11].createComment("");Ju(ee,k,_t,$e),Eo(_t,k),Ru(k,k[ye]=am(_t,k,_t,$e)),Zr($e)&&K(ee,k,$e),null!=I&&pe(k,$e,R)}function qf(n){return ri(function Rr(){return dr.lFrame.contextLView}(),20+n)}function Io(n,r=mn.Default){const s=an();return null===s?dn(n,r):vi(Se(),s,ke(n),r)}function ic(){throw new Error("invalid")}function wg(n,r,s){const l=an();return Go(l,ne(),r)&&go(G(),Si(),l,n,r,l[11],s,!1),wg}function Ig(n,r,s,l,h){const I=h?"class":"style";xf(n,s,r.inputs[I],I,l)}function tp(n,r,s,l){const h=an(),m=G(),I=20+n,R=h[11],k=h[I]=Ad(R,r,function lo(){return dr.lFrame.currentNamespace}()),ee=m.firstCreatePass?function Wm(n,r,s,l,h,m,I){const R=r.consts,ee=Jl(r,n,2,h,mi(R,m));return Ud(r,s,ee,mi(R,I)),null!==ee.attrs&&$d(ee,ee.attrs,!1),null!==ee.mergedAttrs&&$d(ee,ee.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,ee),ee}(I,m,h,0,r,s,l):m.data[I];jt(ee,!0);const ye=ee.mergedAttrs;null!==ye&&Vi(R,k,ye);const $e=ee.classes;null!==$e&&Od(R,k,$e);const _t=ee.styles;return null!==_t&&Ef(R,k,_t),64!=(64&ee.flags)&&Ju(m,h,k,ee),0===function eo(){return dr.lFrame.elementDepthCount}()&&Eo(k,h),function $s(){dr.lFrame.elementDepthCount++}(),Zr(ee)&&(K(m,h,ee),P(m,ee,h)),null!==l&&pe(h,ee),tp}function Xd(){let n=Se();yn()?rr():(n=n.parent,jt(n,!1));const r=n;!function Ar(){dr.lFrame.elementDepthCount--}();const s=G();return s.firstCreatePass&&(us(s,n),Ei(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Xi(n){return 0!=(16&n.flags)}(r)&&Ig(s,r,an(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Sa(n){return 0!=(32&n.flags)}(r)&&Ig(s,r,an(),r.stylesWithoutHost,!1),Xd}function Cg(n,r,s,l){return tp(n,r,s,l),Xd(),Cg}function np(n,r,s){const l=an(),h=G(),m=n+20,I=h.firstCreatePass?function iy(n,r,s,l,h){const m=r.consts,I=mi(m,l),R=Jl(r,n,8,"ng-container",I);return null!==I&&$d(R,I,!0),Ud(r,s,R,mi(m,h)),null!==r.queries&&r.queries.elementStart(r,R),R}(m,h,l,r,s):h.data[m];jt(I,!0);const R=l[m]=l[11].createComment("");return Ju(h,l,R,I),Eo(R,l),Zr(I)&&(K(h,l,I),P(h,I,l)),null!=s&&pe(l,I),np}function vs(){let n=Se();const r=G();return yn()?rr():(n=n.parent,jt(n,!1)),r.firstCreatePass&&(us(r,n),Ei(n)&&r.queries.elementEnd(n)),vs}function oy(){return an()}function io(n){return!!n&&"function"==typeof n.then}function Tg(n){return!!n&&"function"==typeof n.subscribe}const Km=Tg;function Dg(n,r,s,l){const h=an(),m=G(),I=Se();return Zm(m,h,h[11],I,n,r,!!s,l),Dg}function rp(n,r){const s=Se(),l=an(),h=G();return Zm(h,l,Of(nt(h.data),s,l),s,n,r,!1),rp}function Zm(n,r,s,l,h,m,I,R){const k=Zr(l),ye=n.firstCreatePass&&um(n),$e=r[8],_t=zp(r);let kt=!0;if(3&l.type||R){const er=Kt(l,r),wr=R?R(er):er,Rn=_t.length,Gr=R?ji=>R(V(ji[l.index])):l.index;if(gi(s)){let ji=null;if(!R&&k&&(ji=function ay(n,r,s,l){const h=n.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const I=h[m];if(I===s&&h[m+1]===l){const R=r[7],k=h[m+2];return R.length>k?R[k]:null}"string"==typeof I&&(m+=2)}return null}(n,r,h,l.index)),null!==ji)(ji.__ngLastListenerFn__||ji).__ngNextListenerFn__=m,ji.__ngLastListenerFn__=m,kt=!1;else{m=Sg(l,r,$e,m,!1);const ws=s.listen(wr,h,m);_t.push(m,ws),ye&&ye.push(h,Gr,Rn,Rn+1)}}else m=Sg(l,r,$e,m,!0),wr.addEventListener(h,m,I),_t.push(m),ye&&ye.push(h,Gr,Rn,I)}else m=Sg(l,r,$e,m,!1);const pn=l.outputs;let $n;if(kt&&null!==pn&&($n=pn[h])){const er=$n.length;if(er)for(let wr=0;wr<er;wr+=2){const oc=r[$n[wr]][$n[wr+1]].subscribe(m),nf=_t.length;_t.push(m,oc),ye&&ye.push(h,l.index,nf,-(nf+1))}}}function qm(n,r,s,l){try{return!1!==s(l)}catch(h){return dm(n,h),!1}}function Sg(n,r,s,l,h){return function m(I){if(I===Function)return l;const R=2&n.flags?Lr(n.index,r):r;0==(32&r[2])&&Uh(R);let k=qm(r,0,l,I),ee=m.__ngNextListenerFn__;for(;ee;)k=qm(r,0,ee,I)&&k,ee=ee.__ngNextListenerFn__;return h&&!1===k&&(I.preventDefault(),I.returnValue=!1),k}}function ly(n=1){return function qi(n){return(dr.lFrame.contextLView=function as(n,r){for(;n>0;)r=r[15],n--;return r}(n,dr.lFrame.contextLView))[8]}(n)}function cy(n,r){let s=null;const l=function jc(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let h=0;h<r.length;h++){const m=r[h];if("*"!==m){if(null===l?bu(n,m,!0):Ap(l,m))return h}else s=h}return s}function Ym(n){const r=an()[16][6];if(!r.projection){const l=r.projection=Zo(n?n.length:1,null),h=l.slice();let m=r.child;for(;null!==m;){const I=n?cy(m,n):0;null!==I&&(h[I]?h[I].projectionNext=m:l[I]=m,h[I]=m),m=m.next}}}function Ag(n,r=0,s){const l=an(),h=G(),m=Jl(h,20+n,16,null,s||null);null===m.projection&&(m.projection=r),rr(),64!=(64&m.flags)&&function Eh(n,r,s){Md(r[11],0,r,s,gh(n,s,r),Rd(s.parent||r[6],s,r))}(h,l,m)}function ad(n,r,s){return Rg(n,"",r,"",s),ad}function Rg(n,r,s,l,h){const m=an(),I=Zd(m,r,s,l);return I!==Cr&&go(G(),Si(),m,n,I,m[11],h,!1),Rg}function ju(n,r,s,l,h){const m=n[s+1],I=null===r;let R=l?ll(m):Ol(m),k=!1;for(;0!==R&&(!1===k||I);){const ye=n[R+1];sp(n[R],r)&&(k=!0,n[R+1]=l?Ic(ye):Ah(ye)),R=l?ll(ye):Ol(ye)}k&&(n[s+1]=l?Ah(m):Ic(m))}function sp(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&yl(n,r)>=0}const so={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Og(n){return n.substring(so.key,so.keyEnd)}function Jm(n,r){const s=so.textEnd;return s===r?-1:(r=so.keyEnd=function cd(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,so.key=r,s),ld(n,r,s))}function ld(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function eh(n,r,s){return Fl(n,r,s,!1),eh}function th(n,r){return Fl(n,r,null,!0),th}function hl(n,r){for(let s=function fy(n){return function ap(n){so.key=0,so.keyEnd=0,so.value=0,so.valueEnd=0,so.textEnd=n.length}(n),Jm(n,ld(n,0,so.textEnd))}(r);s>=0;s=Jm(r,s))fs(n,Og(r),!0)}function Fl(n,r,s,l){const h=an(),m=G(),I=E(2);m.firstUpdatePass&&t_(m,n,I,l),r!==Cr&&Go(h,I,r)&&r_(m,m.data[si()],h,h[11],n,h[I+1]=function vy(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=oe(Jo(n)))),n}(r,s),l,I)}function nh(n,r){return r>=n.expandoStartIndex}function t_(n,r,s,l){const h=n.data;if(null===h[s+1]){const m=h[si()],I=nh(n,s);Qh(m,l)&&null===r&&!I&&(r=!1),r=function Zh(n,r,s,l){const h=nt(n);let m=l?r.residualClasses:r.residualStyles;if(null===h)0===(l?r.classBindings:r.styleBindings)&&(s=ud(s=n_(null,n,r,s,l),r.attrs,l),m=null);else{const I=r.directiveStylingLast;if(-1===I||n[I]!==h)if(s=n_(h,n,r,s,l),null===m){let k=function my(n,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==Ol(l))return n[ll(l)]}(n,r,l);void 0!==k&&Array.isArray(k)&&(k=n_(null,n,r,k[1],l),k=ud(k,r.attrs,l),function rh(n,r,s,l){n[ll(s?r.classBindings:r.styleBindings)]=l}(n,r,l,k))}else m=function Tv(n,r,s){let l;const h=r.directiveEnd;for(let m=1+r.directiveStylingLast;m<h;m++)l=ud(l,n[m].hostAttrs,s);return ud(l,r.attrs,s)}(n,r,l)}return void 0!==m&&(l?r.residualClasses=m:r.residualStyles=m),s}(h,m,r,l),function ip(n,r,s,l,h,m){let I=m?r.classBindings:r.styleBindings,R=ll(I),k=Ol(I);n[l]=s;let ye,ee=!1;if(Array.isArray(s)){const $e=s;ye=$e[1],(null===ye||yl($e,ye)>0)&&(ee=!0)}else ye=s;if(h)if(0!==k){const _t=ll(n[R+1]);n[l+1]=Hc(_t,R),0!==_t&&(n[_t+1]=$c(n[_t+1],l)),n[R+1]=function Pd(n,r){return 131071&n|r<<17}(n[R+1],l)}else n[l+1]=Hc(R,0),0!==R&&(n[R+1]=$c(n[R+1],l)),R=l;else n[l+1]=Hc(k,0),0===R?R=l:n[k+1]=$c(n[k+1],l),k=l;ee&&(n[l+1]=Ah(n[l+1])),ju(n,ye,l,!0),ju(n,ye,l,!1),function hy(n,r,s,l,h){const m=h?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof r&&yl(m,r)>=0&&(s[l+1]=Ic(s[l+1]))}(r,ye,n,l,m),I=Hc(R,k),m?r.classBindings=I:r.styleBindings=I}(h,m,r,s,I,l)}}function n_(n,r,s,l,h){let m=null;const I=s.directiveEnd;let R=s.directiveStylingLast;for(-1===R?R=s.directiveStart:R++;R<I&&(m=r[R],l=ud(l,m.hostAttrs,h),m!==n);)R++;return null!==n&&(s.directiveStylingLast=R),l}function ud(n,r,s){const l=s?1:2;let h=-1;if(null!==r)for(let m=0;m<r.length;m++){const I=r[m];"number"==typeof I?h=I:h===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),fs(n,I,!!s||r[++m]))}return void 0===n?null:n}function r_(n,r,s,l,h,m,I,R){if(!(3&r.type))return;const k=n.data,ee=k[R+1];lp(function wu(n){return 1==(1&n)}(ee)?Yh(k,r,s,h,Ol(ee),I):void 0)||(lp(m)||function xd(n){return 2==(2&n)}(ee)&&(m=Yh(k,null,s,h,R,I)),function bh(n,r,s,l,h){const m=gi(n);if(r)h?m?n.addClass(s,l):s.classList.add(l):m?n.removeClass(s,l):s.classList.remove(l);else{let I=-1===l.indexOf("-")?void 0:Dl.DashCase;if(null==h)m?n.removeStyle(s,l,I):s.style.removeProperty(l);else{const R="string"==typeof h&&h.endsWith("!important");R&&(h=h.slice(0,-10),I|=Dl.Important),m?n.setStyle(s,l,h,I):s.style.setProperty(l,h,R?"important":"")}}}(l,I,Wt(si(),s),h,m))}function Yh(n,r,s,l,h,m){const I=null===r;let R;for(;h>0;){const k=n[h],ee=Array.isArray(k),ye=ee?k[1]:k,$e=null===ye;let _t=s[h+1];_t===Cr&&(_t=$e?pt:void 0);let kt=$e?qo(_t,l):ye===l?_t:void 0;if(ee&&!lp(kt)&&(kt=qo(k,l)),lp(kt)&&(R=kt,I))return R;const pn=n[h+1];h=I?ll(pn):Ol(pn)}if(null!==r){let k=m?r.residualClasses:r.residualStyles;null!=k&&(R=qo(k,l))}return R}function lp(n){return void 0!==n}function Qh(n,r){return 0!=(n.flags&(r?16:32))}function i_(n,r=""){const s=an(),l=G(),h=n+20,m=l.firstCreatePass?Jl(l,h,1,r,null):l.data[h],I=s[h]=function Xu(n,r){return gi(n)?n.createText(r):n.createTextNode(r)}(s[11],r);Ju(l,s,I,m),jt(m,!1)}function Ng(n){return Xh("",n,""),Ng}function Xh(n,r,s){const l=an(),h=Zd(l,n,r,s);return h!==Cr&&Yc(l,si(),h),Xh}function cp(n,r,s,l,h){const m=an(),I=Nu(m,n,r,s,l,h);return I!==Cr&&Yc(m,si(),I),cp}function Ey(n,r,s){!function fl(n,r,s,l){const h=G(),m=E(2);h.firstUpdatePass&&t_(h,null,m,l);const I=an();if(s!==Cr&&Go(I,m,s)){const R=h.data[si()];if(Qh(R,l)&&!nh(h,m)){let k=l?R.classesWithoutHost:R.stylesWithoutHost;null!==k&&(s=ce(k,s||"")),Ig(h,R,I,s,l)}else!function yy(n,r,s,l,h,m,I,R){h===Cr&&(h=pt);let k=0,ee=0,ye=0<h.length?h[0]:null,$e=0<m.length?m[0]:null;for(;null!==ye||null!==$e;){const _t=k<h.length?h[k+1]:void 0,kt=ee<m.length?m[ee+1]:void 0;let $n,pn=null;ye===$e?(k+=2,ee+=2,_t!==kt&&(pn=$e,$n=kt)):null===$e||null!==ye&&ye<$e?(k+=2,pn=ye):(ee+=2,pn=$e,$n=kt),null!==pn&&r_(n,r,s,l,pn,$n,I,R),ye=k<h.length?h[k]:null,$e=ee<m.length?m[ee]:null}}(h,R,I,I[11],I[m+1],I[m+1]=function _y(n,r,s){if(null==s||""===s)return pt;const l=[],h=Jo(s);if(Array.isArray(h))for(let m=0;m<h.length;m++)n(l,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&n(l,m,h[m]);else"string"==typeof h&&r(l,h);return l}(n,r,s),l,m)}}(fs,hl,Zd(an(),n,r,s),!0)}function Vg(n,r,s){const l=an();return Go(l,ne(),r)&&go(G(),Si(),l,n,r,l[11],s,!0),Vg}function jg(n,r,s){const l=an();if(Go(l,ne(),r)){const m=G(),I=Si();go(m,I,l,n,r,Of(nt(m.data),I,l),s,!0)}return jg}const $u=void 0;var Oy=["en",[["a","p"],["AM","PM"],$u],[["AM","PM"],$u,$u],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$u,"{1} 'at' {0}",$u],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Gu(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let ih={};function Hg(n){const r=function p_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=f_(r);if(s)return s;const l=r.split("-")[0];if(s=f_(l),s)return s;if("en"===l)return Oy;throw new Error(`Missing locale data for the locale "${n}".`)}function h_(n){return Hg(n)[Qr.PluralCase]}function f_(n){return n in ih||(ih[n]=Bn.ng&&Bn.ng.common&&Bn.ng.common.locales&&Bn.ng.common.locales[n]),ih[n]}var Qr=(()=>((Qr=Qr||{})[Qr.LocaleId=0]="LocaleId",Qr[Qr.DayPeriodsFormat=1]="DayPeriodsFormat",Qr[Qr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qr[Qr.DaysFormat=3]="DaysFormat",Qr[Qr.DaysStandalone=4]="DaysStandalone",Qr[Qr.MonthsFormat=5]="MonthsFormat",Qr[Qr.MonthsStandalone=6]="MonthsStandalone",Qr[Qr.Eras=7]="Eras",Qr[Qr.FirstDayOfWeek=8]="FirstDayOfWeek",Qr[Qr.WeekendRange=9]="WeekendRange",Qr[Qr.DateFormat=10]="DateFormat",Qr[Qr.TimeFormat=11]="TimeFormat",Qr[Qr.DateTimeFormat=12]="DateTimeFormat",Qr[Qr.NumberSymbols=13]="NumberSymbols",Qr[Qr.NumberFormats=14]="NumberFormats",Qr[Qr.CurrencyCode=15]="CurrencyCode",Qr[Qr.CurrencySymbol=16]="CurrencySymbol",Qr[Qr.CurrencyName=17]="CurrencyName",Qr[Qr.Currencies=18]="Currencies",Qr[Qr.Directionality=19]="Directionality",Qr[Qr.PluralCase=20]="PluralCase",Qr[Qr.ExtraData=21]="ExtraData",Qr))();const t="en-US";let W=t;function ky(n,r,s,l,h){if(n=ke(n),Array.isArray(n))for(let m=0;m<n.length;m++)ky(n[m],r,s,l,h);else{const m=G(),I=an();let R=nc(n)?n:ke(n.provide),k=Lf(n);const ee=Se(),ye=1048575&ee.providerIndexes,$e=ee.directiveStart,_t=ee.providerIndexes>>20;if(nc(n)||!n.multi){const kt=new Vn(k,h,Io),pn=Fy(R,r,h?ye:ye+_t,$e);-1===pn?(Wn(ve(ee,I),m,R),Ny(m,n,r.length),r.push(R),ee.directiveStart++,ee.directiveEnd++,h&&(ee.providerIndexes+=1048576),s.push(kt),I.push(kt)):(s[pn]=kt,I[pn]=kt)}else{const kt=Fy(R,r,ye+_t,$e),pn=Fy(R,r,ye,ye+_t),$n=kt>=0&&s[kt],er=pn>=0&&s[pn];if(h&&!er||!h&&!$n){Wn(ve(ee,I),m,R);const wr=function db(n,r,s,l,h){const m=new Vn(n,s,Io);return m.multi=[],m.index=r,m.componentProviders=0,Zv(m,h,l&&!s),m}(h?ub:cb,s.length,h,l,k);!h&&er&&(s[pn].providerFactory=wr),Ny(m,n,r.length,0),r.push(R),ee.directiveStart++,ee.directiveEnd++,h&&(ee.providerIndexes+=1048576),s.push(wr),I.push(wr)}else Ny(m,n,kt>-1?kt:pn,Zv(s[h?pn:kt],k,!h&&l));!h&&l&&er&&s[pn].componentProviders++}}}function Ny(n,r,s,l){const h=nc(r),m=function Ou(n){return!!n.useClass}(r);if(h||m){const k=(m?ke(r.useClass):r).prototype.ngOnDestroy;if(k){const ee=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const ye=ee.indexOf(s);-1===ye?ee.push(s,[l,k]):ee[ye+1].push(l,k)}else ee.push(s,k)}}}function Zv(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Fy(n,r,s,l){for(let h=s;h<l;h++)if(r[h]===n)return h;return-1}function cb(n,r,s,l){return Ly(this.multi,[])}function ub(n,r,s,l){const h=this.multi;let m;if(this.providerFactory){const I=this.providerFactory.componentProviders,R=Bo(s,s[1],this.providerFactory.index,l);m=R.slice(0,I),Ly(h,m);for(let k=I;k<R.length;k++)m.push(R[k])}else m=[],Ly(h,m);return m}function Ly(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function qv(n,r=[]){return s=>{s.providersResolver=(l,h)=>function lb(n,r,s){const l=G();if(l.firstCreatePass){const h=Fr(n);ky(s,l.data,l.blueprint,h,!0),ky(r,l.data,l.blueprint,h,!1)}}(l,h?h(n):n,r)}}class Yv{}class pb{resolveComponentFactory(r){throw function fb(n){const r=Error(`No component factory found for ${oe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let m_=(()=>{class n{}return n.NULL=new pb,n})();function gb(){return fp(Se(),an())}function fp(n,r){return new zg(Kt(n,r))}let zg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=gb,n})();function mb(n){return n instanceof zg?n.nativeElement:n}class Xv{}let _b=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function vb(){const n=an(),s=Lr(Se().index,n);return function yb(n){return n[11]}(_n(s)?s:n)}(),n})(),Eb=(()=>{class n{}return n.\u0275prov=nn({token:n,providedIn:"root",factory:()=>null}),n})();class Jv{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const eE=new Jv("13.2.7"),Uy={};function __(n,r,s,l,h=!1){for(;null!==s;){const m=r[s.index];if(null!==m&&l.push(V(m)),_r(m))for(let R=10;R<m.length;R++){const k=m[R],ee=k[1].firstChild;null!==ee&&__(k[1],k,ee,l)}const I=s.type;if(8&I)__(n,r,s.child,l);else if(32&I){const R=Sl(s,r);let k;for(;k=R();)l.push(k)}else if(16&I){const R=vc(r,s);if(Array.isArray(R))l.push(...R);else{const k=Qu(r[16]);__(k[1],k,R,l,!0)}}s=h?s.projectionNext:s.next}return l}class Kg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return __(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(_r(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(fh(r,l),Ko(s,l))}this._attachedToViewContainer=!1}_f(this._lView[1],this._lView)}onDestroy(r){Tr(this._lView[1],this._lView,null,r)}markForCheck(){Uh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){jd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Wp(n,r,s){hi(!0);try{jd(n,r,s)}finally{hi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ut(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bp(n,r){Bc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ut(902,"");this._appRef=r}}class bb extends Kg{constructor(r){super(r),this._view=r}detectChanges(){Hd(this._view)}checkNoChanges(){!function lm(n){hi(!0);try{Hd(n)}finally{hi(!1)}}(this._view)}get context(){return null}}class tE extends m_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Ve(r);return new By(s,this.ngModule)}}function nE(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class By extends Yv{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Dh(n){return n.map(Rp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return nE(this.componentDef.inputs)}get outputs(){return nE(this.componentDef.outputs)}create(r,s,l,h){const m=(h=h||this.ngModule)?function Ib(n,r){return{get:(s,l,h)=>{const m=n.get(s,Uy,h);return m!==Uy||l===Uy?m:r.get(s,l,h)}}}(r,h.injector):r,I=m.get(Xv,H),R=m.get(Eb,null),k=I.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",ye=l?function sr(n,r,s){if(gi(n))return n.selectRootElement(r,s===Ft.ShadowDom);let l="string"==typeof r?n.querySelector(r):r;return l.textContent="",l}(k,l,this.componentDef.encapsulation):Ad(I.createRenderer(null,this.componentDef),ee,function wb(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ee)),$e=this.componentDef.onPush?576:528,_t=function Gf(n,r){return{components:[],scheduler:n||Sd,clean:qc,playerHandler:r||null,flags:0}}(),kt=tt(0,null,null,1,0,null,null,null,null,null),pn=Xl(null,kt,_t,$e,null,null,I,k,R,m);let $n,er;or(pn);try{const wr=function $f(n,r,s,l,h,m){const I=s[1];s[20]=n;const k=Jl(I,20,2,"#host",null),ee=k.mergedAttrs=r.hostAttrs;null!==ee&&($d(k,ee,!0),null!==n&&(Vi(h,n,ee),null!==k.classes&&Od(h,n,k.classes),null!==k.styles&&Ef(h,n,k.styles)));const ye=l.createRenderer(n,r),$e=Xl(s,Le(r),null,r.onPush?64:16,s[20],k,l,ye,m||null,null);return I.firstCreatePass&&(Wn(ve(k,s),I,r.type),Nh(I,k),om(k,s.length,1)),Ru(s,$e),s[20]=$e}(ye,this.componentDef,pn,I,k);if(ye)if(l)Vi(k,ye,["ng-version",eE.full]);else{const{attrs:Rn,classes:Gr}=function Ml(n){const r=[],s=[];let l=1,h=2;for(;l<n.length;){let m=n[l];if("string"==typeof m)2===h?""!==m&&r.push(m,n[++l]):8===h&&s.push(m);else{if(!Rl(h))break;h=m}l++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Rn&&Vi(k,ye,Rn),Gr&&Gr.length>0&&Od(k,ye,Gr.join(" "))}if(er=Pr(kt,20),void 0!==s){const Rn=er.projection=[];for(let Gr=0;Gr<this.ngContentSelectors.length;Gr++){const ji=s[Gr];Rn.push(null!=ji?Array.from(ji):null)}}$n=function Tm(n,r,s,l,h){const m=s[1],I=function kh(n,r,s){const l=Se();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),ra(n,l,r,d(n,r,1,null),s));const h=Bo(r,n,l.directiveStart,l);Eo(h,r);const m=Kt(l,r);return m&&Eo(m,r),h}(m,s,r);if(l.components.push(I),n[8]=I,h&&h.forEach(k=>k(I,r)),r.contentQueries){const k=Se();r.contentQueries(1,I,k.directiveStart)}const R=Se();return!m.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(gs(R.index),Mf(s[1],R,0,R.directiveStart,R.directiveEnd,r),im(r,I)),I}(wr,this.componentDef,pn,_t,[$_]),a(kt,pn,null)}finally{Bi()}return new Tb(this.componentType,$n,fp(er,pn),pn,er)}}class Tb extends class hb{}{constructor(r,s,l,h,m){super(),this.location=l,this._rootLView=h,this._tNode=m,this.instance=s,this.hostView=this.changeDetectorRef=new bb(h),this.componentType=r}get injector(){return new Vt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class pp{}class rE{}const gp=new Map;class oE extends pp{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tE(this);const l=Dn(r);this._bootstrapComponents=Da(l.bootstrap),this._r3Injector=pm(r,s,[{provide:pp,useValue:this},{provide:m_,useValue:this.componentFactoryResolver}],oe(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=Pl.THROW_IF_NOT_FOUND,l=mn.Default){return r===Pl||r===pp||r===Mu?this:this._r3Injector.get(r,s,l)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Vy extends rE{constructor(r){super(),this.moduleType=r,null!==Dn(r)&&function Sb(n){const r=new Set;!function s(l){const h=Dn(l,!0),m=h.id;null!==m&&(function iE(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${oe(r)} vs ${oe(r.name)}`)}(m,gp.get(m),l),gp.set(m,l));const I=Da(h.imports);for(const R of I)r.has(R)||(r.add(R),s(R))}(n)}(r)}create(r){return new oE(this.moduleType,r)}}function aE(n,r,s){const l=jr()+n,h=an();return h[l]===Cr?kl(h,l,s?r.call(s):r()):function dl(n,r){return n[r]}(h,l)}function Zg(n,r){const s=n[r];return s===Cr?void 0:s}function fE(n,r){const s=G();let l;const h=n+20;s.firstCreatePass?(l=function Lb(n,r){if(r)for(let s=r.length-1;s>=0;s--){const l=r[s];if(n===l.name)return l}}(r,s.pipeRegistry),s.data[h]=l,l.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(h,l.onDestroy)):l=s.data[h];const m=l.factory||(l.factory=Xr(l.type)),I=qn(Io);try{const R=xo(!1),k=m();return xo(R),function K_(n,r,s,l){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=l}(s,an(),h,k),k}finally{qn(I)}}function pE(n,r,s){const l=n+20,h=an(),m=ri(h,l);return qg(h,l)?function lE(n,r,s,l,h,m){const I=r+s;return Go(n,I,h)?kl(n,I+1,m?l.call(m,h):l(h)):Zg(n,I+1)}(h,jr(),r,m.transform,s,m):m.transform(s)}function gE(n,r,s,l){const h=n+20,m=an(),I=ri(m,h);return qg(m,h)?function cE(n,r,s,l,h,m,I){const R=r+s;return id(n,R,h,m)?kl(n,R+2,I?l.call(I,h,m):l(h,m)):Zg(n,R+2)}(m,jr(),r,I.transform,s,l,I):I.transform(s,l)}function qg(n,r){return n[1].data[r].pure}function jy(n){return r=>{setTimeout(n,void 0,r)}}const Wu=class jb extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,l){var h,m,I;let R=r,k=s||(()=>null),ee=l;if(r&&"object"==typeof r){const $e=r;R=null===(h=$e.next)||void 0===h?void 0:h.bind($e),k=null===(m=$e.error)||void 0===m?void 0:m.bind($e),ee=null===(I=$e.complete)||void 0===I?void 0:I.bind($e)}this.__isAsync&&(k=jy(k),R&&(R=jy(R)),ee&&(ee=jy(ee)));const ye=super.subscribe({next:R,error:k,complete:ee});return r instanceof S.w0&&r.add(ye),ye}};function Hb(){return this._results[Pu()]()}class y_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Pu(),l=y_.prototype;l[s]||(l[s]=Hb)}get changes(){return this._changes||(this._changes=new Wu)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const l=this;l.dirty=!1;const h=yo(r);(this._changesDetected=!function Rs(n,r,s){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let h=n[l],m=r[l];if(s&&(h=s(h),m=s(m)),m!==h)return!1}return!0}(l._results,h,s))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Yg=(()=>{class n{}return n.__NG_ELEMENT_ID__=Wb,n})();const $b=Yg,Gb=class extends $b{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(r){const s=this._declarationTContainer.tViews,l=Xl(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(s)),a(s,l,r),new Kg(l)}};function Wb(){return v_(Se(),an())}function v_(n,r){return 4&n.type?new Gb(r,n,fp(n,r)):null}let E_=(()=>{class n{}return n.__NG_ELEMENT_ID__=zb,n})();function zb(){return yE(Se(),an())}const Kb=E_,mE=class extends Kb{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return fp(this._hostTNode,this._hostLView)}get injector(){return new Vt(this._hostTNode,this._hostLView)}get parentInjector(){const r=qt(this._hostTNode,this._hostLView);if(zo(r)){const s=Or(r,this._hostLView),l=aa(r);return new Vt(s[1].data[l+8],s)}return new Vt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=_E(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,l){const h=r.createEmbeddedView(s||{});return this.insert(h,l),h}createComponent(r,s,l,h,m){const I=r&&!function _l(n){return"function"==typeof n}(r);let R;if(I)R=s;else{const $e=s||{};R=$e.index,l=$e.injector,h=$e.projectableNodes,m=$e.ngModuleRef}const k=I?r:new By(Ve(r)),ee=l||this.parentInjector;if(!m&&null==k.ngModule){const _t=(I?ee:this.parentInjector).get(pp,null);_t&&(m=_t)}const ye=k.create(ee,h,void 0,m);return this.insert(ye.hostView,R),ye}insert(r,s){const l=r._lView,h=l[1];if(function qr(n){return _r(n[3])}(l)){const ye=this.indexOf(r);if(-1!==ye)this.detach(ye);else{const $e=l[3],_t=new mE($e,$e[6],$e[3]);_t.detach(_t.indexOf(r))}}const m=this._adjustIndex(s),I=this._lContainer;!function wp(n,r,s,l){const h=10+l,m=s.length;l>0&&(s[h-1][4]=r),l<m-10?(r[4]=s[h],es(s,10+l,r)):(s.push(r),r[4]=null),r[3]=s;const I=r[17];null!==I&&s!==I&&function Ip(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(I,r);const R=r[19];null!==R&&R.insertView(n),r[2]|=128}(h,l,I,m);const R=Ql(m,I),k=l[11],ee=ro(k,I[7]);return null!==ee&&function Ep(n,r,s,l,h,m){l[0]=h,l[6]=r,Bc(n,l,s,1,h,m)}(h,I[6],k,l,ee,R),r.attachToViewContainerRef(),es(Hy(I),m,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=_E(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=fh(this._lContainer,s);l&&(Ko(Hy(this._lContainer),s),_f(l[1],l))}detach(r){const s=this._adjustIndex(r,-1),l=fh(this._lContainer,s);return l&&null!=Ko(Hy(this._lContainer),s)?new Kg(l):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function _E(n){return n[8]}function Hy(n){return n[8]||(n[8]=[])}function yE(n,r){let s;const l=r[n.index];if(_r(l))s=l;else{let h;if(8&n.type)h=V(l);else{const m=r[11];h=m.createComment("");const I=Kt(n,r);_c(m,ro(m,I),h,function yh(n,r){return gi(n)?n.nextSibling(r):r.nextSibling}(m,I),!1)}r[n.index]=s=am(l,r,h,n),Ru(r,s)}return new mE(s,n,r)}class $y{constructor(r){this.queryList=r,this.matches=null}clone(){return new $y(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gy{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,h=[];for(let m=0;m<l;m++){const I=s.getByIndex(m);h.push(this.queries[I.indexInDeclarationView].clone())}return new Gy(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==SE(r,s).matches&&this.queries[s].setDirty()}}class vE{constructor(r,s,l=null){this.predicate=r,this.flags=s,this.read=l}}class Wy{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const h=null!==s?s.length:0,m=this.getByIndex(l).embeddedTView(r,h);m&&(m.indexInDeclarationView=l,null!==s?s.push(m):s=[m])}return null!==s?new Wy(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class zy{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new zy(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const m=l[h];this.matchTNodeWithReadOption(r,s,Yb(s,m)),this.matchTNodeWithReadOption(r,s,Uo(s,r,m,!1,!1))}else l===Yg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Uo(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===zg||h===E_||h===Yg&&4&s.type)this.addMatch(s.index,-2);else{const m=Uo(s,r,h,!1,!1);null!==m&&this.addMatch(s.index,m)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Yb(n,r){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function Xb(n,r,s,l){return-1===s?function Qb(n,r){return 11&n.type?fp(n,r):4&n.type?v_(n,r):null}(r,n):-2===s?function Jb(n,r,s){return s===zg?fp(r,n):s===Yg?v_(r,n):s===E_?yE(r,n):void 0}(n,r,l):Bo(n,n[1],s,r)}function EE(n,r,s,l){const h=r[19].queries[l];if(null===h.matches){const m=n.data,I=s.matches,R=[];for(let k=0;k<I.length;k+=2){const ee=I[k];R.push(ee<0?null:Xb(r,m[ee],I[k+1],s.metadata.read))}h.matches=R}return h.matches}function Ky(n,r,s,l){const h=n.queries.getByIndex(s),m=h.matches;if(null!==m){const I=EE(n,r,h,s);for(let R=0;R<m.length;R+=2){const k=m[R];if(k>0)l.push(I[R/2]);else{const ee=m[R+1],ye=r[-k];for(let $e=10;$e<ye.length;$e++){const _t=ye[$e];_t[17]===_t[3]&&Ky(_t[1],_t,ee,l)}if(null!==ye[9]){const $e=ye[9];for(let _t=0;_t<$e.length;_t++){const kt=$e[_t];Ky(kt[1],kt,ee,l)}}}}}return l}function bE(n){const r=an(),s=G(),l=Dt();Qt(l+1);const h=SE(s,l);if(n.dirty&&Vr(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const m=h.crossesNgTemplate?Ky(s,r,l,[]):EE(s,r,h,l);n.reset(m,mb),n.notifyOnChanges()}return!0}return!1}function wE(n,r,s){const l=G();l.firstCreatePass&&(DE(l,new vE(n,r,s),-1),2==(2&r)&&(l.staticViewQueries=!0)),TE(l,an(),r)}function IE(n,r,s,l){const h=G();if(h.firstCreatePass){const m=Se();DE(h,new vE(r,s,l),m.index),function tw(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(h,n),2==(2&s)&&(h.staticContentQueries=!0)}TE(h,an(),s)}function CE(){return function ew(n,r){return n[19].queries[r].queryList}(an(),Dt())}function TE(n,r,s){const l=new y_(4==(4&s));Tr(n,r,l,l.destroy),null===r[19]&&(r[19]=new Gy),r[19].queries.push(new $y(l))}function DE(n,r,s){null===n.queries&&(n.queries=new Wy),n.queries.track(new zy(r,s))}function SE(n,r){return n.queries.getByIndex(r)}function AE(n,r){return v_(n,r)}function I_(...n){}const WE=new Mi("Application Initializer");let Jy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=I_,this.reject=I_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(io(m))s.push(m);else if(Km(m)){const I=new Promise((R,k)=>{m.subscribe({complete:R,error:k})});s.push(I)}}Promise.all(s).then(()=>{l()}).catch(h=>{this.reject(h)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(dn(WE,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zE=new Mi("AppId",{providedIn:"root",factory:function KE(){return`${ev()}${ev()}${ev()}`}});function ev(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ZE=new Mi("Platform Initializer"),qE=new Mi("Platform ID"),YE=new Mi("appBootstrapListener");let QE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const tv=new Mi("LocaleId",{providedIn:"root",factory:()=>Er(tv,mn.Optional|mn.SkipSelf)||function yw(){return"undefined"!=typeof $localize&&$localize.locale||t}()}),vw=new Mi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ew{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let bw=(()=>{class n{compileModuleSync(s){return new Vy(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),m=Da(Dn(s).declarations).reduce((I,R)=>{const k=Ve(R);return k&&I.push(new By(k)),I},[]);return new Ew(l,m)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Iw=(()=>Promise.resolve(0))();function nv(n){"undefined"==typeof Zone?Iw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class eu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wu(!1),this.onMicrotaskEmpty=new Wu(!1),this.onStable=new Wu(!1),this.onError=new Wu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&s,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Cw(){let n=Bn.requestAnimationFrame,r=Bn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Sw(n){const r=()=>{!function Dw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Bn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,iv(n),n.isCheckStableRunning=!0,rv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,h,m,I,R)=>{try{return XE(n),s.invokeTask(h,m,I,R)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&r(),JE(n)}},onInvoke:(s,l,h,m,I,R,k)=>{try{return XE(n),s.invoke(h,m,I,R,k)}finally{n.shouldCoalesceRunChangeDetection&&r(),JE(n)}},onHasTask:(s,l,h,m)=>{s.hasTask(h,m),l===h&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,iv(n),rv(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(s,l,h,m)=>(s.handleError(h,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!eu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(eu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,h){const m=this._inner,I=m.scheduleEventTask("NgZoneEvent: "+h,r,Tw,I_,I_);try{return m.runTask(I,s,l)}finally{m.cancelTask(I)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const Tw={};function rv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function XE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function JE(n){n._nesting--,rv(n)}class Aw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wu,this.onMicrotaskEmpty=new Wu,this.onStable=new Wu,this.onError=new Wu}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,h){return r.apply(s,l)}}let e0=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{eu.assertNotInAngularZone(),nv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,h){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==m),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:m,updateCb:h})}whenStable(s,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,l,h){return[]}}return n.\u0275fac=function(s){return new(s||n)(dn(eu))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),t0=(()=>{class n{constructor(){this._applications=new Map,sv.addToWindow(this)}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return sv.findTestabilityInTree(this,s,l)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class Rw{addToWindow(r){}findTestabilityInTree(r,s,l){return null}}function Mw(n){sv=n}let tu,sv=new Rw;const n0=new Mi("AllowMultipleToken");class Pw{constructor(r,s){this.name=r,this.token=s}}function r0(n,r,s=[]){const l=`Platform: ${r}`,h=new Mi(l);return(m=[])=>{let I=s0();if(!I||I.injector.get(n0,!1))if(n)n(s.concat(m).concat({provide:h,useValue:!0}));else{const R=s.concat(m).concat({provide:h,useValue:!0},{provide:Zp,useValue:"platform"});!function kw(n){if(tu&&!tu.destroyed&&!tu.injector.get(n0,!1))throw new ut(400,"");tu=n.get(o0);const r=n.get(ZE,null);r&&r.forEach(s=>s())}(Pl.create({providers:R,name:l}))}return function Nw(n){const r=s0();if(!r)throw new ut(401,"");return r}()}}function s0(){return tu&&!tu.destroyed?tu:null}let o0=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const R=function Fw(n,r){let s;return s="noop"===n?new Aw:("zone.js"===n?void 0:n)||new eu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),k=[{provide:eu,useValue:R}];return R.run(()=>{const ee=Pl.create({providers:k,parent:this.injector,name:s.moduleType.name}),ye=s.create(ee),$e=ye.injector.get(pu,null);if(!$e)throw new ut(402,"");return R.runOutsideAngular(()=>{const _t=R.onError.subscribe({next:kt=>{$e.handleError(kt)}});ye.onDestroy(()=>{av(this._modules,ye),_t.unsubscribe()})}),function Lw(n,r,s){try{const l=s();return io(l)?l.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}($e,R,()=>{const _t=ye.injector.get(Jy);return _t.runInitializers(),_t.donePromise.then(()=>(function ie(n){Ut(n,"Expected localeId to be defined"),"string"==typeof n&&(W=n.toLowerCase().replace(/_/g,"-"))}(ye.injector.get(tv,t)||t),this._moduleDoBootstrap(ye),ye))})})}bootstrapModule(s,l=[]){const h=a0({},l);return function Ow(n,r,s){const l=new Vy(s);return Promise.resolve(l)}(0,0,s).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(s){const l=s.injector.get(ov);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!s.instance.ngDoBootstrap)throw new ut(403,"");s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ut(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(dn(Pl))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();function a0(n,r){return Array.isArray(r)?r.reduce(a0,n):Object.assign(Object.assign({},n),r)}let ov=(()=>{class n{constructor(s,l,h,m,I){this._zone=s,this._injector=l,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=I,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const R=new U.y(ee=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ee.next(this._stable),ee.complete()})}),k=new U.y(ee=>{let ye;this._zone.runOutsideAngular(()=>{ye=this._zone.onStable.subscribe(()=>{eu.assertNotInAngularZone(),nv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ee.next(!0))})})});const $e=this._zone.onUnstable.subscribe(()=>{eu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ee.next(!1)}))});return()=>{ye.unsubscribe(),$e.unsubscribe()}});this.isStable=(0,re.T)(R,k.pipe((0,de.B)()))}bootstrap(s,l){if(!this._initStatus.done)throw new ut(405,"");let h;h=s instanceof Yv?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(h.componentType);const m=function xw(n){return n.isBoundToModule}(h)?void 0:this._injector.get(pp),R=h.create(Pl.NULL,[],l||h.selector,m),k=R.location.nativeElement,ee=R.injector.get(e0,null),ye=ee&&R.injector.get(t0);return ee&&ye&&ye.registerApplication(k,ee),R.onDestroy(()=>{this.detachView(R.hostView),av(this.components,R),ye&&ye.unregisterApplication(k)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new ut(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;av(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(YE,[]).concat(this._bootstrapListeners).forEach(h=>h(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(dn(eu),dn(Pl),dn(pu),dn(m_),dn(Jy))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function av(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let c0=!0,u0=!1;function Bw(){return u0=!0,c0}function Vw(){if(u0)throw new Error("Cannot enable prod mode after platform setup.");c0=!1}let jw=(()=>{class n{}return n.__NG_ELEMENT_ID__=Hw,n})();function Hw(n){return function $w(n,r,s){if(ti(n)&&!s){const l=Lr(n.index,r);return new Kg(l,l)}return 47&n.type?new Kg(r[16],r):null}(Se(),an(),16==(16&n))}class p0{constructor(){}supports(r){return Dc(r)}create(r){return new qw(r)}}const Zw=(n,r)=>r;class qw{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||Zw}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,h=0,m=null;for(;s||l;){const I=!l||s&&s.currentIndex<m0(l,h,m)?s:l,R=m0(I,h,m),k=I.currentIndex;if(I===l)h--,l=l._nextRemoved;else if(s=s._next,null==I.previousIndex)h++;else{m||(m=[]);const ee=R-h,ye=k-h;if(ee!=ye){for(let _t=0;_t<ee;_t++){const kt=_t<m.length?m[_t]:m[_t]=0,pn=kt+_t;ye<=pn&&pn<ee&&(m[_t]=kt+1)}m[I.previousIndex]=ye-ee}}R!==k&&r(I,R,k)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Dc(r))throw new ut(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,m,I,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let R=0;R<this.length;R++)m=r[R],I=this._trackByFn(R,m),null!==s&&Object.is(s.trackById,I)?(l&&(s=this._verifyReinsertion(s,m,I,R)),Object.is(s.item,m)||this._addIdentityChange(s,m)):(s=this._mismatch(s,m,I,R),l=!0),s=s._next}else h=0,function cg(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Pu()]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,R=>{I=this._trackByFn(h,R),null!==s&&Object.is(s.trackById,I)?(l&&(s=this._verifyReinsertion(s,R,I,h)),Object.is(s.item,R)||this._addIdentityChange(s,R)):(s=this._mismatch(s,R,I,h),l=!0),s=s._next,h++}),this.length=h;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,h){let m;return null===r?m=this._itTail:(m=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,m,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,m,h)):r=this._addAfter(new Yw(s,l),m,h),r}_verifyReinsertion(r,s,l,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?r=this._reinsertAfter(m,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,m=r._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const h=null===s?this._itHead:s._next;return r._next=h,r._prev=s,null===h?this._itTail=r:h._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new g0),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new g0),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Yw{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qw{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class g0{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new Qw,this.map.set(s,l)),l.add(r)}get(r,s){const h=this.map.get(r);return h?h.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function m0(n,r,s){const l=n.previousIndex;if(null===l)return l;let h=0;return s&&l<s.length&&(h=s[l]),l+r+h}class _0{constructor(){}supports(r){return r instanceof Map||ug(r)}create(){return new Xw}}class Xw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||ug(r)))throw new ut(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,h)=>{if(s&&s.key===h)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const m=this._getOrCreateRecordForKey(h,l);s=this._insertBeforeOrAppend(s,m)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,s);const m=h._prev,I=h._next;return m&&(m._next=I),I&&(I._prev=m),h._next=null,h._prev=null,h}const l=new Jw(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class Jw{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function y0(){return new hv([new p0])}let hv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const h=l.factories.slice();s=s.concat(h)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||y0()),deps:[[n,new ho,new ba]]}}find(s){const l=this.factories.find(h=>h.supports(s));if(null!=l)return l;throw new ut(901,"")}}return n.\u0275prov=nn({token:n,providedIn:"root",factory:y0}),n})();function v0(){return new fv([new _0])}let fv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const h=l.factories.slice();s=s.concat(h)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||v0()),deps:[[n,new ho,new ba]]}}find(s){const l=this.factories.find(m=>m.supports(s));if(l)return l;throw new ut(901,"")}}return n.\u0275prov=nn({token:n,providedIn:"root",factory:v0}),n})();const nI=r0(null,"core",[{provide:qE,useValue:"unknown"},{provide:o0,deps:[Pl]},{provide:t0,deps:[]},{provide:QE,deps:[]}]);let rI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(dn(ov))},n.\u0275mod=ue({type:n}),n.\u0275inj=Ot({}),n})()},7423:(Je,Te,b)=>{b.d(Te,{lW:()=>se,ot:()=>qe});var g=b(5e3),S=b(508),U=b(6360),re=b(5664);const de=["mat-button",""],Ie=["*"],ce=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],te=(0,S.pj)((0,S.Id)((0,S.Kr)(class{constructor(it){this._elementRef=it}})));let se=(()=>{class it extends te{constructor(Et,et,at){super(Et),this._focusMonitor=et,this._animationMode=at,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const He of ce)this._hasHostAttributes(He)&&this._getHostElement().classList.add(He);Et.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Et,et){Et?this._focusMonitor.focusVia(this._getHostElement(),Et,et):this._getHostElement().focus(et)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Et){return Et.some(et=>this._getHostElement().hasAttribute(et))}}return it.\u0275fac=function(Et){return new(Et||it)(g.Y36(g.SBq),g.Y36(re.tE),g.Y36(U.Qb,8))},it.\u0275cmp=g.Xpm({type:it,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Et,et){if(1&Et&&g.Gf(S.wG,5),2&Et){let at;g.iGM(at=g.CRH())&&(et.ripple=at.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Et,et){2&Et&&(g.uIk("disabled",et.disabled||null),g.ekj("_mat-animation-noopable","NoopAnimations"===et._animationMode)("mat-button-disabled",et.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[g.qOj],attrs:de,ngContentSelectors:Ie,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Et,et){1&Et&&(g.F$t(),g.TgZ(0,"span",0),g.Hsn(1),g.qZA(),g._UZ(2,"span",1)(3,"span",2)),2&Et&&(g.xp6(2),g.ekj("mat-button-ripple-round",et.isRoundButton||et.isIconButton),g.Q6J("matRippleDisabled",et._isRippleDisabled())("matRippleCentered",et.isIconButton)("matRippleTrigger",et._getHostElement()))},directives:[S.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),it})(),qe=(()=>{class it{}return it.\u0275fac=function(Et){return new(Et||it)},it.\u0275mod=g.oAB({type:it}),it.\u0275inj=g.cJS({imports:[[S.si,S.BQ],S.BQ]}),it})()},508:(Je,Te,b)=>{b.d(Te,{_A:()=>xn,rD:()=>jn,sG:()=>Ze,Ad:()=>tn,K7:()=>Ft,HF:()=>J,BQ:()=>Be,XK:()=>Yt,ey:()=>Bn,Ng:()=>tr,rN:()=>Mn,wG:()=>De,si:()=>qn,CB:()=>gr,jH:()=>lr,pj:()=>Qe,Kr:()=>Ne,Id:()=>Ge,FD:()=>vt,sb:()=>gt});var g=b(5e3),S=b(226);const U=new g.GfV("13.0.0");var re=b(9808),de=b(925),Ie=b(5664),Ce=b(3191),oe=b(7579),ce=b(6360),te=b(1159);function qe(pt,dt){if(1&pt&&g._UZ(0,"mat-pseudo-checkbox",4),2&pt){const Ue=g.oxw();g.Q6J("state",Ue.selected?"checked":"unchecked")("disabled",Ue.disabled)}}function it(pt,dt){if(1&pt&&(g.TgZ(0,"span",5),g._uU(1),g.qZA()),2&pt){const Ue=g.oxw();g.xp6(1),g.hij("(",Ue.group.label,")")}}const ut=["*"],He=new g.GfV("13.0.0"),ze=new g.OlP("mat-sanity-checks",{providedIn:"root",factory:function Mt(){return!0}});let Be=(()=>{class pt{constructor(Ue,It,he){this._hasDoneGlobalChecks=!1,this._document=he,Ue._applyBodyHighContrastModeCssClasses(),this._sanityChecks=It,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(Ue){return!(!(0,g.X6Q)()||(0,de.Oy)())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[Ue])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const Ue=this._document.createElement("div");Ue.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(Ue);const It=getComputedStyle(Ue);It&&"none"!==It.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),Ue.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&He.full!==U.full&&console.warn("The Angular Material version ("+He.full+") does not match the Angular CDK version ("+U.full+").\nPlease ensure the versions of these two packages exactly match.")}}return pt.\u0275fac=function(Ue){return new(Ue||pt)(g.LFG(Ie.qm),g.LFG(ze,8),g.LFG(re.K0))},pt.\u0275mod=g.oAB({type:pt}),pt.\u0275inj=g.cJS({imports:[[S.vT],S.vT]}),pt})();function Ge(pt){return class extends pt{constructor(...dt){super(...dt),this._disabled=!1}get disabled(){return this._disabled}set disabled(dt){this._disabled=(0,Ce.Ig)(dt)}}}function Qe(pt,dt){return class extends pt{constructor(...Ue){super(...Ue),this.defaultColor=dt,this.color=dt}get color(){return this._color}set color(Ue){const It=Ue||this.defaultColor;It!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),It&&this._elementRef.nativeElement.classList.add(`mat-${It}`),this._color=It)}}}function Ne(pt){return class extends pt{constructor(...dt){super(...dt),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(dt){this._disableRipple=(0,Ce.Ig)(dt)}}}function gt(pt,dt=0){return class extends pt{constructor(...Ue){super(...Ue),this._tabIndex=dt,this.defaultTabIndex=dt}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(Ue){this._tabIndex=null!=Ue?(0,Ce.su)(Ue):this.defaultTabIndex}}}function vt(pt){return class extends pt{constructor(...dt){super(...dt),this.stateChanges=new oe.x,this.errorState=!1}updateErrorState(){const dt=this.errorState,N=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);N!==dt&&(this.errorState=N,this.stateChanges.next())}}}const tn=new g.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function vn(){return(0,g.f3M)(g.soG)}});class xn{constructor(){this._localeChanges=new oe.x,this.localeChanges=this._localeChanges}getValidDateOrNull(dt){return this.isDateInstance(dt)&&this.isValid(dt)?dt:null}deserialize(dt){return null==dt||this.isDateInstance(dt)&&this.isValid(dt)?dt:this.invalid()}setLocale(dt){this.locale=dt,this._localeChanges.next()}compareDate(dt,Ue){return this.getYear(dt)-this.getYear(Ue)||this.getMonth(dt)-this.getMonth(Ue)||this.getDate(dt)-this.getDate(Ue)}sameDate(dt,Ue){if(dt&&Ue){let It=this.isValid(dt),he=this.isValid(Ue);return It&&he?!this.compareDate(dt,Ue):It==he}return dt==Ue}clampDate(dt,Ue,It){return Ue&&this.compareDate(dt,Ue)<0?Ue:It&&this.compareDate(dt,It)>0?It:dt}}const Ze=new g.OlP("mat-date-formats"),ft=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function St(pt,dt){const Ue=Array(pt);for(let It=0;It<pt;It++)Ue[It]=dt(It);return Ue}let Gt=(()=>{class pt extends xn{constructor(Ue,It){super(),this.useUtcForDisplay=!1,super.setLocale(Ue)}getYear(Ue){return Ue.getFullYear()}getMonth(Ue){return Ue.getMonth()}getDate(Ue){return Ue.getDate()}getDayOfWeek(Ue){return Ue.getDay()}getMonthNames(Ue){const It=new Intl.DateTimeFormat(this.locale,{month:Ue,timeZone:"utc"});return St(12,he=>this._format(It,new Date(2017,he,1)))}getDateNames(){const Ue=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return St(31,It=>this._format(Ue,new Date(2017,0,It+1)))}getDayOfWeekNames(Ue){const It=new Intl.DateTimeFormat(this.locale,{weekday:Ue,timeZone:"utc"});return St(7,he=>this._format(It,new Date(2017,0,he+1)))}getYearName(Ue){const It=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(It,Ue)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(Ue){return this.getDate(this._createDateWithOverflow(this.getYear(Ue),this.getMonth(Ue)+1,0))}clone(Ue){return new Date(Ue.getTime())}createDate(Ue,It,he){let N=this._createDateWithOverflow(Ue,It,he);return N.getMonth(),N}today(){return new Date}parse(Ue){return"number"==typeof Ue?new Date(Ue):Ue?new Date(Date.parse(Ue)):null}format(Ue,It){if(!this.isValid(Ue))throw Error("NativeDateAdapter: Cannot format invalid date.");const he=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},It),{timeZone:"utc"}));return this._format(he,Ue)}addCalendarYears(Ue,It){return this.addCalendarMonths(Ue,12*It)}addCalendarMonths(Ue,It){let he=this._createDateWithOverflow(this.getYear(Ue),this.getMonth(Ue)+It,this.getDate(Ue));return this.getMonth(he)!=((this.getMonth(Ue)+It)%12+12)%12&&(he=this._createDateWithOverflow(this.getYear(he),this.getMonth(he),0)),he}addCalendarDays(Ue,It){return this._createDateWithOverflow(this.getYear(Ue),this.getMonth(Ue),this.getDate(Ue)+It)}toIso8601(Ue){return[Ue.getUTCFullYear(),this._2digit(Ue.getUTCMonth()+1),this._2digit(Ue.getUTCDate())].join("-")}deserialize(Ue){if("string"==typeof Ue){if(!Ue)return null;if(ft.test(Ue)){let It=new Date(Ue);if(this.isValid(It))return It}}return super.deserialize(Ue)}isDateInstance(Ue){return Ue instanceof Date}isValid(Ue){return!isNaN(Ue.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(Ue,It,he){const N=new Date;return N.setFullYear(Ue,It,he),N.setHours(0,0,0,0),N}_2digit(Ue){return("00"+Ue).slice(-2)}_format(Ue,It){const he=new Date;return he.setUTCFullYear(It.getFullYear(),It.getMonth(),It.getDate()),he.setUTCHours(It.getHours(),It.getMinutes(),It.getSeconds(),It.getMilliseconds()),Ue.format(he)}}return pt.\u0275fac=function(Ue){return new(Ue||pt)(g.LFG(tn,8),g.LFG(de.t4))},pt.\u0275prov=g.Yz7({token:pt,factory:pt.\u0275fac}),pt})();const Ut={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let Rt=(()=>{class pt{}return pt.\u0275fac=function(Ue){return new(Ue||pt)},pt.\u0275mod=g.oAB({type:pt}),pt.\u0275inj=g.cJS({providers:[{provide:xn,useClass:Gt}],imports:[[de.ud]]}),pt})(),Yt=(()=>{class pt{}return pt.\u0275fac=function(Ue){return new(Ue||pt)},pt.\u0275mod=g.oAB({type:pt}),pt.\u0275inj=g.cJS({providers:[{provide:Ze,useValue:Ut}],imports:[[Rt]]}),pt})(),jn=(()=>{class pt{isErrorState(Ue,It){return!!(Ue&&Ue.invalid&&(Ue.touched||It&&It.submitted))}}return pt.\u0275fac=function(Ue){return new(Ue||pt)},pt.\u0275prov=g.Yz7({token:pt,factory:pt.\u0275fac,providedIn:"root"}),pt})();class xt{constructor(dt,Ue,It){this._renderer=dt,this.element=Ue,this.config=It,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const rn={enterDuration:225,exitDuration:150},Fn=(0,de.i$)({passive:!0}),Sn=["mousedown","touchstart"],Zn=["mouseup","mouseleave","touchend","touchcancel"];class ur{constructor(dt,Ue,It,he){this._target=dt,this._ngZone=Ue,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,he.isBrowser&&(this._containerElement=(0,Ce.fI)(It))}fadeInRipple(dt,Ue,It={}){const he=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),N=Object.assign(Object.assign({},rn),It.animation);It.centered&&(dt=he.left+he.width/2,Ue=he.top+he.height/2);const L=It.radius||function mn(pt,dt,Ue){const It=Math.max(Math.abs(pt-Ue.left),Math.abs(pt-Ue.right)),he=Math.max(Math.abs(dt-Ue.top),Math.abs(dt-Ue.bottom));return Math.sqrt(It*It+he*he)}(dt,Ue,he),q=dt-he.left,X=Ue-he.top,Fe=N.enterDuration,ht=document.createElement("div");ht.classList.add("mat-ripple-element"),ht.style.left=q-L+"px",ht.style.top=X-L+"px",ht.style.height=2*L+"px",ht.style.width=2*L+"px",null!=It.color&&(ht.style.backgroundColor=It.color),ht.style.transitionDuration=`${Fe}ms`,this._containerElement.appendChild(ht),function Dr(pt){window.getComputedStyle(pt).getPropertyValue("opacity")}(ht),ht.style.transform="scale(1)";const we=new xt(this,ht,It);return we.state=0,this._activeRipples.add(we),It.persistent||(this._mostRecentTransientRipple=we),this._runTimeoutOutsideZone(()=>{const xe=we===this._mostRecentTransientRipple;we.state=1,!It.persistent&&(!xe||!this._isPointerDown)&&we.fadeOut()},Fe),we}fadeOutRipple(dt){const Ue=this._activeRipples.delete(dt);if(dt===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!Ue)return;const It=dt.element,he=Object.assign(Object.assign({},rn),dt.config.animation);It.style.transitionDuration=`${he.exitDuration}ms`,It.style.opacity="0",dt.state=2,this._runTimeoutOutsideZone(()=>{dt.state=3,It.remove()},he.exitDuration)}fadeOutAll(){this._activeRipples.forEach(dt=>dt.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(dt=>{dt.config.persistent||dt.fadeOut()})}setupTriggerEvents(dt){const Ue=(0,Ce.fI)(dt);!Ue||Ue===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=Ue,this._registerEvents(Sn))}handleEvent(dt){"mousedown"===dt.type?this._onMousedown(dt):"touchstart"===dt.type?this._onTouchStart(dt):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Zn),this._pointerUpEventsRegistered=!0)}_onMousedown(dt){const Ue=(0,Ie.X6)(dt),It=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!Ue&&!It&&(this._isPointerDown=!0,this.fadeInRipple(dt.clientX,dt.clientY,this._target.rippleConfig))}_onTouchStart(dt){if(!this._target.rippleDisabled&&!(0,Ie.yG)(dt)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const Ue=dt.changedTouches;for(let It=0;It<Ue.length;It++)this.fadeInRipple(Ue[It].clientX,Ue[It].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(dt=>{!dt.config.persistent&&(1===dt.state||dt.config.terminateOnPointerUp&&0===dt.state)&&dt.fadeOut()}))}_runTimeoutOutsideZone(dt,Ue=0){this._ngZone.runOutsideAngular(()=>setTimeout(dt,Ue))}_registerEvents(dt){this._ngZone.runOutsideAngular(()=>{dt.forEach(Ue=>{this._triggerElement.addEventListener(Ue,this,Fn)})})}_removeTriggerEvents(){this._triggerElement&&(Sn.forEach(dt=>{this._triggerElement.removeEventListener(dt,this,Fn)}),this._pointerUpEventsRegistered&&Zn.forEach(dt=>{this._triggerElement.removeEventListener(dt,this,Fn)}))}}const Tn=new g.OlP("mat-ripple-global-options");let De=(()=>{class pt{constructor(Ue,It,he,N,L){this._elementRef=Ue,this._animationMode=L,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=N||{},this._rippleRenderer=new ur(this,It,Ue,he)}get disabled(){return this._disabled}set disabled(Ue){Ue&&this.fadeOutAllNonPersistent(),this._disabled=Ue,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(Ue){this._trigger=Ue,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(Ue,It=0,he){return"number"==typeof Ue?this._rippleRenderer.fadeInRipple(Ue,It,Object.assign(Object.assign({},this.rippleConfig),he)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),Ue))}}return pt.\u0275fac=function(Ue){return new(Ue||pt)(g.Y36(g.SBq),g.Y36(g.R0b),g.Y36(de.t4),g.Y36(Tn,8),g.Y36(ce.Qb,8))},pt.\u0275dir=g.lG2({type:pt,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(Ue,It){2&Ue&&g.ekj("mat-ripple-unbounded",It.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),pt})(),qn=(()=>{class pt{}return pt.\u0275fac=function(Ue){return new(Ue||pt)},pt.\u0275mod=g.oAB({type:pt}),pt.\u0275inj=g.cJS({imports:[[Be,de.ud],Be]}),pt})(),rt=(()=>{class pt{constructor(Ue){this._animationMode=Ue,this.state="unchecked",this.disabled=!1}}return pt.\u0275fac=function(Ue){return new(Ue||pt)(g.Y36(ce.Qb,8))},pt.\u0275cmp=g.Xpm({type:pt,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(Ue,It){2&Ue&&g.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===It.state)("mat-pseudo-checkbox-checked","checked"===It.state)("mat-pseudo-checkbox-disabled",It.disabled)("_mat-animation-noopable","NoopAnimations"===It._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(Ue,It){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),pt})(),Y=(()=>{class pt{}return pt.\u0275fac=function(Ue){return new(Ue||pt)},pt.\u0275mod=g.oAB({type:pt}),pt.\u0275inj=g.cJS({imports:[[Be]]}),pt})();const J=new g.OlP("MAT_OPTION_PARENT_COMPONENT"),Ft=new g.OlP("MatOptgroup");let zt=0;class Mn{constructor(dt,Ue=!1){this.source=dt,this.isUserInput=Ue}}let Kn=(()=>{class pt{constructor(Ue,It,he,N){this._element=Ue,this._changeDetectorRef=It,this._parent=he,this.group=N,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+zt++,this.onSelectionChange=new g.vpe,this._stateChanges=new oe.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(Ue){this._disabled=(0,Ce.Ig)(Ue)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(Ue,It){const he=this._getHostElement();"function"==typeof he.focus&&he.focus(It)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(Ue){(Ue.keyCode===te.K5||Ue.keyCode===te.L_)&&!(0,te.Vb)(Ue)&&(this._selectViaInteraction(),Ue.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const Ue=this.viewValue;Ue!==this._mostRecentViewValue&&(this._mostRecentViewValue=Ue,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(Ue=!1){this.onSelectionChange.emit(new Mn(this,Ue))}}return pt.\u0275fac=function(Ue){g.$Z()},pt.\u0275dir=g.lG2({type:pt,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),pt})(),Bn=(()=>{class pt extends Kn{constructor(Ue,It,he,N){super(Ue,It,he,N)}}return pt.\u0275fac=function(Ue){return new(Ue||pt)(g.Y36(g.SBq),g.Y36(g.sBO),g.Y36(J,8),g.Y36(Ft,8))},pt.\u0275cmp=g.Xpm({type:pt,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(Ue,It){1&Ue&&g.NdJ("click",function(){return It._selectViaInteraction()})("keydown",function(N){return It._handleKeydown(N)}),2&Ue&&(g.Ikx("id",It.id),g.uIk("tabindex",It._getTabIndex())("aria-selected",It._getAriaSelected())("aria-disabled",It.disabled.toString()),g.ekj("mat-selected",It.selected)("mat-option-multiple",It.multiple)("mat-active",It.active)("mat-option-disabled",It.disabled))},exportAs:["matOption"],features:[g.qOj],ngContentSelectors:ut,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(Ue,It){1&Ue&&(g.F$t(),g.YNc(0,qe,1,2,"mat-pseudo-checkbox",0),g.TgZ(1,"span",1),g.Hsn(2),g.qZA(),g.YNc(3,it,2,1,"span",2),g._UZ(4,"div",3)),2&Ue&&(g.Q6J("ngIf",It.multiple),g.xp6(3),g.Q6J("ngIf",It.group&&It.group._inert),g.xp6(1),g.Q6J("matRippleTrigger",It._getHostElement())("matRippleDisabled",It.disabled||It.disableRipple))},directives:[rt,re.O5,De],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),pt})();function gr(pt,dt,Ue){if(Ue.length){let It=dt.toArray(),he=Ue.toArray(),N=0;for(let L=0;L<pt+1;L++)It[L].group&&It[L].group===he[N]&&N++;return N}return 0}function lr(pt,dt,Ue,It){return pt<Ue?pt:pt+dt>Ue+It?Math.max(0,pt-It+dt):Ue}let tr=(()=>{class pt{}return pt.\u0275fac=function(Ue){return new(Ue||pt)},pt.\u0275mod=g.oAB({type:pt}),pt.\u0275inj=g.cJS({imports:[[qn,re.ez,Be,Y]]}),pt})()},1271:(Je,Te,b)=>{b.d(Te,{qD:()=>Ze,ux:()=>wn,ZX:()=>Nn});var g=b(9776),S=b(7429),U=b(9808),re=b(5e3),de=b(508),Ie=b(7423),Ce=b(7579),oe=b(5698),ce=b(2722),te=b(1777),se=b(925),ke=b(3191),qe=b(9841),it=b(7272),ut=b(8306),Et=b(5684),et=b(8372),at=b(4004),He=b(8675);const ze=new Set;let Be,Ge=(()=>{class Ot{constructor(xt){this._platform=xt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ne}matchMedia(xt){return(this._platform.WEBKIT||this._platform.BLINK)&&function Qe(Ot){if(!ze.has(Ot))try{Be||(Be=document.createElement("style"),Be.setAttribute("type","text/css"),document.head.appendChild(Be)),Be.sheet&&(Be.sheet.insertRule(`@media ${Ot} {body{ }}`,0),ze.add(Ot))}catch(hn){console.error(hn)}}(xt),this._matchMedia(xt)}}return Ot.\u0275fac=function(xt){return new(xt||Ot)(re.LFG(se.t4))},Ot.\u0275prov=re.Yz7({token:Ot,factory:Ot.\u0275fac,providedIn:"root"}),Ot})();function Ne(Ot){return{matches:"all"===Ot||""===Ot,media:Ot,addListener:()=>{},removeListener:()=>{}}}let gt=(()=>{class Ot{constructor(xt,rn){this._mediaMatcher=xt,this._zone=rn,this._queries=new Map,this._destroySubject=new Ce.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(xt){return vt((0,ke.Eq)(xt)).some(fn=>this._registerQuery(fn).mql.matches)}observe(xt){const fn=vt((0,ke.Eq)(xt)).map(Sn=>this._registerQuery(Sn).observable);let Fn=(0,qe.a)(fn);return Fn=(0,it.z)(Fn.pipe((0,oe.q)(1)),Fn.pipe((0,Et.T)(1),(0,et.b)(0))),Fn.pipe((0,at.U)(Sn=>{const Zn={matches:!1,breakpoints:{}};return Sn.forEach(({matches:ur,query:Dr})=>{Zn.matches=Zn.matches||ur,Zn.breakpoints[Dr]=ur}),Zn}))}_registerQuery(xt){if(this._queries.has(xt))return this._queries.get(xt);const rn=this._mediaMatcher.matchMedia(xt),Fn={observable:new ut.y(Sn=>{const Zn=ur=>this._zone.run(()=>Sn.next(ur));return rn.addListener(Zn),()=>{rn.removeListener(Zn)}}).pipe((0,He.O)(rn),(0,at.U)(({matches:Sn})=>({query:xt,matches:Sn})),(0,ce.R)(this._destroySubject)),mql:rn};return this._queries.set(xt,Fn),Fn}}return Ot.\u0275fac=function(xt){return new(xt||Ot)(re.LFG(Ge),re.LFG(re.R0b))},Ot.\u0275prov=re.Yz7({token:Ot,factory:Ot.\u0275fac,providedIn:"root"}),Ot})();function vt(Ot){return Ot.map(hn=>hn.split(",")).reduce((hn,xt)=>hn.concat(xt)).map(hn=>hn.trim())}var tn=b(5664);function vn(Ot,hn){if(1&Ot){const xt=re.EpF();re.TgZ(0,"div",1)(1,"button",2),re.NdJ("click",function(){return re.CHM(xt),re.oxw().action()}),re._uU(2),re.qZA()()}if(2&Ot){const xt=re.oxw();re.xp6(2),re.Oqu(xt.data.action)}}function xn(Ot,hn){}const Ze=new re.OlP("MatSnackBarData");class ft{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const St=Math.pow(2,31)-1;class Gt{constructor(hn,xt){this._overlayRef=xt,this._afterDismissed=new Ce.x,this._afterOpened=new Ce.x,this._onAction=new Ce.x,this._dismissedByAction=!1,this.containerInstance=hn,this.onAction().subscribe(()=>this.dismiss()),hn._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(hn){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(hn,St))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Ut=(()=>{class Ot{constructor(xt,rn){this.snackBarRef=xt,this.data=rn}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return Ot.\u0275fac=function(xt){return new(xt||Ot)(re.Y36(Gt),re.Y36(Ze))},Ot.\u0275cmp=re.Xpm({type:Ot,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(xt,rn){1&xt&&(re.TgZ(0,"span"),re._uU(1),re.qZA(),re.YNc(2,vn,3,1,"div",0)),2&xt&&(re.xp6(1),re.Oqu(rn.data.message),re.xp6(1),re.Q6J("ngIf",rn.hasAction))},directives:[Ie.lW,U.O5],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Ot})();const Rt={snackBarState:(0,te.X$)("state",[(0,te.SB)("void, hidden",(0,te.oB)({transform:"scale(0.8)",opacity:0})),(0,te.SB)("visible",(0,te.oB)({transform:"scale(1)",opacity:1})),(0,te.eR)("* => visible",(0,te.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,te.eR)("* => void, * => hidden",(0,te.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,te.oB)({opacity:0})))])};let Yt=(()=>{class Ot extends S.en{constructor(xt,rn,fn,Fn,Sn){super(),this._ngZone=xt,this._elementRef=rn,this._changeDetectorRef=fn,this._platform=Fn,this.snackBarConfig=Sn,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Ce.x,this._onExit=new Ce.x,this._onEnter=new Ce.x,this._animationState="void",this.attachDomPortal=Zn=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(Zn)),this._live="assertive"!==Sn.politeness||Sn.announcementMessage?"off"===Sn.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(xt){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(xt)}attachTemplatePortal(xt){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(xt)}onAnimationEnd(xt){const{fromState:rn,toState:fn}=xt;if(("void"===fn&&"void"!==rn||"hidden"===fn)&&this._completeExit(),"visible"===fn){const Fn=this._onEnter;this._ngZone.run(()=>{Fn.next(),Fn.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,oe.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const xt=this._elementRef.nativeElement,rn=this.snackBarConfig.panelClass;rn&&(Array.isArray(rn)?rn.forEach(fn=>xt.classList.add(fn)):xt.classList.add(rn)),"center"===this.snackBarConfig.horizontalPosition&&xt.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&xt.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const xt=this._elementRef.nativeElement.querySelector("[aria-hidden]"),rn=this._elementRef.nativeElement.querySelector("[aria-live]");if(xt&&rn){let fn=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&xt.contains(document.activeElement)&&(fn=document.activeElement),xt.removeAttribute("aria-hidden"),rn.appendChild(xt),null==fn||fn.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return Ot.\u0275fac=function(xt){return new(xt||Ot)(re.Y36(re.R0b),re.Y36(re.SBq),re.Y36(re.sBO),re.Y36(se.t4),re.Y36(ft))},Ot.\u0275cmp=re.Xpm({type:Ot,selectors:[["snack-bar-container"]],viewQuery:function(xt,rn){if(1&xt&&re.Gf(S.Pl,7),2&xt){let fn;re.iGM(fn=re.CRH())&&(rn._portalOutlet=fn.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(xt,rn){1&xt&&re.WFA("@state.done",function(Fn){return rn.onAnimationEnd(Fn)}),2&xt&&re.d8E("@state",rn._animationState)},features:[re.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(xt,rn){1&xt&&(re.TgZ(0,"div",0),re.YNc(1,xn,0,0,"ng-template",1),re.qZA(),re._UZ(2,"div")),2&xt&&(re.xp6(2),re.uIk("aria-live",rn._live)("role",rn._role))},directives:[S.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Rt.snackBarState]}}),Ot})(),Nn=(()=>{class Ot{}return Ot.\u0275fac=function(xt){return new(xt||Ot)},Ot.\u0275mod=re.oAB({type:Ot}),Ot.\u0275inj=re.cJS({imports:[[g.U8,S.eL,U.ez,Ie.ot,de.BQ],de.BQ]}),Ot})();const jn=new re.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function nn(){return new ft}});let wn=(()=>{class Ot{constructor(xt,rn,fn,Fn,Sn,Zn){this._overlay=xt,this._live=rn,this._injector=fn,this._breakpointObserver=Fn,this._parentSnackBar=Sn,this._defaultConfig=Zn,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Ut,this.snackBarContainerComponent=Yt,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const xt=this._parentSnackBar;return xt?xt._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(xt){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=xt:this._snackBarRefAtThisLevel=xt}openFromComponent(xt,rn){return this._attach(xt,rn)}openFromTemplate(xt,rn){return this._attach(xt,rn)}open(xt,rn="",fn){const Fn=Object.assign(Object.assign({},this._defaultConfig),fn);return Fn.data={message:xt,action:rn},Fn.announcementMessage===xt&&(Fn.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,Fn)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(xt,rn){const Fn=re.zs3.create({parent:rn&&rn.viewContainerRef&&rn.viewContainerRef.injector||this._injector,providers:[{provide:ft,useValue:rn}]}),Sn=new S.C5(this.snackBarContainerComponent,rn.viewContainerRef,Fn),Zn=xt.attach(Sn);return Zn.instance.snackBarConfig=rn,Zn.instance}_attach(xt,rn){const fn=Object.assign(Object.assign(Object.assign({},new ft),this._defaultConfig),rn),Fn=this._createOverlay(fn),Sn=this._attachSnackBarContainer(Fn,fn),Zn=new Gt(Sn,Fn);if(xt instanceof re.Rgc){const ur=new S.UE(xt,null,{$implicit:fn.data,snackBarRef:Zn});Zn.instance=Sn.attachTemplatePortal(ur)}else{const ur=this._createInjector(fn,Zn),Dr=new S.C5(xt,void 0,ur),mn=Sn.attachComponentPortal(Dr);Zn.instance=mn.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe((0,ce.R)(Fn.detachments())).subscribe(ur=>{Fn.overlayElement.classList.toggle(this.handsetCssClass,ur.matches)}),fn.announcementMessage&&Sn._onAnnounce.subscribe(()=>{this._live.announce(fn.announcementMessage,fn.politeness)}),this._animateSnackBar(Zn,fn),this._openedSnackBarRef=Zn,this._openedSnackBarRef}_animateSnackBar(xt,rn){xt.afterDismissed().subscribe(()=>{this._openedSnackBarRef==xt&&(this._openedSnackBarRef=null),rn.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{xt.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):xt.containerInstance.enter(),rn.duration&&rn.duration>0&&xt.afterOpened().subscribe(()=>xt._dismissAfter(rn.duration))}_createOverlay(xt){const rn=new g.X_;rn.direction=xt.direction;let fn=this._overlay.position().global();const Fn="rtl"===xt.direction,Sn="left"===xt.horizontalPosition||"start"===xt.horizontalPosition&&!Fn||"end"===xt.horizontalPosition&&Fn,Zn=!Sn&&"center"!==xt.horizontalPosition;return Sn?fn.left("0"):Zn?fn.right("0"):fn.centerHorizontally(),"top"===xt.verticalPosition?fn.top("0"):fn.bottom("0"),rn.positionStrategy=fn,this._overlay.create(rn)}_createInjector(xt,rn){return re.zs3.create({parent:xt&&xt.viewContainerRef&&xt.viewContainerRef.injector||this._injector,providers:[{provide:Gt,useValue:rn},{provide:Ze,useValue:xt.data}]})}}return Ot.\u0275fac=function(xt){return new(xt||Ot)(re.LFG(g.aV),re.LFG(tn.Kd),re.LFG(re.zs3),re.LFG(gt),re.LFG(Ot,12),re.LFG(jn))},Ot.\u0275prov=re.Yz7({token:Ot,factory:Ot.\u0275fac,providedIn:Nn}),Ot})()},6360:(Je,Te,b)=>{b.d(Te,{Qb:()=>Rr,PW:()=>ii});var g=b(5e3),S=b(2313),U=b(1777);const re=!1;function Ie(ne){return new g.vHH(3e3,re)}function wn(){return"undefined"!=typeof window&&void 0!==window.document}function Ot(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function hn(ne){switch(ne.length){case 0:return new U.ZN;case 1:return ne[0];default:return new U.ZE(ne)}}function xt(ne,E,C,B,le={},Oe={}){const Ye=[],nt=[];let Dt=-1,Qt=null;if(B.forEach(cn=>{const ir=cn.offset,or=ir==Dt,Jr=or&&Qt||{};Object.keys(cn).forEach(Hn=>{let Mr=Hn,Di=cn[Hn];if("offset"!==Hn)switch(Mr=E.normalizePropertyName(Mr,Ye),Di){case U.k1:Di=le[Hn];break;case U.l3:Di=Oe[Hn];break;default:Di=E.normalizeStyleValue(Hn,Mr,Di,Ye)}Jr[Mr]=Di}),or||nt.push(Jr),Qt=Jr,Dt=ir}),Ye.length)throw function vn(ne){return new g.vHH(3502,re)}();return nt}function rn(ne,E,C,B){switch(E){case"start":ne.onStart(()=>B(C&&fn(C,"start",ne)));break;case"done":ne.onDone(()=>B(C&&fn(C,"done",ne)));break;case"destroy":ne.onDestroy(()=>B(C&&fn(C,"destroy",ne)))}}function fn(ne,E,C){const B=C.totalTime,Oe=Fn(ne.element,ne.triggerName,ne.fromState,ne.toState,E||ne.phaseName,null==B?ne.totalTime:B,!!C.disabled),Ye=ne._data;return null!=Ye&&(Oe._data=Ye),Oe}function Fn(ne,E,C,B,le="",Oe=0,Ye){return{element:ne,triggerName:E,fromState:C,toState:B,phaseName:le,totalTime:Oe,disabled:!!Ye}}function Sn(ne,E,C){let B;return ne instanceof Map?(B=ne.get(E),B||ne.set(E,B=C)):(B=ne[E],B||(B=ne[E]=C)),B}function Zn(ne){const E=ne.indexOf(":");return[ne.substring(1,E),ne.substr(E+1)]}let ur=(ne,E)=>!1,Dr=(ne,E,C)=>[],mn=null;function Tn(ne){const E=ne.parentNode||ne.host;return E===mn?null:E}(Ot()||"undefined"!=typeof Element)&&(wn()?(mn=(()=>document.documentElement)(),ur=(ne,E)=>{for(;E;){if(E===ne)return!0;E=Tn(E)}return!1}):ur=(ne,E)=>ne.contains(E),Dr=(ne,E,C)=>{if(C)return Array.from(ne.querySelectorAll(E));const B=ne.querySelector(E);return B?[B]:[]});let rt=null,Y=!1;function J(ne){rt||(rt=function Re(){return"undefined"!=typeof document?document.body:null}()||{},Y=!!rt.style&&"WebkitAppearance"in rt.style);let E=!0;return rt.style&&!function qn(ne){return"ebkit"==ne.substring(1,6)}(ne)&&(E=ne in rt.style,!E&&Y&&(E="Webkit"+ne.charAt(0).toUpperCase()+ne.substr(1)in rt.style)),E}const Xe=ur,yt=Dr;let Zt=(()=>{class ne{validateStyleProperty(C){return J(C)}matchesElement(C,B){return!1}containsElement(C,B){return Xe(C,B)}getParentElement(C){return Tn(C)}query(C,B,le){return yt(C,B,le)}computeStyle(C,B,le){return le||""}animate(C,B,le,Oe,Ye,nt=[],Dt){return new U.ZN(le,Oe)}}return ne.\u0275fac=function(C){return new(C||ne)},ne.\u0275prov=g.Yz7({token:ne,factory:ne.\u0275fac}),ne})(),zt=(()=>{class ne{}return ne.NOOP=new Zt,ne})();const gr="ng-enter",lr="ng-leave",tr="ng-trigger",pt=".ng-trigger",dt="ng-animating",Ue=".ng-animating";function It(ne){if("number"==typeof ne)return ne;const E=ne.match(/^(-?[\.\d]+)(m?s)/);return!E||E.length<2?0:he(parseFloat(E[1]),E[2])}function he(ne,E){return"s"===E?1e3*ne:ne}function N(ne,E,C){return ne.hasOwnProperty("duration")?ne:function L(ne,E,C){let le,Oe=0,Ye="";if("string"==typeof ne){const nt=ne.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===nt)return E.push(Ie()),{duration:0,delay:0,easing:""};le=he(parseFloat(nt[1]),nt[2]);const Dt=nt[3];null!=Dt&&(Oe=he(parseFloat(Dt),nt[4]));const Qt=nt[5];Qt&&(Ye=Qt)}else le=ne;if(!C){let nt=!1,Dt=E.length;le<0&&(E.push(function Ce(){return new g.vHH(3100,re)}()),nt=!0),Oe<0&&(E.push(function oe(){return new g.vHH(3101,re)}()),nt=!0),nt&&E.splice(Dt,0,Ie())}return{duration:le,delay:Oe,easing:Ye}}(ne,E,C)}function q(ne,E={}){return Object.keys(ne).forEach(C=>{E[C]=ne[C]}),E}function Fe(ne,E,C={}){if(E)for(let B in ne)C[B]=ne[B];else q(ne,C);return C}function ht(ne,E,C){return C?E+":"+C+";":""}function we(ne){let E="";for(let C=0;C<ne.style.length;C++){const B=ne.style.item(C);E+=ht(0,B,ne.style.getPropertyValue(B))}for(const C in ne.style)ne.style.hasOwnProperty(C)&&!C.startsWith("_")&&(E+=ht(0,Ln(C),ne.style[C]));ne.setAttribute("style",E)}function xe(ne,E,C){ne.style&&(Object.keys(E).forEach(B=>{const le=Dn(B);C&&!C.hasOwnProperty(B)&&(C[B]=ne.style[le]),ne.style[le]=E[B]}),Ot()&&we(ne))}function ue(ne,E){ne.style&&(Object.keys(E).forEach(C=>{const B=Dn(C);ne.style[B]=""}),Ot()&&we(ne))}function be(ne){return Array.isArray(ne)?1==ne.length?ne[0]:(0,U.vP)(ne):ne}const ae=new RegExp("{{\\s*(.+?)\\s*}}","g");function _e(ne){let E=[];if("string"==typeof ne){let C;for(;C=ae.exec(ne);)E.push(C[1]);ae.lastIndex=0}return E}function Ve(ne,E,C){const B=ne.toString(),le=B.replace(ae,(Oe,Ye)=>{let nt=E[Ye];return E.hasOwnProperty(Ye)||(C.push(function te(ne){return new g.vHH(3003,re)}()),nt=""),nt.toString()});return le==B?ne:le}function Tt(ne){const E=[];let C=ne.next();for(;!C.done;)E.push(C.value),C=ne.next();return E}const un=/-+([a-z0-9])/g;function Dn(ne){return ne.replace(un,(...E)=>E[1].toUpperCase())}function Ln(ne){return ne.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xr(ne,E,C){switch(E.type){case 7:return ne.visitTrigger(E,C);case 0:return ne.visitState(E,C);case 1:return ne.visitTransition(E,C);case 2:return ne.visitSequence(E,C);case 3:return ne.visitGroup(E,C);case 4:return ne.visitAnimate(E,C);case 5:return ne.visitKeyframes(E,C);case 6:return ne.visitStyle(E,C);case 8:return ne.visitReference(E,C);case 9:return ne.visitAnimateChild(E,C);case 10:return ne.visitAnimateRef(E,C);case 11:return ne.visitQuery(E,C);case 12:return ne.visitStagger(E,C);default:throw function se(ne){return new g.vHH(3004,re)}()}}function ai(ne,E){return window.getComputedStyle(ne)[E]}function pi(ne,E){const C=[];return"string"==typeof ne?ne.split(/\s*,\s*/).forEach(B=>function Oi(ne,E,C){if(":"==ne[0]){const Dt=function Nr(ne,E){switch(ne){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(C,B)=>parseFloat(B)>parseFloat(C);case":decrement":return(C,B)=>parseFloat(B)<parseFloat(C);default:return E.push(function gt(ne){return new g.vHH(3016,re)}()),"* => *"}}(ne,C);if("function"==typeof Dt)return void E.push(Dt);ne=Dt}const B=ne.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==B||B.length<4)return C.push(function Ne(ne){return new g.vHH(3015,re)}()),E;const le=B[1],Oe=B[2],Ye=B[3];E.push(hr(le,Ye));"<"==Oe[0]&&!("*"==le&&"*"==Ye)&&E.push(hr(Ye,le))}(B,C,E)):C.push(ne),C}const Pi=new Set(["true","1"]),li=new Set(["false","0"]);function hr(ne,E){const C=Pi.has(ne)||li.has(ne),B=Pi.has(E)||li.has(E);return(le,Oe)=>{let Ye="*"==ne||ne==le,nt="*"==E||E==Oe;return!Ye&&C&&"boolean"==typeof le&&(Ye=le?Pi.has(ne):li.has(ne)),!nt&&B&&"boolean"==typeof Oe&&(nt=Oe?Pi.has(E):li.has(E)),Ye&&nt}}const Wr=new RegExp("s*:selfs*,?","g");function Yi(ne,E,C,B){return new di(ne).build(E,C,B)}class di{constructor(E){this._driver=E}build(E,C,B){const le=new Ht(C);this._resetContextStyleTimingState(le);const Oe=xr(this,be(E),le);return le.unsupportedCSSPropertiesFound.size&&le.unsupportedCSSPropertiesFound.keys(),Oe}_resetContextStyleTimingState(E){E.currentQuerySelector="",E.collectedStyles={},E.collectedStyles[""]={},E.currentTime=0}visitTrigger(E,C){let B=C.queryCount=0,le=C.depCount=0;const Oe=[],Ye=[];return"@"==E.name.charAt(0)&&C.errors.push(function qe(){return new g.vHH(3006,re)}()),E.definitions.forEach(nt=>{if(this._resetContextStyleTimingState(C),0==nt.type){const Dt=nt,Qt=Dt.name;Qt.toString().split(/\s*,\s*/).forEach(cn=>{Dt.name=cn,Oe.push(this.visitState(Dt,C))}),Dt.name=Qt}else if(1==nt.type){const Dt=this.visitTransition(nt,C);B+=Dt.queryCount,le+=Dt.depCount,Ye.push(Dt)}else C.errors.push(function it(){return new g.vHH(3007,re)}())}),{type:7,name:E.name,states:Oe,transitions:Ye,queryCount:B,depCount:le,options:null}}visitState(E,C){const B=this.visitStyle(E.styles,C),le=E.options&&E.options.params||null;if(B.containsDynamicStyles){const Oe=new Set,Ye=le||{};B.styles.forEach(nt=>{if(Bt(nt)){const Dt=nt;Object.keys(Dt).forEach(Qt=>{_e(Dt[Qt]).forEach(cn=>{Ye.hasOwnProperty(cn)||Oe.add(cn)})})}}),Oe.size&&(Tt(Oe.values()),C.errors.push(function ut(ne,E){return new g.vHH(3008,re)}()))}return{type:0,name:E.name,style:B,options:le?{params:le}:null}}visitTransition(E,C){C.queryCount=0,C.depCount=0;const B=xr(this,be(E.animation),C);return{type:1,matchers:pi(E.expr,C.errors),animation:B,queryCount:C.queryCount,depCount:C.depCount,options:_n(E.options)}}visitSequence(E,C){return{type:2,steps:E.steps.map(B=>xr(this,B,C)),options:_n(E.options)}}visitGroup(E,C){const B=C.currentTime;let le=0;const Oe=E.steps.map(Ye=>{C.currentTime=B;const nt=xr(this,Ye,C);return le=Math.max(le,C.currentTime),nt});return C.currentTime=le,{type:3,steps:Oe,options:_n(E.options)}}visitAnimate(E,C){const B=function An(ne,E){let C=null;if(ne.hasOwnProperty("duration"))C=ne;else if("number"==typeof ne)return _r(N(ne,E).duration,0,"");const B=ne;if(B.split(/\s+/).some(Oe=>"{"==Oe.charAt(0)&&"{"==Oe.charAt(1))){const Oe=_r(0,0,"");return Oe.dynamic=!0,Oe.strValue=B,Oe}return C=C||N(B,E),_r(C.duration,C.delay,C.easing)}(E.timings,C.errors);C.currentAnimateTimings=B;let le,Oe=E.styles?E.styles:(0,U.oB)({});if(5==Oe.type)le=this.visitKeyframes(Oe,C);else{let Ye=E.styles,nt=!1;if(!Ye){nt=!0;const Qt={};B.easing&&(Qt.easing=B.easing),Ye=(0,U.oB)(Qt)}C.currentTime+=B.duration+B.delay;const Dt=this.visitStyle(Ye,C);Dt.isEmptyStep=nt,le=Dt}return C.currentAnimateTimings=null,{type:4,timings:B,style:le,options:null}}visitStyle(E,C){const B=this._makeStyleAst(E,C);return this._validateStyleAst(B,C),B}_makeStyleAst(E,C){const B=[];Array.isArray(E.styles)?E.styles.forEach(Ye=>{"string"==typeof Ye?Ye==U.l3?B.push(Ye):C.errors.push(function Et(ne){return new g.vHH(3002,re)}()):B.push(Ye)}):B.push(E.styles);let le=!1,Oe=null;return B.forEach(Ye=>{if(Bt(Ye)){const nt=Ye,Dt=nt.easing;if(Dt&&(Oe=Dt,delete nt.easing),!le)for(let Qt in nt)if(nt[Qt].toString().indexOf("{{")>=0){le=!0;break}}}),{type:6,styles:B,easing:Oe,offset:E.offset,containsDynamicStyles:le,options:null}}_validateStyleAst(E,C){const B=C.currentAnimateTimings;let le=C.currentTime,Oe=C.currentTime;B&&Oe>0&&(Oe-=B.duration+B.delay),E.styles.forEach(Ye=>{"string"!=typeof Ye&&Object.keys(Ye).forEach(nt=>{if(!this._driver.validateStyleProperty(nt))return delete Ye[nt],void C.unsupportedCSSPropertiesFound.add(nt);const Dt=C.collectedStyles[C.currentQuerySelector],Qt=Dt[nt];let cn=!0;Qt&&(Oe!=le&&Oe>=Qt.startTime&&le<=Qt.endTime&&(C.errors.push(function at(ne,E,C,B,le){return new g.vHH(3010,re)}()),cn=!1),Oe=Qt.startTime),cn&&(Dt[nt]={startTime:Oe,endTime:le}),C.options&&function $(ne,E,C){const B=E.params||{},le=_e(ne);le.length&&le.forEach(Oe=>{B.hasOwnProperty(Oe)||C.push(function ce(ne){return new g.vHH(3001,re)}())})}(Ye[nt],C.options,C.errors)})})}visitKeyframes(E,C){const B={type:5,styles:[],options:null};if(!C.currentAnimateTimings)return C.errors.push(function He(){return new g.vHH(3011,re)}()),B;let Oe=0;const Ye=[];let nt=!1,Dt=!1,Qt=0;const cn=E.steps.map(Bi=>{const qi=this._makeStyleAst(Bi,C);let as=null!=qi.offset?qi.offset:function ct(ne){if("string"==typeof ne)return null;let E=null;if(Array.isArray(ne))ne.forEach(C=>{if(Bt(C)&&C.hasOwnProperty("offset")){const B=C;E=parseFloat(B.offset),delete B.offset}});else if(Bt(ne)&&ne.hasOwnProperty("offset")){const C=ne;E=parseFloat(C.offset),delete C.offset}return E}(qi.styles),si=0;return null!=as&&(Oe++,si=qi.offset=as),Dt=Dt||si<0||si>1,nt=nt||si<Qt,Qt=si,Ye.push(si),qi});Dt&&C.errors.push(function Mt(){return new g.vHH(3012,re)}()),nt&&C.errors.push(function ze(){return new g.vHH(3200,re)}());const ir=E.steps.length;let or=0;Oe>0&&Oe<ir?C.errors.push(function Be(){return new g.vHH(3202,re)}()):0==Oe&&(or=1/(ir-1));const Jr=ir-1,Hn=C.currentTime,Mr=C.currentAnimateTimings,Di=Mr.duration;return cn.forEach((Bi,qi)=>{const as=or>0?qi==Jr?1:or*qi:Ye[qi],si=as*Di;C.currentTime=Hn+Mr.delay+si,Mr.duration=si,this._validateStyleAst(Bi,C),Bi.offset=as,B.styles.push(Bi)}),B}visitReference(E,C){return{type:8,animation:xr(this,be(E.animation),C),options:_n(E.options)}}visitAnimateChild(E,C){return C.depCount++,{type:9,options:_n(E.options)}}visitAnimateRef(E,C){return{type:10,animation:this.visitReference(E.animation,C),options:_n(E.options)}}visitQuery(E,C){const B=C.currentQuerySelector,le=E.options||{};C.queryCount++,C.currentQuery=E;const[Oe,Ye]=function Gi(ne){const E=!!ne.split(/\s*,\s*/).find(C=>":self"==C);return E&&(ne=ne.replace(Wr,"")),ne=ne.replace(/@\*/g,pt).replace(/@\w+/g,C=>pt+"-"+C.substr(1)).replace(/:animating/g,Ue),[ne,E]}(E.selector);C.currentQuerySelector=B.length?B+" "+Oe:Oe,Sn(C.collectedStyles,C.currentQuerySelector,{});const nt=xr(this,be(E.animation),C);return C.currentQuery=null,C.currentQuerySelector=B,{type:11,selector:Oe,limit:le.limit||0,optional:!!le.optional,includeSelf:Ye,animation:nt,originalSelector:E.selector,options:_n(E.options)}}visitStagger(E,C){C.currentQuery||C.errors.push(function Ge(){return new g.vHH(3013,re)}());const B="full"===E.timings?{duration:0,delay:0,easing:"full"}:N(E.timings,C.errors,!0);return{type:12,animation:xr(this,be(E.animation),C),timings:B,options:null}}}class Ht{constructor(E){this.errors=E,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Bt(ne){return!Array.isArray(ne)&&"object"==typeof ne}function _n(ne){return ne?(ne=q(ne)).params&&(ne.params=function Ke(ne){return ne?q(ne):null}(ne.params)):ne={},ne}function _r(ne,E,C){return{duration:ne,delay:E,easing:C}}function Ei(ne,E,C,B,le,Oe,Ye=null,nt=!1){return{type:1,element:ne,keyframes:E,preStyleProps:C,postStyleProps:B,duration:le,delay:Oe,totalTime:le+Oe,easing:Ye,subTimeline:nt}}class ti{constructor(){this._map=new Map}get(E){return this._map.get(E)||[]}append(E,C){let B=this._map.get(E);B||this._map.set(E,B=[]),B.push(...C)}has(E){return this._map.has(E)}clear(){this._map.clear()}}const Qi=new RegExp(":enter","g"),xs=new RegExp(":leave","g");function Ii(ne,E,C,B,le,Oe={},Ye={},nt,Dt,Qt=[]){return(new Ts).buildKeyframes(ne,E,C,B,le,Oe,Ye,nt,Dt,Qt)}class Ts{buildKeyframes(E,C,B,le,Oe,Ye,nt,Dt,Qt,cn=[]){Qt=Qt||new ti;const ir=new mt(E,C,Qt,le,Oe,cn,[]);ir.options=Dt,ir.currentTimeline.setStyles([Ye],null,ir.errors,Dt),xr(this,B,ir);const or=ir.timelines.filter(Jr=>Jr.containsAnimation());if(Object.keys(nt).length){let Jr;for(let Hn=or.length-1;Hn>=0;Hn--){const Mr=or[Hn];if(Mr.element===C){Jr=Mr;break}}Jr&&!Jr.allowOnlyTimelineStyles()&&Jr.setStyles([nt],null,ir.errors,Dt)}return or.length?or.map(Jr=>Jr.buildKeyframes()):[Ei(C,[],[],[],0,0,"",!1)]}visitTrigger(E,C){}visitState(E,C){}visitTransition(E,C){}visitAnimateChild(E,C){const B=C.subInstructions.get(C.element);if(B){const le=C.createSubContext(E.options),Oe=C.currentTimeline.currentTime,Ye=this._visitSubInstructions(B,le,le.options);Oe!=Ye&&C.transformIntoNewTimeline(Ye)}C.previousNode=E}visitAnimateRef(E,C){const B=C.createSubContext(E.options);B.transformIntoNewTimeline(),this.visitReference(E.animation,B),C.transformIntoNewTimeline(B.currentTimeline.currentTime),C.previousNode=E}_visitSubInstructions(E,C,B){let Oe=C.currentTimeline.currentTime;const Ye=null!=B.duration?It(B.duration):null,nt=null!=B.delay?It(B.delay):null;return 0!==Ye&&E.forEach(Dt=>{const Qt=C.appendInstructionToTimeline(Dt,Ye,nt);Oe=Math.max(Oe,Qt.duration+Qt.delay)}),Oe}visitReference(E,C){C.updateOptions(E.options,!0),xr(this,E.animation,C),C.previousNode=E}visitSequence(E,C){const B=C.subContextCount;let le=C;const Oe=E.options;if(Oe&&(Oe.params||Oe.delay)&&(le=C.createSubContext(Oe),le.transformIntoNewTimeline(),null!=Oe.delay)){6==le.previousNode.type&&(le.currentTimeline.snapshotCurrentStyles(),le.previousNode=wt);const Ye=It(Oe.delay);le.delayNextStep(Ye)}E.steps.length&&(E.steps.forEach(Ye=>xr(this,Ye,le)),le.currentTimeline.applyStylesToKeyframe(),le.subContextCount>B&&le.transformIntoNewTimeline()),C.previousNode=E}visitGroup(E,C){const B=[];let le=C.currentTimeline.currentTime;const Oe=E.options&&E.options.delay?It(E.options.delay):0;E.steps.forEach(Ye=>{const nt=C.createSubContext(E.options);Oe&&nt.delayNextStep(Oe),xr(this,Ye,nt),le=Math.max(le,nt.currentTimeline.currentTime),B.push(nt.currentTimeline)}),B.forEach(Ye=>C.currentTimeline.mergeTimelineCollectedStyles(Ye)),C.transformIntoNewTimeline(le),C.previousNode=E}_visitTiming(E,C){if(E.dynamic){const B=E.strValue;return N(C.params?Ve(B,C.params,C.errors):B,C.errors)}return{duration:E.duration,delay:E.delay,easing:E.easing}}visitAnimate(E,C){const B=C.currentAnimateTimings=this._visitTiming(E.timings,C),le=C.currentTimeline;B.delay&&(C.incrementTime(B.delay),le.snapshotCurrentStyles());const Oe=E.style;5==Oe.type?this.visitKeyframes(Oe,C):(C.incrementTime(B.duration),this.visitStyle(Oe,C),le.applyStylesToKeyframe()),C.currentAnimateTimings=null,C.previousNode=E}visitStyle(E,C){const B=C.currentTimeline,le=C.currentAnimateTimings;!le&&B.getCurrentStyleProperties().length&&B.forwardFrame();const Oe=le&&le.easing||E.easing;E.isEmptyStep?B.applyEmptyStep(Oe):B.setStyles(E.styles,Oe,C.errors,C.options),C.previousNode=E}visitKeyframes(E,C){const B=C.currentAnimateTimings,le=C.currentTimeline.duration,Oe=B.duration,nt=C.createSubContext().currentTimeline;nt.easing=B.easing,E.styles.forEach(Dt=>{nt.forwardTime((Dt.offset||0)*Oe),nt.setStyles(Dt.styles,Dt.easing,C.errors,C.options),nt.applyStylesToKeyframe()}),C.currentTimeline.mergeTimelineCollectedStyles(nt),C.transformIntoNewTimeline(le+Oe),C.previousNode=E}visitQuery(E,C){const B=C.currentTimeline.currentTime,le=E.options||{},Oe=le.delay?It(le.delay):0;Oe&&(6===C.previousNode.type||0==B&&C.currentTimeline.getCurrentStyleProperties().length)&&(C.currentTimeline.snapshotCurrentStyles(),C.previousNode=wt);let Ye=B;const nt=C.invokeQuery(E.selector,E.originalSelector,E.limit,E.includeSelf,!!le.optional,C.errors);C.currentQueryTotal=nt.length;let Dt=null;nt.forEach((Qt,cn)=>{C.currentQueryIndex=cn;const ir=C.createSubContext(E.options,Qt);Oe&&ir.delayNextStep(Oe),Qt===C.element&&(Dt=ir.currentTimeline),xr(this,E.animation,ir),ir.currentTimeline.applyStylesToKeyframe(),Ye=Math.max(Ye,ir.currentTimeline.currentTime)}),C.currentQueryIndex=0,C.currentQueryTotal=0,C.transformIntoNewTimeline(Ye),Dt&&(C.currentTimeline.mergeTimelineCollectedStyles(Dt),C.currentTimeline.snapshotCurrentStyles()),C.previousNode=E}visitStagger(E,C){const B=C.parentContext,le=C.currentTimeline,Oe=E.timings,Ye=Math.abs(Oe.duration),nt=Ye*(C.currentQueryTotal-1);let Dt=Ye*C.currentQueryIndex;switch(Oe.duration<0?"reverse":Oe.easing){case"reverse":Dt=nt-Dt;break;case"full":Dt=B.currentStaggerTime}const cn=C.currentTimeline;Dt&&cn.delayNextStep(Dt);const ir=cn.currentTime;xr(this,E.animation,C),C.previousNode=E,B.currentStaggerTime=le.currentTime-ir+(le.startTime-B.currentTimeline.startTime)}}const wt={};class mt{constructor(E,C,B,le,Oe,Ye,nt,Dt){this._driver=E,this.element=C,this.subInstructions=B,this._enterClassName=le,this._leaveClassName=Oe,this.errors=Ye,this.timelines=nt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wt,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Dt||new Pt(this._driver,C,0),nt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(E,C){if(!E)return;const B=E;let le=this.options;null!=B.duration&&(le.duration=It(B.duration)),null!=B.delay&&(le.delay=It(B.delay));const Oe=B.params;if(Oe){let Ye=le.params;Ye||(Ye=this.options.params={}),Object.keys(Oe).forEach(nt=>{(!C||!Ye.hasOwnProperty(nt))&&(Ye[nt]=Ve(Oe[nt],Ye,this.errors))})}}_copyOptions(){const E={};if(this.options){const C=this.options.params;if(C){const B=E.params={};Object.keys(C).forEach(le=>{B[le]=C[le]})}}return E}createSubContext(E=null,C,B){const le=C||this.element,Oe=new mt(this._driver,le,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(le,B||0));return Oe.previousNode=this.previousNode,Oe.currentAnimateTimings=this.currentAnimateTimings,Oe.options=this._copyOptions(),Oe.updateOptions(E),Oe.currentQueryIndex=this.currentQueryIndex,Oe.currentQueryTotal=this.currentQueryTotal,Oe.parentContext=this,this.subContextCount++,Oe}transformIntoNewTimeline(E){return this.previousNode=wt,this.currentTimeline=this.currentTimeline.fork(this.element,E),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(E,C,B){const le={duration:null!=C?C:E.duration,delay:this.currentTimeline.currentTime+(null!=B?B:0)+E.delay,easing:""},Oe=new on(this._driver,E.element,E.keyframes,E.preStyleProps,E.postStyleProps,le,E.stretchStartingKeyframe);return this.timelines.push(Oe),le}incrementTime(E){this.currentTimeline.forwardTime(this.currentTimeline.duration+E)}delayNextStep(E){E>0&&this.currentTimeline.delayNextStep(E)}invokeQuery(E,C,B,le,Oe,Ye){let nt=[];if(le&&nt.push(this.element),E.length>0){E=(E=E.replace(Qi,"."+this._enterClassName)).replace(xs,"."+this._leaveClassName);let Qt=this._driver.query(this.element,E,1!=B);0!==B&&(Qt=B<0?Qt.slice(Qt.length+B,Qt.length):Qt.slice(0,B)),nt.push(...Qt)}return!Oe&&0==nt.length&&Ye.push(function Qe(ne){return new g.vHH(3014,re)}()),nt}}class Pt{constructor(E,C,B,le){this._driver=E,this.element=C,this.startTime=B,this._elementTimelineStylesLookup=le,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(C),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(C,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(E){const C=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||C?(this.forwardTime(this.currentTime+E),C&&this.snapshotCurrentStyles()):this.startTime+=E}fork(E,C){return this.applyStylesToKeyframe(),new Pt(this._driver,E,C||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(E){this.applyStylesToKeyframe(),this.duration=E,this._loadKeyframe()}_updateStyle(E,C){this._localTimelineStyles[E]=C,this._globalTimelineStyles[E]=C,this._styleSummary[E]={time:this.currentTime,value:C}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(E){E&&(this._previousKeyframe.easing=E),Object.keys(this._globalTimelineStyles).forEach(C=>{this._backFill[C]=this._globalTimelineStyles[C]||U.l3,this._currentKeyframe[C]=U.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(E,C,B,le){C&&(this._previousKeyframe.easing=C);const Oe=le&&le.params||{},Ye=function Yn(ne,E){const C={};let B;return ne.forEach(le=>{"*"===le?(B=B||Object.keys(E),B.forEach(Oe=>{C[Oe]=U.l3})):Fe(le,!1,C)}),C}(E,this._globalTimelineStyles);Object.keys(Ye).forEach(nt=>{const Dt=Ve(Ye[nt],Oe,B);this._pendingStyles[nt]=Dt,this._localTimelineStyles.hasOwnProperty(nt)||(this._backFill[nt]=this._globalTimelineStyles.hasOwnProperty(nt)?this._globalTimelineStyles[nt]:U.l3),this._updateStyle(nt,Dt)})}applyStylesToKeyframe(){const E=this._pendingStyles,C=Object.keys(E);0!=C.length&&(this._pendingStyles={},C.forEach(B=>{this._currentKeyframe[B]=E[B]}),Object.keys(this._localTimelineStyles).forEach(B=>{this._currentKeyframe.hasOwnProperty(B)||(this._currentKeyframe[B]=this._localTimelineStyles[B])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(E=>{const C=this._localTimelineStyles[E];this._pendingStyles[E]=C,this._updateStyle(E,C)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const E=[];for(let C in this._currentKeyframe)E.push(C);return E}mergeTimelineCollectedStyles(E){Object.keys(E._styleSummary).forEach(C=>{const B=this._styleSummary[C],le=E._styleSummary[C];(!B||le.time>B.time)&&this._updateStyle(C,le.value)})}buildKeyframes(){this.applyStylesToKeyframe();const E=new Set,C=new Set,B=1===this._keyframes.size&&0===this.duration;let le=[];this._keyframes.forEach((nt,Dt)=>{const Qt=Fe(nt,!0);Object.keys(Qt).forEach(cn=>{const ir=Qt[cn];ir==U.k1?E.add(cn):ir==U.l3&&C.add(cn)}),B||(Qt.offset=Dt/this.duration),le.push(Qt)});const Oe=E.size?Tt(E.values()):[],Ye=C.size?Tt(C.values()):[];if(B){const nt=le[0],Dt=q(nt);nt.offset=0,Dt.offset=1,le=[nt,Dt]}return Ei(this.element,le,Oe,Ye,this.duration,this.startTime,this.easing,!1)}}class on extends Pt{constructor(E,C,B,le,Oe,Ye,nt=!1){super(E,C,Ye.delay),this.keyframes=B,this.preStyleProps=le,this.postStyleProps=Oe,this._stretchStartingKeyframe=nt,this.timings={duration:Ye.duration,delay:Ye.delay,easing:Ye.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let E=this.keyframes,{delay:C,duration:B,easing:le}=this.timings;if(this._stretchStartingKeyframe&&C){const Oe=[],Ye=B+C,nt=C/Ye,Dt=Fe(E[0],!1);Dt.offset=0,Oe.push(Dt);const Qt=Fe(E[0],!1);Qt.offset=kn(nt),Oe.push(Qt);const cn=E.length-1;for(let ir=1;ir<=cn;ir++){let or=Fe(E[ir],!1);or.offset=kn((C+or.offset*B)/Ye),Oe.push(or)}B=Ye,C=0,le="",E=Oe}return Ei(this.element,E,this.preStyleProps,this.postStyleProps,B,C,le,!0)}}function kn(ne,E=3){const C=Math.pow(10,E-1);return Math.round(ne*C)/C}class bi{}class Ps extends bi{normalizePropertyName(E,C){return Dn(E)}normalizeStyleValue(E,C,B,le){let Oe="";const Ye=B.toString().trim();if(ks[C]&&0!==B&&"0"!==B)if("number"==typeof B)Oe="px";else{const nt=B.match(/^[+-]?[\d\.]+([a-z]*)$/);nt&&0==nt[1].length&&le.push(function ke(ne,E){return new g.vHH(3005,re)}())}return Ye+Oe}}const ks=(()=>function Zi(ne){const E={};return ne.forEach(C=>E[C]=!0),E}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function ma(ne,E,C,B,le,Oe,Ye,nt,Dt,Qt,cn,ir,or){return{type:0,element:ne,triggerName:E,isRemovalTransition:le,fromState:C,fromStyles:Oe,toState:B,toStyles:Ye,timelines:nt,queriedElements:Dt,preStyleProps:Qt,postStyleProps:cn,totalTime:ir,errors:or}}const Ds={};class Ri{constructor(E,C,B){this._triggerName=E,this.ast=C,this._stateStyles=B}match(E,C,B,le){return function oa(ne,E,C,B,le){return ne.some(Oe=>Oe(E,C,B,le))}(this.ast.matchers,E,C,B,le)}buildStyles(E,C,B){const le=this._stateStyles["*"],Oe=this._stateStyles[E],Ye=le?le.buildStyles(C,B):{};return Oe?Oe.buildStyles(C,B):Ye}build(E,C,B,le,Oe,Ye,nt,Dt,Qt,cn){const ir=[],or=this.ast.options&&this.ast.options.params||Ds,Hn=this.buildStyles(B,nt&&nt.params||Ds,ir),Mr=Dt&&Dt.params||Ds,Di=this.buildStyles(le,Mr,ir),Bi=new Set,qi=new Map,as=new Map,si="void"===le,gs={params:Object.assign(Object.assign({},or),Mr)},Si=cn?[]:Ii(E,C,this.ast.animation,Oe,Ye,Hn,Di,gs,Qt,ir);let ls=0;if(Si.forEach(Oo=>{ls=Math.max(Oo.duration+Oo.delay,ls)}),ir.length)return ma(C,this._triggerName,B,le,si,Hn,Di,[],[],qi,as,ls,ir);Si.forEach(Oo=>{const xi=Oo.element,lo=Sn(qi,xi,{});Oo.preStyleProps.forEach(us=>lo[us]=!0);const Gs=Sn(as,xi,{});Oo.postStyleProps.forEach(us=>Gs[us]=!0),xi!==C&&Bi.add(xi)});const ki=Tt(Bi.values());return ma(C,this._triggerName,B,le,si,Hn,Di,Si,ki,qi,as,ls)}}class rs{constructor(E,C,B){this.styles=E,this.defaultParams=C,this.normalizer=B}buildStyles(E,C){const B={},le=q(this.defaultParams);return Object.keys(E).forEach(Oe=>{const Ye=E[Oe];null!=Ye&&(le[Oe]=Ye)}),this.styles.styles.forEach(Oe=>{if("string"!=typeof Oe){const Ye=Oe;Object.keys(Ye).forEach(nt=>{let Dt=Ye[nt];Dt.length>1&&(Dt=Ve(Dt,le,C));const Qt=this.normalizer.normalizePropertyName(nt,C);Dt=this.normalizer.normalizeStyleValue(nt,Qt,Dt,C),B[Qt]=Dt})}}),B}}class Xr{constructor(E,C,B){this.name=E,this.ast=C,this._normalizer=B,this.transitionFactories=[],this.states={},C.states.forEach(le=>{this.states[le.name]=new rs(le.style,le.options&&le.options.params||{},B)}),Ss(this.states,"true","1"),Ss(this.states,"false","0"),C.transitions.forEach(le=>{this.transitionFactories.push(new Ri(E,le,this.states))}),this.fallbackTransition=function Ns(ne,E,C){return new Ri(ne,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ye,nt)=>!0],options:null,queryCount:0,depCount:0},E)}(E,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(E,C,B,le){return this.transitionFactories.find(Ye=>Ye.match(E,C,B,le))||null}matchStyles(E,C,B){return this.fallbackTransition.buildStyles(E,C,B)}}function Ss(ne,E,C){ne.hasOwnProperty(E)?ne.hasOwnProperty(C)||(ne[C]=ne[E]):ne.hasOwnProperty(C)&&(ne[E]=ne[C])}const cs=new ti;class mo{constructor(E,C,B){this.bodyNode=E,this._driver=C,this._normalizer=B,this._animations={},this._playersById={},this.players=[]}register(E,C){const B=[],Oe=Yi(this._driver,C,B,[]);if(B.length)throw function xn(ne){return new g.vHH(3503,re)}();this._animations[E]=Oe}_buildPlayer(E,C,B){const le=E.element,Oe=xt(0,this._normalizer,0,E.keyframes,C,B);return this._driver.animate(le,Oe,E.duration,E.delay,E.easing,[],!0)}create(E,C,B={}){const le=[],Oe=this._animations[E];let Ye;const nt=new Map;if(Oe?(Ye=Ii(this._driver,C,Oe,gr,lr,{},{},B,cs,le),Ye.forEach(cn=>{const ir=Sn(nt,cn.element,{});cn.postStyleProps.forEach(or=>ir[or]=null)})):(le.push(function Ze(){return new g.vHH(3300,re)}()),Ye=[]),le.length)throw function ft(ne){return new g.vHH(3504,re)}();nt.forEach((cn,ir)=>{Object.keys(cn).forEach(or=>{cn[or]=this._driver.computeStyle(ir,or,U.l3)})});const Qt=hn(Ye.map(cn=>{const ir=nt.get(cn.element);return this._buildPlayer(cn,{},ir)}));return this._playersById[E]=Qt,Qt.onDestroy(()=>this.destroy(E)),this.players.push(Qt),Qt}destroy(E){const C=this._getPlayer(E);C.destroy(),delete this._playersById[E];const B=this.players.indexOf(C);B>=0&&this.players.splice(B,1)}_getPlayer(E){const C=this._playersById[E];if(!C)throw function St(ne){return new g.vHH(3301,re)}();return C}listen(E,C,B,le){const Oe=Fn(C,"","","");return rn(this._getPlayer(E),B,Oe,le),()=>{}}command(E,C,B,le){if("register"==B)return void this.register(E,le[0]);if("create"==B)return void this.create(E,C,le[0]||{});const Oe=this._getPlayer(E);switch(B){case"play":Oe.play();break;case"pause":Oe.pause();break;case"reset":Oe.reset();break;case"restart":Oe.restart();break;case"finish":Oe.finish();break;case"init":Oe.init();break;case"setPosition":Oe.setPosition(parseFloat(le[0]));break;case"destroy":this.destroy(E)}}}const Fo="ng-animate-queued",Ro="ng-animate-disabled",Ci=[],is={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Co={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fr="__ng_removed";class Br{constructor(E,C=""){this.namespaceId=C;const B=E&&E.hasOwnProperty("value");if(this.value=function H(ne){return null!=ne?ne:null}(B?E.value:E),B){const Oe=q(E);delete Oe.value,this.options=Oe}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(E){const C=E.params;if(C){const B=this.options.params;Object.keys(C).forEach(le=>{null==B[le]&&(B[le]=C[le])})}}}const Sr="void",os=new Br(Sr);class ci{constructor(E,C,B){this.id=E,this.hostElement=C,this._engine=B,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+E,Kt(C,this._hostClassName)}listen(E,C,B,le){if(!this._triggers.hasOwnProperty(C))throw function Gt(ne,E){return new g.vHH(3302,re)}();if(null==B||0==B.length)throw function Ut(ne){return new g.vHH(3303,re)}();if(!function V(ne){return"start"==ne||"done"==ne}(B))throw function Rt(ne,E){return new g.vHH(3400,re)}();const Oe=Sn(this._elementListeners,E,[]),Ye={name:C,phase:B,callback:le};Oe.push(Ye);const nt=Sn(this._engine.statesByElement,E,{});return nt.hasOwnProperty(C)||(Kt(E,tr),Kt(E,tr+"-"+C),nt[C]=os),()=>{this._engine.afterFlush(()=>{const Dt=Oe.indexOf(Ye);Dt>=0&&Oe.splice(Dt,1),this._triggers[C]||delete nt[C]})}}register(E,C){return!this._triggers[E]&&(this._triggers[E]=C,!0)}_getTrigger(E){const C=this._triggers[E];if(!C)throw function Yt(ne){return new g.vHH(3401,re)}();return C}trigger(E,C,B,le=!0){const Oe=this._getTrigger(C),Ye=new Mo(this.id,C,E);let nt=this._engine.statesByElement.get(E);nt||(Kt(E,tr),Kt(E,tr+"-"+C),this._engine.statesByElement.set(E,nt={}));let Dt=nt[C];const Qt=new Br(B,this.id);if(!(B&&B.hasOwnProperty("value"))&&Dt&&Qt.absorbOptions(Dt.options),nt[C]=Qt,Dt||(Dt=os),Qt.value!==Sr&&Dt.value===Qt.value){if(!function Vr(ne,E){const C=Object.keys(ne),B=Object.keys(E);if(C.length!=B.length)return!1;for(let le=0;le<C.length;le++){const Oe=C[le];if(!E.hasOwnProperty(Oe)||ne[Oe]!==E[Oe])return!1}return!0}(Dt.params,Qt.params)){const Mr=[],Di=Oe.matchStyles(Dt.value,Dt.params,Mr),Bi=Oe.matchStyles(Qt.value,Qt.params,Mr);Mr.length?this._engine.reportError(Mr):this._engine.afterFlush(()=>{ue(E,Di),xe(E,Bi)})}return}const or=Sn(this._engine.playersByElement,E,[]);or.forEach(Mr=>{Mr.namespaceId==this.id&&Mr.triggerName==C&&Mr.queued&&Mr.destroy()});let Jr=Oe.matchTransition(Dt.value,Qt.value,E,Qt.params),Hn=!1;if(!Jr){if(!le)return;Jr=Oe.fallbackTransition,Hn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:C,transition:Jr,fromState:Dt,toState:Qt,player:Ye,isFallbackTransition:Hn}),Hn||(Kt(E,Fo),Ye.onStart(()=>{zn(E,Fo)})),Ye.onDone(()=>{let Mr=this.players.indexOf(Ye);Mr>=0&&this.players.splice(Mr,1);const Di=this._engine.playersByElement.get(E);if(Di){let Bi=Di.indexOf(Ye);Bi>=0&&Di.splice(Bi,1)}}),this.players.push(Ye),or.push(Ye),Ye}deregister(E){delete this._triggers[E],this._engine.statesByElement.forEach((C,B)=>{delete C[E]}),this._elementListeners.forEach((C,B)=>{this._elementListeners.set(B,C.filter(le=>le.name!=E))})}clearElementCache(E){this._engine.statesByElement.delete(E),this._elementListeners.delete(E);const C=this._engine.playersByElement.get(E);C&&(C.forEach(B=>B.destroy()),this._engine.playersByElement.delete(E))}_signalRemovalForInnerTriggers(E,C){const B=this._engine.driver.query(E,pt,!0);B.forEach(le=>{if(le[fr])return;const Oe=this._engine.fetchNamespacesByElement(le);Oe.size?Oe.forEach(Ye=>Ye.triggerLeaveAnimation(le,C,!1,!0)):this.clearElementCache(le)}),this._engine.afterFlushAnimationsDone(()=>B.forEach(le=>this.clearElementCache(le)))}triggerLeaveAnimation(E,C,B,le){const Oe=this._engine.statesByElement.get(E),Ye=new Map;if(Oe){const nt=[];if(Object.keys(Oe).forEach(Dt=>{if(Ye.set(Dt,Oe[Dt].value),this._triggers[Dt]){const Qt=this.trigger(E,Dt,Sr,le);Qt&&nt.push(Qt)}}),nt.length)return this._engine.markElementAsRemoved(this.id,E,!0,C,Ye),B&&hn(nt).onDone(()=>this._engine.processLeaveNode(E)),!0}return!1}prepareLeaveAnimationListeners(E){const C=this._elementListeners.get(E),B=this._engine.statesByElement.get(E);if(C&&B){const le=new Set;C.forEach(Oe=>{const Ye=Oe.name;if(le.has(Ye))return;le.add(Ye);const Dt=this._triggers[Ye].fallbackTransition,Qt=B[Ye]||os,cn=new Br(Sr),ir=new Mo(this.id,Ye,E);this._engine.totalQueuedPlayers++,this._queue.push({element:E,triggerName:Ye,transition:Dt,fromState:Qt,toState:cn,player:ir,isFallbackTransition:!0})})}}removeNode(E,C){const B=this._engine;if(E.childElementCount&&this._signalRemovalForInnerTriggers(E,C),this.triggerLeaveAnimation(E,C,!0))return;let le=!1;if(B.totalAnimations){const Oe=B.players.length?B.playersByQueriedElement.get(E):[];if(Oe&&Oe.length)le=!0;else{let Ye=E;for(;Ye=Ye.parentNode;)if(B.statesByElement.get(Ye)){le=!0;break}}}if(this.prepareLeaveAnimationListeners(E),le)B.markElementAsRemoved(this.id,E,!1,C);else{const Oe=E[fr];(!Oe||Oe===is)&&(B.afterFlush(()=>this.clearElementCache(E)),B.destroyInnerAnimations(E),B._onRemovalComplete(E,C))}}insertNode(E,C){Kt(E,this._hostClassName)}drainQueuedTransitions(E){const C=[];return this._queue.forEach(B=>{const le=B.player;if(le.destroyed)return;const Oe=B.element,Ye=this._elementListeners.get(Oe);Ye&&Ye.forEach(nt=>{if(nt.name==B.triggerName){const Dt=Fn(Oe,B.triggerName,B.fromState.value,B.toState.value);Dt._data=E,rn(B.player,nt.phase,Dt,nt.callback)}}),le.markedForDestroy?this._engine.afterFlush(()=>{le.destroy()}):C.push(B)}),this._queue=[],C.sort((B,le)=>{const Oe=B.transition.ast.depCount,Ye=le.transition.ast.depCount;return 0==Oe||0==Ye?Oe-Ye:this._engine.driver.containsElement(B.element,le.element)?1:-1})}destroy(E){this.players.forEach(C=>C.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,E)}elementContainsData(E){let C=!1;return this._elementListeners.has(E)&&(C=!0),C=!!this._queue.find(B=>B.element===E)||C,C}}class As{constructor(E,C,B){this.bodyNode=E,this.driver=C,this._normalizer=B,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(le,Oe)=>{}}_onRemovalComplete(E,C){this.onRemovalComplete(E,C)}get queuedPlayers(){const E=[];return this._namespaceList.forEach(C=>{C.players.forEach(B=>{B.queued&&E.push(B)})}),E}createNamespace(E,C){const B=new ci(E,C,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,C)?this._balanceNamespaceList(B,C):(this.newHostElements.set(C,B),this.collectEnterElement(C)),this._namespaceLookup[E]=B}_balanceNamespaceList(E,C){const B=this._namespaceList,le=this.namespacesByHostElement,Oe=B.length-1;if(Oe>=0){let Ye=!1;if(void 0!==this.driver.getParentElement){let nt=this.driver.getParentElement(C);for(;nt;){const Dt=le.get(nt);if(Dt){const Qt=B.indexOf(Dt);B.splice(Qt+1,0,E),Ye=!0;break}nt=this.driver.getParentElement(nt)}}else for(let nt=Oe;nt>=0;nt--)if(this.driver.containsElement(B[nt].hostElement,C)){B.splice(nt+1,0,E),Ye=!0;break}Ye||B.unshift(E)}else B.push(E);return le.set(C,E),E}register(E,C){let B=this._namespaceLookup[E];return B||(B=this.createNamespace(E,C)),B}registerTrigger(E,C,B){let le=this._namespaceLookup[E];le&&le.register(C,B)&&this.totalAnimations++}destroy(E,C){if(!E)return;const B=this._fetchNamespace(E);this.afterFlush(()=>{this.namespacesByHostElement.delete(B.hostElement),delete this._namespaceLookup[E];const le=this._namespaceList.indexOf(B);le>=0&&this._namespaceList.splice(le,1)}),this.afterFlushAnimationsDone(()=>B.destroy(C))}_fetchNamespace(E){return this._namespaceLookup[E]}fetchNamespacesByElement(E){const C=new Set,B=this.statesByElement.get(E);if(B){const le=Object.keys(B);for(let Oe=0;Oe<le.length;Oe++){const Ye=B[le[Oe]].namespaceId;if(Ye){const nt=this._fetchNamespace(Ye);nt&&C.add(nt)}}}return C}trigger(E,C,B,le){if(fe(C)){const Oe=this._fetchNamespace(E);if(Oe)return Oe.trigger(C,B,le),!0}return!1}insertNode(E,C,B,le){if(!fe(C))return;const Oe=C[fr];if(Oe&&Oe.setForRemoval){Oe.setForRemoval=!1,Oe.setForMove=!0;const Ye=this.collectedLeaveElements.indexOf(C);Ye>=0&&this.collectedLeaveElements.splice(Ye,1)}if(E){const Ye=this._fetchNamespace(E);Ye&&Ye.insertNode(C,B)}le&&this.collectEnterElement(C)}collectEnterElement(E){this.collectedEnterElements.push(E)}markElementAsDisabled(E,C){C?this.disabledNodes.has(E)||(this.disabledNodes.add(E),Kt(E,Ro)):this.disabledNodes.has(E)&&(this.disabledNodes.delete(E),zn(E,Ro))}removeNode(E,C,B,le){if(fe(C)){const Oe=E?this._fetchNamespace(E):null;if(Oe?Oe.removeNode(C,le):this.markElementAsRemoved(E,C,!1,le),B){const Ye=this.namespacesByHostElement.get(C);Ye&&Ye.id!==E&&Ye.removeNode(C,le)}}else this._onRemovalComplete(C,le)}markElementAsRemoved(E,C,B,le,Oe){this.collectedLeaveElements.push(C),C[fr]={namespaceId:E,setForRemoval:le,hasAnimation:B,removedBeforeQueried:!1,previousTriggersValues:Oe}}listen(E,C,B,le,Oe){return fe(C)?this._fetchNamespace(E).listen(C,B,le,Oe):()=>{}}_buildInstruction(E,C,B,le,Oe){return E.transition.build(this.driver,E.element,E.fromState.value,E.toState.value,B,le,E.fromState.options,E.toState.options,C,Oe)}destroyInnerAnimations(E){let C=this.driver.query(E,pt,!0);C.forEach(B=>this.destroyActiveAnimationsForElement(B)),0!=this.playersByQueriedElement.size&&(C=this.driver.query(E,Ue,!0),C.forEach(B=>this.finishActiveQueriedAnimationOnElement(B)))}destroyActiveAnimationsForElement(E){const C=this.playersByElement.get(E);C&&C.forEach(B=>{B.queued?B.markedForDestroy=!0:B.destroy()})}finishActiveQueriedAnimationOnElement(E){const C=this.playersByQueriedElement.get(E);C&&C.forEach(B=>B.finish())}whenRenderingDone(){return new Promise(E=>{if(this.players.length)return hn(this.players).onDone(()=>E());E()})}processLeaveNode(E){var C;const B=E[fr];if(B&&B.setForRemoval){if(E[fr]=is,B.namespaceId){this.destroyInnerAnimations(E);const le=this._fetchNamespace(B.namespaceId);le&&le.clearElementCache(E)}this._onRemovalComplete(E,B.setForRemoval)}(null===(C=E.classList)||void 0===C?void 0:C.contains(Ro))&&this.markElementAsDisabled(E,!1),this.driver.query(E,".ng-animate-disabled",!0).forEach(le=>{this.markElementAsDisabled(le,!1)})}flush(E=-1){let C=[];if(this.newHostElements.size&&(this.newHostElements.forEach((B,le)=>this._balanceNamespaceList(B,le)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let B=0;B<this.collectedEnterElements.length;B++)Kt(this.collectedEnterElements[B],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const B=[];try{C=this._flushAnimations(B,E)}finally{for(let le=0;le<B.length;le++)B[le]()}}else for(let B=0;B<this.collectedLeaveElements.length;B++)this.processLeaveNode(this.collectedLeaveElements[B]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(B=>B()),this._flushFns=[],this._whenQuietFns.length){const B=this._whenQuietFns;this._whenQuietFns=[],C.length?hn(C).onDone(()=>{B.forEach(le=>le())}):B.forEach(le=>le())}}reportError(E){throw function Nn(ne){return new g.vHH(3402,re)}()}_flushAnimations(E,C){const B=new ti,le=[],Oe=new Map,Ye=[],nt=new Map,Dt=new Map,Qt=new Map,cn=new Set;this.disabledNodes.forEach(Un=>{cn.add(Un);const Gn=this.driver.query(Un,".ng-animate-queued",!0);for(let br=0;br<Gn.length;br++)cn.add(Gn[br])});const ir=this.bodyNode,or=Array.from(this.statesByElement.keys()),Jr=Wt(or,this.collectedEnterElements),Hn=new Map;let Mr=0;Jr.forEach((Un,Gn)=>{const br=gr+Mr++;Hn.set(Gn,br),Un.forEach(En=>Kt(En,br))});const Di=[],Bi=new Set,qi=new Set;for(let Un=0;Un<this.collectedLeaveElements.length;Un++){const Gn=this.collectedLeaveElements[Un],br=Gn[fr];br&&br.setForRemoval&&(Di.push(Gn),Bi.add(Gn),br.hasAnimation?this.driver.query(Gn,".ng-star-inserted",!0).forEach(En=>Bi.add(En)):qi.add(Gn))}const as=new Map,si=Wt(or,Array.from(Bi));si.forEach((Un,Gn)=>{const br=lr+Mr++;as.set(Gn,br),Un.forEach(En=>Kt(En,br))}),E.push(()=>{Jr.forEach((Un,Gn)=>{const br=Hn.get(Gn);Un.forEach(En=>zn(En,br))}),si.forEach((Un,Gn)=>{const br=as.get(Gn);Un.forEach(En=>zn(En,br))}),Di.forEach(Un=>{this.processLeaveNode(Un)})});const gs=[],Si=[];for(let Un=this._namespaceList.length-1;Un>=0;Un--)this._namespaceList[Un].drainQueuedTransitions(C).forEach(br=>{const En=br.player,Vn=br.element;if(gs.push(En),this.collectedEnterElements.length){const Ks=Vn[fr];if(Ks&&Ks.setForMove){if(Ks.previousTriggersValues&&Ks.previousTriggersValues.has(br.triggerName)){const _a=Ks.previousTriggersValues.get(br.triggerName),Vi=this.statesByElement.get(br.element);Vi&&Vi[br.triggerName]&&(Vi[br.triggerName].value=_a)}return void En.destroy()}}const zs=!ir||!this.driver.containsElement(ir,Vn),On=as.get(Vn),Lt=Hn.get(Vn),Jt=this._buildInstruction(br,B,Lt,On,zs);if(Jt.errors&&Jt.errors.length)return void Si.push(Jt);if(zs)return En.onStart(()=>ue(Vn,Jt.fromStyles)),En.onDestroy(()=>xe(Vn,Jt.toStyles)),void le.push(En);if(br.isFallbackTransition)return En.onStart(()=>ue(Vn,Jt.fromStyles)),En.onDestroy(()=>xe(Vn,Jt.toStyles)),void le.push(En);const Xi=[];Jt.timelines.forEach(Ks=>{Ks.stretchStartingKeyframe=!0,this.disabledNodes.has(Ks.element)||Xi.push(Ks)}),Jt.timelines=Xi,B.append(Vn,Jt.timelines),Ye.push({instruction:Jt,player:En,element:Vn}),Jt.queriedElements.forEach(Ks=>Sn(nt,Ks,[]).push(En)),Jt.preStyleProps.forEach((Ks,_a)=>{const Vi=Object.keys(Ks);if(Vi.length){let Lo=Dt.get(_a);Lo||Dt.set(_a,Lo=new Set),Vi.forEach(Wo=>Lo.add(Wo))}}),Jt.postStyleProps.forEach((Ks,_a)=>{const Vi=Object.keys(Ks);let Lo=Qt.get(_a);Lo||Qt.set(_a,Lo=new Set),Vi.forEach(Wo=>Lo.add(Wo))})});if(Si.length){const Un=[];Si.forEach(Gn=>{Un.push(function nn(ne,E){return new g.vHH(3505,re)}())}),gs.forEach(Gn=>Gn.destroy()),this.reportError(Un)}const ls=new Map,ki=new Map;Ye.forEach(Un=>{const Gn=Un.element;B.has(Gn)&&(ki.set(Gn,Gn),this._beforeAnimationBuild(Un.player.namespaceId,Un.instruction,ls))}),le.forEach(Un=>{const Gn=Un.element;this._getPreviousPlayers(Gn,!1,Un.namespaceId,Un.triggerName,null).forEach(En=>{Sn(ls,Gn,[]).push(En),En.destroy()})});const Oo=Di.filter(Un=>Ti(Un,Dt,Qt)),xi=new Map;ot(xi,this.driver,qi,Qt,U.l3).forEach(Un=>{Ti(Un,Dt,Qt)&&Oo.push(Un)});const Gs=new Map;Jr.forEach((Un,Gn)=>{ot(Gs,this.driver,new Set(Un),Dt,U.k1)}),Oo.forEach(Un=>{const Gn=xi.get(Un),br=Gs.get(Un);xi.set(Un,Object.assign(Object.assign({},Gn),br))});const us=[],Ws=[],Cn={};Ye.forEach(Un=>{const{element:Gn,player:br,instruction:En}=Un;if(B.has(Gn)){if(cn.has(Gn))return br.onDestroy(()=>xe(Gn,En.toStyles)),br.disabled=!0,br.overrideTotalTime(En.totalTime),void le.push(br);let Vn=Cn;if(ki.size>1){let On=Gn;const Lt=[];for(;On=On.parentNode;){const Jt=ki.get(On);if(Jt){Vn=Jt;break}Lt.push(On)}Lt.forEach(Jt=>ki.set(Jt,Vn))}const zs=this._buildAnimation(br.namespaceId,En,ls,Oe,Gs,xi);if(br.setRealPlayer(zs),Vn===Cn)us.push(br);else{const On=this.playersByElement.get(Vn);On&&On.length&&(br.parentPlayer=hn(On)),le.push(br)}}else ue(Gn,En.fromStyles),br.onDestroy(()=>xe(Gn,En.toStyles)),Ws.push(br),cn.has(Gn)&&le.push(br)}),Ws.forEach(Un=>{const Gn=Oe.get(Un.element);if(Gn&&Gn.length){const br=hn(Gn);Un.setRealPlayer(br)}}),le.forEach(Un=>{Un.parentPlayer?Un.syncPlayerEvents(Un.parentPlayer):Un.destroy()});for(let Un=0;Un<Di.length;Un++){const Gn=Di[Un],br=Gn[fr];if(zn(Gn,lr),br&&br.hasAnimation)continue;let En=[];if(nt.size){let zs=nt.get(Gn);zs&&zs.length&&En.push(...zs);let On=this.driver.query(Gn,Ue,!0);for(let Lt=0;Lt<On.length;Lt++){let Jt=nt.get(On[Lt]);Jt&&Jt.length&&En.push(...Jt)}}const Vn=En.filter(zs=>!zs.destroyed);Vn.length?Pr(this,Gn,Vn):this.processLeaveNode(Gn)}return Di.length=0,us.forEach(Un=>{this.players.push(Un),Un.onDone(()=>{Un.destroy();const Gn=this.players.indexOf(Un);this.players.splice(Gn,1)}),Un.play()}),us}elementContainsData(E,C){let B=!1;const le=C[fr];return le&&le.setForRemoval&&(B=!0),this.playersByElement.has(C)&&(B=!0),this.playersByQueriedElement.has(C)&&(B=!0),this.statesByElement.has(C)&&(B=!0),this._fetchNamespace(E).elementContainsData(C)||B}afterFlush(E){this._flushFns.push(E)}afterFlushAnimationsDone(E){this._whenQuietFns.push(E)}_getPreviousPlayers(E,C,B,le,Oe){let Ye=[];if(C){const nt=this.playersByQueriedElement.get(E);nt&&(Ye=nt)}else{const nt=this.playersByElement.get(E);if(nt){const Dt=!Oe||Oe==Sr;nt.forEach(Qt=>{Qt.queued||!Dt&&Qt.triggerName!=le||Ye.push(Qt)})}}return(B||le)&&(Ye=Ye.filter(nt=>!(B&&B!=nt.namespaceId||le&&le!=nt.triggerName))),Ye}_beforeAnimationBuild(E,C,B){const Oe=C.element,Ye=C.isRemovalTransition?void 0:E,nt=C.isRemovalTransition?void 0:C.triggerName;for(const Dt of C.timelines){const Qt=Dt.element,cn=Qt!==Oe,ir=Sn(B,Qt,[]);this._getPreviousPlayers(Qt,cn,Ye,nt,C.toState).forEach(Jr=>{const Hn=Jr.getRealPlayer();Hn.beforeDestroy&&Hn.beforeDestroy(),Jr.destroy(),ir.push(Jr)})}ue(Oe,C.fromStyles)}_buildAnimation(E,C,B,le,Oe,Ye){const nt=C.triggerName,Dt=C.element,Qt=[],cn=new Set,ir=new Set,or=C.timelines.map(Hn=>{const Mr=Hn.element;cn.add(Mr);const Di=Mr[fr];if(Di&&Di.removedBeforeQueried)return new U.ZN(Hn.duration,Hn.delay);const Bi=Mr!==Dt,qi=function ri(ne){const E=[];return Lr(ne,E),E}((B.get(Mr)||Ci).map(ls=>ls.getRealPlayer())).filter(ls=>!!ls.element&&ls.element===Mr),as=Oe.get(Mr),si=Ye.get(Mr),gs=xt(0,this._normalizer,0,Hn.keyframes,as,si),Si=this._buildPlayer(Hn,gs,qi);if(Hn.subTimeline&&le&&ir.add(Mr),Bi){const ls=new Mo(E,nt,Mr);ls.setRealPlayer(Si),Qt.push(ls)}return Si});Qt.forEach(Hn=>{Sn(this.playersByQueriedElement,Hn.element,[]).push(Hn),Hn.onDone(()=>function gi(ne,E,C){let B;if(ne instanceof Map){if(B=ne.get(E),B){if(B.length){const le=B.indexOf(C);B.splice(le,1)}0==B.length&&ne.delete(E)}}else if(B=ne[E],B){if(B.length){const le=B.indexOf(C);B.splice(le,1)}0==B.length&&delete ne[E]}return B}(this.playersByQueriedElement,Hn.element,Hn))}),cn.forEach(Hn=>Kt(Hn,dt));const Jr=hn(or);return Jr.onDestroy(()=>{cn.forEach(Hn=>zn(Hn,dt)),xe(Dt,C.toStyles)}),ir.forEach(Hn=>{Sn(le,Hn,[]).push(Jr)}),Jr}_buildPlayer(E,C,B){return C.length>0?this.driver.animate(E.element,C,E.duration,E.delay,E.easing,B):new U.ZN(E.duration,E.delay)}}class Mo{constructor(E,C,B){this.namespaceId=E,this.triggerName=C,this.element=B,this._player=new U.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(E){this._containsRealPlayer||(this._player=E,Object.keys(this._queuedCallbacks).forEach(C=>{this._queuedCallbacks[C].forEach(B=>rn(E,C,void 0,B))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(E.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(E){this.totalTime=E}syncPlayerEvents(E){const C=this._player;C.triggerCallback&&E.onStart(()=>C.triggerCallback("start")),E.onDone(()=>this.finish()),E.onDestroy(()=>this.destroy())}_queueEvent(E,C){Sn(this._queuedCallbacks,E,[]).push(C)}onDone(E){this.queued&&this._queueEvent("done",E),this._player.onDone(E)}onStart(E){this.queued&&this._queueEvent("start",E),this._player.onStart(E)}onDestroy(E){this.queued&&this._queueEvent("destroy",E),this._player.onDestroy(E)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(E){this.queued||this._player.setPosition(E)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(E){const C=this._player;C.triggerCallback&&C.triggerCallback(E)}}function fe(ne){return ne&&1===ne.nodeType}function Ee(ne,E){const C=ne.style.display;return ne.style.display=null!=E?E:"none",C}function ot(ne,E,C,B,le){const Oe=[];C.forEach(Dt=>Oe.push(Ee(Dt)));const Ye=[];B.forEach((Dt,Qt)=>{const cn={};Dt.forEach(ir=>{const or=cn[ir]=E.computeStyle(Qt,ir,le);(!or||0==or.length)&&(Qt[fr]=Co,Ye.push(Qt))}),ne.set(Qt,cn)});let nt=0;return C.forEach(Dt=>Ee(Dt,Oe[nt++])),Ye}function Wt(ne,E){const C=new Map;if(ne.forEach(nt=>C.set(nt,[])),0==E.length)return C;const le=new Set(E),Oe=new Map;function Ye(nt){if(!nt)return 1;let Dt=Oe.get(nt);if(Dt)return Dt;const Qt=nt.parentNode;return Dt=C.has(Qt)?Qt:le.has(Qt)?1:Ye(Qt),Oe.set(nt,Dt),Dt}return E.forEach(nt=>{const Dt=Ye(nt);1!==Dt&&C.get(Dt).push(nt)}),C}function Kt(ne,E){var C;null===(C=ne.classList)||void 0===C||C.add(E)}function zn(ne,E){var C;null===(C=ne.classList)||void 0===C||C.remove(E)}function Pr(ne,E,C){hn(C).onDone(()=>ne.processLeaveNode(E))}function Lr(ne,E){for(let C=0;C<ne.length;C++){const B=ne[C];B instanceof U.ZE?Lr(B.players,E):E.push(B)}}function Ti(ne,E,C){const B=C.get(ne);if(!B)return!1;let le=E.get(ne);return le?B.forEach(Oe=>le.add(Oe)):E.set(ne,B),C.delete(ne),!0}class qr{constructor(E,C,B){this.bodyNode=E,this._driver=C,this._normalizer=B,this._triggerCache={},this.onRemovalComplete=(le,Oe)=>{},this._transitionEngine=new As(E,C,B),this._timelineEngine=new mo(E,C,B),this._transitionEngine.onRemovalComplete=(le,Oe)=>this.onRemovalComplete(le,Oe)}registerTrigger(E,C,B,le,Oe){const Ye=E+"-"+le;let nt=this._triggerCache[Ye];if(!nt){const Dt=[],cn=Yi(this._driver,Oe,Dt,[]);if(Dt.length)throw function tn(ne,E){return new g.vHH(3404,re)}();nt=function js(ne,E,C){return new Xr(ne,E,C)}(le,cn,this._normalizer),this._triggerCache[Ye]=nt}this._transitionEngine.registerTrigger(C,le,nt)}register(E,C){this._transitionEngine.register(E,C)}destroy(E,C){this._transitionEngine.destroy(E,C)}onInsert(E,C,B,le){this._transitionEngine.insertNode(E,C,B,le)}onRemove(E,C,B,le){this._transitionEngine.removeNode(E,C,le||!1,B)}disableAnimations(E,C){this._transitionEngine.markElementAsDisabled(E,C)}process(E,C,B,le){if("@"==B.charAt(0)){const[Oe,Ye]=Zn(B);this._timelineEngine.command(Oe,C,Ye,le)}else this._transitionEngine.trigger(E,C,B,le)}listen(E,C,B,le,Oe){if("@"==B.charAt(0)){const[Ye,nt]=Zn(B);return this._timelineEngine.listen(Ye,C,nt,Oe)}return this._transitionEngine.listen(E,C,B,le,Oe)}flush(E=-1){this._transitionEngine.flush(E)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Hs=(()=>{class ne{constructor(C,B,le){this._element=C,this._startStyles=B,this._endStyles=le,this._state=0;let Oe=ne.initialStylesByElement.get(C);Oe||ne.initialStylesByElement.set(C,Oe={}),this._initialStyles=Oe}start(){this._state<1&&(this._startStyles&&xe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xe(this._element,this._initialStyles),this._endStyles&&(xe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ne.initialStylesByElement.delete(this._element),this._startStyles&&(ue(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ue(this._element,this._endStyles),this._endStyles=null),xe(this._element,this._initialStyles),this._state=3)}}return ne.initialStylesByElement=new WeakMap,ne})();function Hr(ne){let E=null;const C=Object.keys(ne);for(let B=0;B<C.length;B++){const le=C[B];dr(le)&&(E=E||{},E[le]=ne[le])}return E}function dr(ne){return"display"===ne||"position"===ne}class Js{constructor(E,C,B,le){this.element=E,this.keyframes=C,this.options=B,this._specialStyles=le,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=B.duration,this._delay=B.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(E=>E()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const E=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,E,this.options),this._finalKeyframe=E.length?E[E.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(E,C,B){return E.animate(C,B)}onStart(E){this._onStartFns.push(E)}onDone(E){this._onDoneFns.push(E)}onDestroy(E){this._onDestroyFns.push(E)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(E=>E()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(E=>E()),this._onDestroyFns=[])}setPosition(E){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=E*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const E={};if(this.hasStarted()){const C=this._finalKeyframe;Object.keys(C).forEach(B=>{"offset"!=B&&(E[B]=this._finished?C[B]:ai(this.element,B))})}this.currentSnapshot=E}triggerCallback(E){const C="start"==E?this._onStartFns:this._onDoneFns;C.forEach(B=>B()),C.length=0}}class eo{validateStyleProperty(E){return J(E)}matchesElement(E,C){return!1}containsElement(E,C){return Xe(E,C)}getParentElement(E){return Tn(E)}query(E,C,B){return yt(E,C,B)}computeStyle(E,C,B){return window.getComputedStyle(E)[C]}animate(E,C,B,le,Oe,Ye=[]){const Dt={duration:B,delay:le,fill:0==le?"both":"forwards"};Oe&&(Dt.easing=Oe);const Qt={},cn=Ye.filter(or=>or instanceof Js);(function Ir(ne,E){return 0===ne||0===E})(B,le)&&cn.forEach(or=>{let Jr=or.currentSnapshot;Object.keys(Jr).forEach(Hn=>Qt[Hn]=Jr[Hn])}),C=function nr(ne,E,C){const B=Object.keys(C);if(B.length&&E.length){let Oe=E[0],Ye=[];if(B.forEach(nt=>{Oe.hasOwnProperty(nt)||Ye.push(nt),Oe[nt]=C[nt]}),Ye.length)for(var le=1;le<E.length;le++){let nt=E[le];Ye.forEach(function(Dt){nt[Dt]=ai(ne,Dt)})}}return E}(E,C=C.map(or=>Fe(or,!1)),Qt);const ir=function mi(ne,E){let C=null,B=null;return Array.isArray(E)&&E.length?(C=Hr(E[0]),E.length>1&&(B=Hr(E[E.length-1]))):E&&(C=Hr(E)),C||B?new Hs(ne,C,B):null}(E,C);return new Js(E,C,Dt,ir)}}var $s=b(9808);let Ar=(()=>{class ne extends U._j{constructor(C,B){super(),this._nextAnimationId=0,this._renderer=C.createRenderer(B.body,{id:"0",encapsulation:g.ifc.None,styles:[],data:{animation:[]}})}build(C){const B=this._nextAnimationId.toString();this._nextAnimationId++;const le=Array.isArray(C)?(0,U.vP)(C):C;return ao(this._renderer,null,B,"register",[le]),new To(B,this._renderer)}}return ne.\u0275fac=function(C){return new(C||ne)(g.LFG(g.FYo),g.LFG($s.K0))},ne.\u0275prov=g.Yz7({token:ne,factory:ne.\u0275fac}),ne})();class To extends U.LC{constructor(E,C){super(),this._id=E,this._renderer=C}create(E,C){return new Do(this._id,E,C||{},this._renderer)}}class Do{constructor(E,C,B,le){this.id=E,this.element=C,this._renderer=le,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",B)}_listen(E,C){return this._renderer.listen(this.element,`@@${this.id}:${E}`,C)}_command(E,...C){return ao(this._renderer,this.element,this.id,E,C)}onDone(E){this._listen("done",E)}onStart(E){this._listen("start",E)}onDestroy(E){this._listen("destroy",E)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(E){this._command("setPosition",E)}getPosition(){var E,C;return null!==(C=null===(E=this._renderer.engine.players[+this.id])||void 0===E?void 0:E.getPosition())&&void 0!==C?C:0}}function ao(ne,E,C,B,le){return ne.setProperty(E,`@@${C}:${B}`,le)}const G="@.disabled";let z=(()=>{class ne{constructor(C,B,le){this.delegate=C,this.engine=B,this._zone=le,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),B.onRemovalComplete=(Oe,Ye)=>{const nt=null==Ye?void 0:Ye.parentNode(Oe);nt&&Ye.removeChild(nt,Oe)}}createRenderer(C,B){const Oe=this.delegate.createRenderer(C,B);if(!(C&&B&&B.data&&B.data.animation)){let cn=this._rendererCache.get(Oe);return cn||(cn=new Se("",Oe,this.engine),this._rendererCache.set(Oe,cn)),cn}const Ye=B.id,nt=B.id+"-"+this._currentId;this._currentId++,this.engine.register(nt,C);const Dt=cn=>{Array.isArray(cn)?cn.forEach(Dt):this.engine.registerTrigger(Ye,nt,C,cn.name,cn)};return B.data.animation.forEach(Dt),new We(this,nt,Oe,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(C,B,le){C>=0&&C<this._microtaskId?this._zone.run(()=>B(le)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Oe=>{const[Ye,nt]=Oe;Ye(nt)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([B,le]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return ne.\u0275fac=function(C){return new(C||ne)(g.LFG(g.FYo),g.LFG(qr),g.LFG(g.R0b))},ne.\u0275prov=g.Yz7({token:ne,factory:ne.\u0275fac}),ne})();class Se{constructor(E,C,B){this.namespaceId=E,this.delegate=C,this.engine=B,this.destroyNode=this.delegate.destroyNode?le=>C.destroyNode(le):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(E,C){return this.delegate.createElement(E,C)}createComment(E){return this.delegate.createComment(E)}createText(E){return this.delegate.createText(E)}appendChild(E,C){this.delegate.appendChild(E,C),this.engine.onInsert(this.namespaceId,C,E,!1)}insertBefore(E,C,B,le=!0){this.delegate.insertBefore(E,C,B),this.engine.onInsert(this.namespaceId,C,E,le)}removeChild(E,C,B){this.engine.onRemove(this.namespaceId,C,this.delegate,B)}selectRootElement(E,C){return this.delegate.selectRootElement(E,C)}parentNode(E){return this.delegate.parentNode(E)}nextSibling(E){return this.delegate.nextSibling(E)}setAttribute(E,C,B,le){this.delegate.setAttribute(E,C,B,le)}removeAttribute(E,C,B){this.delegate.removeAttribute(E,C,B)}addClass(E,C){this.delegate.addClass(E,C)}removeClass(E,C){this.delegate.removeClass(E,C)}setStyle(E,C,B,le){this.delegate.setStyle(E,C,B,le)}removeStyle(E,C,B){this.delegate.removeStyle(E,C,B)}setProperty(E,C,B){"@"==C.charAt(0)&&C==G?this.disableAnimations(E,!!B):this.delegate.setProperty(E,C,B)}setValue(E,C){this.delegate.setValue(E,C)}listen(E,C,B){return this.delegate.listen(E,C,B)}disableAnimations(E,C){this.engine.disableAnimations(E,C)}}class We extends Se{constructor(E,C,B,le){super(C,B,le),this.factory=E,this.namespaceId=C}setProperty(E,C,B){"@"==C.charAt(0)?"."==C.charAt(1)&&C==G?this.disableAnimations(E,B=void 0===B||!!B):this.engine.process(this.namespaceId,E,C.substr(1),B):this.delegate.setProperty(E,C,B)}listen(E,C,B){if("@"==C.charAt(0)){const le=function bt(ne){switch(ne){case"body":return document.body;case"document":return document;case"window":return window;default:return ne}}(E);let Oe=C.substr(1),Ye="";return"@"!=Oe.charAt(0)&&([Oe,Ye]=function jt(ne){const E=ne.indexOf(".");return[ne.substring(0,E),ne.substr(E+1)]}(Oe)),this.engine.listen(this.namespaceId,le,Oe,Ye,nt=>{this.factory.scheduleListenerCallback(nt._data||-1,B,nt)})}return this.delegate.listen(E,C,B)}}let yn=(()=>{class ne extends qr{constructor(C,B,le){super(C.body,B,le)}ngOnDestroy(){this.flush()}}return ne.\u0275fac=function(C){return new(C||ne)(g.LFG($s.K0),g.LFG(zt),g.LFG(bi))},ne.\u0275prov=g.Yz7({token:ne,factory:ne.\u0275fac}),ne})();const Rr=new g.OlP("AnimationModuleType"),zr=[{provide:U._j,useClass:Ar},{provide:bi,useFactory:function rr(){return new Ps}},{provide:qr,useClass:yn},{provide:g.FYo,useFactory:function Qn(ne,E,C){return new z(ne,E,C)},deps:[S.se,qr,g.R0b]}],hi=[{provide:zt,useFactory:()=>new eo},{provide:Rr,useValue:"BrowserAnimations"},...zr],jr=[{provide:zt,useClass:Zt},{provide:Rr,useValue:"NoopAnimations"},...zr];let ii=(()=>{class ne{static withConfig(C){return{ngModule:ne,providers:C.disableAnimations?jr:hi}}}return ne.\u0275fac=function(C){return new(C||ne)},ne.\u0275mod=g.oAB({type:ne}),ne.\u0275inj=g.cJS({providers:hi,imports:[S.b2]}),ne})()},2313:(Je,Te,b)=>{b.d(Te,{b2:()=>ur,H7:()=>we,q6:()=>Sn,se:()=>xn});var g=b(9808),S=b(5e3);class U extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class re extends U{static makeCurrent(){(0,g.HT)(new re)}onAndCancel(ae,_e,Ve){return ae.addEventListener(_e,Ve,!1),()=>{ae.removeEventListener(_e,Ve,!1)}}dispatchEvent(ae,_e){ae.dispatchEvent(_e)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,_e){return(_e=_e||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,_e){return"window"===_e?window:"document"===_e?ae:"body"===_e?ae.body:null}getBaseHref(ae){const _e=function Ie(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==_e?null:function oe($){Ce=Ce||document.createElement("a"),Ce.setAttribute("href",$);const ae=Ce.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(_e)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,g.Mx)(document.cookie,ae)}}let Ce,de=null;const ce=new S.OlP("TRANSITION_ID"),se=[{provide:S.ip1,useFactory:function te($,ae,_e){return()=>{_e.get(S.CZH).donePromise.then(()=>{const Ve=(0,g.q)(),Tt=ae.querySelectorAll(`style[ng-transition="${$}"]`);for(let un=0;un<Tt.length;un++)Ve.remove(Tt[un])})}},deps:[ce,g.K0,S.zs3],multi:!0}];class ke{static init(){(0,S.VLi)(new ke)}addToWindow(ae){S.dqk.getAngularTestability=(Ve,Tt=!0)=>{const un=ae.findTestabilityInTree(Ve,Tt);if(null==un)throw new Error("Could not find testability for element.");return un},S.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),S.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),S.dqk.frameworkStabilizers||(S.dqk.frameworkStabilizers=[]),S.dqk.frameworkStabilizers.push(Ve=>{const Tt=S.dqk.getAllAngularTestabilities();let un=Tt.length,Dn=!1;const Ln=function(Ir){Dn=Dn||Ir,un--,0==un&&Ve(Dn)};Tt.forEach(function(Ir){Ir.whenStable(Ln)})})}findTestabilityInTree(ae,_e,Ve){if(null==_e)return null;const Tt=ae.getTestability(_e);return null!=Tt?Tt:Ve?(0,g.q)().isShadowRoot(_e)?this.findTestabilityInTree(ae,_e.host,!0):this.findTestabilityInTree(ae,_e.parentElement,!0):null}}let qe=(()=>{class ${build(){return new XMLHttpRequest}}return $.\u0275fac=function(_e){return new(_e||$)},$.\u0275prov=S.Yz7({token:$,factory:$.\u0275fac}),$})();const it=new S.OlP("EventManagerPlugins");let ut=(()=>{class ${constructor(_e,Ve){this._zone=Ve,this._eventNameToPlugin=new Map,_e.forEach(Tt=>Tt.manager=this),this._plugins=_e.slice().reverse()}addEventListener(_e,Ve,Tt){return this._findPluginFor(Ve).addEventListener(_e,Ve,Tt)}addGlobalEventListener(_e,Ve,Tt){return this._findPluginFor(Ve).addGlobalEventListener(_e,Ve,Tt)}getZone(){return this._zone}_findPluginFor(_e){const Ve=this._eventNameToPlugin.get(_e);if(Ve)return Ve;const Tt=this._plugins;for(let un=0;un<Tt.length;un++){const Dn=Tt[un];if(Dn.supports(_e))return this._eventNameToPlugin.set(_e,Dn),Dn}throw new Error(`No event manager plugin found for event ${_e}`)}}return $.\u0275fac=function(_e){return new(_e||$)(S.LFG(it),S.LFG(S.R0b))},$.\u0275prov=S.Yz7({token:$,factory:$.\u0275fac}),$})();class Et{constructor(ae){this._doc=ae}addGlobalEventListener(ae,_e,Ve){const Tt=(0,g.q)().getGlobalEventTarget(this._doc,ae);if(!Tt)throw new Error(`Unsupported event target ${Tt} for event ${_e}`);return this.addEventListener(Tt,_e,Ve)}}let et=(()=>{class ${constructor(){this._stylesSet=new Set}addStyles(_e){const Ve=new Set;_e.forEach(Tt=>{this._stylesSet.has(Tt)||(this._stylesSet.add(Tt),Ve.add(Tt))}),this.onStylesAdded(Ve)}onStylesAdded(_e){}getAllStyles(){return Array.from(this._stylesSet)}}return $.\u0275fac=function(_e){return new(_e||$)},$.\u0275prov=S.Yz7({token:$,factory:$.\u0275fac}),$})(),at=(()=>{class $ extends et{constructor(_e){super(),this._doc=_e,this._hostNodes=new Map,this._hostNodes.set(_e.head,[])}_addStylesToHost(_e,Ve,Tt){_e.forEach(un=>{const Dn=this._doc.createElement("style");Dn.textContent=un,Tt.push(Ve.appendChild(Dn))})}addHost(_e){const Ve=[];this._addStylesToHost(this._stylesSet,_e,Ve),this._hostNodes.set(_e,Ve)}removeHost(_e){const Ve=this._hostNodes.get(_e);Ve&&Ve.forEach(He),this._hostNodes.delete(_e)}onStylesAdded(_e){this._hostNodes.forEach((Ve,Tt)=>{this._addStylesToHost(_e,Tt,Ve)})}ngOnDestroy(){this._hostNodes.forEach(_e=>_e.forEach(He))}}return $.\u0275fac=function(_e){return new(_e||$)(S.LFG(g.K0))},$.\u0275prov=S.Yz7({token:$,factory:$.\u0275fac}),$})();function He($){(0,g.q)().remove($)}const Mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ze=/%COMP%/g;function sn($,ae,_e){for(let Ve=0;Ve<ae.length;Ve++){let Tt=ae[Ve];Array.isArray(Tt)?sn($,Tt,_e):(Tt=Tt.replace(ze,$),_e.push(Tt))}return _e}function tn($){return ae=>{if("__ngUnwrap__"===ae)return $;!1===$(ae)&&(ae.preventDefault(),ae.returnValue=!1)}}let xn=(()=>{class ${constructor(_e,Ve,Tt){this.eventManager=_e,this.sharedStylesHost=Ve,this.appId=Tt,this.rendererByCompId=new Map,this.defaultRenderer=new Ze(_e)}createRenderer(_e,Ve){if(!_e||!Ve)return this.defaultRenderer;switch(Ve.encapsulation){case S.ifc.Emulated:{let Tt=this.rendererByCompId.get(Ve.id);return Tt||(Tt=new Gt(this.eventManager,this.sharedStylesHost,Ve,this.appId),this.rendererByCompId.set(Ve.id,Tt)),Tt.applyToHost(_e),Tt}case 1:case S.ifc.ShadowDom:return new Ut(this.eventManager,this.sharedStylesHost,_e,Ve);default:if(!this.rendererByCompId.has(Ve.id)){const Tt=sn(Ve.id,Ve.styles,[]);this.sharedStylesHost.addStyles(Tt),this.rendererByCompId.set(Ve.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return $.\u0275fac=function(_e){return new(_e||$)(S.LFG(ut),S.LFG(at),S.LFG(S.AFp))},$.\u0275prov=S.Yz7({token:$,factory:$.\u0275fac}),$})();class Ze{constructor(ae){this.eventManager=ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,_e){return _e?document.createElementNS(Mt[_e]||_e,ae):document.createElement(ae)}createComment(ae){return document.createComment(ae)}createText(ae){return document.createTextNode(ae)}appendChild(ae,_e){ae.appendChild(_e)}insertBefore(ae,_e,Ve){ae&&ae.insertBefore(_e,Ve)}removeChild(ae,_e){ae&&ae.removeChild(_e)}selectRootElement(ae,_e){let Ve="string"==typeof ae?document.querySelector(ae):ae;if(!Ve)throw new Error(`The selector "${ae}" did not match any elements`);return _e||(Ve.textContent=""),Ve}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,_e,Ve,Tt){if(Tt){_e=Tt+":"+_e;const un=Mt[Tt];un?ae.setAttributeNS(un,_e,Ve):ae.setAttribute(_e,Ve)}else ae.setAttribute(_e,Ve)}removeAttribute(ae,_e,Ve){if(Ve){const Tt=Mt[Ve];Tt?ae.removeAttributeNS(Tt,_e):ae.removeAttribute(`${Ve}:${_e}`)}else ae.removeAttribute(_e)}addClass(ae,_e){ae.classList.add(_e)}removeClass(ae,_e){ae.classList.remove(_e)}setStyle(ae,_e,Ve,Tt){Tt&(S.JOm.DashCase|S.JOm.Important)?ae.style.setProperty(_e,Ve,Tt&S.JOm.Important?"important":""):ae.style[_e]=Ve}removeStyle(ae,_e,Ve){Ve&S.JOm.DashCase?ae.style.removeProperty(_e):ae.style[_e]=""}setProperty(ae,_e,Ve){ae[_e]=Ve}setValue(ae,_e){ae.nodeValue=_e}listen(ae,_e,Ve){return"string"==typeof ae?this.eventManager.addGlobalEventListener(ae,_e,tn(Ve)):this.eventManager.addEventListener(ae,_e,tn(Ve))}}class Gt extends Ze{constructor(ae,_e,Ve,Tt){super(ae),this.component=Ve;const un=sn(Tt+"-"+Ve.id,Ve.styles,[]);_e.addStyles(un),this.contentAttr=function gt($){return"_ngcontent-%COMP%".replace(ze,$)}(Tt+"-"+Ve.id),this.hostAttr=function vt($){return"_nghost-%COMP%".replace(ze,$)}(Tt+"-"+Ve.id)}applyToHost(ae){super.setAttribute(ae,this.hostAttr,"")}createElement(ae,_e){const Ve=super.createElement(ae,_e);return super.setAttribute(Ve,this.contentAttr,""),Ve}}class Ut extends Ze{constructor(ae,_e,Ve,Tt){super(ae),this.sharedStylesHost=_e,this.hostEl=Ve,this.shadowRoot=Ve.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const un=sn(Tt.id,Tt.styles,[]);for(let Dn=0;Dn<un.length;Dn++){const Ln=document.createElement("style");Ln.textContent=un[Dn],this.shadowRoot.appendChild(Ln)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ae,_e){return super.appendChild(this.nodeOrShadowRoot(ae),_e)}insertBefore(ae,_e,Ve){return super.insertBefore(this.nodeOrShadowRoot(ae),_e,Ve)}removeChild(ae,_e){return super.removeChild(this.nodeOrShadowRoot(ae),_e)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}}let Rt=(()=>{class $ extends Et{constructor(_e){super(_e)}supports(_e){return!0}addEventListener(_e,Ve,Tt){return _e.addEventListener(Ve,Tt,!1),()=>this.removeEventListener(_e,Ve,Tt)}removeEventListener(_e,Ve,Tt){return _e.removeEventListener(Ve,Tt)}}return $.\u0275fac=function(_e){return new(_e||$)(S.LFG(g.K0))},$.\u0275prov=S.Yz7({token:$,factory:$.\u0275fac}),$})();const Yt=["alt","control","meta","shift"],jn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},wn={alt:$=>$.altKey,control:$=>$.ctrlKey,meta:$=>$.metaKey,shift:$=>$.shiftKey};let Ot=(()=>{class $ extends Et{constructor(_e){super(_e)}supports(_e){return null!=$.parseEventName(_e)}addEventListener(_e,Ve,Tt){const un=$.parseEventName(Ve),Dn=$.eventCallback(un.fullKey,Tt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(_e,un.domEventName,Dn))}static parseEventName(_e){const Ve=_e.toLowerCase().split("."),Tt=Ve.shift();if(0===Ve.length||"keydown"!==Tt&&"keyup"!==Tt)return null;const un=$._normalizeKey(Ve.pop());let Dn="";if(Yt.forEach(Ir=>{const nr=Ve.indexOf(Ir);nr>-1&&(Ve.splice(nr,1),Dn+=Ir+".")}),Dn+=un,0!=Ve.length||0===un.length)return null;const Ln={};return Ln.domEventName=Tt,Ln.fullKey=Dn,Ln}static getEventFullKey(_e){let Ve="",Tt=function hn($){let ae=$.key;if(null==ae){if(ae=$.keyIdentifier,null==ae)return"Unidentified";ae.startsWith("U+")&&(ae=String.fromCharCode(parseInt(ae.substring(2),16)),3===$.location&&nn.hasOwnProperty(ae)&&(ae=nn[ae]))}return jn[ae]||ae}(_e);return Tt=Tt.toLowerCase()," "===Tt?Tt="space":"."===Tt&&(Tt="dot"),Yt.forEach(un=>{un!=Tt&&wn[un](_e)&&(Ve+=un+".")}),Ve+=Tt,Ve}static eventCallback(_e,Ve,Tt){return un=>{$.getEventFullKey(un)===_e&&Tt.runGuarded(()=>Ve(un))}}static _normalizeKey(_e){return"esc"===_e?"escape":_e}}return $.\u0275fac=function(_e){return new(_e||$)(S.LFG(g.K0))},$.\u0275prov=S.Yz7({token:$,factory:$.\u0275fac}),$})();const Sn=(0,S.eFA)(S._c5,"browser",[{provide:S.Lbi,useValue:g.bD},{provide:S.g9A,useValue:function xt(){re.makeCurrent(),ke.init()},multi:!0},{provide:g.K0,useFactory:function fn(){return(0,S.RDi)(document),document},deps:[]}]),Zn=[{provide:S.zSh,useValue:"root"},{provide:S.qLn,useFactory:function rn(){return new S.qLn},deps:[]},{provide:it,useClass:Rt,multi:!0,deps:[g.K0,S.R0b,S.Lbi]},{provide:it,useClass:Ot,multi:!0,deps:[g.K0]},{provide:xn,useClass:xn,deps:[ut,at,S.AFp]},{provide:S.FYo,useExisting:xn},{provide:et,useExisting:at},{provide:at,useClass:at,deps:[g.K0]},{provide:S.dDg,useClass:S.dDg,deps:[S.R0b]},{provide:ut,useClass:ut,deps:[it,S.R0b]},{provide:g.JF,useClass:qe,deps:[]}];let ur=(()=>{class ${constructor(_e){if(_e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(_e){return{ngModule:$,providers:[{provide:S.AFp,useValue:_e.appId},{provide:ce,useExisting:S.AFp},se]}}}return $.\u0275fac=function(_e){return new(_e||$)(S.LFG($,12))},$.\u0275mod=S.oAB({type:$}),$.\u0275inj=S.cJS({providers:Zn,imports:[g.ez,S.hGG]}),$})();"undefined"!=typeof window&&window;let we=(()=>{class ${}return $.\u0275fac=function(_e){return new(_e||$)},$.\u0275prov=S.Yz7({token:$,factory:function(_e){let Ve=null;return Ve=_e?new(_e||$):S.LFG(ue),Ve},providedIn:"root"}),$})(),ue=(()=>{class $ extends we{constructor(_e){super(),this._doc=_e}sanitize(_e,Ve){if(null==Ve)return null;switch(_e){case S.q3G.NONE:return Ve;case S.q3G.HTML:return(0,S.qzn)(Ve,"HTML")?(0,S.z3N)(Ve):(0,S.EiD)(this._doc,String(Ve)).toString();case S.q3G.STYLE:return(0,S.qzn)(Ve,"Style")?(0,S.z3N)(Ve):Ve;case S.q3G.SCRIPT:if((0,S.qzn)(Ve,"Script"))return(0,S.z3N)(Ve);throw new Error("unsafe value used in a script context");case S.q3G.URL:return(0,S.yhl)(Ve),(0,S.qzn)(Ve,"URL")?(0,S.z3N)(Ve):(0,S.mCW)(String(Ve));case S.q3G.RESOURCE_URL:if((0,S.qzn)(Ve,"ResourceURL"))return(0,S.z3N)(Ve);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${_e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(_e){return(0,S.JVY)(_e)}bypassSecurityTrustStyle(_e){return(0,S.L6k)(_e)}bypassSecurityTrustScript(_e){return(0,S.eBb)(_e)}bypassSecurityTrustUrl(_e){return(0,S.LAX)(_e)}bypassSecurityTrustResourceUrl(_e){return(0,S.pB0)(_e)}}return $.\u0275fac=function(_e){return new(_e||$)(S.LFG(g.K0))},$.\u0275prov=S.Yz7({token:$,factory:function(_e){let Ve=null;return Ve=_e?new _e:function xe($){return new ue($.get(g.K0))}(S.LFG(S.zs3)),Ve},providedIn:"root"}),$})()},1402:(Je,Te,b)=>{b.d(Te,{gz:()=>Wr,F0:()=>ki,rH:()=>lo,Od:()=>Ws,yS:()=>Gs,Bz:()=>Sa,lC:()=>Ro});var g=b(5e3),S=b(8306),U=b(727),re=b(4482),de=b(5403);function Ie(){return(0,re.e)((x,D)=>{let T=null;x._refCount++;const j=(0,de.x)(D,void 0,void 0,void 0,()=>{if(!x||x._refCount<=0||0<--x._refCount)return void(T=null);const Q=x._connection,ve=T;T=null,Q&&(!ve||Q===ve)&&Q.unsubscribe(),D.unsubscribe()});x.subscribe(j),j.closed||(T=x.connect())})}class Ce extends S.y{constructor(D,T){super(),this.source=D,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,re.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,null==D||D.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new U.w0;const T=this.getSubject();D.add(this.source.subscribe((0,de.x)(T,void 0,()=>{this._teardown(),T.complete()},j=>{this._teardown(),T.error(j)},()=>this._teardown()))),D.closed&&(this._connection=null,D=U.w0.EMPTY)}return D}refCount(){return Ie()(this)}}var oe=b(8996),ce=b(9646),te=b(1135),se=b(9841),ke=b(2843),qe=b(6805),it=b(7272),ut=b(9770),Et=b(515),et=b(7579),at=b(9300);function He(x){return x<=0?()=>Et.E:(0,re.e)((D,T)=>{let j=[];D.subscribe((0,de.x)(T,Q=>{j.push(Q),x<j.length&&j.shift()},()=>{for(const Q of j)T.next(Q);T.complete()},void 0,()=>{j=null}))})}var Mt=b(8068),ze=b(6590),Be=b(4671),Qe=b(4004),Ne=b(3900),gt=b(5698),vt=b(8675),sn=b(5026),tn=b(262),vn=b(4351),xn=b(590),Ze=b(5577),ft=b(8505),St=b(8746),Gt=b(8189),Ut=b(9808);class Rt{constructor(D,T){this.id=D,this.url=T}}class Yt extends Rt{constructor(D,T,j="imperative",Q=null){super(D,T),this.navigationTrigger=j,this.restoredState=Q}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nn extends Rt{constructor(D,T,j){super(D,T),this.urlAfterRedirects=j}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jn extends Rt{constructor(D,T,j){super(D,T),this.reason=j}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nn extends Rt{constructor(D,T,j){super(D,T),this.error=j}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wn extends Rt{constructor(D,T,j,Q){super(D,T),this.urlAfterRedirects=j,this.state=Q}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ot extends Rt{constructor(D,T,j,Q){super(D,T),this.urlAfterRedirects=j,this.state=Q}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hn extends Rt{constructor(D,T,j,Q,ve){super(D,T),this.urlAfterRedirects=j,this.state=Q,this.shouldActivate=ve}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xt extends Rt{constructor(D,T,j,Q){super(D,T),this.urlAfterRedirects=j,this.state=Q}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rn extends Rt{constructor(D,T,j,Q){super(D,T),this.urlAfterRedirects=j,this.state=Q}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fn{constructor(D){this.route=D}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fn{constructor(D){this.route=D}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sn{constructor(D){this.snapshot=D}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zn{constructor(D){this.snapshot=D}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ur{constructor(D){this.snapshot=D}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dr{constructor(D){this.snapshot=D}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mn{constructor(D,T,j){this.routerEvent=D,this.position=T,this.anchor=j}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Tn="primary";class De{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const T=this.params[D];return Array.isArray(T)?T[0]:T}return null}getAll(D){if(this.has(D)){const T=this.params[D];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function qn(x){return new De(x)}const rt="ngNavigationCancelingError";function Y(x){const D=Error("NavigationCancelingError: "+x);return D[rt]=!0,D}function Re(x,D,T){const j=T.path.split("/");if(j.length>x.length||"full"===T.pathMatch&&(D.hasChildren()||j.length<x.length))return null;const Q={};for(let ve=0;ve<j.length;ve++){const Ae=j[ve],st=x[ve];if(Ae.startsWith(":"))Q[Ae.substring(1)]=st;else if(Ae!==st.path)return null}return{consumed:x.slice(0,j.length),posParams:Q}}function yt(x,D){const T=x?Object.keys(x):void 0,j=D?Object.keys(D):void 0;if(!T||!j||T.length!=j.length)return!1;let Q;for(let ve=0;ve<T.length;ve++)if(Q=T[ve],!Ft(x[Q],D[Q]))return!1;return!0}function Ft(x,D){if(Array.isArray(x)&&Array.isArray(D)){if(x.length!==D.length)return!1;const T=[...x].sort(),j=[...D].sort();return T.every((Q,ve)=>j[ve]===Q)}return x===D}function Zt(x){return Array.prototype.concat.apply([],x)}function zt(x){return x.length>0?x[x.length-1]:null}function Kn(x,D){for(const T in x)x.hasOwnProperty(T)&&D(x[T],T)}function Bn(x){return(0,g.CqO)(x)?x:(0,g.QGY)(x)?(0,oe.D)(Promise.resolve(x)):(0,ce.of)(x)}const lr={exact:function Ue(x,D,T){if(!we(x.segments,D.segments)||!L(x.segments,D.segments,T)||x.numberOfChildren!==D.numberOfChildren)return!1;for(const j in D.children)if(!x.children[j]||!Ue(x.children[j],D.children[j],T))return!1;return!0},subset:he},tr={exact:function dt(x,D){return yt(x,D)},subset:function It(x,D){return Object.keys(D).length<=Object.keys(x).length&&Object.keys(D).every(T=>Ft(x[T],D[T]))},ignored:()=>!0};function pt(x,D,T){return lr[T.paths](x.root,D.root,T.matrixParams)&&tr[T.queryParams](x.queryParams,D.queryParams)&&!("exact"===T.fragment&&x.fragment!==D.fragment)}function he(x,D,T){return N(x,D,D.segments,T)}function N(x,D,T,j){if(x.segments.length>T.length){const Q=x.segments.slice(0,T.length);return!(!we(Q,T)||D.hasChildren()||!L(Q,T,j))}if(x.segments.length===T.length){if(!we(x.segments,T)||!L(x.segments,T,j))return!1;for(const Q in D.children)if(!x.children[Q]||!he(x.children[Q],D.children[Q],j))return!1;return!0}{const Q=T.slice(0,x.segments.length),ve=T.slice(x.segments.length);return!!(we(x.segments,Q)&&L(x.segments,Q,j)&&x.children[Tn])&&N(x.children[Tn],D,ve,j)}}function L(x,D,T){return D.every((j,Q)=>tr[T](x[Q].parameters,j.parameters))}class q{constructor(D,T,j){this.root=D,this.queryParams=T,this.fragment=j}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return $.serialize(this)}}class X{constructor(D,T){this.segments=D,this.children=T,this.parent=null,Kn(T,(j,Q)=>j.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ae(this)}}class Fe{constructor(D,T){this.path=D,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=qn(this.parameters)),this._parameterMap}toString(){return nr(this)}}function we(x,D){return x.length===D.length&&x.every((T,j)=>T.path===D[j].path)}class ue{}class be{parse(D){const T=new wi(D);return new q(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(D){const T=`/${_e(D.root,!0)}`,j=function ai(x){const D=Object.keys(x).map(T=>{const j=x[T];return Array.isArray(j)?j.map(Q=>`${Tt(T)}=${Tt(Q)}`).join("&"):`${Tt(T)}=${Tt(j)}`}).filter(T=>!!T);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${T}${j}${"string"==typeof D.fragment?`#${function un(x){return encodeURI(x)}(D.fragment)}`:""}`}}const $=new be;function ae(x){return x.segments.map(D=>nr(D)).join("/")}function _e(x,D){if(!x.hasChildren())return ae(x);if(D){const T=x.children[Tn]?_e(x.children[Tn],!1):"",j=[];return Kn(x.children,(Q,ve)=>{ve!==Tn&&j.push(`${ve}:${_e(Q,!1)}`)}),j.length>0?`${T}(${j.join("//")})`:T}{const T=function xe(x,D){let T=[];return Kn(x.children,(j,Q)=>{Q===Tn&&(T=T.concat(D(j,Q)))}),Kn(x.children,(j,Q)=>{Q!==Tn&&(T=T.concat(D(j,Q)))}),T}(x,(j,Q)=>Q===Tn?[_e(x.children[Tn],!1)]:[`${Q}:${_e(j,!1)}`]);return 1===Object.keys(x.children).length&&null!=x.children[Tn]?`${ae(x)}/${T[0]}`:`${ae(x)}/(${T.join("//")})`}}function Ve(x){return encodeURIComponent(x).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tt(x){return Ve(x).replace(/%3B/gi,";")}function Dn(x){return Ve(x).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ln(x){return decodeURIComponent(x)}function Ir(x){return Ln(x.replace(/\+/g,"%20"))}function nr(x){return`${Dn(x.path)}${function xr(x){return Object.keys(x).map(D=>`;${Dn(D)}=${Dn(x[D])}`).join("")}(x.parameters)}`}const Ur=/^[^\/()?;=#]+/;function Hi(x){const D=x.match(Ur);return D?D[0]:""}const Ki=/^[^=?&#]+/,mr=/^[^&#]+/;class wi{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let j={};return this.peekStartsWith("(")&&(j=this.parseParens(!1)),(D.length>0||Object.keys(T).length>0)&&(j[Tn]=new X(D,T)),j}parseSegment(){const D=Hi(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(D),new Fe(Ln(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const T=Hi(this.remaining);if(!T)return;this.capture(T);let j="";if(this.consumeOptional("=")){const Q=Hi(this.remaining);Q&&(j=Q,this.capture(j))}D[Ln(T)]=Ln(j)}parseQueryParam(D){const T=function In(x){const D=x.match(Ki);return D?D[0]:""}(this.remaining);if(!T)return;this.capture(T);let j="";if(this.consumeOptional("=")){const Ae=function Kr(x){const D=x.match(mr);return D?D[0]:""}(this.remaining);Ae&&(j=Ae,this.capture(j))}const Q=Ir(T),ve=Ir(j);if(D.hasOwnProperty(Q)){let Ae=D[Q];Array.isArray(Ae)||(Ae=[Ae],D[Q]=Ae),Ae.push(ve)}else D[Q]=ve}parseParens(D){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const j=Hi(this.remaining),Q=this.remaining[j.length];if("/"!==Q&&")"!==Q&&";"!==Q)throw new Error(`Cannot parse url '${this.url}'`);let ve;j.indexOf(":")>-1?(ve=j.substr(0,j.indexOf(":")),this.capture(ve),this.capture(":")):D&&(ve=Tn);const Ae=this.parseChildren();T[ve]=1===Object.keys(Ae).length?Ae[Tn]:new X([],Ae),this.consumeOptional("//")}return T}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new Error(`Expected "${D}".`)}}class $i{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const T=this.pathFromRoot(D);return T.length>1?T[T.length-2]:null}children(D){const T=pi(D,this._root);return T?T.children.map(j=>j.value):[]}firstChild(D){const T=pi(D,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(D){const T=Oi(D,this._root);return T.length<2?[]:T[T.length-2].children.map(Q=>Q.value).filter(Q=>Q!==D)}pathFromRoot(D){return Oi(D,this._root).map(T=>T.value)}}function pi(x,D){if(x===D.value)return D;for(const T of D.children){const j=pi(x,T);if(j)return j}return null}function Oi(x,D){if(x===D.value)return[D];for(const T of D.children){const j=Oi(x,T);if(j.length)return j.unshift(D),j}return[]}class Nr{constructor(D,T){this.value=D,this.children=T}toString(){return`TreeNode(${this.value})`}}function Pi(x){const D={};return x&&x.children.forEach(T=>D[T.value.outlet]=T),D}class li extends $i{constructor(D,T){super(D),this.snapshot=T,Ke(this,D)}toString(){return this.snapshot.toString()}}function hr(x,D){const T=function ps(x,D){const Ae=new di([],{},{},"",{},Tn,D,null,x.root,-1,{});return new Gi("",new Nr(Ae,[]))}(x,D),j=new te.X([new Fe("",{})]),Q=new te.X({}),ve=new te.X({}),Ae=new te.X({}),st=new te.X(""),qt=new Wr(j,Q,Ae,st,ve,Tn,D,T.root);return qt.snapshot=T.root,new li(new Nr(qt,[]),T)}class Wr{constructor(D,T,j,Q,ve,Ae,st,qt){this.url=D,this.params=T,this.queryParams=j,this.fragment=Q,this.data=ve,this.outlet=Ae,this.component=st,this._futureSnapshot=qt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qe.U)(D=>qn(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qe.U)(D=>qn(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yi(x,D="emptyOnly"){const T=x.pathFromRoot;let j=0;if("always"!==D)for(j=T.length-1;j>=1;){const Q=T[j],ve=T[j-1];if(Q.routeConfig&&""===Q.routeConfig.path)j--;else{if(ve.component)break;j--}}return function ns(x){return x.reduce((D,T)=>({params:Object.assign(Object.assign({},D.params),T.params),data:Object.assign(Object.assign({},D.data),T.data),resolve:Object.assign(Object.assign({},D.resolve),T._resolvedData)}),{params:{},data:{},resolve:{}})}(T.slice(j))}class di{constructor(D,T,j,Q,ve,Ae,st,qt,Wn,Yr,ar){this.url=D,this.params=T,this.queryParams=j,this.fragment=Q,this.data=ve,this.outlet=Ae,this.component=st,this.routeConfig=qt,this._urlSegment=Wn,this._lastPathIndex=Yr,this._resolve=ar}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(j=>j.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gi extends $i{constructor(D,T){super(T),this.url=D,Ke(this,T)}toString(){return Ht(this._root)}}function Ke(x,D){D.value._routerState=x,D.children.forEach(T=>Ke(x,T))}function Ht(x){const D=x.children.length>0?` { ${x.children.map(Ht).join(", ")} } `:"";return`${x.value}${D}`}function ct(x){if(x.snapshot){const D=x.snapshot,T=x._futureSnapshot;x.snapshot=T,yt(D.queryParams,T.queryParams)||x.queryParams.next(T.queryParams),D.fragment!==T.fragment&&x.fragment.next(T.fragment),yt(D.params,T.params)||x.params.next(T.params),function Xe(x,D){if(x.length!==D.length)return!1;for(let T=0;T<x.length;++T)if(!yt(x[T],D[T]))return!1;return!0}(D.url,T.url)||x.url.next(T.url),yt(D.data,T.data)||x.data.next(T.data)}else x.snapshot=x._futureSnapshot,x.data.next(x._futureSnapshot.data)}function Bt(x,D){const T=yt(x.params,D.params)&&function ht(x,D){return we(x,D)&&x.every((T,j)=>yt(T.parameters,D[j].parameters))}(x.url,D.url);return T&&!(!x.parent!=!D.parent)&&(!x.parent||Bt(x.parent,D.parent))}function _n(x,D,T){if(T&&x.shouldReuseRoute(D.value,T.value.snapshot)){const j=T.value;j._futureSnapshot=D.value;const Q=function _r(x,D,T){return D.children.map(j=>{for(const Q of T.children)if(x.shouldReuseRoute(j.value,Q.value.snapshot))return _n(x,j,Q);return _n(x,j)})}(x,D,T);return new Nr(j,Q)}{if(x.shouldAttach(D.value)){const ve=x.retrieve(D.value);if(null!==ve){const Ae=ve.route;return Ae.value._futureSnapshot=D.value,Ae.children=D.children.map(st=>_n(x,st)),Ae}}const j=function Ei(x){return new Wr(new te.X(x.url),new te.X(x.params),new te.X(x.queryParams),new te.X(x.fragment),new te.X(x.data),x.outlet,x.component,x)}(D.value),Q=D.children.map(ve=>_n(x,ve));return new Nr(j,Q)}}function Zr(x){return"object"==typeof x&&null!=x&&!x.outlets&&!x.segmentPath}function Fr(x){return"object"==typeof x&&null!=x&&x.outlets}function Qi(x,D,T,j,Q){let ve={};if(j&&Kn(j,(st,qt)=>{ve[qt]=Array.isArray(st)?st.map(Wn=>`${Wn}`):`${st}`}),x===D)return new q(T,ve,Q);const Ae=Qs(x,D,T);return new q(Ae,ve,Q)}function Qs(x,D,T){const j={};return Kn(x.children,(Q,ve)=>{j[ve]=Q===D?T:Qs(Q,D,T)}),new X(x.segments,j)}class xs{constructor(D,T,j){if(this.isAbsolute=D,this.numberOfDoubleDots=T,this.commands=j,D&&j.length>0&&Zr(j[0]))throw new Error("Root segment cannot have matrix parameters");const Q=j.find(Fr);if(Q&&Q!==zt(j))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ts{constructor(D,T,j){this.segmentGroup=D,this.processChildren=T,this.index=j}}function on(x,D,T){if(x||(x=new X([],{})),0===x.segments.length&&x.hasChildren())return kn(x,D,T);const j=function Yn(x,D,T){let j=0,Q=D;const ve={match:!1,pathIndex:0,commandIndex:0};for(;Q<x.segments.length;){if(j>=T.length)return ve;const Ae=x.segments[Q],st=T[j];if(Fr(st))break;const qt=`${st}`,Wn=j<T.length-1?T[j+1]:null;if(Q>0&&void 0===qt)break;if(qt&&Wn&&"object"==typeof Wn&&void 0===Wn.outlets){if(!Ps(qt,Wn,Ae))return ve;j+=2}else{if(!Ps(qt,{},Ae))return ve;j++}Q++}return{match:!0,pathIndex:Q,commandIndex:j}}(x,D,T),Q=T.slice(j.commandIndex);if(j.match&&j.pathIndex<x.segments.length){const ve=new X(x.segments.slice(0,j.pathIndex),{});return ve.children[Tn]=new X(x.segments.slice(j.pathIndex),x.children),kn(ve,0,Q)}return j.match&&0===Q.length?new X(x.segments,{}):j.match&&!x.hasChildren()?vr(x,D,T):j.match?kn(x,0,Q):vr(x,D,T)}function kn(x,D,T){if(0===T.length)return new X(x.segments,{});{const j=function Pt(x){return Fr(x[0])?x[0].outlets:{[Tn]:x}}(T),Q={};return Kn(j,(ve,Ae)=>{"string"==typeof ve&&(ve=[ve]),null!==ve&&(Q[Ae]=on(x.children[Ae],D,ve))}),Kn(x.children,(ve,Ae)=>{void 0===j[Ae]&&(Q[Ae]=ve)}),new X(x.segments,Q)}}function vr(x,D,T){const j=x.segments.slice(0,D);let Q=0;for(;Q<T.length;){const ve=T[Q];if(Fr(ve)){const qt=bi(ve.outlets);return new X(j,qt)}if(0===Q&&Zr(T[0])){j.push(new Fe(x.segments[D].path,yi(T[0]))),Q++;continue}const Ae=Fr(ve)?ve.outlets[Tn]:`${ve}`,st=Q<T.length-1?T[Q+1]:null;Ae&&st&&Zr(st)?(j.push(new Fe(Ae,yi(st))),Q+=2):(j.push(new Fe(Ae,{})),Q++)}return new X(j,{})}function bi(x){const D={};return Kn(x,(T,j)=>{"string"==typeof T&&(T=[T]),null!==T&&(D[j]=vr(new X([],{}),0,T))}),D}function yi(x){const D={};return Kn(x,(T,j)=>D[j]=`${T}`),D}function Ps(x,D,T){return x==T.path&&yt(D,T.parameters)}class Zi{constructor(D,T,j,Q){this.routeReuseStrategy=D,this.futureState=T,this.currState=j,this.forwardEvent=Q}activate(D){const T=this.futureState._root,j=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,j,D),ct(this.futureState.root),this.activateChildRoutes(T,j,D)}deactivateChildRoutes(D,T,j){const Q=Pi(T);D.children.forEach(ve=>{const Ae=ve.value.outlet;this.deactivateRoutes(ve,Q[Ae],j),delete Q[Ae]}),Kn(Q,(ve,Ae)=>{this.deactivateRouteAndItsChildren(ve,j)})}deactivateRoutes(D,T,j){const Q=D.value,ve=T?T.value:null;if(Q===ve)if(Q.component){const Ae=j.getContext(Q.outlet);Ae&&this.deactivateChildRoutes(D,T,Ae.children)}else this.deactivateChildRoutes(D,T,j);else ve&&this.deactivateRouteAndItsChildren(T,j)}deactivateRouteAndItsChildren(D,T){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,T):this.deactivateRouteAndOutlet(D,T)}detachAndStoreRouteSubtree(D,T){const j=T.getContext(D.value.outlet),Q=j&&D.value.component?j.children:T,ve=Pi(D);for(const Ae of Object.keys(ve))this.deactivateRouteAndItsChildren(ve[Ae],Q);if(j&&j.outlet){const Ae=j.outlet.detach(),st=j.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:Ae,route:D,contexts:st})}}deactivateRouteAndOutlet(D,T){const j=T.getContext(D.value.outlet),Q=j&&D.value.component?j.children:T,ve=Pi(D);for(const Ae of Object.keys(ve))this.deactivateRouteAndItsChildren(ve[Ae],Q);j&&j.outlet&&(j.outlet.deactivate(),j.children.onOutletDeactivated(),j.attachRef=null,j.resolver=null,j.route=null)}activateChildRoutes(D,T,j){const Q=Pi(T);D.children.forEach(ve=>{this.activateRoutes(ve,Q[ve.value.outlet],j),this.forwardEvent(new Dr(ve.value.snapshot))}),D.children.length&&this.forwardEvent(new Zn(D.value.snapshot))}activateRoutes(D,T,j){const Q=D.value,ve=T?T.value:null;if(ct(Q),Q===ve)if(Q.component){const Ae=j.getOrCreateContext(Q.outlet);this.activateChildRoutes(D,T,Ae.children)}else this.activateChildRoutes(D,T,j);else if(Q.component){const Ae=j.getOrCreateContext(Q.outlet);if(this.routeReuseStrategy.shouldAttach(Q.snapshot)){const st=this.routeReuseStrategy.retrieve(Q.snapshot);this.routeReuseStrategy.store(Q.snapshot,null),Ae.children.onOutletReAttached(st.contexts),Ae.attachRef=st.componentRef,Ae.route=st.route.value,Ae.outlet&&Ae.outlet.attach(st.componentRef,st.route.value),ct(st.route.value),this.activateChildRoutes(D,null,Ae.children)}else{const st=function ma(x){for(let D=x.parent;D;D=D.parent){const T=D.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig;if(T&&T.component)return null}return null}(Q.snapshot),qt=st?st.module.componentFactoryResolver:null;Ae.attachRef=null,Ae.route=Q,Ae.resolver=qt,Ae.outlet&&Ae.outlet.activateWith(Q,qt),this.activateChildRoutes(D,null,Ae.children)}}else this.activateChildRoutes(D,null,j)}}class Ds{constructor(D,T){this.routes=D,this.module=T}}function Ri(x){return"function"==typeof x}function rs(x){return x instanceof q}const cs=Symbol("INITIAL_VALUE");function mo(){return(0,Ne.w)(x=>(0,se.a)(x.map(D=>D.pipe((0,gt.q)(1),(0,vt.O)(cs)))).pipe((0,sn.R)((D,T)=>{let j=!1;return T.reduce((Q,ve,Ae)=>Q!==cs?Q:(ve===cs&&(j=!0),j||!1!==ve&&Ae!==T.length-1&&!rs(ve)?Q:ve),D)},cs),(0,at.h)(D=>D!==cs),(0,Qe.U)(D=>rs(D)?D:!0===D),(0,gt.q)(1)))}class Fo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Fs,this.attachRef=null}}class Fs{constructor(){this.contexts=new Map}onChildOutletCreated(D,T){const j=this.getOrCreateContext(D);j.outlet=T,this.contexts.set(D,j)}onChildOutletDestroyed(D){const T=this.getContext(D);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let T=this.getContext(D);return T||(T=new Fo,this.contexts.set(D,T)),T}getContext(D){return this.contexts.get(D)||null}}let Ro=(()=>{class x{constructor(T,j,Q,ve,Ae){this.parentContexts=T,this.location=j,this.resolver=Q,this.changeDetector=Ae,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=ve||Tn,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,j){this.activated=T,this._activatedRoute=j,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,j){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;const Ae=(j=j||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),st=this.parentContexts.getOrCreateContext(this.name).children,qt=new Xs(T,st,this.location.injector);this.activated=this.location.createComponent(Ae,this.location.length,qt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return x.\u0275fac=function(T){return new(T||x)(g.Y36(Fs),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},x.\u0275dir=g.lG2({type:x,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),x})();class Xs{constructor(D,T,j){this.route=D,this.childContexts=T,this.parent=j}get(D,T){return D===Wr?this.route:D===Fs?this.childContexts:this.parent.get(D,T)}}let Is=(()=>{class x{}return x.\u0275fac=function(T){return new(T||x)},x.\u0275cmp=g.Xpm({type:x,selectors:[["ng-component"]],decls:1,vars:0,template:function(T,j){1&T&&g._UZ(0,"router-outlet")},directives:[Ro],encapsulation:2}),x})();function oo(x,D=""){for(let T=0;T<x.length;T++){const j=x[T];Ci(j,is(D,j))}}function Ci(x,D){x.children&&oo(x.children,D)}function is(x,D){return D?x||D.path?x&&!D.path?`${x}/`:!x&&D.path?D.path:`${x}/${D.path}`:"":x}function Co(x){const D=x.children&&x.children.map(Co),T=D?Object.assign(Object.assign({},x),{children:D}):Object.assign({},x);return!T.component&&(D||T.loadChildren)&&T.outlet&&T.outlet!==Tn&&(T.component=Is),T}function fr(x){return x.outlet||Tn}function Br(x,D){const T=x.filter(j=>fr(j)===D);return T.push(...x.filter(j=>fr(j)!==D)),T}const Sr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function os(x,D,T){var j;if(""===D.path)return"full"===D.pathMatch&&(x.hasChildren()||T.length>0)?Object.assign({},Sr):{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const ve=(D.matcher||Re)(T,x,D);if(!ve)return Object.assign({},Sr);const Ae={};Kn(ve.posParams,(qt,Wn)=>{Ae[Wn]=qt.path});const st=ve.consumed.length>0?Object.assign(Object.assign({},Ae),ve.consumed[ve.consumed.length-1].parameters):Ae;return{matched:!0,consumedSegments:ve.consumed,remainingSegments:T.slice(ve.consumed.length),parameters:st,positionalParamSegments:null!==(j=ve.posParams)&&void 0!==j?j:{}}}function ci(x,D,T,j,Q="corrected"){if(T.length>0&&function gi(x,D,T){return T.some(j=>fe(x,D,j)&&fr(j)!==Tn)}(x,T,j)){const Ae=new X(D,function Mo(x,D,T,j){const Q={};Q[Tn]=j,j._sourceSegment=x,j._segmentIndexShift=D.length;for(const ve of T)if(""===ve.path&&fr(ve)!==Tn){const Ae=new X([],{});Ae._sourceSegment=x,Ae._segmentIndexShift=D.length,Q[fr(ve)]=Ae}return Q}(x,D,j,new X(T,x.children)));return Ae._sourceSegment=x,Ae._segmentIndexShift=D.length,{segmentGroup:Ae,slicedSegments:[]}}if(0===T.length&&function H(x,D,T){return T.some(j=>fe(x,D,j))}(x,T,j)){const Ae=new X(x.segments,function As(x,D,T,j,Q,ve){const Ae={};for(const st of j)if(fe(x,T,st)&&!Q[fr(st)]){const qt=new X([],{});qt._sourceSegment=x,qt._segmentIndexShift="legacy"===ve?x.segments.length:D.length,Ae[fr(st)]=qt}return Object.assign(Object.assign({},Q),Ae)}(x,D,T,j,x.children,Q));return Ae._sourceSegment=x,Ae._segmentIndexShift=D.length,{segmentGroup:Ae,slicedSegments:T}}const ve=new X(x.segments,x.children);return ve._sourceSegment=x,ve._segmentIndexShift=D.length,{segmentGroup:ve,slicedSegments:T}}function fe(x,D,T){return(!(x.hasChildren()||D.length>0)||"full"!==T.pathMatch)&&""===T.path}function V(x,D,T,j){return!!(fr(x)===j||j!==Tn&&fe(D,T,x))&&("**"===x.path||os(D,x,T).matched)}function Ee(x,D,T){return 0===D.length&&!x.children[T]}class ot{constructor(D){this.segmentGroup=D||null}}class Wt{constructor(D){this.urlTree=D}}function Kt(x){return(0,ke._)(new ot(x))}function zn(x){return(0,ke._)(new Wt(x))}class Vr{constructor(D,T,j,Q,ve){this.configLoader=T,this.urlSerializer=j,this.urlTree=Q,this.config=ve,this.allowRedirects=!0,this.ngModule=D.get(g.h0i)}apply(){const D=ci(this.urlTree.root,[],[],this.config).segmentGroup,T=new X(D.segments,D.children);return this.expandSegmentGroup(this.ngModule,this.config,T,Tn).pipe((0,Qe.U)(ve=>this.createUrlTree(qr(ve),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,tn.K)(ve=>{if(ve instanceof Wt)return this.allowRedirects=!1,this.match(ve.urlTree);throw ve instanceof ot?this.noMatchError(ve):ve}))}match(D){return this.expandSegmentGroup(this.ngModule,this.config,D.root,Tn).pipe((0,Qe.U)(Q=>this.createUrlTree(qr(Q),D.queryParams,D.fragment))).pipe((0,tn.K)(Q=>{throw Q instanceof ot?this.noMatchError(Q):Q}))}noMatchError(D){return new Error(`Cannot match any routes. URL Segment: '${D.segmentGroup}'`)}createUrlTree(D,T,j){const Q=D.segments.length>0?new X([],{[Tn]:D}):D;return new q(Q,T,j)}expandSegmentGroup(D,T,j,Q){return 0===j.segments.length&&j.hasChildren()?this.expandChildren(D,T,j).pipe((0,Qe.U)(ve=>new X([],ve))):this.expandSegment(D,j,T,j.segments,Q,!0)}expandChildren(D,T,j){const Q=[];for(const ve of Object.keys(j.children))"primary"===ve?Q.unshift(ve):Q.push(ve);return(0,oe.D)(Q).pipe((0,vn.b)(ve=>{const Ae=j.children[ve],st=Br(T,ve);return this.expandSegmentGroup(D,st,Ae,ve).pipe((0,Qe.U)(qt=>({segment:qt,outlet:ve})))}),(0,sn.R)((ve,Ae)=>(ve[Ae.outlet]=Ae.segment,ve),{}),function Ge(x,D){const T=arguments.length>=2;return j=>j.pipe(x?(0,at.h)((Q,ve)=>x(Q,ve,j)):Be.y,He(1),T?(0,ze.d)(D):(0,Mt.T)(()=>new qe.K))}())}expandSegment(D,T,j,Q,ve,Ae){return(0,oe.D)(j).pipe((0,vn.b)(st=>this.expandSegmentAgainstRoute(D,T,j,st,Q,ve,Ae).pipe((0,tn.K)(Wn=>{if(Wn instanceof ot)return(0,ce.of)(null);throw Wn}))),(0,xn.P)(st=>!!st),(0,tn.K)((st,qt)=>{if(st instanceof qe.K||"EmptyError"===st.name)return Ee(T,Q,ve)?(0,ce.of)(new X([],{})):Kt(T);throw st}))}expandSegmentAgainstRoute(D,T,j,Q,ve,Ae,st){return V(Q,T,ve,Ae)?void 0===Q.redirectTo?this.matchSegmentAgainstRoute(D,T,Q,ve,Ae):st&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,T,j,Q,ve,Ae):Kt(T):Kt(T)}expandSegmentAgainstRouteUsingRedirect(D,T,j,Q,ve,Ae){return"**"===Q.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,j,Q,Ae):this.expandRegularSegmentAgainstRouteUsingRedirect(D,T,j,Q,ve,Ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,T,j,Q){const ve=this.applyRedirectCommands([],j.redirectTo,{});return j.redirectTo.startsWith("/")?zn(ve):this.lineralizeSegments(j,ve).pipe((0,Ze.z)(Ae=>{const st=new X(Ae,{});return this.expandSegment(D,st,T,Ae,Q,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,T,j,Q,ve,Ae){const{matched:st,consumedSegments:qt,remainingSegments:Wn,positionalParamSegments:Yr}=os(T,Q,ve);if(!st)return Kt(T);const ar=this.applyRedirectCommands(qt,Q.redirectTo,Yr);return Q.redirectTo.startsWith("/")?zn(ar):this.lineralizeSegments(Q,ar).pipe((0,Ze.z)(_i=>this.expandSegment(D,T,j,_i.concat(Wn),Ae,!1)))}matchSegmentAgainstRoute(D,T,j,Q,ve){if("**"===j.path)return j.loadChildren?(j._loadedConfig?(0,ce.of)(j._loadedConfig):this.configLoader.load(D.injector,j)).pipe((0,Qe.U)(ar=>(j._loadedConfig=ar,new X(Q,{})))):(0,ce.of)(new X(Q,{}));const{matched:Ae,consumedSegments:st,remainingSegments:qt}=os(T,j,Q);return Ae?this.getChildConfig(D,j,Q).pipe((0,Ze.z)(Yr=>{const ar=Yr.module,_i=Yr.routes,{segmentGroup:vi,slicedSegments:ni}=ci(T,st,qt,_i),ds=new X(vi.segments,vi.children);if(0===ni.length&&ds.hasChildren())return this.expandChildren(ar,_i,ds).pipe((0,Qe.U)(ya=>new X(st,ya)));if(0===_i.length&&0===ni.length)return(0,ce.of)(new X(st,{}));const ms=fr(j)===ve;return this.expandSegment(ar,ds,_i,ni,ms?Tn:ve,!0).pipe((0,Qe.U)(Bo=>new X(st.concat(Bo.segments),Bo.children)))})):Kt(T)}getChildConfig(D,T,j){return T.children?(0,ce.of)(new Ds(T.children,D)):T.loadChildren?void 0!==T._loadedConfig?(0,ce.of)(T._loadedConfig):this.runCanLoadGuards(D.injector,T,j).pipe((0,Ze.z)(Q=>Q?this.configLoader.load(D.injector,T).pipe((0,Qe.U)(ve=>(T._loadedConfig=ve,ve))):function ri(x){return(0,ke._)(Y(`Cannot load children because the guard of the route "path: '${x.path}'" returned false`))}(T))):(0,ce.of)(new Ds([],D))}runCanLoadGuards(D,T,j){const Q=T.canLoad;if(!Q||0===Q.length)return(0,ce.of)(!0);const ve=Q.map(Ae=>{const st=D.get(Ae);let qt;if(function js(x){return x&&Ri(x.canLoad)}(st))qt=st.canLoad(T,j);else{if(!Ri(st))throw new Error("Invalid CanLoad guard");qt=st(T,j)}return Bn(qt)});return(0,ce.of)(ve).pipe(mo(),(0,ft.b)(Ae=>{if(!rs(Ae))return;const st=Y(`Redirecting to "${this.urlSerializer.serialize(Ae)}"`);throw st.url=Ae,st}),(0,Qe.U)(Ae=>!0===Ae))}lineralizeSegments(D,T){let j=[],Q=T.root;for(;;){if(j=j.concat(Q.segments),0===Q.numberOfChildren)return(0,ce.of)(j);if(Q.numberOfChildren>1||!Q.children[Tn])return(0,ke._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${D.redirectTo}'`));Q=Q.children[Tn]}}applyRedirectCommands(D,T,j){return this.applyRedirectCreatreUrlTree(T,this.urlSerializer.parse(T),D,j)}applyRedirectCreatreUrlTree(D,T,j,Q){const ve=this.createSegmentGroup(D,T.root,j,Q);return new q(ve,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(D,T){const j={};return Kn(D,(Q,ve)=>{if("string"==typeof Q&&Q.startsWith(":")){const st=Q.substring(1);j[ve]=T[st]}else j[ve]=Q}),j}createSegmentGroup(D,T,j,Q){const ve=this.createSegments(D,T.segments,j,Q);let Ae={};return Kn(T.children,(st,qt)=>{Ae[qt]=this.createSegmentGroup(D,st,j,Q)}),new X(ve,Ae)}createSegments(D,T,j,Q){return T.map(ve=>ve.path.startsWith(":")?this.findPosParam(D,ve,Q):this.findOrReturn(ve,j))}findPosParam(D,T,j){const Q=j[T.path.substring(1)];if(!Q)throw new Error(`Cannot redirect to '${D}'. Cannot find '${T.path}'.`);return Q}findOrReturn(D,T){let j=0;for(const Q of T){if(Q.path===D.path)return T.splice(j),Q;j++}return D}}function qr(x){const D={};for(const j of Object.keys(x.children)){const ve=qr(x.children[j]);(ve.segments.length>0||ve.hasChildren())&&(D[j]=ve)}return function Ti(x){if(1===x.numberOfChildren&&x.children[Tn]){const D=x.children[Tn];return new X(x.segments.concat(D.segments),D.children)}return x}(new X(x.segments,D))}class Hs{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class Hr{constructor(D,T){this.component=D,this.route=T}}function dr(x,D,T){const j=x._root;return Ar(j,D?D._root:null,T,[j.value])}function eo(x,D,T){const j=function $s(x){if(!x)return null;for(let D=x.parent;D;D=D.parent){const T=D.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig}return null}(D);return(j?j.module.injector:T).get(x)}function Ar(x,D,T,j,Q={canDeactivateChecks:[],canActivateChecks:[]}){const ve=Pi(D);return x.children.forEach(Ae=>{(function To(x,D,T,j,Q={canDeactivateChecks:[],canActivateChecks:[]}){const ve=x.value,Ae=D?D.value:null,st=T?T.getContext(x.value.outlet):null;if(Ae&&ve.routeConfig===Ae.routeConfig){const qt=function Do(x,D,T){if("function"==typeof T)return T(x,D);switch(T){case"pathParamsChange":return!we(x.url,D.url);case"pathParamsOrQueryParamsChange":return!we(x.url,D.url)||!yt(x.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bt(x,D)||!yt(x.queryParams,D.queryParams);default:return!Bt(x,D)}}(Ae,ve,ve.routeConfig.runGuardsAndResolvers);qt?Q.canActivateChecks.push(new Hs(j)):(ve.data=Ae.data,ve._resolvedData=Ae._resolvedData),Ar(x,D,ve.component?st?st.children:null:T,j,Q),qt&&st&&st.outlet&&st.outlet.isActivated&&Q.canDeactivateChecks.push(new Hr(st.outlet.component,Ae))}else Ae&&ao(D,st,Q),Q.canActivateChecks.push(new Hs(j)),Ar(x,null,ve.component?st?st.children:null:T,j,Q)})(Ae,ve[Ae.value.outlet],T,j.concat([Ae.value]),Q),delete ve[Ae.value.outlet]}),Kn(ve,(Ae,st)=>ao(Ae,T.getContext(st),Q)),Q}function ao(x,D,T){const j=Pi(x),Q=x.value;Kn(j,(ve,Ae)=>{ao(ve,Q.component?D?D.children.getContext(Ae):null:D,T)}),T.canDeactivateChecks.push(new Hr(Q.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,Q))}class rr{}function Qn(x){return new S.y(D=>D.error(x))}class zr{constructor(D,T,j,Q,ve,Ae){this.rootComponentType=D,this.config=T,this.urlTree=j,this.url=Q,this.paramsInheritanceStrategy=ve,this.relativeLinkResolution=Ae}recognize(){const D=ci(this.urlTree.root,[],[],this.config.filter(Ae=>void 0===Ae.redirectTo),this.relativeLinkResolution).segmentGroup,T=this.processSegmentGroup(this.config,D,Tn);if(null===T)return null;const j=new di([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Tn,this.rootComponentType,null,this.urlTree.root,-1,{}),Q=new Nr(j,T),ve=new Gi(this.url,Q);return this.inheritParamsAndData(ve._root),ve}inheritParamsAndData(D){const T=D.value,j=Yi(T,this.paramsInheritanceStrategy);T.params=Object.freeze(j.params),T.data=Object.freeze(j.data),D.children.forEach(Q=>this.inheritParamsAndData(Q))}processSegmentGroup(D,T,j){return 0===T.segments.length&&T.hasChildren()?this.processChildren(D,T):this.processSegment(D,T,T.segments,j)}processChildren(D,T){const j=[];for(const ve of Object.keys(T.children)){const Ae=T.children[ve],st=Br(D,ve),qt=this.processSegmentGroup(st,Ae,ve);if(null===qt)return null;j.push(...qt)}const Q=Li(j);return function hi(x){x.sort((D,T)=>D.value.outlet===Tn?-1:T.value.outlet===Tn?1:D.value.outlet.localeCompare(T.value.outlet))}(Q),Q}processSegment(D,T,j,Q){for(const ve of D){const Ae=this.processSegmentAgainstRoute(ve,T,j,Q);if(null!==Ae)return Ae}return Ee(T,j,Q)?[]:null}processSegmentAgainstRoute(D,T,j,Q){if(D.redirectTo||!V(D,T,j,Q))return null;let ve,Ae=[],st=[];if("**"===D.path){const vi=j.length>0?zt(j).parameters:{};ve=new di(j,vi,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,B(D),fr(D),D.component,D,E(T),C(T)+j.length,le(D))}else{const vi=os(T,D,j);if(!vi.matched)return null;Ae=vi.consumedSegments,st=vi.remainingSegments,ve=new di(Ae,vi.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,B(D),fr(D),D.component,D,E(T),C(T)+Ae.length,le(D))}const qt=function jr(x){return x.children?x.children:x.loadChildren?x._loadedConfig.routes:[]}(D),{segmentGroup:Wn,slicedSegments:Yr}=ci(T,Ae,st,qt.filter(vi=>void 0===vi.redirectTo),this.relativeLinkResolution);if(0===Yr.length&&Wn.hasChildren()){const vi=this.processChildren(qt,Wn);return null===vi?null:[new Nr(ve,vi)]}if(0===qt.length&&0===Yr.length)return[new Nr(ve,[])];const ar=fr(D)===Q,_i=this.processSegment(qt,Wn,Yr,ar?Tn:Q);return null===_i?null:[new Nr(ve,_i)]}}function ii(x){const D=x.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function Li(x){const D=[],T=new Set;for(const j of x){if(!ii(j)){D.push(j);continue}const Q=D.find(ve=>j.value.routeConfig===ve.value.routeConfig);void 0!==Q?(Q.children.push(...j.children),T.add(Q)):D.push(j)}for(const j of T){const Q=Li(j.children);D.push(new Nr(j.value,Q))}return D.filter(j=>!T.has(j))}function E(x){let D=x;for(;D._sourceSegment;)D=D._sourceSegment;return D}function C(x){let D=x,T=D._segmentIndexShift?D._segmentIndexShift:0;for(;D._sourceSegment;)D=D._sourceSegment,T+=D._segmentIndexShift?D._segmentIndexShift:0;return T-1}function B(x){return x.data||{}}function le(x){return x.resolve||{}}function Qt(x){return[...Object.keys(x),...Object.getOwnPropertySymbols(x)]}function ir(x){return(0,Ne.w)(D=>{const T=x(D);return T?(0,oe.D)(T).pipe((0,Qe.U)(()=>D)):(0,ce.of)(D)})}class Hn extends class Jr{shouldDetach(D){return!1}store(D,T){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,T){return D.routeConfig===T.routeConfig}}{}const Mr=new g.OlP("ROUTES");class Di{constructor(D,T,j,Q){this.injector=D,this.compiler=T,this.onLoadStartListener=j,this.onLoadEndListener=Q}load(D,T){if(T._loader$)return T._loader$;this.onLoadStartListener&&this.onLoadStartListener(T);const Q=this.loadModuleFactory(T.loadChildren).pipe((0,Qe.U)(ve=>{this.onLoadEndListener&&this.onLoadEndListener(T);const Ae=ve.create(D);return new Ds(Zt(Ae.injector.get(Mr,void 0,g.XFs.Self|g.XFs.Optional)).map(Co),Ae)}),(0,tn.K)(ve=>{throw T._loader$=void 0,ve}));return T._loader$=new Ce(Q,()=>new et.x).pipe(Ie()),T._loader$}loadModuleFactory(D){return Bn(D()).pipe((0,Ze.z)(T=>T instanceof g.YKP?(0,ce.of)(T):(0,oe.D)(this.compiler.compileModuleAsync(T))))}}class qi{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,T){return D}}function as(x){throw x}function si(x,D,T){return D.parse("/")}function gs(x,D){return(0,ce.of)(null)}const Si={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ls={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ki=(()=>{class x{constructor(T,j,Q,ve,Ae,st,qt){this.rootComponentType=T,this.urlSerializer=j,this.rootContexts=Q,this.location=ve,this.config=qt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new et.x,this.errorHandler=as,this.malformedUriErrorHandler=si,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:gs,afterPreactivation:gs},this.urlHandlingStrategy=new qi,this.routeReuseStrategy=new Hn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ae.get(g.h0i),this.console=Ae.get(g.c2e);const ar=Ae.get(g.R0b);this.isNgZoneEnabled=ar instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(qt),this.currentUrlTree=function gr(){return new q(new X([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Di(Ae,st,_i=>this.triggerEvent(new fn(_i)),_i=>this.triggerEvent(new Fn(_i))),this.routerState=hr(this.currentUrlTree,this.rootComponentType),this.transitions=new te.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var T;return null===(T=this.location.getState())||void 0===T?void 0:T.\u0275routerPageId}setupNavigations(T){const j=this.events;return T.pipe((0,at.h)(Q=>0!==Q.id),(0,Qe.U)(Q=>Object.assign(Object.assign({},Q),{extractedUrl:this.urlHandlingStrategy.extract(Q.rawUrl)})),(0,Ne.w)(Q=>{let ve=!1,Ae=!1;return(0,ce.of)(Q).pipe((0,ft.b)(st=>{this.currentNavigation={id:st.id,initialUrl:st.currentRawUrl,extractedUrl:st.extractedUrl,trigger:st.source,extras:st.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ne.w)(st=>{const qt=this.browserUrlTree.toString(),Wn=!this.navigated||st.extractedUrl.toString()!==qt||qt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Wn)&&this.urlHandlingStrategy.shouldProcessUrl(st.rawUrl))return xi(st.source)&&(this.browserUrlTree=st.extractedUrl),(0,ce.of)(st).pipe((0,Ne.w)(ar=>{const _i=this.transitions.getValue();return j.next(new Yt(ar.id,this.serializeUrl(ar.extractedUrl),ar.source,ar.restoredState)),_i!==this.transitions.getValue()?Et.E:Promise.resolve(ar)}),function mi(x,D,T,j){return(0,Ne.w)(Q=>function Lr(x,D,T,j,Q){return new Vr(x,D,T,j,Q).apply()}(x,D,T,Q.extractedUrl,j).pipe((0,Qe.U)(ve=>Object.assign(Object.assign({},Q),{urlAfterRedirects:ve}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ft.b)(ar=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:ar.urlAfterRedirects})}),function Oe(x,D,T,j,Q){return(0,Ze.z)(ve=>function Rr(x,D,T,j,Q="emptyOnly",ve="legacy"){try{const Ae=new zr(x,D,T,j,Q,ve).recognize();return null===Ae?Qn(new rr):(0,ce.of)(Ae)}catch(Ae){return Qn(Ae)}}(x,D,ve.urlAfterRedirects,T(ve.urlAfterRedirects),j,Q).pipe((0,Qe.U)(Ae=>Object.assign(Object.assign({},ve),{targetSnapshot:Ae}))))}(this.rootComponentType,this.config,ar=>this.serializeUrl(ar),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ft.b)(ar=>{if("eager"===this.urlUpdateStrategy){if(!ar.extras.skipLocationChange){const vi=this.urlHandlingStrategy.merge(ar.urlAfterRedirects,ar.rawUrl);this.setBrowserUrl(vi,ar)}this.browserUrlTree=ar.urlAfterRedirects}const _i=new wn(ar.id,this.serializeUrl(ar.extractedUrl),this.serializeUrl(ar.urlAfterRedirects),ar.targetSnapshot);j.next(_i)}));if(Wn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_i,extractedUrl:vi,source:ni,restoredState:ds,extras:ms}=st,Uo=new Yt(_i,this.serializeUrl(vi),ni,ds);j.next(Uo);const Bo=hr(vi,this.rootComponentType).snapshot;return(0,ce.of)(Object.assign(Object.assign({},st),{targetSnapshot:Bo,urlAfterRedirects:vi,extras:Object.assign(Object.assign({},ms),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=st.rawUrl,st.resolve(null),Et.E}),ir(st=>{const{targetSnapshot:qt,id:Wn,extractedUrl:Yr,rawUrl:ar,extras:{skipLocationChange:_i,replaceUrl:vi}}=st;return this.hooks.beforePreactivation(qt,{navigationId:Wn,appliedUrlTree:Yr,rawUrlTree:ar,skipLocationChange:!!_i,replaceUrl:!!vi})}),(0,ft.b)(st=>{const qt=new Ot(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(qt)}),(0,Qe.U)(st=>Object.assign(Object.assign({},st),{guards:dr(st.targetSnapshot,st.currentSnapshot,this.rootContexts)})),function an(x,D){return(0,Ze.z)(T=>{const{targetSnapshot:j,currentSnapshot:Q,guards:{canActivateChecks:ve,canDeactivateChecks:Ae}}=T;return 0===Ae.length&&0===ve.length?(0,ce.of)(Object.assign(Object.assign({},T),{guardsResult:!0})):function G(x,D,T,j){return(0,oe.D)(x).pipe((0,Ze.z)(Q=>function yn(x,D,T,j,Q){const ve=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!ve||0===ve.length)return(0,ce.of)(!0);const Ae=ve.map(st=>{const qt=eo(st,D,Q);let Wn;if(function Ss(x){return x&&Ri(x.canDeactivate)}(qt))Wn=Bn(qt.canDeactivate(x,D,T,j));else{if(!Ri(qt))throw new Error("Invalid CanDeactivate guard");Wn=Bn(qt(x,D,T,j))}return Wn.pipe((0,xn.P)())});return(0,ce.of)(Ae).pipe(mo())}(Q.component,Q.route,T,D,j)),(0,xn.P)(Q=>!0!==Q,!0))}(Ae,j,Q,x).pipe((0,Ze.z)(st=>st&&function oa(x){return"boolean"==typeof x}(st)?function z(x,D,T,j){return(0,oe.D)(D).pipe((0,vn.b)(Q=>(0,it.z)(function We(x,D){return null!==x&&D&&D(new Sn(x)),(0,ce.of)(!0)}(Q.route.parent,j),function Se(x,D){return null!==x&&D&&D(new ur(x)),(0,ce.of)(!0)}(Q.route,j),function jt(x,D,T){const j=D[D.length-1],ve=D.slice(0,D.length-1).reverse().map(Ae=>function Js(x){const D=x.routeConfig?x.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:x,guards:D}:null}(Ae)).filter(Ae=>null!==Ae).map(Ae=>(0,ut.P)(()=>{const st=Ae.guards.map(qt=>{const Wn=eo(qt,Ae.node,T);let Yr;if(function Ns(x){return x&&Ri(x.canActivateChild)}(Wn))Yr=Bn(Wn.canActivateChild(j,x));else{if(!Ri(Wn))throw new Error("Invalid CanActivateChild guard");Yr=Bn(Wn(j,x))}return Yr.pipe((0,xn.P)())});return(0,ce.of)(st).pipe(mo())}));return(0,ce.of)(ve).pipe(mo())}(x,Q.path,T),function bt(x,D,T){const j=D.routeConfig?D.routeConfig.canActivate:null;if(!j||0===j.length)return(0,ce.of)(!0);const Q=j.map(ve=>(0,ut.P)(()=>{const Ae=eo(ve,D,T);let st;if(function Xr(x){return x&&Ri(x.canActivate)}(Ae))st=Bn(Ae.canActivate(D,x));else{if(!Ri(Ae))throw new Error("Invalid CanActivate guard");st=Bn(Ae(D,x))}return st.pipe((0,xn.P)())}));return(0,ce.of)(Q).pipe(mo())}(x,Q.route,T))),(0,xn.P)(Q=>!0!==Q,!0))}(j,ve,x,D):(0,ce.of)(st)),(0,Qe.U)(st=>Object.assign(Object.assign({},T),{guardsResult:st})))})}(this.ngModule.injector,st=>this.triggerEvent(st)),(0,ft.b)(st=>{if(rs(st.guardsResult)){const Wn=Y(`Redirecting to "${this.serializeUrl(st.guardsResult)}"`);throw Wn.url=st.guardsResult,Wn}const qt=new hn(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot,!!st.guardsResult);this.triggerEvent(qt)}),(0,at.h)(st=>!!st.guardsResult||(this.restoreHistory(st),this.cancelNavigationTransition(st,""),!1)),ir(st=>{if(st.guards.canActivateChecks.length)return(0,ce.of)(st).pipe((0,ft.b)(qt=>{const Wn=new xt(qt.id,this.serializeUrl(qt.extractedUrl),this.serializeUrl(qt.urlAfterRedirects),qt.targetSnapshot);this.triggerEvent(Wn)}),(0,Ne.w)(qt=>{let Wn=!1;return(0,ce.of)(qt).pipe(function Ye(x,D){return(0,Ze.z)(T=>{const{targetSnapshot:j,guards:{canActivateChecks:Q}}=T;if(!Q.length)return(0,ce.of)(T);let ve=0;return(0,oe.D)(Q).pipe((0,vn.b)(Ae=>function nt(x,D,T,j){return function Dt(x,D,T,j){const Q=Qt(x);if(0===Q.length)return(0,ce.of)({});const ve={};return(0,oe.D)(Q).pipe((0,Ze.z)(Ae=>function cn(x,D,T,j){const Q=eo(x,D,j);return Bn(Q.resolve?Q.resolve(D,T):Q(D,T))}(x[Ae],D,T,j).pipe((0,ft.b)(st=>{ve[Ae]=st}))),He(1),(0,Ze.z)(()=>Qt(ve).length===Q.length?(0,ce.of)(ve):Et.E))}(x._resolve,x,D,j).pipe((0,Qe.U)(ve=>(x._resolvedData=ve,x.data=Object.assign(Object.assign({},x.data),Yi(x,T).resolve),null)))}(Ae.route,j,x,D)),(0,ft.b)(()=>ve++),He(1),(0,Ze.z)(Ae=>ve===Q.length?(0,ce.of)(T):Et.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ft.b)({next:()=>Wn=!0,complete:()=>{Wn||(this.restoreHistory(qt),this.cancelNavigationTransition(qt,"At least one route resolver didn't emit any value."))}}))}),(0,ft.b)(qt=>{const Wn=new rn(qt.id,this.serializeUrl(qt.extractedUrl),this.serializeUrl(qt.urlAfterRedirects),qt.targetSnapshot);this.triggerEvent(Wn)}))}),ir(st=>{const{targetSnapshot:qt,id:Wn,extractedUrl:Yr,rawUrl:ar,extras:{skipLocationChange:_i,replaceUrl:vi}}=st;return this.hooks.afterPreactivation(qt,{navigationId:Wn,appliedUrlTree:Yr,rawUrlTree:ar,skipLocationChange:!!_i,replaceUrl:!!vi})}),(0,Qe.U)(st=>{const qt=function An(x,D,T){const j=_n(x,D._root,T?T._root:void 0);return new li(j,D)}(this.routeReuseStrategy,st.targetSnapshot,st.currentRouterState);return Object.assign(Object.assign({},st),{targetRouterState:qt})}),(0,ft.b)(st=>{this.currentUrlTree=st.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(st.urlAfterRedirects,st.rawUrl),this.routerState=st.targetRouterState,"deferred"===this.urlUpdateStrategy&&(st.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,st),this.browserUrlTree=st.urlAfterRedirects)}),((x,D,T)=>(0,Qe.U)(j=>(new Zi(D,j.targetRouterState,j.currentRouterState,T).activate(x),j)))(this.rootContexts,this.routeReuseStrategy,st=>this.triggerEvent(st)),(0,ft.b)({next(){ve=!0},complete(){ve=!0}}),(0,St.x)(()=>{var st;ve||Ae||this.cancelNavigationTransition(Q,`Navigation ID ${Q.id} is not equal to the current navigation id ${this.navigationId}`),(null===(st=this.currentNavigation)||void 0===st?void 0:st.id)===Q.id&&(this.currentNavigation=null)}),(0,tn.K)(st=>{if(Ae=!0,function J(x){return x&&x[rt]}(st)){const qt=rs(st.url);qt||(this.navigated=!0,this.restoreHistory(Q,!0));const Wn=new jn(Q.id,this.serializeUrl(Q.extractedUrl),st.message);j.next(Wn),qt?setTimeout(()=>{const Yr=this.urlHandlingStrategy.merge(st.url,this.rawUrlTree),ar={skipLocationChange:Q.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||xi(Q.source)};this.scheduleNavigation(Yr,"imperative",null,ar,{resolve:Q.resolve,reject:Q.reject,promise:Q.promise})},0):Q.resolve(!1)}else{this.restoreHistory(Q,!0);const qt=new nn(Q.id,this.serializeUrl(Q.extractedUrl),st);j.next(qt);try{Q.resolve(this.errorHandler(st))}catch(Wn){Q.reject(Wn)}}return Et.E}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}setTransition(T){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),T))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const j="popstate"===T.type?"popstate":"hashchange";"popstate"===j&&setTimeout(()=>{var Q;const ve={replaceUrl:!0},Ae=(null===(Q=T.state)||void 0===Q?void 0:Q.navigationId)?T.state:null;if(Ae){const qt=Object.assign({},Ae);delete qt.navigationId,delete qt.\u0275routerPageId,0!==Object.keys(qt).length&&(ve.state=qt)}const st=this.parseUrl(T.url);this.scheduleNavigation(st,j,Ae,ve)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){oo(T),this.config=T.map(Co),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,j={}){const{relativeTo:Q,queryParams:ve,fragment:Ae,queryParamsHandling:st,preserveFragment:qt}=j,Wn=Q||this.routerState.root,Yr=qt?this.currentUrlTree.fragment:Ae;let ar=null;switch(st){case"merge":ar=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ve);break;case"preserve":ar=this.currentUrlTree.queryParams;break;default:ar=ve||null}return null!==ar&&(ar=this.removeEmptyProps(ar)),function ti(x,D,T,j,Q){if(0===T.length)return Qi(D.root,D.root,D.root,j,Q);const ve=function Ii(x){if("string"==typeof x[0]&&1===x.length&&"/"===x[0])return new xs(!0,0,x);let D=0,T=!1;const j=x.reduce((Q,ve,Ae)=>{if("object"==typeof ve&&null!=ve){if(ve.outlets){const st={};return Kn(ve.outlets,(qt,Wn)=>{st[Wn]="string"==typeof qt?qt.split("/"):qt}),[...Q,{outlets:st}]}if(ve.segmentPath)return[...Q,ve.segmentPath]}return"string"!=typeof ve?[...Q,ve]:0===Ae?(ve.split("/").forEach((st,qt)=>{0==qt&&"."===st||(0==qt&&""===st?T=!0:".."===st?D++:""!=st&&Q.push(st))}),Q):[...Q,ve]},[]);return new xs(T,D,j)}(T);if(ve.toRoot())return Qi(D.root,D.root,new X([],{}),j,Q);const Ae=function wt(x,D,T){if(x.isAbsolute)return new Ts(D.root,!0,0);if(-1===T.snapshot._lastPathIndex){const ve=T.snapshot._urlSegment;return new Ts(ve,ve===D.root,0)}const j=Zr(x.commands[0])?0:1;return function mt(x,D,T){let j=x,Q=D,ve=T;for(;ve>Q;){if(ve-=Q,j=j.parent,!j)throw new Error("Invalid number of '../'");Q=j.segments.length}return new Ts(j,!1,Q-ve)}(T.snapshot._urlSegment,T.snapshot._lastPathIndex+j,x.numberOfDoubleDots)}(ve,D,x),st=Ae.processChildren?kn(Ae.segmentGroup,Ae.index,ve.commands):on(Ae.segmentGroup,Ae.index,ve.commands);return Qi(D.root,Ae.segmentGroup,st,j,Q)}(Wn,this.currentUrlTree,T,ar,null!=Yr?Yr:null)}navigateByUrl(T,j={skipLocationChange:!1}){const Q=rs(T)?T:this.parseUrl(T),ve=this.urlHandlingStrategy.merge(Q,this.rawUrlTree);return this.scheduleNavigation(ve,"imperative",null,j)}navigate(T,j={skipLocationChange:!1}){return function Oo(x){for(let D=0;D<x.length;D++){const T=x[D];if(null==T)throw new Error(`The requested path contains ${T} segment at index ${D}`)}}(T),this.navigateByUrl(this.createUrlTree(T,j),j)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let j;try{j=this.urlSerializer.parse(T)}catch(Q){j=this.malformedUriErrorHandler(Q,this.urlSerializer,T)}return j}isActive(T,j){let Q;if(Q=!0===j?Object.assign({},Si):!1===j?Object.assign({},ls):j,rs(T))return pt(this.currentUrlTree,T,Q);const ve=this.parseUrl(T);return pt(this.currentUrlTree,ve,Q)}removeEmptyProps(T){return Object.keys(T).reduce((j,Q)=>{const ve=T[Q];return null!=ve&&(j[Q]=ve),j},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new Nn(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,j,Q,ve,Ae){var st,qt;if(this.disposed)return Promise.resolve(!1);let Wn,Yr,ar;Ae?(Wn=Ae.resolve,Yr=Ae.reject,ar=Ae.promise):ar=new Promise((ni,ds)=>{Wn=ni,Yr=ds});const _i=++this.navigationId;let vi;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Q=this.location.getState()),vi=Q&&Q.\u0275routerPageId?Q.\u0275routerPageId:ve.replaceUrl||ve.skipLocationChange?null!==(st=this.browserPageId)&&void 0!==st?st:0:(null!==(qt=this.browserPageId)&&void 0!==qt?qt:0)+1):vi=0,this.setTransition({id:_i,targetPageId:vi,source:j,restoredState:Q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:ve,resolve:Wn,reject:Yr,promise:ar,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ar.catch(ni=>Promise.reject(ni))}setBrowserUrl(T,j){const Q=this.urlSerializer.serialize(T),ve=Object.assign(Object.assign({},j.extras.state),this.generateNgRouterState(j.id,j.targetPageId));this.location.isCurrentPathEqualTo(Q)||j.extras.replaceUrl?this.location.replaceState(Q,"",ve):this.location.go(Q,"",ve)}restoreHistory(T,j=!1){var Q,ve;if("computed"===this.canceledNavigationResolution){const Ae=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(Q=this.currentNavigation)||void 0===Q?void 0:Q.finalUrl)||0===Ae?this.currentUrlTree===(null===(ve=this.currentNavigation)||void 0===ve?void 0:ve.finalUrl)&&0===Ae&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ae)}else"replace"===this.canceledNavigationResolution&&(j&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,j){const Q=new jn(T.id,this.serializeUrl(T.extractedUrl),j);this.triggerEvent(Q),T.resolve(!1)}generateNgRouterState(T,j){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:j}:{navigationId:T}}}return x.\u0275fac=function(T){g.$Z()},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac}),x})();function xi(x){return"imperative"!==x}let lo=(()=>{class x{constructor(T,j,Q,ve,Ae){this.router=T,this.route=j,this.tabIndexAttribute=Q,this.renderer=ve,this.el=Ae,this.commands=null,this.onChanges=new et.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(T){if(null!=this.tabIndexAttribute)return;const j=this.renderer,Q=this.el.nativeElement;null!==T?j.setAttribute(Q,"tabindex",T):j.removeAttribute(Q,"tabindex")}ngOnChanges(T){this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const T={skipLocationChange:us(this.skipLocationChange),replaceUrl:us(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,T),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:us(this.preserveFragment)})}}return x.\u0275fac=function(T){return new(T||x)(g.Y36(ki),g.Y36(Wr),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},x.\u0275dir=g.lG2({type:x,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,j){1&T&&g.NdJ("click",function(){return j.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),x})(),Gs=(()=>{class x{constructor(T,j,Q){this.router=T,this.route=j,this.locationStrategy=Q,this.commands=null,this.href=null,this.onChanges=new et.x,this.subscription=T.events.subscribe(ve=>{ve instanceof Nn&&this.updateTargetUrlAndHref()})}set routerLink(T){this.commands=null!=T?Array.isArray(T)?T:[T]:null}ngOnChanges(T){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(T,j,Q,ve,Ae){if(0!==T||j||Q||ve||Ae||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const st={skipLocationChange:us(this.skipLocationChange),replaceUrl:us(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,st),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:us(this.preserveFragment)})}}return x.\u0275fac=function(T){return new(T||x)(g.Y36(ki),g.Y36(Wr),g.Y36(Ut.S$))},x.\u0275dir=g.lG2({type:x,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(T,j){1&T&&g.NdJ("click",function(ve){return j.onClick(ve.button,ve.ctrlKey,ve.shiftKey,ve.altKey,ve.metaKey)}),2&T&&g.uIk("target",j.target)("href",j.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),x})();function us(x){return""===x||!!x}let Ws=(()=>{class x{constructor(T,j,Q,ve,Ae,st){this.router=T,this.element=j,this.renderer=Q,this.cdr=ve,this.link=Ae,this.linkWithHref=st,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new g.vpe,this.routerEventsSubscription=T.events.subscribe(qt=>{qt instanceof Nn&&this.update()})}ngAfterContentInit(){(0,ce.of)(this.links.changes,this.linksWithHrefs.changes,(0,ce.of)(null)).pipe((0,Gt.J)()).subscribe(T=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var T;null===(T=this.linkInputChangesSubscription)||void 0===T||T.unsubscribe();const j=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(Q=>!!Q).map(Q=>Q.onChanges);this.linkInputChangesSubscription=(0,oe.D)(j).pipe((0,Gt.J)()).subscribe(Q=>{this.isActive!==this.isLinkActive(this.router)(Q)&&this.update()})}set routerLinkActive(T){const j=Array.isArray(T)?T:T.split(" ");this.classes=j.filter(Q=>!!Q)}ngOnChanges(T){this.update()}ngOnDestroy(){var T;this.routerEventsSubscription.unsubscribe(),null===(T=this.linkInputChangesSubscription)||void 0===T||T.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const T=this.hasActiveLinks();this.isActive!==T&&(this.isActive=T,this.cdr.markForCheck(),this.classes.forEach(j=>{T?this.renderer.addClass(this.element.nativeElement,j):this.renderer.removeClass(this.element.nativeElement,j)}),this.isActiveChange.emit(T))})}isLinkActive(T){const j=function Cn(x){return!!x.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return Q=>!!Q.urlTree&&T.isActive(Q.urlTree,j)}hasActiveLinks(){const T=this.isLinkActive(this.router);return this.link&&T(this.link)||this.linkWithHref&&T(this.linkWithHref)||this.links.some(T)||this.linksWithHrefs.some(T)}}return x.\u0275fac=function(T){return new(T||x)(g.Y36(ki),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(lo,8),g.Y36(Gs,8))},x.\u0275dir=g.lG2({type:x,selectors:[["","routerLinkActive",""]],contentQueries:function(T,j,Q){if(1&T&&(g.Suo(Q,lo,5),g.Suo(Q,Gs,5)),2&T){let ve;g.iGM(ve=g.CRH())&&(j.links=ve),g.iGM(ve=g.CRH())&&(j.linksWithHrefs=ve)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[g.TTD]}),x})();class Un{}class br{preload(D,T){return(0,ce.of)(null)}}let En=(()=>{class x{constructor(T,j,Q,ve){this.router=T,this.injector=Q,this.preloadingStrategy=ve,this.loader=new Di(Q,j,qt=>T.triggerEvent(new fn(qt)),qt=>T.triggerEvent(new Fn(qt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,at.h)(T=>T instanceof Nn),(0,vn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const T=this.injector.get(g.h0i);return this.processRoutes(T,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,j){const Q=[];for(const ve of j)if(ve.loadChildren&&!ve.canLoad&&ve._loadedConfig){const Ae=ve._loadedConfig;Q.push(this.processRoutes(Ae.module,Ae.routes))}else ve.loadChildren&&!ve.canLoad?Q.push(this.preloadConfig(T,ve)):ve.children&&Q.push(this.processRoutes(T,ve.children));return(0,oe.D)(Q).pipe((0,Gt.J)(),(0,Qe.U)(ve=>{}))}preloadConfig(T,j){return this.preloadingStrategy.preload(j,()=>(j._loadedConfig?(0,ce.of)(j._loadedConfig):this.loader.load(T.injector,j)).pipe((0,Ze.z)(ve=>(j._loadedConfig=ve,this.processRoutes(ve.module,ve.routes)))))}}return x.\u0275fac=function(T){return new(T||x)(g.LFG(ki),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Un))},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac}),x})(),Vn=(()=>{class x{constructor(T,j,Q={}){this.router=T,this.viewportScroller=j,this.options=Q,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Q.scrollPositionRestoration=Q.scrollPositionRestoration||"disabled",Q.anchorScrolling=Q.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof Yt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Nn&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof mn&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,j){this.router.triggerEvent(new mn(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,j))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return x.\u0275fac=function(T){g.$Z()},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac}),x})();const On=new g.OlP("ROUTER_CONFIGURATION"),Lt=new g.OlP("ROUTER_FORROOT_GUARD"),Jt=[Ut.Ye,{provide:ue,useClass:be},{provide:ki,useFactory:function Wo(x,D,T,j,Q,ve,Ae={},st,qt){const Wn=new ki(null,x,D,T,j,Q,Zt(ve));return st&&(Wn.urlHandlingStrategy=st),qt&&(Wn.routeReuseStrategy=qt),function Ga(x,D){x.errorHandler&&(D.errorHandler=x.errorHandler),x.malformedUriErrorHandler&&(D.malformedUriErrorHandler=x.malformedUriErrorHandler),x.onSameUrlNavigation&&(D.onSameUrlNavigation=x.onSameUrlNavigation),x.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=x.paramsInheritanceStrategy),x.relativeLinkResolution&&(D.relativeLinkResolution=x.relativeLinkResolution),x.urlUpdateStrategy&&(D.urlUpdateStrategy=x.urlUpdateStrategy),x.canceledNavigationResolution&&(D.canceledNavigationResolution=x.canceledNavigationResolution)}(Ae,Wn),Ae.enableTracing&&Wn.events.subscribe(Yr=>{var ar,_i;null===(ar=console.group)||void 0===ar||ar.call(console,`Router Event: ${Yr.constructor.name}`),console.log(Yr.toString()),console.log(Yr),null===(_i=console.groupEnd)||void 0===_i||_i.call(console)}),Wn},deps:[ue,Fs,Ut.Ye,g.zs3,g.Sil,Mr,On,[class Bi{},new g.FiY],[class or{},new g.FiY]]},Fs,{provide:Wr,useFactory:function co(x){return x.routerState.root},deps:[ki]},En,br,class Gn{preload(D,T){return T().pipe((0,tn.K)(()=>(0,ce.of)(null)))}},{provide:On,useValue:{enableTracing:!1}}];function Xi(){return new g.PXZ("Router",ki)}let Sa=(()=>{class x{constructor(T,j){}static forRoot(T,j){return{ngModule:x,providers:[Jt,Lo(T),{provide:Lt,useFactory:Vi,deps:[[ki,new g.FiY,new g.tp0]]},{provide:On,useValue:j||{}},{provide:Ut.S$,useFactory:_a,deps:[Ut.lw,[new g.tBr(Ut.mr),new g.FiY],On]},{provide:Vn,useFactory:Ks,deps:[ki,Ut.EM,On]},{provide:Un,useExisting:j&&j.preloadingStrategy?j.preloadingStrategy:br},{provide:g.PXZ,multi:!0,useFactory:Xi},[zo,{provide:g.ip1,multi:!0,useFactory:aa,deps:[zo]},{provide:Or,useFactory:Ji,deps:[zo]},{provide:g.tb,multi:!0,useExisting:Or}]]}}static forChild(T){return{ngModule:x,providers:[Lo(T)]}}}return x.\u0275fac=function(T){return new(T||x)(g.LFG(Lt,8),g.LFG(ki,8))},x.\u0275mod=g.oAB({type:x}),x.\u0275inj=g.cJS({}),x})();function Ks(x,D,T){return T.scrollOffset&&D.setOffset(T.scrollOffset),new Vn(x,D,T)}function _a(x,D,T={}){return T.useHash?new Ut.Do(x,D):new Ut.b0(x,D)}function Vi(x){return"guarded"}function Lo(x){return[{provide:g.deG,multi:!0,useValue:x},{provide:Mr,multi:!0,useValue:x}]}let zo=(()=>{class x{constructor(T){this.injector=T,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new et.x}appInitializer(){return this.injector.get(Ut.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let j=null;const Q=new Promise(st=>j=st),ve=this.injector.get(ki),Ae=this.injector.get(On);return"disabled"===Ae.initialNavigation?(ve.setUpLocationChangeListener(),j(!0)):"enabled"===Ae.initialNavigation||"enabledBlocking"===Ae.initialNavigation?(ve.hooks.afterPreactivation=()=>this.initNavigation?(0,ce.of)(null):(this.initNavigation=!0,j(!0),this.resultOfPreactivationDone),ve.initialNavigation()):j(!0),Q})}bootstrapListener(T){const j=this.injector.get(On),Q=this.injector.get(En),ve=this.injector.get(Vn),Ae=this.injector.get(ki),st=this.injector.get(g.z2F);T===st.components[0]&&(("enabledNonBlocking"===j.initialNavigation||void 0===j.initialNavigation)&&Ae.initialNavigation(),Q.setUpPreloading(),ve.init(),Ae.resetRootComponentType(st.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return x.\u0275fac=function(T){return new(T||x)(g.LFG(g.zs3))},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac}),x})();function aa(x){return x.appInitializer.bind(x)}function Ji(x){return x.bootstrapListener.bind(x)}const Or=new g.OlP("Router Initializer")},3942:(Je,Te,b)=>{b.d(Te,{Z:()=>ut});var g=b(2090),S=b(4859),U=b(9681),re=b(1877);class de{constructor(et,at){this._delegate=et,this.firebase=at,(0,U._addComponent)(et,new S.wA("app-compat",()=>this,"PUBLIC")),this.container=et.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this._delegate.automaticDataCollectionEnabled=et}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(et=>{this._delegate.checkDestroyed(),et()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(et,at=U._DEFAULT_ENTRY_NAME){var He;this._delegate.checkDestroyed();const Mt=this._delegate.container.getProvider(et);return!Mt.isInitialized()&&"EXPLICIT"===(null===(He=Mt.getComponent())||void 0===He?void 0:He.instantiationMode)&&Mt.initialize(),Mt.getImmediate({identifier:at})}_removeServiceInstance(et,at=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(et).clearInstance(at)}_addComponent(et){(0,U._addComponent)(this._delegate,et)}_addOrOverwriteComponent(et){(0,U._addOrOverwriteComponent)(this._delegate,et)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function ce(){const Et=function oe(Et){const et={},at={__esModule:!0,initializeApp:function ze(Ne,gt={}){const vt=U.initializeApp(Ne,gt);if((0,g.r3)(et,vt.name))return et[vt.name];const sn=new Et(vt,at);return et[vt.name]=sn,sn},app:Mt,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function Ge(Ne){const gt=Ne.name,vt=gt.replace("-compat","");if(U._registerComponent(Ne)&&"PUBLIC"===Ne.type){const sn=(tn=Mt())=>{if("function"!=typeof tn[vt])throw Ce.create("invalid-app-argument",{appName:gt});return tn[vt]()};void 0!==Ne.serviceProps&&(0,g.ZB)(sn,Ne.serviceProps),at[vt]=sn,Et.prototype[vt]=function(...tn){return this._getService.bind(this,gt).apply(this,Ne.multipleInstances?tn:[])}}return"PUBLIC"===Ne.type?at[vt]:null},removeApp:function He(Ne){delete et[Ne]},useAsService:function Qe(Ne,gt){return"serverAuth"===gt?null:gt},modularAPIs:U}};function Mt(Ne){if(!(0,g.r3)(et,Ne=Ne||U._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Ne});return et[Ne]}return at.default=at,Object.defineProperty(at,"apps",{get:function Be(){return Object.keys(et).map(Ne=>et[Ne])}}),Mt.App=Et,at}(de);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function et(at){(0,g.ZB)(Et,at)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Et}(),se=new re.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Et=self.firebase.SDK_VERSION;Et&&Et.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ut=te;!function it(Et){(0,U.registerVersion)("@firebase/app-compat","0.2.5",Et)}()},9681:(Je,Te,b)=>{b.r(Te),b.d(Te,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Sn,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>jn,_addOrOverwriteComponent:()=>nn,_apps:()=>Yt,_clearComponents:()=>xt,_components:()=>Nn,_getProvider:()=>Ot,_registerComponent:()=>wn,_removeServiceInstance:()=>hn,deleteApp:()=>mn,getApp:()=>ur,getApps:()=>Dr,initializeApp:()=>Zn,onLog:()=>qn,registerVersion:()=>De,setLogLevel:()=>rt});var g=b(5861),S=b(4859),U=b(1877),re=b(2090),de=b(8766);class Ie{constructor(N){this.container=N}getPlatformInfoString(){return this.container.getProviders().map(L=>{if(function Ce(he){const N=he.getComponent();return"VERSION"===(null==N?void 0:N.type)}(L)){const q=L.getImmediate();return`${q.library}/${q.version}`}return null}).filter(L=>L).join(" ")}}const oe="@firebase/app",te=new U.Yd("@firebase/app"),Ut="[DEFAULT]",Rt={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yt=new Map,Nn=new Map;function jn(he,N){try{he.container.addComponent(N)}catch(L){te.debug(`Component ${N.name} failed to register with FirebaseApp ${he.name}`,L)}}function nn(he,N){he.container.addOrOverwriteComponent(N)}function wn(he){const N=he.name;if(Nn.has(N))return te.debug(`There were multiple attempts to register component ${N}.`),!1;Nn.set(N,he);for(const L of Yt.values())jn(L,he);return!0}function Ot(he,N){const L=he.container.getProvider("heartbeat").getImmediate({optional:!0});return L&&L.triggerHeartbeat(),he.container.getProvider(N)}function hn(he,N,L=Ut){Ot(he,N).clearInstance(L)}function xt(){Nn.clear()}const fn=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fn{constructor(N,L,q){this._isDeleted=!1,this._options=Object.assign({},N),this._config=Object.assign({},L),this._name=L.name,this._automaticDataCollectionEnabled=L.automaticDataCollectionEnabled,this._container=q,this.container.addComponent(new S.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(N){this.checkDestroyed(),this._automaticDataCollectionEnabled=N}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(N){this._isDeleted=N}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}}const Sn="9.18.0";function Zn(he,N={}){let L=he;"object"!=typeof N&&(N={name:N});const q=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},N),X=q.name;if("string"!=typeof X||!X)throw fn.create("bad-app-name",{appName:String(X)});if(L||(L=(0,re.aH)()),!L)throw fn.create("no-options");const Fe=Yt.get(X);if(Fe){if((0,re.vZ)(L,Fe.options)&&(0,re.vZ)(q,Fe.config))return Fe;throw fn.create("duplicate-app",{appName:X})}const ht=new S.H0(X);for(const xe of Nn.values())ht.addComponent(xe);const we=new Fn(L,q,ht);return Yt.set(X,we),we}function ur(he=Ut){const N=Yt.get(he);if(!N&&he===Ut)return Zn();if(!N)throw fn.create("no-app",{appName:he});return N}function Dr(){return Array.from(Yt.values())}function mn(he){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(function*(he){const N=he.name;Yt.has(N)&&(Yt.delete(N),yield Promise.all(he.container.getProviders().map(L=>L.delete())),he.isDeleted=!0)})).apply(this,arguments)}function De(he,N,L){var q;let X=null!==(q=Rt[he])&&void 0!==q?q:he;L&&(X+=`-${L}`);const Fe=X.match(/\s|\//),ht=N.match(/\s|\//);if(Fe||ht){const we=[`Unable to register library "${X}" with version "${N}":`];return Fe&&we.push(`library name "${X}" contains illegal characters (whitespace or "/")`),Fe&&ht&&we.push("and"),ht&&we.push(`version name "${N}" contains illegal characters (whitespace or "/")`),void te.warn(we.join(" "))}wn(new S.wA(`${X}-version`,()=>({library:X,version:N}),"VERSION"))}function qn(he,N){if(null!==he&&"function"!=typeof he)throw fn.create("invalid-log-argument");(0,U.Am)(he,N)}function rt(he){(0,U.Ub)(he)}const Re="firebase-heartbeat-store";let Xe=null;function yt(){return Xe||(Xe=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(he,N)=>{0===N&&he.createObjectStore(Re)}}).catch(he=>{throw fn.create("idb-open",{originalErrorMessage:he.message})})),Xe}function Zt(){return(Zt=(0,g.Z)(function*(he){try{return(yield yt()).transaction(Re).objectStore(Re).get(Kn(he))}catch(N){if(N instanceof re.ZR)te.warn(N.message);else{const L=fn.create("idb-get",{originalErrorMessage:null==N?void 0:N.message});te.warn(L.message)}}})).apply(this,arguments)}function zt(he,N){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(he,N){try{const q=(yield yt()).transaction(Re,"readwrite");return yield q.objectStore(Re).put(N,Kn(he)),q.done}catch(L){if(L instanceof re.ZR)te.warn(L.message);else{const q=fn.create("idb-set",{originalErrorMessage:null==L?void 0:L.message});te.warn(q.message)}}})).apply(this,arguments)}function Kn(he){return`${he.name}!${he.options.appId}`}class lr{constructor(N){this.container=N,this._heartbeatsCache=null;const L=this.container.getProvider("app").getImmediate();this._storage=new dt(L),this._heartbeatsCachePromise=this._storage.read().then(q=>(this._heartbeatsCache=q,q))}triggerHeartbeat(){var N=this;return(0,g.Z)(function*(){const q=N.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),X=tr();if(null===N._heartbeatsCache&&(N._heartbeatsCache=yield N._heartbeatsCachePromise),N._heartbeatsCache.lastSentHeartbeatDate!==X&&!N._heartbeatsCache.heartbeats.some(Fe=>Fe.date===X))return N._heartbeatsCache.heartbeats.push({date:X,agent:q}),N._heartbeatsCache.heartbeats=N._heartbeatsCache.heartbeats.filter(Fe=>{const ht=new Date(Fe.date).valueOf();return Date.now()-ht<=2592e6}),N._storage.overwrite(N._heartbeatsCache)})()}getHeartbeatsHeader(){var N=this;return(0,g.Z)(function*(){if(null===N._heartbeatsCache&&(yield N._heartbeatsCachePromise),null===N._heartbeatsCache||0===N._heartbeatsCache.heartbeats.length)return"";const L=tr(),{heartbeatsToSend:q,unsentEntries:X}=function pt(he,N=1024){const L=[];let q=he.slice();for(const X of he){const Fe=L.find(ht=>ht.agent===X.agent);if(Fe){if(Fe.dates.push(X.date),Ue(L)>N){Fe.dates.pop();break}}else if(L.push({agent:X.agent,dates:[X.date]}),Ue(L)>N){L.pop();break}q=q.slice(1)}return{heartbeatsToSend:L,unsentEntries:q}}(N._heartbeatsCache.heartbeats),Fe=(0,re.L)(JSON.stringify({version:2,heartbeats:q}));return N._heartbeatsCache.lastSentHeartbeatDate=L,X.length>0?(N._heartbeatsCache.heartbeats=X,yield N._storage.overwrite(N._heartbeatsCache)):(N._heartbeatsCache.heartbeats=[],N._storage.overwrite(N._heartbeatsCache)),Fe})()}}function tr(){return(new Date).toISOString().substring(0,10)}class dt{constructor(N){this.app=N,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var N=this;return(0,g.Z)(function*(){return(yield N._canUseIndexedDBPromise)&&(yield function Ft(he){return Zt.apply(this,arguments)}(N.app))||{heartbeats:[]}})()}overwrite(N){var L=this;return(0,g.Z)(function*(){var q;if(yield L._canUseIndexedDBPromise){const Fe=yield L.read();return zt(L.app,{lastSentHeartbeatDate:null!==(q=N.lastSentHeartbeatDate)&&void 0!==q?q:Fe.lastSentHeartbeatDate,heartbeats:N.heartbeats})}})()}add(N){var L=this;return(0,g.Z)(function*(){var q;if(yield L._canUseIndexedDBPromise){const Fe=yield L.read();return zt(L.app,{lastSentHeartbeatDate:null!==(q=N.lastSentHeartbeatDate)&&void 0!==q?q:Fe.lastSentHeartbeatDate,heartbeats:[...Fe.heartbeats,...N.heartbeats]})}})()}}function Ue(he){return(0,re.L)(JSON.stringify({version:2,heartbeats:he})).length}!function It(he){wn(new S.wA("platform-logger",N=>new Ie(N),"PRIVATE")),wn(new S.wA("heartbeat",N=>new lr(N),"PRIVATE")),De(oe,"0.9.5",he),De(oe,"0.9.5","esm2017"),De("fire-js","")}("")},4859:(Je,Te,b)=>{b.d(Te,{wA:()=>U,H0:()=>oe,zt:()=>de});var g=b(5861),S=b(2090);class U{constructor(te,se,ke){this.name=te,this.instanceFactory=se,this.type=ke,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const re="[DEFAULT]";class de{constructor(te,se){this.name=te,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const se=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(se)){const ke=new S.BH;if(this.instancesDeferred.set(se,ke),this.isInitialized(se)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:se});qe&&ke.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(se).promise}getImmediate(te){var se;const ke=this.normalizeInstanceIdentifier(null==te?void 0:te.identifier),qe=null!==(se=null==te?void 0:te.optional)&&void 0!==se&&se;if(!this.isInitialized(ke)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ke})}catch(it){if(qe)return null;throw it}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if(function Ce(ce){return"EAGER"===ce.instantiationMode}(te))try{this.getOrInitializeService({instanceIdentifier:re})}catch(se){}for(const[se,ke]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(se);try{const it=this.getOrInitializeService({instanceIdentifier:qe});ke.resolve(it)}catch(it){}}}}clearInstance(te=re){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,g.Z)(function*(){const se=Array.from(te.instances.values());yield Promise.all([...se.filter(ke=>"INTERNAL"in ke).map(ke=>ke.INTERNAL.delete()),...se.filter(ke=>"_delete"in ke).map(ke=>ke._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=re){return this.instances.has(te)}getOptions(te=re){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:se={}}=te,ke=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(ke))throw Error(`${this.name}(${ke}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:ke,options:se});for(const[it,ut]of this.instancesDeferred.entries())ke===this.normalizeInstanceIdentifier(it)&&ut.resolve(qe);return qe}onInit(te,se){var ke;const qe=this.normalizeInstanceIdentifier(se),it=null!==(ke=this.onInitCallbacks.get(qe))&&void 0!==ke?ke:new Set;it.add(te),this.onInitCallbacks.set(qe,it);const ut=this.instances.get(qe);return ut&&te(ut,qe),()=>{it.delete(te)}}invokeOnInitCallbacks(te,se){const ke=this.onInitCallbacks.get(se);if(ke)for(const qe of ke)try{qe(te,se)}catch(it){}}getOrInitializeService({instanceIdentifier:te,options:se={}}){let ke=this.instances.get(te);if(!ke&&this.component&&(ke=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=te,ce===re?void 0:ce),options:se}),this.instances.set(te,ke),this.instancesOptions.set(te,se),this.invokeOnInitCallbacks(ke,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,ke)}catch(qe){}var ce;return ke||null}normalizeInstanceIdentifier(te=re){return this.component?this.component.multipleInstances?te:re:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const se=this.getProvider(te.name);if(se.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);se.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const se=new de(te,this);return this.providers.set(te,se),se}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,Te,b)=>{b.d(Te,{in:()=>S,Yd:()=>Ce,Ub:()=>oe,Am:()=>ce});const g=[];var S=(()=>{return(te=S||(S={}))[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",S;var te})();const U={debug:S.DEBUG,verbose:S.VERBOSE,info:S.INFO,warn:S.WARN,error:S.ERROR,silent:S.SILENT},re=S.INFO,de={[S.DEBUG]:"log",[S.VERBOSE]:"log",[S.INFO]:"info",[S.WARN]:"warn",[S.ERROR]:"error"},Ie=(te,se,...ke)=>{if(se<te.logLevel)return;const qe=(new Date).toISOString(),it=de[se];if(!it)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[it](`[${qe}]  ${te.name}:`,...ke)};class Ce{constructor(se){this.name=se,this._logLevel=re,this._logHandler=Ie,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in S))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?U[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,S.DEBUG,...se),this._logHandler(this,S.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,S.VERBOSE,...se),this._logHandler(this,S.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,S.INFO,...se),this._logHandler(this,S.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,S.WARN,...se),this._logHandler(this,S.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,S.ERROR,...se),this._logHandler(this,S.ERROR,...se)}}function oe(te){g.forEach(se=>{se.setLogLevel(te)})}function ce(te,se){for(const ke of g){let qe=null;se&&se.level&&(qe=U[se.level]),ke.userLogHandler=null===te?null:(it,ut,...Et)=>{const et=Et.map(at=>{if(null==at)return null;if("string"==typeof at)return at;if("number"==typeof at||"boolean"==typeof at)return at.toString();if(at instanceof Error)return at.message;try{return JSON.stringify(at)}catch(He){return null}}).filter(at=>at).join(" ");ut>=(null!=qe?qe:it.logLevel)&&te({level:S[ut].toLowerCase(),message:et,args:Et,type:it.name})}}}},6642:(Je,Te,b)=>{b.d(Te,{eX:()=>wn,Qm:()=>Ze,sQ:()=>lr,GW:()=>sn,l4:()=>Ot});var g=b(5620),S=b(6451),U=b(8306),re=b(7579),de=b(515),Ie=b(9646),Ce=b(2843),oe=b(576);class te{constructor(N,L,q){this.kind=N,this.value=L,this.error=q,this.hasValue="N"===N}observe(N){return se(this,N)}do(N,L,q){const{kind:X,value:Fe,error:ht}=this;return"N"===X?null==N?void 0:N(Fe):"E"===X?null==L?void 0:L(ht):null==q?void 0:q()}accept(N,L,q){var X;return(0,oe.m)(null===(X=N)||void 0===X?void 0:X.next)?this.observe(N):this.do(N,L,q)}toObservable(){const{kind:N,value:L,error:q}=this,X="N"===N?(0,Ie.of)(L):"E"===N?(0,Ce._)(()=>q):"C"===N?de.E:0;if(!X)throw new TypeError(`Unexpected notification kind ${N}`);return X}static createNext(N){return new te("N",N)}static createError(N){return new te("E",void 0,N)}static createComplete(){return te.completeNotification}}function se(he,N){var L,q,X;const{kind:Fe,value:ht,error:we}=he;if("string"!=typeof Fe)throw new TypeError('Invalid notification, missing "kind"');"N"===Fe?null===(L=N.next)||void 0===L||L.call(N,ht):"E"===Fe?null===(q=N.error)||void 0===q||q.call(N,we):null===(X=N.complete)||void 0===X||X.call(N)}te.completeNotification=new te("C");var ke=b(4482),qe=b(5403),ut=b(8421);function Et(he,N,L,q){return(0,ke.e)((X,Fe)=>{let ht;N&&"function"!=typeof N?({duration:L,element:ht,connector:q}=N):ht=N;const we=new Map,xe=Ve=>{we.forEach(Ve),Ve(Fe)},ue=Ve=>xe(Tt=>Tt.error(Ve));let be=0,$=!1;const ae=new qe.Q(Fe,Ve=>{try{const Tt=he(Ve);let un=we.get(Tt);if(!un){we.set(Tt,un=q?q():new re.x);const Dn=function _e(Ve,Tt){const un=new U.y(Dn=>{be++;const Ln=Tt.subscribe(Dn);return()=>{Ln.unsubscribe(),0==--be&&$&&ae.unsubscribe()}});return un.key=Ve,un}(Tt,un);if(Fe.next(Dn),L){const Ln=(0,qe.x)(un,()=>{un.complete(),null==Ln||Ln.unsubscribe()},void 0,void 0,()=>we.delete(Tt));ae.add((0,ut.Xf)(L(Dn)).subscribe(Ln))}}un.next(ht?ht(Ve):Ve)}catch(Tt){ue(Tt)}},()=>xe(Ve=>Ve.complete()),ue,()=>we.clear(),()=>($=!0,0===be));X.subscribe(ae)})}var et=b(4004);function at(he,N){return N?L=>L.pipe(at((q,X)=>(0,ut.Xf)(he(q,X)).pipe((0,et.U)((Fe,ht)=>N(q,Fe,X,ht))))):(0,ke.e)((L,q)=>{let X=0,Fe=null,ht=!1;L.subscribe((0,qe.x)(q,we=>{Fe||(Fe=(0,qe.x)(q,void 0,()=>{Fe=null,ht&&q.complete()}),(0,ut.Xf)(he(we,X++)).subscribe(Fe))},()=>{ht=!0,!Fe&&q.complete()}))})}var Mt=b(8502),ze=b(262),Be=b(9300),Ge=b(5577),Qe=b(5698),Ne=b(5e3);const gt={dispatch:!0,useEffectsErrorHandler:!0},vt="__@ngrx/effects_create__";function sn(he,N){const L=he(),q=Object.assign(Object.assign({},gt),N);return Object.defineProperty(L,vt,{value:q}),L}function tn(he){return Object.getOwnPropertyNames(he).filter(q=>!(!he[q]||!he[q].hasOwnProperty(vt))&&he[q][vt].hasOwnProperty("dispatch")).map(q=>Object.assign({propertyName:q},he[q][vt]))}function vn(he){return Object.getPrototypeOf(he)}const xn="__@ngrx/effects__";function Ze(he={}){return function(N,L){!function Gt(he,N){St(he)?he.constructor[xn].push(N):Object.defineProperty(he.constructor,xn,{value:[N]})}(N,Object.assign(Object.assign(Object.assign({},gt),he),{propertyName:L}))}}function ft(he){return(0,g.qC)(Ut,vn)(he)}function St(he){return he.constructor.hasOwnProperty(xn)}function Ut(he){return St(he)?he.constructor[xn]:[]}function Nn(he,N,L){const q=vn(he).constructor.name,X=function Yt(he){return[ft,tn].reduce((L,q)=>L.concat(q(he)),[])}(he).map(({propertyName:Fe,dispatch:ht,useEffectsErrorHandler:we})=>{const xe="function"==typeof he[Fe]?he[Fe]():he[Fe],ue=we?L(xe,N):xe;return!1===ht?ue.pipe((0,Mt.l)()):ue.pipe(function it(){return(0,ke.e)((he,N)=>{he.subscribe((0,qe.x)(N,L=>{N.next(te.createNext(L))},()=>{N.next(te.createComplete()),N.complete()},L=>{N.next(te.createError(L)),N.complete()}))})}()).pipe((0,et.U)($=>({effect:he[Fe],notification:$,propertyName:Fe,sourceName:q,sourceInstance:he})))});return(0,S.T)(...X)}function nn(he,N,L=10){return he.pipe((0,ze.K)(q=>(N&&N.handleError(q),L<=1?he:nn(he,N,L-1))))}let wn=(()=>{class he extends U.y{constructor(L){super(),L&&(this.source=L)}lift(L){const q=new he;return q.source=this,q.operator=L,q}}return he.\u0275fac=function(L){return new(L||he)(Ne.LFG(g.Y$))},he.\u0275prov=Ne.Yz7({token:he,factory:he.\u0275fac}),he})();function Ot(...he){return(0,Be.h)(N=>he.some(L=>"string"==typeof L?L===N.type:L.type===N.type))}function mn(he){return Tn(he,"ngrxOnInitEffects")}function Tn(he,N){return he&&N in he&&"function"==typeof he[N]}const De=new Ne.OlP("@ngrx/effects Internal Root Guard"),qn=new Ne.OlP("@ngrx/effects User Provided Effects"),rt=new Ne.OlP("@ngrx/effects Internal Root Effects"),Y=new Ne.OlP("@ngrx/effects Root Effects"),J=new Ne.OlP("@ngrx/effects Internal Feature Effects"),Re=new Ne.OlP("@ngrx/effects Feature Effects"),Xe=new Ne.OlP("@ngrx/effects Effects Error Handler");let yt=(()=>{class he extends re.x{constructor(L,q){super(),this.errorHandler=L,this.effectsErrorHandler=q}addEffects(L){this.next(L)}toActions(){return this.pipe(Et(vn),(0,Ge.z)(L=>L.pipe(Et(Ft))),(0,Ge.z)(L=>{const q=L.pipe(at(Fe=>function Zt(he,N){return L=>{const q=Nn(L,he,N);return function ur(he){return Tn(he,"ngrxOnRunEffects")}(L)?L.ngrxOnRunEffects(q):q}}(this.errorHandler,this.effectsErrorHandler)(Fe)),(0,et.U)(Fe=>(function hn(he,N){if("N"===he.notification.kind){const L=he.notification.value;!function xt(he){return"function"!=typeof he&&he&&he.type&&"string"==typeof he.type}(L)&&N.handleError(new Error(`Effect ${function rn({propertyName:he,sourceInstance:N,sourceName:L}){const q="function"==typeof N[he];return`"${L}.${String(he)}${q?"()":""}"`}(he)} dispatched an invalid action: ${function fn(he){try{return JSON.stringify(he)}catch(N){return he}}(L)}`))}}(Fe,this.errorHandler),Fe.notification)),(0,Be.h)(Fe=>"N"===Fe.kind&&null!=Fe.value),function He(){return(0,ke.e)((he,N)=>{he.subscribe((0,qe.x)(N,L=>se(L,N)))})}()),X=L.pipe((0,Qe.q)(1),(0,Be.h)(mn),(0,et.U)(Fe=>Fe.ngrxOnInitEffects()));return(0,S.T)(q,X)}))}}return he.\u0275fac=function(L){return new(L||he)(Ne.LFG(Ne.qLn),Ne.LFG(Xe))},he.\u0275prov=Ne.Yz7({token:he,factory:he.\u0275fac}),he})();function Ft(he){return function Sn(he){return Tn(he,"ngrxOnIdentifyEffects")}(he)?he.ngrxOnIdentifyEffects():""}let zt=(()=>{class he{constructor(L,q){this.effectSources=L,this.store=q,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return he.\u0275fac=function(L){return new(L||he)(Ne.LFG(yt),Ne.LFG(g.yh))},he.\u0275prov=Ne.Yz7({token:he,factory:he.\u0275fac}),he})();const Mn="@ngrx/effects/init";(0,g.PH)(Mn);let Bn=(()=>{class he{constructor(L,q,X,Fe,ht,we,xe){this.sources=L,q.start(),Fe.forEach(ue=>L.addEffects(ue)),X.dispatch({type:Mn})}addEffects(L){this.sources.addEffects(L)}}return he.\u0275fac=function(L){return new(L||he)(Ne.LFG(yt),Ne.LFG(zt),Ne.LFG(g.yh),Ne.LFG(Y),Ne.LFG(g.cr,8),Ne.LFG(g.CK,8),Ne.LFG(De,8))},he.\u0275mod=Ne.oAB({type:he}),he.\u0275inj=Ne.cJS({}),he})(),gr=(()=>{class he{constructor(L,q,X,Fe){q.forEach(ht=>ht.forEach(we=>L.addEffects(we)))}}return he.\u0275fac=function(L){return new(L||he)(Ne.LFG(Bn),Ne.LFG(Re),Ne.LFG(g.cr,8),Ne.LFG(g.CK,8))},he.\u0275mod=Ne.oAB({type:he}),he.\u0275inj=Ne.cJS({}),he})(),lr=(()=>{class he{static forFeature(L=[]){return{ngModule:gr,providers:[L,{provide:J,multi:!0,useValue:L},{provide:qn,multi:!0,useValue:[]},{provide:Re,multi:!0,useFactory:tr,deps:[Ne.zs3,J,qn]}]}}static forRoot(L=[]){return{ngModule:Bn,providers:[{provide:Xe,useValue:nn},zt,yt,wn,L,{provide:rt,useValue:[L]},{provide:De,useFactory:dt,deps:[[zt,new Ne.FiY,new Ne.tp0],[rt,new Ne.PiD]]},{provide:qn,multi:!0,useValue:[]},{provide:Y,useFactory:tr,deps:[Ne.zs3,rt,qn]}]}}}return he.\u0275fac=function(L){return new(L||he)},he.\u0275mod=Ne.oAB({type:he}),he.\u0275inj=Ne.cJS({}),he})();function tr(he,N,L){const q=[];for(const X of N)q.push(...X);for(const X of L)q.push(...X);return function pt(he,N){return N.map(L=>he.get(L))}(he,q)}function dt(he,N){if((1!==N.length||0!==N[0].length)&&he)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}},9565:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5e3),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5620),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8306),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7414),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(Je){const Te={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},b="function"==typeof Je?Je():Je,U=Object.assign({},Te,{features:b.features||!!b.logOnly&&{pause:!0,export:!0,test:!0}||Te.features},b);if(U.maxAge&&U.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${U.maxAge}`);return U}const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(Te,b){if(this.action=Te,this.timestamp=b,this.type=PERFORM_ACTION,void 0===Te.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(Te){this.timestamp=Te,this.type=RESET}}class Rollback{constructor(Te){this.timestamp=Te,this.type=ROLLBACK}}class Commit{constructor(Te){this.timestamp=Te,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(Te){this.id=Te,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(Te,b,g=!0){this.start=Te,this.end=b,this.active=g,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(Te){this.index=Te,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(Te){this.actionId=Te,this.type=JUMP_TO_ACTION}}class ImportState{constructor(Te){this.nextLiftedState=Te,this.type=IMPORT_STATE}}class LockChanges{constructor(Te){this.status=Te,this.type=LOCK_CHANGES}}class PauseRecording{constructor(Te){this.status=Te,this.type=PAUSE_RECORDING}}function difference(Je,Te){return Je.filter(b=>Te.indexOf(b)<0)}function unliftState(Je){const{computedStates:Te,currentStateIndex:b}=Je;if(b>=Te.length){const{state:S}=Te[Te.length-1];return S}const{state:g}=Te[b];return g}function unliftAction(Je){return Je.actionsById[Je.nextActionId-1]}function liftAction(Je){return new PerformAction(Je,+Date.now())}function sanitizeActions(Je,Te){return Object.keys(Te).reduce((b,g)=>{const S=Number(g);return b[S]=sanitizeAction(Je,Te[S],S),b},{})}function sanitizeAction(Je,Te,b){return Object.assign(Object.assign({},Te),{action:Je(Te.action,b)})}function sanitizeStates(Je,Te){return Te.map((b,g)=>({state:sanitizeState(Je,b.state,g),error:b.error}))}function sanitizeState(Je,Te,b){return Je(Te,b)}function shouldFilterActions(Je){return Je.predicate||Je.actionsSafelist||Je.actionsBlocklist}function filterLiftedState(Je,Te,b,g){const S=[],U={},re=[];return Je.stagedActionIds.forEach((de,Ie)=>{const Ce=Je.actionsById[de];!Ce||Ie&&isActionFiltered(Je.computedStates[Ie],Ce,Te,b,g)||(U[de]=Ce,S.push(de),re.push(Je.computedStates[Ie]))}),Object.assign(Object.assign({},Je),{stagedActionIds:S,actionsById:U,computedStates:re})}function isActionFiltered(Je,Te,b,g,S){const U=b&&!b(Je,Te.action),re=g&&!Te.action.type.match(g.map(Ie=>escapeRegExp(Ie)).join("|")),de=S&&Te.action.type.match(S.map(Ie=>escapeRegExp(Ie)).join("|"));return U||re||de}function escapeRegExp(Je){return Je.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(Je,Te,b,g,S){if(g)return{state:b,error:"Interrupted by an error up the chain"};let re,U=b;try{U=Je(b,Te)}catch(de){re=de.toString(),S.handleError(de)}return{state:U,error:re}}function recomputeStates(Je,Te,b,g,S,U,re,de,Ie){if(Te>=Je.length&&Je.length===U.length)return Je;const Ce=Je.slice(0,Te),oe=U.length-(Ie?1:0);for(let ce=Te;ce<oe;ce++){const te=U[ce],se=S[te].action,ke=Ce[ce-1],qe=ke?ke.state:g,it=ke?ke.error:void 0,Et=re.indexOf(te)>-1?ke:computeNextEntry(b,se,qe,it,de);Ce.push(Et)}return Ie&&Ce.push(Je[Je.length-1]),Ce}function liftInitialState(Je,Te){return{monitorState:Te(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:Je,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(Je,Te,b,g,S={}){return U=>(re,de)=>{let{monitorState:Ie,actionsById:Ce,nextActionId:oe,stagedActionIds:ce,skippedActionIds:te,committedState:se,currentStateIndex:ke,computedStates:qe,isLocked:it,isPaused:ut}=re||Te;function Et(He){let Mt=He,ze=ce.slice(1,Mt+1);for(let Be=0;Be<ze.length;Be++){if(qe[Be+1].error){Mt=Be,ze=ce.slice(1,Mt+1);break}delete Ce[ze[Be]]}te=te.filter(Be=>-1===ze.indexOf(Be)),ce=[0,...ce.slice(Mt+1)],se=qe[Mt].state,qe=qe.slice(Mt),ke=ke>Mt?ke-Mt:0}function et(){Ce={0:liftAction(INIT_ACTION)},oe=1,ce=[0],te=[],se=qe[ke].state,ke=0,qe=[]}re||(Ce=Object.create(Ce));let at=0;switch(de.type){case LOCK_CHANGES:it=de.status,at=1/0;break;case PAUSE_RECORDING:ut=de.status,ut?(ce=[...ce,oe],Ce[oe]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),oe++,at=ce.length-1,qe=qe.concat(qe[qe.length-1]),ke===ce.length-2&&ke++,at=1/0):et();break;case RESET:Ce={0:liftAction(INIT_ACTION)},oe=1,ce=[0],te=[],se=Je,ke=0,qe=[];break;case COMMIT:et();break;case ROLLBACK:Ce={0:liftAction(INIT_ACTION)},oe=1,ce=[0],te=[],ke=0,qe=[];break;case TOGGLE_ACTION:{const{id:He}=de;te=-1===te.indexOf(He)?[He,...te]:te.filter(ze=>ze!==He),at=ce.indexOf(He);break}case SET_ACTIONS_ACTIVE:{const{start:He,end:Mt,active:ze}=de,Be=[];for(let Ge=He;Ge<Mt;Ge++)Be.push(Ge);te=ze?difference(te,Be):[...te,...Be],at=ce.indexOf(He);break}case JUMP_TO_STATE:ke=de.index,at=1/0;break;case JUMP_TO_ACTION:{const He=ce.indexOf(de.actionId);-1!==He&&(ke=He),at=1/0;break}case SWEEP:ce=difference(ce,te),te=[],ke=Math.min(ke,ce.length-1);break;case PERFORM_ACTION:{if(it)return re||Te;if(ut||re&&isActionFiltered(re.computedStates[ke],de,S.predicate,S.actionsSafelist,S.actionsBlocklist)){const Mt=qe[qe.length-1];qe=[...qe.slice(0,-1),computeNextEntry(U,de.action,Mt.state,Mt.error,b)],at=1/0;break}S.maxAge&&ce.length===S.maxAge&&Et(1),ke===ce.length-1&&ke++;const He=oe++;Ce[He]=de,ce=[...ce,He],at=ce.length-1;break}case IMPORT_STATE:({monitorState:Ie,actionsById:Ce,nextActionId:oe,stagedActionIds:ce,skippedActionIds:te,committedState:se,currentStateIndex:ke,computedStates:qe,isLocked:it,isPaused:ut}=de.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:at=0,S.maxAge&&ce.length>S.maxAge&&(qe=recomputeStates(qe,at,U,se,Ce,ce,te,b,ut),Et(ce.length-S.maxAge),at=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(qe.filter(Mt=>Mt.error).length>0)at=0,S.maxAge&&ce.length>S.maxAge&&(qe=recomputeStates(qe,at,U,se,Ce,ce,te,b,ut),Et(ce.length-S.maxAge),at=1/0);else{if(!ut&&!it){ke===ce.length-1&&ke++;const Mt=oe++;Ce[Mt]=new PerformAction(de,+Date.now()),ce=[...ce,Mt],at=ce.length-1,qe=recomputeStates(qe,at,U,se,Ce,ce,te,b,ut)}qe=qe.map(Mt=>Object.assign(Object.assign({},Mt),{state:U(Mt.state,RECOMPUTE_ACTION)})),ke=ce.length-1,S.maxAge&&ce.length>S.maxAge&&Et(ce.length-S.maxAge),at=1/0}break;default:at=1/0}return qe=recomputeStates(qe,at,U,se,Ce,ce,te,b,ut),Ie=g(Ie,de),{monitorState:Ie,actionsById:Ce,nextActionId:oe,stagedActionIds:ce,skippedActionIds:te,committedState:se,currentStateIndex:ke,computedStates:qe,isLocked:it,isPaused:ut}}}let DevtoolsDispatcher=(()=>{class Je extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return Je.\u0275fac=function(){let Te;return function(g){return(Te||(Te=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(Je)))(g||Je)}}(),Je.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(Je,Te,b){this.config=Te,this.dispatcher=b,this.devtoolsExtension=Je,this.createActionStreams()}notify(Je,Te){if(this.devtoolsExtension)if(Je.type===PERFORM_ACTION){if(Te.isLocked||Te.isPaused)return;const b=unliftState(Te);if(shouldFilterActions(this.config)&&isActionFiltered(b,Je,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const g=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,b,Te.currentStateIndex):b,S=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,Je,Te.nextActionId):Je;this.sendToReduxDevtools(()=>this.extensionConnection.send(S,g))}else{const b=Object.assign(Object.assign({},Te),{stagedActionIds:Te.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,Te.actionsById):Te.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,Te.computedStates):Te.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,b,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(Je=>{const Te=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=Te,Te.init(),Te.subscribe(b=>Je.next(b)),Te.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const Je=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),Te=Je.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(de=>de.type===ExtensionActionTypes.START)),b=Je.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(de=>de.type===ExtensionActionTypes.STOP)),g=Je.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(de=>de.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(de=>this.unwrapAction(de.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(de=>de.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Ie=>Ie.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>de),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(de)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(de))),U=Je.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(de=>de.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(de=>this.unwrapAction(de.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(b)),re=g.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(b));this.start$=Te.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(b)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>U)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>re))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(Je){var Te;const b={name:Je.name,features:Je.features,serialize:Je.serialize,autoPause:null!==(Te=Je.autoPause)&&void 0!==Te&&Te};return!1!==Je.maxAge&&(b.maxAge=Je.maxAge),b}sendToReduxDevtools(Je){try{Je()}catch(Te){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",Te)}}}return DevtoolsExtension.\u0275fac=function Je(Te){return new(Te||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})(),StoreDevtools=(()=>{class Je{constructor(b,g,S,U,re,de,Ie,Ce){const oe=liftInitialState(Ie,Ce.monitor),ce=liftReducerWith(Ie,oe,de,Ce.monitor,Ce),te=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(g.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),U.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),b,U.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),se=S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(ce)),ke=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),qe=te.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(se),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:et},[at,He])=>{let Mt=He(et,at);return at.type!==PERFORM_ACTION&&shouldFilterActions(Ce)&&(Mt=filterLiftedState(Mt,Ce.predicate,Ce.actionsSafelist,Ce.actionsBlocklist)),U.notify(at,Mt),{state:Mt,action:at}},{state:oe,action:null})).subscribe(({state:et,action:at})=>{ke.next(et),at.type===PERFORM_ACTION&&re.next(at.action)}),it=U.start$.subscribe(()=>{this.refresh()}),ut=ke.asObservable(),Et=ut.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=it,this.stateSubscription=qe,this.dispatcher=b,this.liftedState=ut,this.state=Et}dispatch(b){this.dispatcher.next(b)}next(b){this.dispatcher.next(b)}error(b){}complete(){}performAction(b){this.dispatch(new PerformAction(b,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(b){this.dispatch(new ToggleAction(b))}jumpToAction(b){this.dispatch(new JumpToAction(b))}jumpToState(b){this.dispatch(new JumpToState(b))}importState(b){this.dispatch(new ImportState(b))}lockChanges(b){this.dispatch(new LockChanges(b))}pauseRecording(b){this.dispatch(new PauseRecording(b))}}return Je.\u0275fac=function(b){return new(b||Je)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},Je.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(Je,Te){return Boolean(Je)||Te.monitor!==noMonitor}function createReduxDevtoolsExtension(){const Je="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[Je]?window[Je]:null}function createStateObservable(Je){return Je.state}let StoreDevtoolsModule=(()=>{class Je{static instrument(b={}){return{ngModule:Je,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:b},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}}return Je.\u0275fac=function(b){return new(b||Je)},Je.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:Je}),Je.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),Je})()},5620:(Je,Te,b)=>{b.d(Te,{UO:()=>Qe,qg:()=>Ge,Y6:()=>sn,mK:()=>mn,n$:()=>Dr,Y$:()=>rt,FR:()=>J,yh:()=>Ft,CK:()=>Nr,Aw:()=>Pi,cr:()=>Oi,wb:()=>Tn,qC:()=>Sn,PH:()=>it,ZF:()=>_e,Lq:()=>Gi,P1:()=>be,on:()=>di,Ky:()=>ut,Ys:()=>zt});var g=b(5e3),S=b(1135),U=b(8306),re=b(7579),de=b(233),Ie=b(4004),oe=b(5363),ce=b(1365),te=b(5026),se=b(1884);const ke={};function it(Ke,Ht){if(ke[Ke]=(ke[Ke]||0)+1,"function"==typeof Ht)return et(Ke,(...Bt)=>Object.assign(Object.assign({},Ht(...Bt)),{type:Ke}));switch(Ht?Ht._as:"empty"){case"empty":return et(Ke,()=>({type:Ke}));case"props":return et(Ke,Bt=>Object.assign(Object.assign({},Bt),{type:Ke}));default:throw new Error("Unexpected config.")}}function ut(){return{_as:"props",_p:void 0}}function et(Ke,Ht){return Object.defineProperty(Ht,"type",{value:Ke,writable:!1})}const Ge="@ngrx/store/init";let Qe=(()=>{class Ke extends S.X{constructor(){super({type:Ge})}next(ct){if("function"==typeof ct)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===ct)throw new TypeError("Actions must be objects");if(void 0===ct.type)throw new TypeError("Actions must have a type property");super.next(ct)}complete(){}ngOnDestroy(){super.complete()}}return Ke.\u0275fac=function(ct){return new(ct||Ke)},Ke.\u0275prov=g.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();const Ne=[Qe],gt=new g.OlP("@ngrx/store Internal Root Guard"),vt=new g.OlP("@ngrx/store Internal Initial State"),sn=new g.OlP("@ngrx/store Initial State"),tn=new g.OlP("@ngrx/store Reducer Factory"),vn=new g.OlP("@ngrx/store Internal Reducer Factory Provider"),xn=new g.OlP("@ngrx/store Initial Reducers"),Ze=new g.OlP("@ngrx/store Internal Initial Reducers"),ft=new g.OlP("@ngrx/store Store Features"),St=new g.OlP("@ngrx/store Internal Store Reducers"),Gt=new g.OlP("@ngrx/store Internal Feature Reducers"),Ut=new g.OlP("@ngrx/store Internal Feature Configs"),Rt=new g.OlP("@ngrx/store Internal Store Features"),Yt=new g.OlP("@ngrx/store Internal Feature Reducers Token"),Nn=new g.OlP("@ngrx/store Feature Reducers"),jn=new g.OlP("@ngrx/store User Provided Meta Reducers"),nn=new g.OlP("@ngrx/store Meta Reducers"),wn=new g.OlP("@ngrx/store Internal Resolved Meta Reducers"),Ot=new g.OlP("@ngrx/store User Runtime Checks Config"),hn=new g.OlP("@ngrx/store Internal User Runtime Checks Config"),xt=new g.OlP("@ngrx/store Internal Runtime Checks"),rn=new g.OlP("@ngrx/store Check if Action types are unique");function fn(Ke,Ht={}){const ct=Object.keys(Ke),Bt={};for(let _n=0;_n<ct.length;_n++){const _r=ct[_n];"function"==typeof Ke[_r]&&(Bt[_r]=Ke[_r])}const An=Object.keys(Bt);return function(_r,Ei){_r=void 0===_r?Ht:_r;let ti=!1;const Zr={};for(let Fr=0;Fr<An.length;Fr++){const Qi=An[Fr],xs=_r[Qi],Ii=(0,Bt[Qi])(xs,Ei);Zr[Qi]=Ii,ti=ti||Ii!==xs}return ti?Zr:_r}}function Sn(...Ke){return function(Ht){if(0===Ke.length)return Ht;const ct=Ke[Ke.length-1];return Ke.slice(0,-1).reduceRight((An,_n)=>_n(An),ct(Ht))}}function Zn(Ke,Ht){return Array.isArray(Ht)&&Ht.length>0&&(Ke=Sn.apply(null,[...Ht,Ke])),(ct,Bt)=>{const An=Ke(ct);return(_n,_r)=>An(_n=void 0===_n?Bt:_n,_r)}}class Dr extends U.y{}class mn extends Qe{}const Tn="@ngrx/store/update-reducers";let De=(()=>{class Ke extends S.X{constructor(ct,Bt,An,_n){super(_n(An,Bt)),this.dispatcher=ct,this.initialState=Bt,this.reducers=An,this.reducerFactory=_n}get currentReducers(){return this.reducers}addFeature(ct){this.addFeatures([ct])}addFeatures(ct){const Bt=ct.reduce((An,{reducers:_n,reducerFactory:_r,metaReducers:Ei,initialState:ti,key:Zr})=>{const Fr="function"==typeof _n?function ur(Ke){const Ht=Array.isArray(Ke)&&Ke.length>0?Sn(...Ke):ct=>ct;return(ct,Bt)=>(ct=Ht(ct),(An,_n)=>ct(An=void 0===An?Bt:An,_n))}(Ei)(_n,ti):Zn(_r,Ei)(_n,ti);return An[Zr]=Fr,An},{});this.addReducers(Bt)}removeFeature(ct){this.removeFeatures([ct])}removeFeatures(ct){this.removeReducers(ct.map(Bt=>Bt.key))}addReducer(ct,Bt){this.addReducers({[ct]:Bt})}addReducers(ct){this.reducers=Object.assign(Object.assign({},this.reducers),ct),this.updateReducers(Object.keys(ct))}removeReducer(ct){this.removeReducers([ct])}removeReducers(ct){ct.forEach(Bt=>{this.reducers=function Fn(Ke,Ht){return Object.keys(Ke).filter(ct=>ct!==Ht).reduce((ct,Bt)=>Object.assign(ct,{[Bt]:Ke[Bt]}),{})}(this.reducers,Bt)}),this.updateReducers(ct)}updateReducers(ct){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Tn,features:ct})}ngOnDestroy(){this.complete()}}return Ke.\u0275fac=function(ct){return new(ct||Ke)(g.LFG(mn),g.LFG(sn),g.LFG(xn),g.LFG(tn))},Ke.\u0275prov=g.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();const qn=[De,{provide:Dr,useExisting:De},{provide:mn,useExisting:Qe}];let rt=(()=>{class Ke extends re.x{ngOnDestroy(){this.complete()}}return Ke.\u0275fac=function(){let Ht;return function(Bt){return(Ht||(Ht=g.n5z(Ke)))(Bt||Ke)}}(),Ke.\u0275prov=g.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();const Y=[rt];class J extends U.y{}let Re=(()=>{class Ke extends S.X{constructor(ct,Bt,An,_n){super(_n);const Zr=ct.pipe((0,oe.Q)(de.N)).pipe((0,ce.M)(Bt)).pipe((0,te.R)(Xe,{state:_n}));this.stateSubscription=Zr.subscribe(({state:Fr,action:Qi})=>{this.next(Fr),An.next(Qi)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return Ke.INIT=Ge,Ke.\u0275fac=function(ct){return new(ct||Ke)(g.LFG(Qe),g.LFG(Dr),g.LFG(rt),g.LFG(sn))},Ke.\u0275prov=g.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();function Xe(Ke={state:void 0},[Ht,ct]){const{state:Bt}=Ke;return{state:ct(Bt,Ht),action:Ht}}const yt=[Re,{provide:J,useExisting:Re}];let Ft=(()=>{class Ke extends U.y{constructor(ct,Bt,An){super(),this.actionsObserver=Bt,this.reducerManager=An,this.source=ct}select(ct,...Bt){return zt.call(null,ct,...Bt)(this)}lift(ct){const Bt=new Ke(this,this.actionsObserver,this.reducerManager);return Bt.operator=ct,Bt}dispatch(ct){this.actionsObserver.next(ct)}next(ct){this.actionsObserver.next(ct)}error(ct){this.actionsObserver.error(ct)}complete(){this.actionsObserver.complete()}addReducer(ct,Bt){this.reducerManager.addReducer(ct,Bt)}removeReducer(ct){this.reducerManager.removeReducer(ct)}}return Ke.\u0275fac=function(ct){return new(ct||Ke)(g.LFG(J),g.LFG(Qe),g.LFG(De))},Ke.\u0275prov=g.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();const Zt=[Ft];function zt(Ke,Ht,...ct){return function(An){let _n;if("string"==typeof Ke){const _r=[Ht,...ct].filter(Boolean);_n=An.pipe(function Ce(...Ke){const Ht=Ke.length;if(0===Ht)throw new Error("list of properties cannot be empty.");return(0,Ie.U)(ct=>{let Bt=ct;for(let An=0;An<Ht;An++){const _n=null==Bt?void 0:Bt[Ke[An]];if(void 0===_n)return;Bt=_n}return Bt})}(Ke,..._r))}else{if("function"!=typeof Ke)throw new TypeError(`Unexpected type '${typeof Ke}' in select operator, expected 'string' or 'function'`);_n=An.pipe((0,Ie.U)(_r=>Ke(_r,Ht)))}return _n.pipe((0,se.x)())}}const Mn="https://ngrx.io/guide/store/configuration/runtime-checks";function Kn(Ke){return void 0===Ke}function Bn(Ke){return null===Ke}function gr(Ke){return Array.isArray(Ke)}function dt(Ke){return"object"==typeof Ke&&null!==Ke}function he(Ke){return"function"==typeof Ke}function ht(Ke,Ht){return Ke===Ht}function we(Ke,Ht,ct){for(let Bt=0;Bt<Ke.length;Bt++)if(!ct(Ke[Bt],Ht[Bt]))return!0;return!1}function ue(Ke,Ht=ht,ct=ht){let _n,Bt=null,An=null;return{memoized:function Zr(){if(void 0!==_n)return _n.result;if(!Bt)return An=Ke.apply(null,arguments),Bt=arguments,An;if(!we(arguments,Bt,Ht))return An;const Fr=Ke.apply(null,arguments);return Bt=arguments,ct(An,Fr)?An:(An=Fr,Fr)},reset:function _r(){Bt=null,An=null},setResult:function Ei(Fr){_n={result:Fr}},clearResult:function ti(){_n=void 0}}}function be(...Ke){return function ae(Ke,Ht={stateFn:$}){return function(...ct){let Bt=ct;if(Array.isArray(Bt[0])){const[Fr,...Qi]=Bt;Bt=[...Fr,...Qi]}const An=Bt.slice(0,Bt.length-1),_n=Bt[Bt.length-1],_r=An.filter(Fr=>Fr.release&&"function"==typeof Fr.release),Ei=Ke(function(...Fr){return _n.apply(null,Fr)}),ti=ue(function(Fr,Qi){return Ht.stateFn.apply(null,[Fr,An,Qi,Ei])});return Object.assign(ti.memoized,{release:function Zr(){ti.reset(),Ei.reset(),_r.forEach(Fr=>Fr.release())},projector:Ei.memoized,setResult:ti.setResult,clearResult:ti.clearResult})}}(ue)(...Ke)}function $(Ke,Ht,ct,Bt){if(void 0===ct){const _n=Ht.map(_r=>_r(Ke));return Bt.memoized.apply(null,_n)}const An=Ht.map(_n=>_n(Ke,ct));return Bt.memoized.apply(null,[...An,ct])}function _e(Ke){return be(Ht=>{const ct=Ht[Ke];return(0,g.X6Q)()&&!(Ke in Ht)&&console.warn(`@ngrx/store: The feature name "${Ke}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${Ke}', ...) or StoreModule.forFeature('${Ke}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),ct},Ht=>Ht)}function Ln(Ke){Object.freeze(Ke);const Ht=he(Ke);return Object.getOwnPropertyNames(Ke).forEach(ct=>{if(!ct.startsWith("\u0275")&&function L(Ke,Ht){return Object.prototype.hasOwnProperty.call(Ke,Ht)}(Ke,ct)&&(!Ht||"caller"!==ct&&"callee"!==ct&&"arguments"!==ct)){const Bt=Ke[ct];(dt(Bt)||he(Bt))&&!Object.isFrozen(Bt)&&Ln(Bt)}}),Ke}function nr(Ke,Ht=[]){return(Kn(Ke)||Bn(Ke))&&0===Ht.length?{path:["root"],value:Ke}:Object.keys(Ke).reduce((Bt,An)=>{if(Bt)return Bt;const _n=Ke[An];return function N(Ke){return he(Ke)&&Ke.hasOwnProperty("\u0275cmp")}(_n)?Bt:!(Kn(_n)||Bn(_n)||function pt(Ke){return"number"==typeof Ke}(_n)||function tr(Ke){return"boolean"==typeof Ke}(_n)||function lr(Ke){return"string"==typeof Ke}(_n)||gr(_n))&&(function It(Ke){if(!function Ue(Ke){return dt(Ke)&&!gr(Ke)}(Ke))return!1;const Ht=Object.getPrototypeOf(Ke);return Ht===Object.prototype||null===Ht}(_n)?nr(_n,[...Ht,An]):{path:[...Ht,An],value:_n})},!1)}function xr(Ke,Ht){if(!1===Ke)return;const ct=Ke.path.join("."),Bt=new Error(`Detected unserializable ${Ht} at "${ct}". ${Mn}#strict${Ht}serializability`);throw Bt.value=Ke.value,Bt.unserializablePath=ct,Bt}function Ur(Ke){return(0,g.X6Q)()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},Ke):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Hi({strictActionSerializability:Ke,strictStateSerializability:Ht}){return ct=>Ke||Ht?function Ir(Ke,Ht){return function(ct,Bt){Ht.action(Bt)&&xr(nr(Bt),"action");const An=Ke(ct,Bt);return Ht.state()&&xr(nr(An),"state"),An}}(ct,{action:Bt=>Ke&&!In(Bt),state:()=>Ht}):ct}function Ki({strictActionImmutability:Ke,strictStateImmutability:Ht}){return ct=>Ke||Ht?function Dn(Ke,Ht){return function(ct,Bt){const An=Ht.action(Bt)?Ln(Bt):Bt,_n=Ke(ct,An);return Ht.state()?Ln(_n):_n}}(ct,{action:Bt=>Ke&&!In(Bt),state:()=>Ht}):ct}function In(Ke){return Ke.type.startsWith("@ngrx")}function mr({strictActionWithinNgZone:Ke}){return Ht=>Ke?function ai(Ke,Ht){return function(ct,Bt){if(Ht.action(Bt)&&!g.R0b.isInAngularZone())throw new Error(`Action '${Bt.type}' running outside NgZone. ${Mn}#strictactionwithinngzone`);return Ke(ct,Bt)}}(Ht,{action:ct=>Ke&&!In(ct)}):Ht}function Kr(Ke){return[{provide:hn,useValue:Ke},{provide:Ot,useFactory:$i,deps:[hn]},{provide:xt,deps:[Ot],useFactory:Ur},{provide:nn,multi:!0,deps:[xt],useFactory:Ki},{provide:nn,multi:!0,deps:[xt],useFactory:Hi},{provide:nn,multi:!0,deps:[xt],useFactory:mr}]}function wi(){return[{provide:rn,multi:!0,deps:[xt],useFactory:pi}]}function $i(Ke){return Ke}function pi(Ke){if(!Ke.strictActionTypeUniqueness)return;const Ht=Object.entries(ke).filter(([,ct])=>ct>1).map(([ct])=>ct);if(Ht.length)throw new Error(`Action types are registered more than once, ${Ht.map(ct=>`"${ct}"`).join(", ")}. ${Mn}#strictactiontypeuniqueness`)}let Oi=(()=>{class Ke{constructor(ct,Bt,An,_n,_r,Ei){}}return Ke.\u0275fac=function(ct){return new(ct||Ke)(g.LFG(Qe),g.LFG(Dr),g.LFG(rt),g.LFG(Ft),g.LFG(gt,8),g.LFG(rn,8))},Ke.\u0275mod=g.oAB({type:Ke}),Ke.\u0275inj=g.cJS({}),Ke})(),Nr=(()=>{class Ke{constructor(ct,Bt,An,_n,_r){this.features=ct,this.featureReducers=Bt,this.reducerManager=An;const Ei=ct.map((ti,Zr)=>{const Qi=Bt.shift()[Zr];return Object.assign(Object.assign({},ti),{reducers:Qi,initialState:Wr(ti.initialState)})});An.addFeatures(Ei)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return Ke.\u0275fac=function(ct){return new(ct||Ke)(g.LFG(Rt),g.LFG(Nn),g.LFG(De),g.LFG(Oi),g.LFG(rn,8))},Ke.\u0275mod=g.oAB({type:Ke}),Ke.\u0275inj=g.cJS({}),Ke})(),Pi=(()=>{class Ke{static forRoot(ct,Bt={}){return{ngModule:Oi,providers:[{provide:gt,useFactory:ns,deps:[[Ft,new g.FiY,new g.tp0]]},{provide:vt,useValue:Bt.initialState},{provide:sn,useFactory:Wr,deps:[vt]},{provide:Ze,useValue:ct},{provide:St,useExisting:ct instanceof g.OlP?ct:Ze},{provide:xn,deps:[g.zs3,Ze,[new g.tBr(St)]],useFactory:li},{provide:jn,useValue:Bt.metaReducers?Bt.metaReducers:[]},{provide:wn,deps:[nn,jn],useFactory:Yi},{provide:vn,useValue:Bt.reducerFactory?Bt.reducerFactory:fn},{provide:tn,deps:[vn,wn],useFactory:Zn},Ne,qn,Y,yt,Zt,Kr(Bt.runtimeChecks),wi()]}}static forFeature(ct,Bt,An={}){return{ngModule:Nr,providers:[{provide:Ut,multi:!0,useValue:ct instanceof Object?{}:An},{provide:ft,multi:!0,useValue:{key:ct instanceof Object?ct.name:ct,reducerFactory:An instanceof g.OlP||!An.reducerFactory?fn:An.reducerFactory,metaReducers:An instanceof g.OlP||!An.metaReducers?[]:An.metaReducers,initialState:An instanceof g.OlP||!An.initialState?void 0:An.initialState}},{provide:Rt,deps:[g.zs3,Ut,ft],useFactory:hr},{provide:Gt,multi:!0,useValue:ct instanceof Object?ct.reducer:Bt},{provide:Yt,multi:!0,useExisting:Bt instanceof g.OlP?Bt:Gt},{provide:Nn,multi:!0,deps:[g.zs3,Gt,[new g.tBr(Yt)]],useFactory:ps},wi()]}}}return Ke.\u0275fac=function(ct){return new(ct||Ke)},Ke.\u0275mod=g.oAB({type:Ke}),Ke.\u0275inj=g.cJS({}),Ke})();function li(Ke,Ht){return Ht instanceof g.OlP?Ke.get(Ht):Ht}function hr(Ke,Ht,ct){return ct.map((Bt,An)=>{if(Ht[An]instanceof g.OlP){const _n=Ke.get(Ht[An]);return{key:Bt.key,reducerFactory:_n.reducerFactory?_n.reducerFactory:fn,metaReducers:_n.metaReducers?_n.metaReducers:[],initialState:_n.initialState}}return Bt})}function ps(Ke,Ht){return Ht.map(Bt=>Bt instanceof g.OlP?Ke.get(Bt):Bt)}function Wr(Ke){return"function"==typeof Ke?Ke():Ke}function Yi(Ke,Ht){return Ke.concat(Ht)}function ns(Ke){if(Ke)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function di(...Ke){return{reducer:Ke.pop(),types:Ke.map(Bt=>Bt.type)}}function Gi(Ke,...Ht){const ct=new Map;for(const Bt of Ht)for(const An of Bt.types){const _n=ct.get(An);ct.set(An,_n?(Ei,ti)=>Bt.reducer(_n(Ei,ti),ti):Bt.reducer)}return function(Bt=Ke,An){const _n=ct.get(An.type);return _n?_n(Bt,An):Bt}}},259:(Je,Te,b)=>{b.d(Te,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=b(9681);(0,g.registerVersion)("firebase","9.18.0","app")},9260:(Je,Te,b)=>{b.d(Te,{Z:()=>g.Z});var g=b(3942);g.Z.registerVersion("firebase","9.18.0","app-compat")},9568:(Je,Te,b)=>{b.r(Te);var g=b(5861),S=b(3942),U=b(5114),re=b(2090),Ce=(b(9681),b(1877),b(4859));function oe(){return window}function se(){return(se=(0,g.Z)(function*(ue,be,$){var ae;const{BuildInfo:_e}=oe();(0,U.ap)(be.sessionId,"AuthEvent did not contain a session ID");const Ve=yield at(be.sessionId),Tt={};return(0,U.aq)()?Tt.ibi=_e.packageName:(0,U.ar)()?Tt.apn=_e.packageName:(0,U.as)(ue,"operation-not-supported-in-this-environment"),_e.displayName&&(Tt.appDisplayName=_e.displayName),Tt.sessionId=Ve,(0,U.at)(ue,$,be.type,void 0,null!==(ae=be.eventId)&&void 0!==ae?ae:void 0,Tt)})).apply(this,arguments)}function qe(){return(qe=(0,g.Z)(function*(ue){const{BuildInfo:be}=oe(),$={};(0,U.aq)()?$.iosBundleId=be.packageName:(0,U.ar)()?$.androidPackageName=be.packageName:(0,U.as)(ue,"operation-not-supported-in-this-environment"),yield(0,U.au)(ue,$)})).apply(this,arguments)}function Et(){return(Et=(0,g.Z)(function*(ue,be,$){const{cordova:ae}=oe();let _e=()=>{};try{yield new Promise((Ve,Tt)=>{let un=null;function Dn(){var nr;Ve();const xr=null===(nr=ae.plugins.browsertab)||void 0===nr?void 0:nr.close;"function"==typeof xr&&xr(),"function"==typeof(null==$?void 0:$.close)&&$.close()}function Ln(){un||(un=window.setTimeout(()=>{Tt((0,U.aw)(ue,"redirect-cancelled-by-user"))},2e3))}function Ir(){"visible"===(null==document?void 0:document.visibilityState)&&Ln()}be.addPassiveListener(Dn),document.addEventListener("resume",Ln,!1),(0,U.ar)()&&document.addEventListener("visibilitychange",Ir,!1),_e=()=>{be.removePassiveListener(Dn),document.removeEventListener("resume",Ln,!1),document.removeEventListener("visibilitychange",Ir,!1),un&&window.clearTimeout(un)}})}finally{_e()}})).apply(this,arguments)}function at(ue){return He.apply(this,arguments)}function He(){return(He=(0,g.Z)(function*(ue){const be=Mt(ue),$=yield crypto.subtle.digest("SHA-256",be);return Array.from(new Uint8Array($)).map(_e=>_e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Mt(ue){if((0,U.ap)(/[0-9a-zA-Z]+/.test(ue),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ue);const be=new ArrayBuffer(ue.length),$=new Uint8Array(be);for(let ae=0;ae<ue.length;ae++)$[ae]=ue.charCodeAt(ae);return $}class Be extends U.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(be=>{this.resolveInialized=be})}addPassiveListener(be){this.passiveListeners.add(be)}removePassiveListener(be){this.passiveListeners.delete(be)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(be){return this.resolveInialized(),this.passiveListeners.forEach($=>$(be)),super.onEvent(be)}initialized(){var be=this;return(0,g.Z)(function*(){yield be.initPromise})()}}function Ne(ue){return gt.apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(ue){const be=yield tn()._get(vn(ue));return be&&(yield tn()._remove(vn(ue))),be})).apply(this,arguments)}function sn(){const ue=[],be="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let $=0;$<20;$++){const ae=Math.floor(Math.random()*be.length);ue.push(be.charAt(ae))}return ue.join("")}function tn(){return(0,U.az)(U.b)}function vn(ue){return(0,U.aA)("authEvent",ue.config.apiKey,ue.name)}function ft(ue){if(!(null==ue?void 0:ue.includes("?")))return{};const[be,...$]=ue.split("?");return(0,re.zd)($.join("?"))}function Rt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,U.aw)("no-auth-event")}}function wn(){var ue;return(null===(ue=null==self?void 0:self.location)||void 0===ue?void 0:ue.protocol)||null}function hn(ue=(0,re.z$)()){return!("file:"!==wn()&&"ionic:"!==wn()&&"capacitor:"!==wn()||!ue.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sn(){try{const ue=self.localStorage,be=U.aI();if(ue)return ue.setItem(be,"1"),ue.removeItem(be),!function Fn(ue=(0,re.z$)()){return function rn(){return(0,re.w1)()&&11===(null==document?void 0:document.documentMode)}()||function fn(ue=(0,re.z$)()){return/Edge\/\d+/.test(ue)}(ue)}()||(0,re.hl)()}catch(ue){return Zn()&&(0,re.hl)()}return!1}function Zn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ur(){return(function Ot(){return"http:"===wn()||"https:"===wn()}()||(0,re.ru)()||hn())&&!function xt(){return(0,re.b$)()||(0,re.UG)()}()&&Sn()&&!Zn()}function Dr(){return hn()&&"undefined"!=typeof document}function Tn(){return(Tn=(0,g.Z)(function*(){return!!Dr()&&new Promise(ue=>{const be=setTimeout(()=>{ue(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(be),ue(!0)})})})).apply(this,arguments)}const qn={LOCAL:"local",NONE:"none",SESSION:"session"},rt=U.ax,Y="persistence";function Re(ue){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,g.Z)(function*(ue){yield ue._initializationPromise;const be=Ft(),$=U.aA(Y,ue.config.apiKey,ue.name);be&&be.setItem($,ue._getPersistence())})).apply(this,arguments)}function Ft(){var ue;try{return(null===(ue=function De(){return"undefined"!=typeof window?window:null}())||void 0===ue?void 0:ue.sessionStorage)||null}catch(be){return null}}const Zt=U.ax;class zt{constructor(){this.browserResolver=U.az(U.k),this.cordovaResolver=U.az(class Gt{constructor(){this._redirectPersistence=U.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=U.aB,this._overrideRedirectResult=U.aC}_initialize(be){var $=this;return(0,g.Z)(function*(){const ae=be._key();let _e=$.eventManagers.get(ae);return _e||(_e=new Be(be),$.eventManagers.set(ae,_e),$.attachCallbackListeners(be,_e)),_e})()}_openPopup(be){(0,U.as)(be,"operation-not-supported-in-this-environment")}_openRedirect(be,$,ae,_e){var Ve=this;return(0,g.Z)(function*(){!function et(ue){var be,$,ae,_e,Ve,Tt,un,Dn,Ln,Ir;const nr=oe();(0,U.ax)("function"==typeof(null===(be=null==nr?void 0:nr.universalLinks)||void 0===be?void 0:be.subscribe),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,U.ax)(void 0!==(null===($=null==nr?void 0:nr.BuildInfo)||void 0===$?void 0:$.packageName),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,U.ax)("function"==typeof(null===(Ve=null===(_e=null===(ae=null==nr?void 0:nr.cordova)||void 0===ae?void 0:ae.plugins)||void 0===_e?void 0:_e.browsertab)||void 0===Ve?void 0:Ve.openUrl),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.ax)("function"==typeof(null===(Dn=null===(un=null===(Tt=null==nr?void 0:nr.cordova)||void 0===Tt?void 0:Tt.plugins)||void 0===un?void 0:un.browsertab)||void 0===Dn?void 0:Dn.isAvailable),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.ax)("function"==typeof(null===(Ir=null===(Ln=null==nr?void 0:nr.cordova)||void 0===Ln?void 0:Ln.InAppBrowser)||void 0===Ir?void 0:Ir.open),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(be);const Tt=yield Ve._initialize(be);yield Tt.initialized(),Tt.resetRedirect(),(0,U.aD)(),yield Ve._originValidation(be);const un=function Ge(ue,be,$=null){return{type:be,eventId:$,urlResponse:null,sessionId:sn(),postBody:null,tenantId:ue.tenantId,error:(0,U.aw)(ue,"no-auth-event")}}(be,ae,_e);yield function Qe(ue,be){return tn()._set(vn(ue),be)}(be,un);const Dn=yield function te(ue,be,$){return se.apply(this,arguments)}(be,un,$),Ln=yield function it(ue){const{cordova:be}=oe();return new Promise($=>{be.plugins.browsertab.isAvailable(ae=>{let _e=null;ae?be.plugins.browsertab.openUrl(ue):_e=be.InAppBrowser.open(ue,(0,U.av)()?"_blank":"_system","location=yes"),$(_e)})})}(Dn);return function ut(ue,be,$){return Et.apply(this,arguments)}(be,Tt,Ln)})()}_isIframeWebStorageSupported(be,$){throw new Error("Method not implemented.")}_originValidation(be){const $=be._key();return this.originValidationPromises[$]||(this.originValidationPromises[$]=function ke(ue){return qe.apply(this,arguments)}(be)),this.originValidationPromises[$]}attachCallbackListeners(be,$){const{universalLinks:ae,handleOpenURL:_e,BuildInfo:Ve}=oe(),Tt=setTimeout((0,g.Z)(function*(){yield Ne(be),$.onEvent(Rt())}),500),un=function(){var Ir=(0,g.Z)(function*(nr){clearTimeout(Tt);const xr=yield Ne(be);let ai=null;xr&&(null==nr?void 0:nr.url)&&(ai=function vt(ue,be){var $,ae;const _e=function Ze(ue){const be=ft(ue),$=be.link?decodeURIComponent(be.link):void 0,ae=ft($).link,_e=be.deep_link_id?decodeURIComponent(be.deep_link_id):void 0;return ft(_e).link||_e||ae||$||ue}(be);if(_e.includes("/__/auth/callback")){const Ve=ft(_e),Tt=Ve.firebaseError?function xn(ue){try{return JSON.parse(ue)}catch(be){return null}}(decodeURIComponent(Ve.firebaseError)):null,un=null===(ae=null===($=null==Tt?void 0:Tt.code)||void 0===$?void 0:$.split("auth/"))||void 0===ae?void 0:ae[1],Dn=un?(0,U.aw)(un):null;return Dn?{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,error:Dn,urlResponse:null,sessionId:null,postBody:null}:{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,sessionId:ue.sessionId,urlResponse:_e,postBody:null}}return null}(xr,nr.url)),$.onEvent(ai||Rt())});return function(xr){return Ir.apply(this,arguments)}}();void 0!==ae&&"function"==typeof ae.subscribe&&ae.subscribe(null,un);const Dn=_e,Ln=`${Ve.packageName.toLowerCase()}://`;oe().handleOpenURL=function(){var Ir=(0,g.Z)(function*(nr){if(nr.toLowerCase().startsWith(Ln)&&un({url:nr}),"function"==typeof Dn)try{Dn(nr)}catch(xr){console.error(xr)}});return function(nr){return Ir.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=U.a,this._completeRedirectFn=U.aB,this._overrideRedirectResult=U.aC}_initialize(be){var $=this;return(0,g.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._initialize(be)})()}_openPopup(be,$,ae,_e){var Ve=this;return(0,g.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openPopup(be,$,ae,_e)})()}_openRedirect(be,$,ae,_e){var Ve=this;return(0,g.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openRedirect(be,$,ae,_e)})()}_isIframeWebStorageSupported(be,$){this.assertedUnderlyingResolver._isIframeWebStorageSupported(be,$)}_originValidation(be){return this.assertedUnderlyingResolver._originValidation(be)}get _shouldInitProactively(){return Dr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var be=this;return(0,g.Z)(function*(){if(be.underlyingResolver)return;const $=yield function mn(){return Tn.apply(this,arguments)}();be.underlyingResolver=$?be.cordovaResolver:be.browserResolver})()}}function Mn(ue){return ue.unwrap()}function Bn(ue){return lr(ue)}function lr(ue){const{_tokenResponse:be}=ue instanceof re.ZR?ue.customData:ue;if(!be)return null;if(!(ue instanceof re.ZR)&&"temporaryProof"in be&&"phoneNumber"in be)return U.P.credentialFromResult(ue);const $=be.providerId;if(!$||$===U.o.PASSWORD)return null;let ae;switch($){case U.o.GOOGLE:ae=U.Q;break;case U.o.FACEBOOK:ae=U.N;break;case U.o.GITHUB:ae=U.T;break;case U.o.TWITTER:ae=U.W;break;default:const{oauthIdToken:_e,oauthAccessToken:Ve,oauthTokenSecret:Tt,pendingToken:un,nonce:Dn}=be;return Ve||Tt||_e||un?un?$.startsWith("saml.")?U.aL._create($,un):U.J._fromParams({providerId:$,signInMethod:$,pendingToken:un,idToken:_e,accessToken:Ve}):new U.U($).credential({idToken:_e,accessToken:Ve,rawNonce:Dn}):null}return ue instanceof re.ZR?ae.credentialFromError(ue):ae.credentialFromResult(ue)}function tr(ue,be){return be.catch($=>{throw $ instanceof re.ZR&&function gr(ue,be){var $;const ae=null===($=be.customData)||void 0===$?void 0:$._tokenResponse;if("auth/multi-factor-auth-required"===(null==be?void 0:be.code))be.resolver=new Ue(ue,U.an(ue,be));else if(ae){const _e=lr(be),Ve=be;_e&&(Ve.credential=_e,Ve.tenantId=ae.tenantId||void 0,Ve.email=ae.email||void 0,Ve.phoneNumber=ae.phoneNumber||void 0)}}(ue,$),$}).then($=>{const _e=$.user;return{operationType:$.operationType,credential:Bn($),additionalUserInfo:U.al($),user:It.getOrCreate(_e)}})}function pt(ue,be){return dt.apply(this,arguments)}function dt(){return(dt=(0,g.Z)(function*(ue,be){const $=yield be;return{verificationId:$.verificationId,confirm:ae=>tr(ue,$.confirm(ae))}})).apply(this,arguments)}class Ue{constructor(be,$){this.resolver=$,this.auth=function Kn(ue){return ue.wrapped()}(be)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(be){return tr(Mn(this.auth),this.resolver.resolveSignIn(be))}}class It{constructor(be){this._delegate=be,this.multiFactor=U.ao(be)}static getOrCreate(be){return It.USER_MAP.has(be)||It.USER_MAP.set(be,new It(be)),It.USER_MAP.get(be)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(be){return this._delegate.getIdTokenResult(be)}getIdToken(be){return this._delegate.getIdToken(be)}linkAndRetrieveDataWithCredential(be){return this.linkWithCredential(be)}linkWithCredential(be){var $=this;return(0,g.Z)(function*(){return tr($.auth,U.Z($._delegate,be))})()}linkWithPhoneNumber(be,$){var ae=this;return(0,g.Z)(function*(){return pt(ae.auth,U.l(ae._delegate,be,$))})()}linkWithPopup(be){var $=this;return(0,g.Z)(function*(){return tr($.auth,U.d($._delegate,be,zt))})()}linkWithRedirect(be){var $=this;return(0,g.Z)(function*(){return yield Re(U.aE($.auth)),U.g($._delegate,be,zt)})()}reauthenticateAndRetrieveDataWithCredential(be){return this.reauthenticateWithCredential(be)}reauthenticateWithCredential(be){var $=this;return(0,g.Z)(function*(){return tr($.auth,U._($._delegate,be))})()}reauthenticateWithPhoneNumber(be,$){return pt(this.auth,U.r(this._delegate,be,$))}reauthenticateWithPopup(be){return tr(this.auth,U.e(this._delegate,be,zt))}reauthenticateWithRedirect(be){var $=this;return(0,g.Z)(function*(){return yield Re(U.aE($.auth)),U.h($._delegate,be,zt)})()}sendEmailVerification(be){return U.ab(this._delegate,be)}unlink(be){var $=this;return(0,g.Z)(function*(){return yield U.ak($._delegate,be),$})()}updateEmail(be){return U.ag(this._delegate,be)}updatePassword(be){return U.ah(this._delegate,be)}updatePhoneNumber(be){return U.u(this._delegate,be)}updateProfile(be){return U.af(this._delegate,be)}verifyBeforeUpdateEmail(be,$){return U.ac(this._delegate,be,$)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}It.USER_MAP=new WeakMap;const he=U.ax;let N=(()=>{class ue{constructor($,ae){if(this.app=$,ae.isInitialized())return this._delegate=ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:_e}=$.options;he(_e,"invalid-api-key",{appName:$.name}),he(_e,"invalid-api-key",{appName:$.name});const Ve="undefined"!=typeof window?zt:void 0;this._delegate=ae.initialize({options:{persistence:q(_e,$.name),popupRedirectResolver:Ve}}),this._delegate._updateErrorMap(U.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?It.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode($){this._delegate.languageCode=$}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId($){this._delegate.tenantId=$}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator($,ae){U.G(this._delegate,$,ae)}applyActionCode($){return U.a2(this._delegate,$)}checkActionCode($){return U.a3(this._delegate,$)}confirmPasswordReset($,ae){return U.a1(this._delegate,$,ae)}createUserWithEmailAndPassword($,ae){var _e=this;return(0,g.Z)(function*(){return tr(_e._delegate,U.a5(_e._delegate,$,ae))})()}fetchProvidersForEmail($){return this.fetchSignInMethodsForEmail($)}fetchSignInMethodsForEmail($){return U.aa(this._delegate,$)}isSignInWithEmailLink($){return U.a8(this._delegate,$)}getRedirectResult(){var $=this;return(0,g.Z)(function*(){he(ur(),$._delegate,"operation-not-supported-in-this-environment");const ae=yield U.j($._delegate,zt);return ae?tr($._delegate,Promise.resolve(ae)):{credential:null,user:null}})()}addFrameworkForLogging($){!function Yt(ue,be){(0,U.aE)(ue)._logFramework(be)}(this._delegate,$)}onAuthStateChanged($,ae,_e){const{next:Ve,error:Tt,complete:un}=L($,ae,_e);return this._delegate.onAuthStateChanged(Ve,Tt,un)}onIdTokenChanged($,ae,_e){const{next:Ve,error:Tt,complete:un}=L($,ae,_e);return this._delegate.onIdTokenChanged(Ve,Tt,un)}sendSignInLinkToEmail($,ae){return U.a7(this._delegate,$,ae)}sendPasswordResetEmail($,ae){return U.a0(this._delegate,$,ae||void 0)}setPersistence($){var ae=this;return(0,g.Z)(function*(){let _e;switch(function J(ue,be){rt(Object.values(qn).includes(be),ue,"invalid-persistence-type"),(0,re.b$)()?rt(be!==qn.SESSION,ue,"unsupported-persistence-type"):(0,re.UG)()?rt(be===qn.NONE,ue,"unsupported-persistence-type"):Zn()?rt(be===qn.NONE||be===qn.LOCAL&&(0,re.hl)(),ue,"unsupported-persistence-type"):rt(be===qn.NONE||Sn(),ue,"unsupported-persistence-type")}(ae._delegate,$),$){case qn.SESSION:_e=U.a;break;case qn.LOCAL:_e=(yield U.az(U.i)._isAvailable())?U.i:U.b;break;case qn.NONE:_e=U.L;break;default:return U.as("argument-error",{appName:ae._delegate.name})}return ae._delegate.setPersistence(_e)})()}signInAndRetrieveDataWithCredential($){return this.signInWithCredential($)}signInAnonymously(){return tr(this._delegate,U.X(this._delegate))}signInWithCredential($){return tr(this._delegate,U.Y(this._delegate,$))}signInWithCustomToken($){return tr(this._delegate,U.$(this._delegate,$))}signInWithEmailAndPassword($,ae){return tr(this._delegate,U.a6(this._delegate,$,ae))}signInWithEmailLink($,ae){return tr(this._delegate,U.a9(this._delegate,$,ae))}signInWithPhoneNumber($,ae){return pt(this._delegate,U.s(this._delegate,$,ae))}signInWithPopup($){var ae=this;return(0,g.Z)(function*(){return he(ur(),ae._delegate,"operation-not-supported-in-this-environment"),tr(ae._delegate,U.c(ae._delegate,$,zt))})()}signInWithRedirect($){var ae=this;return(0,g.Z)(function*(){return he(ur(),ae._delegate,"operation-not-supported-in-this-environment"),yield Re(ae._delegate),U.f(ae._delegate,$,zt)})()}updateCurrentUser($){return this._delegate.updateCurrentUser($)}verifyPasswordResetCode($){return U.a4(this._delegate,$)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ue.Persistence=qn,ue})();function L(ue,be,$){let ae=ue;"function"!=typeof ue&&({next:ae,error:be,complete:$}=ue);const _e=ae;return{next:Tt=>_e(Tt&&It.getOrCreate(Tt)),error:be,complete:$}}function q(ue,be){const $=function yt(ue,be){const $=Ft();if(!$)return[];const ae=U.aA(Y,ue,be);switch($.getItem(ae)){case qn.NONE:return[U.L];case qn.LOCAL:return[U.i,U.a];case qn.SESSION:return[U.a];default:return[]}}(ue,be);if("undefined"!=typeof self&&!$.includes(U.i)&&$.push(U.i),"undefined"!=typeof window)for(const ae of[U.b,U.a])$.includes(ae)||$.push(ae);return $.includes(U.L)||$.push(U.L),$}class X{constructor(){this.providerId="phone",this._delegate=new U.P(Mn(S.Z.auth()))}static credential(be,$){return U.P.credential(be,$)}verifyPhoneNumber(be,$){return this._delegate.verifyPhoneNumber(be,$)}unwrap(){return this._delegate}}X.PHONE_SIGN_IN_METHOD=U.P.PHONE_SIGN_IN_METHOD,X.PROVIDER_ID=U.P.PROVIDER_ID;const Fe=U.ax;class ht{constructor(be,$,ae=S.Z.app()){var _e;Fe(null===(_e=ae.options)||void 0===_e?void 0:_e.apiKey,"invalid-api-key",{appName:ae.name}),this._delegate=new U.R(be,$,ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xe(ue){ue.INTERNAL.registerComponent(new Ce.wA("auth-compat",be=>{const $=be.getProvider("app-compat").getImmediate(),ae=be.getProvider("auth");return new N($,ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:U.A.EMAIL_SIGNIN,PASSWORD_RESET:U.A.PASSWORD_RESET,RECOVER_EMAIL:U.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:U.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:U.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:U.A.VERIFY_EMAIL}},EmailAuthProvider:U.M,FacebookAuthProvider:U.N,GithubAuthProvider:U.T,GoogleAuthProvider:U.Q,OAuthProvider:U.U,SAMLAuthProvider:U.V,PhoneAuthProvider:X,PhoneMultiFactorGenerator:U.m,RecaptchaVerifier:ht,TwitterAuthProvider:U.W,Auth:N,AuthCredential:U.H,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ue.registerVersion("@firebase/auth-compat","0.3.5")}(S.Z)},8179:(Je,Te,b)=>{b(5525)},8766:(Je,Te,b)=>{b.d(Te,{Lj:()=>ze,X3:()=>Mt});var g=b(5861);let U,re;const Ce=new WeakMap,oe=new WeakMap,ce=new WeakMap,te=new WeakMap,se=new WeakMap;let it={get(gt,vt,sn){if(gt instanceof IDBTransaction){if("done"===vt)return oe.get(gt);if("objectStoreNames"===vt)return gt.objectStoreNames||ce.get(gt);if("store"===vt)return sn.objectStoreNames[1]?void 0:sn.objectStore(sn.objectStoreNames[0])}return at(gt[vt])},set:(gt,vt,sn)=>(gt[vt]=sn,!0),has:(gt,vt)=>gt instanceof IDBTransaction&&("done"===vt||"store"===vt)||vt in gt};function et(gt){return"function"==typeof gt?function Et(gt){return gt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ie(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(gt)?function(...vt){return gt.apply(He(this),vt),at(Ce.get(this))}:function(...vt){return at(gt.apply(He(this),vt))}:function(vt,...sn){const tn=gt.call(He(this),vt,...sn);return ce.set(tn,vt.sort?vt.sort():[vt]),at(tn)}}(gt):(gt instanceof IDBTransaction&&function qe(gt){if(oe.has(gt))return;const vt=new Promise((sn,tn)=>{const vn=()=>{gt.removeEventListener("complete",xn),gt.removeEventListener("error",Ze),gt.removeEventListener("abort",Ze)},xn=()=>{sn(),vn()},Ze=()=>{tn(gt.error||new DOMException("AbortError","AbortError")),vn()};gt.addEventListener("complete",xn),gt.addEventListener("error",Ze),gt.addEventListener("abort",Ze)});oe.set(gt,vt)}(gt),((gt,vt)=>vt.some(sn=>gt instanceof sn))(gt,function de(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(gt,it):gt)}function at(gt){if(gt instanceof IDBRequest)return function ke(gt){const vt=new Promise((sn,tn)=>{const vn=()=>{gt.removeEventListener("success",xn),gt.removeEventListener("error",Ze)},xn=()=>{sn(at(gt.result)),vn()},Ze=()=>{tn(gt.error),vn()};gt.addEventListener("success",xn),gt.addEventListener("error",Ze)});return vt.then(sn=>{sn instanceof IDBCursor&&Ce.set(sn,gt)}).catch(()=>{}),se.set(vt,gt),vt}(gt);if(te.has(gt))return te.get(gt);const vt=et(gt);return vt!==gt&&(te.set(gt,vt),se.set(vt,gt)),vt}const He=gt=>se.get(gt);function Mt(gt,vt,{blocked:sn,upgrade:tn,blocking:vn,terminated:xn}={}){const Ze=indexedDB.open(gt,vt),ft=at(Ze);return tn&&Ze.addEventListener("upgradeneeded",St=>{tn(at(Ze.result),St.oldVersion,St.newVersion,at(Ze.transaction))}),sn&&Ze.addEventListener("blocked",()=>sn()),ft.then(St=>{xn&&St.addEventListener("close",()=>xn()),vn&&St.addEventListener("versionchange",()=>vn())}).catch(()=>{}),ft}function ze(gt,{blocked:vt}={}){const sn=indexedDB.deleteDatabase(gt);return vt&&sn.addEventListener("blocked",()=>vt()),at(sn).then(()=>{})}const Be=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],Qe=new Map;function Ne(gt,vt){if(!(gt instanceof IDBDatabase)||vt in gt||"string"!=typeof vt)return;if(Qe.get(vt))return Qe.get(vt);const sn=vt.replace(/FromIndex$/,""),tn=vt!==sn,vn=Ge.includes(sn);if(!(sn in(tn?IDBIndex:IDBObjectStore).prototype)||!vn&&!Be.includes(sn))return;const xn=function(){var Ze=(0,g.Z)(function*(ft,...St){const Gt=this.transaction(ft,vn?"readwrite":"readonly");let Ut=Gt.store;return tn&&(Ut=Ut.index(St.shift())),(yield Promise.all([Ut[sn](...St),vn&&Gt.done]))[0]});return function(St){return Ze.apply(this,arguments)}}();return Qe.set(vt,xn),xn}!function ut(gt){it=gt(it)}(gt=>I0(w0({},gt),{get:(vt,sn,tn)=>Ne(vt,sn)||gt.get(vt,sn,tn),has:(vt,sn)=>!!Ne(vt,sn)||gt.has(vt,sn)}))},5861:(Je,Te,b)=>{function g(U,re,de,Ie,Ce,oe,ce){try{var te=U[oe](ce),se=te.value}catch(ke){return void de(ke)}te.done?re(se):Promise.resolve(se).then(Ie,Ce)}function S(U){return function(){var re=this,de=arguments;return new Promise(function(Ie,Ce){var oe=U.apply(re,de);function ce(se){g(oe,Ie,Ce,ce,te,"next",se)}function te(se){g(oe,Ie,Ce,ce,te,"throw",se)}ce(void 0)})}}b.d(Te,{Z:()=>S})}},Je=>{Je(Je.s=1665)}]);